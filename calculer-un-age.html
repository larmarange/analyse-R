<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">



<title>Calculer un âge</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<meta name="robots" content="index, follow">
<link rel="stylesheet" href="./include/analyse-R.css" />
<script type="text/javascript" src="./libs/zeroclipboard-2.2.0/ZeroClipboard.js"></script>
<link rel="stylesheet" href="./libs/colorbox-1.6.1/colorbox.css" />
<script type="text/javascript" src="./libs/colorbox-1.6.1/jquery.colorbox-min.js"></script>
<!--- favicon --->
<link rel="apple-touch-icon" sizes="57x57" href="./images/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="./images/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="./images/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="./images/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="./images/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="./images/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="./images/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="./images/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="./images/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="./images/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="./images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="./images/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="./images/favicon/favicon-16x16.png">
<link rel="manifest" href="./images/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="./images/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<div class="container-fluid main-container">

<!-- tabsets -->
<script src="libs/navigation-1.0/tabsets.js"></script>
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->





<nav>
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href=".">analyse-R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="manipuler" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Manipuler <span class="caret"></span></a>
          <ul class="dropdown-menu multi-column columns-3" role="menu" id="menu_manipuler">
            <div class="row">
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Prise en main</li>
                  <li><a href="presentation-et-philosophie.html">Présentation et Philosophie</a></li>
                  <li><a href="installation-de-R-et-RStudio.html">Installation de R et RStudio</a></li>
                  <li><a href="premier-contact.html">Premier contact</a></li>
                  <li><a href="premier-travail-avec-les-donnees.html">Premier travail avec des données</a></li>
                  <li><a href="extensions.html">Extensions</a></li>
                  <li><a href="vecteurs-indexation-et-assignation.html">Vecteurs, indexation et assignation</a></li>
                  <li><a href="listes-et-tableaux-de-donnes.html">Listes et Tableaux de données</a></li>
                  <li><a href="facteurs-et-vecteurs-labellises.html">Facteurs et vecteurs labellisés</a></li>
                  <li><a href="organiser-ses-fichiers.html">Organiser ses fichiers</a></li>
                  <li><a href="import-de-donnees.html">Import de données</a></li>
                  <li><a href="recodage.html">Recodage</a></li>
                  <li><a href="ou-trouver-de-l-aide.html">Où trouver de l'aide ?</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Manipulation de données</li>
                  <li class="dev"><a href="introduction-a-dplyr.html">Introduction à dplyr</a></li>
                  <li class="dev"><a href="introduction-a-data-table.html">Introduction à data.table</a></li>
                  <li class="dev"><a href="doublons.html">Doublons</a></li>
                  <li class="dev"><a href="tris.html">Tris</a></li>
                  <li class="dev"><a href="sous-ensembles.html">Sous-ensembles</a></li>
                  <li class="dev"><a href="fusion-de-tables.html">Fusion de tables</a></li>
                  <li class="dev"><a href="gestion-des-dates.html">Gestion des dates</a></li>
                  <li class="dev"><a href="aggregation.html">Aggrégation</a></li>
                  <li class="dev"><a href="fonctions-a-fenetre.html">Fonctions à fenêtre</a></li>
                  <li class="dev"><a href="restructuration-de-donnees.html">Restructuration de données</a></li>
                  <li class="dev"><a href="manipuler-du-texte.html">Manipuler du texte</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
                  <li class="dropdown-header">Exporter</li>
                  <li class="dev"><a href="export-de-donnees.html">Export de données</a></li>
                  <li><a href="export-de-graphiques.html">Export de graphiques</a></li>
                  <li class="dev"><a href="export-de-tableaux.html">Export de tableaux</a></li>
  	            </ul>
              </div>
            </div>
          </ul>
        </li>
        <li class="dropdown">
          <a href="analyser" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Analyser <span class="caret"></span></a>
          <ul class="dropdown-menu multi-column columns-3" role="menu" id="menu_analyser">
            <div class="row">
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Statistiques introductives</li>
                  <li><a href="statistique-univariee.html">Statistique univariée</a></li>
                  <li><a href="statistique-bivariee.html">Statistique bivariée</a></li>
                  <li><a href="intro-ggplot2.html">Introduction à ggplot2</a></li>
                  <li><a href="graphiques-bivaries-ggplot2.html">Graphiques univariés et bivariés avec ggplot2</a></li>
                  <li><a href="donnees-ponderees.html">Données pondérées</a></li>
                  <li class="dev"><a href="graphiques-de-donnees-ponderees.html">Graphiques de données pondérées</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Statistiques intermédiaires</li>
  		            <li><a href="intervalles-de-confiance.html">Intervalles de confiance</a></li>
                  <li><a href="comparaisons-moyennes-et-proportions.html">Comparaisons (moyennes et proportions)</a></li>
                  <li><a href="definir-un-plan-d-echantillonnage-complexe.html">Définir un plan d'échantillonnage complexe</a></li>
                  <li class="dev"><a href="regression-lineaire.html">Régression linéaire</a></li>
                  <li><a href="regression-logistique.html">Régression logistique</a></li>
                  <li class="dev"><a href="analyse-en-composantes-principales.html">Analyse en composantes principales (ACP)</a></li>
                  <li><a href="analyse-des-correspondances-multiples.html">Analyse des correspondances multiples (ACM)</a></li>
                  <li><a href="classification-ascendante-hierarchique.html">Classification ascendante hiérarchique (CAH)</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
                  <li class="dropdown-header">Statistiques avancées</li>
                  <li class="dev"><a href="modeles-lineaires-a-effets-mixtes.html">Modèles linéaires à effets mixtes</a></li>
                  <li class="dev"><a href="modeles-gee.html">Modèles GEE</a></li>
                  <li class="dev"><a href="series-temporelles.html">Séries temporelles</a></li>
                  <li class="dev"><a href="modeles-a-temps-discret.html">Modèles à temps discret</a></li>
                  <li class="dev"><a href="analyse-de-survie.html">Analyse de survie</a></li>
                  <li><a href="analyse-de-sequences.html">Analyse de séquences</a></li>
                  <li class="dev"><a href="analyse-de-reseaux.html">Analyse de réseaux</a></li>
                  <li class="dev"><a href="analyse-spatiale.html">Analyse spatiale</a></li>
  	            </ul>
              </div>
            </div>
          </ul>
        </li>
        <li class="dropdown">
          <a href="approfondir" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Approfondir <span class="caret"></span></a>
          <ul class="dropdown-menu multi-column columns-3" role="menu" id="menu_approfondir">
            <div class="row">
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Graphiques</li>
                  <li class="dev"><a href="ggplot2-la-grammaire-des-graphiques.html">ggplot2 : la grammaire des graphiques</a></li>
                  <li class="dev"><a href="etendre-ggplot2.html">Étendre ggplot2</a></li>
                  <li class="dev"><a href="lattice-graphiques-et-formules.html">lattice : graphiques et formules</a></li>
                  <li class="dev"><a href="diagrammes.html">Diagrammes</a></li>
                  <li class="dev"><a href="representer-des-flux.html">Représenter des flux</a></li>
                  <li class="dev"><a href="reseaux-dynamiques.html">Réseaux dynamiques</a></li>
                  <li class="dev"><a href="ggvis-les-graphiques-interactifs.html">ggvis : les graphiques interactifs</a></li>
                  <li class="dev"><a href="htmlwidgets-la-puissance-du-javascript.html">htmlwidgets : la puissance de javascript</a></li>
                  <li class="dev"><a href="cartes.html">Cartes</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Programmation</li>
  		            <li class="dev"><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
                  <li class="dev"><a href="formules.html">Formules</a></li>
                  <li class="dev"><a href="structures-conditionnelles.html">Structures conditionnelles</a></li>
                  <li class="dev"><a href="expressions-regulieres.html">Expressions régulières</a></li>
                  <li class="dev"><a href="ecrire-ses-propres-fonctions.html">Écrire ses propres fonctions</a></li>
                  <li class="dev"><a href="rmarkdown-les-rapports-automatises.html">R Markdown : les rapports automatisés</a></li>
                  <li class="dev"><a href="shiny-les-interfaces-interactives.html">Shiny : les interfaces interactives</a></li>
                  <li class="dev"><a href="git.html">Git</a></li>
                  <li class="dev"><a href="developper-un-package.html">Développer un package</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
                  <li class="dropdown-header">Divers</li>
                  <li><a href="calculer-un-age.html">Calculer un âge</a></li>
                  <li class="dev"><a href="prevR-cartes-de-prevalence.html">prevR : cartes de prévalence à partir des EDS</a></li>
  	            </ul>
              </div>
            </div>
          </ul>
        </li>
        <li class="dropdown">
          <a href="index" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Index <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu" id="menu_naviguer">
            <li><a href="index-des-concepts.html">Index des concepts</a></li>
            <li><a href="index-des-fonctions.html">Index des fonctions</a></li>
            <li><a href="index-des-extensions.html">Index des extensions</a></li>
          </ul>
        </li>
        <li><a href="analyse-R.pdf">PDF</a></li>
      </ul>
    <form id="rechercher" class="navbar-form navbar-right" role="search" style="padding-top: 5px;" method="get" action="https://tontonroger.org/">
      <div class="form-group">
        <input name="q" type="text" class="form-control input-sm" placeholder="Rechercher">
      </div>
      <button type="submit" class="btn btn-default btn-sm" name="Rechercher">
        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
      </button>
    </form>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
</nav>

<div class="row">

<a href="https://github.com/larmarange/analyse-R"><img style="position: absolute; top: 60px; right: 0; border: 0;" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Contribuer sur GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a>

<div class="col-sm-9" role="main">
<article>

<div class="fluid-row" id="header">


<h1 class="title">Calculer un âge</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#rappel-sur-les-ages">Rappel sur les âges</a></li>
<li><a href="#le-package-lubridate">Le package lubridate</a></li>
<li><a href="#calcul-dun-age-exact">Calcul d’un âge exact</a><ul>
<li><a href="#cas-particulier-des-personnes-nees-un-29-fevrier">Cas particulier des personnes nées un 29 février</a></li>
</ul></li>
<li><a href="#age-revolu-ou-age-au-dernier-anniversaire">Âge révolu ou âge au dernier anniversaire</a></li>
<li><a href="#age-par-difference-de-millesimes">Âge par différence de millésimes</a></li>
<li><a href="#calcul-dun-age-moyen">Calcul d’un âge moyen</a></li>
<li><a href="#notes">Notes</a></li>
</ul>
</div>

<div class="note">
<p>La version originale de cette astuce a été publiée par Joseph Larmarange sur <a href="http://joseph.larmarange.net/?Calculer-proprement-un-age-sous-R" class="uri">http://joseph.larmarange.net/?Calculer-proprement-un-age-sous-R</a>.</p>
</div>
<p>Le calcul d’un <dfn>âge</dfn> sous <strong>R</strong> n’est pas forcément aussi trivial qu’il n’y parait.</p>
<div id="rappel-sur-les-ages" class="section level2">
<h2>Rappel sur les âges</h2>
<p>Il convient en premier lieu de rappeler les principaux âges utilisés les démographes :</p>
<blockquote>
<p>L’âge – on précise parfois âge chronologique – est une des caractéristiques fondamentales de la structure des populations. On l’exprime généralement en années, ou en années et mois, voire en mois et jours, pour les enfants en bas âge ; parfois en années et fractions décimales d’année. Les démographes arrondissent d’ordinaire l’âge à l’unité inférieure, l’exprimant ainsi en années révolues, ou années accomplies, le cas échéant en mois révolus, ou mois accomplis. Cet âge est aussi l’âge au dernier anniversaire. On trouve aussi, dans les statistiques, l’âge atteint dans l’année, qui est égal à la différence de millésimes entre l’année considérée et l’année de naissance. […] On est parfois conduit à préciser que l’on considère un âge exact, pour éviter toute confusion avec un âge en années révolues, qui représente en fait une classe d’âges exacts.</p>
<footer>
Source : <a href="http://fr-ii.demopaedia.org/wiki/32#322"><cite>Demopædia</cite> (322)</a>
</footer>
</blockquote>
</div>
<div id="le-package-lubridate" class="section level2">
<h2>Le package lubridate</h2>
<p>Le package <code class="pkg">lubridate</code> est spécialement développé pour faciliter la manipulation et le calcul autour des <dfn data-index="date, variable">dates</dfn>. La version de développement intègre depuis peu une fonction <code data-pkg="lubridate">time_length</code> adaptée au calcul des âges exacts.</p>
<div class="note">
<p>La fonction <code data-pkg="lubridate">time_length</code> étant récente, elle n’est pas encore disponible dans la version stable du package. Pour installer la version de développement de <code class="pkg">lubridate</code>, on aura recours au package <code class="pkg">devtools</code> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="kw">install_github</span>(<span class="st">&quot;hadley/lubridate&quot;</span>)</code></pre></div>
</div>
<p>Nous noterons <code>naiss</code> la date de naissance et <code>evt</code> la date à laquelle nous calculerons l’âge.</p>
</div>
<div id="calcul-dun-age-exact" class="section level2">
<h2>Calcul d’un âge exact</h2>
<p>On appelle <dfn>âge exact</dfn><dfn data-index="exact, âge"></dfn> l’expression d’un âge avec sa partie décimale.</p>
<p>Une approche simple consiste à calculer une différence en jours puis à diviser par 365. Or, le souci c’est que toutes les années n’ont pas le même nombre de jours. Regardons par exemple ce qui se passe si l’on calcule l’âge au 31 décembre 1999 d’une personne née le 1<sup>er</sup> janvier 1900.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lubridate)
naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1900-01-01&quot;</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1999-12-31&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;days&quot;</span>)</code></pre></div>
<pre><code>[1] 36523</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;days&quot;</span>)/<span class="dv">365</span></code></pre></div>
<pre><code>[1] 100.063</code></pre>
<p>Or, au 31 décembre 1999, cette personne n’a pas encore fêté son centième anniversaire. Le calcul précédent ne prend pas en compte les années bissextiles. Une approche plus correcte serait de considérer que les années durent en moyenne 365,25 jours.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;days&quot;</span>)/<span class="fl">365.25</span></code></pre></div>
<pre><code>[1] 99.99452</code></pre>
<p>Si cette approche semble fonctionner avec cet exemple, ce n’est plus le cas dans d’autres situations.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1903-01-01&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;days&quot;</span>)/<span class="fl">365.25</span></code></pre></div>
<pre><code>[1] 2.997947</code></pre>
<p>Or, à la date du premier janvier 1903, cette personne a bien fêté son troisième anniversaire.</p>
<p>Pour calculer proprement un âge en années (ou en mois), il est dès lors nécessaire de prendre en compte la date <dfn>anniversaire</dfn> et le fait que la durée de chaque année (ou mois) est variable. C’est justement ce que fait la fonction <code data-pkg="lubridate">time_length</code> appliquée à un objet de type <code data-pkg="lubridate" data-rdoc="Interval-class">Interval</code>. On détermine le dernier et le prochain anniversaire et l’on rajoute, à l’âge atteint au dernier anniversaire, le ratio entre le nombre de jours entre l’événement et le dernier anniversaire par le nombre de jours entre le prochain et le dernier anniversaire.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1900-01-01&quot;</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1999-12-31&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre></div>
<pre><code>[1] 99.99726</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1903-01-01&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre></div>
<pre><code>[1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1918-11-11&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre></div>
<pre><code>[1] 18.86027</code></pre>
<p>Attention, cela n’est valable que si l’on présente à la fonction <code data-pkg="lubridate">time_length</code> un objet de type <code data-pkg="lubridate" data-rdoc="Interval-class">Interval</code> (pour lequel on connait dès lors la date de début et la date de fin). Si l’on passe une durée (objet de type <code data-pkg="lubridate" data-rdoc="Duration-class">Duration</code>) à la fonction <code data-pkg="lubridate">time_length</code>, le calcul s’effectuera alors en prenant en compte la durée moyenne d’une année (plus précisément 365 jours).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1900-01-01&quot;</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1999-12-31&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre></div>
<pre><code>[1] 99.99726</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_length</span>(evt -<span class="st"> </span>naiss, <span class="st">&quot;years&quot;</span>)</code></pre></div>
<pre><code>[1] 100.063</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_length</span>(<span class="kw">as.duration</span>(<span class="kw">interval</span>(naiss, evt)), <span class="st">&quot;years&quot;</span>)</code></pre></div>
<pre><code>[1] 100.063</code></pre>
<div id="cas-particulier-des-personnes-nees-un-29-fevrier" class="section level3">
<h3>Cas particulier des personnes nées un 29 février</h3>
<p>Pour les personnes nées un 29 février, il existe un certain flou concernant leur date d’anniversaire pour les années non bissextiles. Doit-on considérer qu’il s’agit du 28 février ou du 1<sup>er</sup> mars ?</p>
<p>Au sens strict, on peut considérer que leur anniversaire a lieu entre le 28 février soir à minuit et le 1<sup>er</sup> mars à 0 heure du matin, autrement dit que le 28 février ils n’ont pas encore fêté leur anniversaire. C’est la position adoptée par la fonction <code data-pkg="lubridate">time_length</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1992-02-29&quot;</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;2014-02-28&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre></div>
<pre><code>[1] 21.99726</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;2014-03-01&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre></div>
<pre><code>[1] 22</code></pre>
<p>Cette approche permets également d’être cohérent avec la manière dont les dates sont prises en compte informatiquement. On considère en effet que lorsque seule la date est précisée (sans mention de l’heure), l’heure correspondante est <code>0:00</code>. Autrement dit, <code>&quot;2014-03-01&quot;</code> est équivalent à <code>&quot;2014-03-01 00:00:00&quot;</code>. L’approche adoptée permet donc d’être cohérent lorsque l’anniversaire est calculé en tenant compte des heures.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1992-02-29&quot;</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">&quot;2014-02-28 23:00:00&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre></div>
<pre><code>[1] 21.99989</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">&quot;2014-03-01 00:00:00&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre></div>
<pre><code>[1] 22</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">&quot;2014-03-01 01:00:00&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre></div>
<pre><code>[1] 22.00011</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">&quot;1992-02-29 12:00:00&quot;</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">&quot;2014-03-01 01:00:00&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre></div>
<pre><code>[1] 22.00011</code></pre>
</div>
</div>
<div id="age-revolu-ou-age-au-dernier-anniversaire" class="section level2">
<h2>Âge révolu ou âge au dernier anniversaire</h2>
<p>Une fois que l’on sait calculer un âge exact, le calcul d’un <dfn>âge révolu</dfn><dfn data-index="révolu, âge"></dfn> ou <dfn>âge au dernier anniversaire</dfn> est assez simple. Il suffit de ne garder que la partie entière de l’âge exact (approche conseillée).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1980-01-09&quot;</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;2015-01-01&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre></div>
<pre><code>[1] 34.97808</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">trunc</span>(<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>))</code></pre></div>
<pre><code>[1] 34</code></pre>
<p>Une autre approche consiste à convertir l’intervalle en objet de type <code data-pkg="lubridate" data-rdoc="Period-class">Period</code> et à ne prendre en compte que les années.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.period</span>(<span class="kw">interval</span>(naiss, evt))</code></pre></div>
<pre><code>[1] &quot;34y 11m 23d 0H 0M 0S&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.period</span>(<span class="kw">interval</span>(naiss, evt))@year</code></pre></div>
<pre><code>[1] 34</code></pre>
</div>
<div id="age-par-difference-de-millesimes" class="section level2">
<h2>Âge par différence de millésimes</h2>
<p>L’<dfn>âge par différence de millésimes</dfn>, encore appelé <dfn>âge atteint dans l’année</dfn>, s’obtient tout simplement en soustrayant l’année de naissance à l’année de l’événement.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1980-01-09&quot;</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;2015-01-01&quot;</span>)
<span class="kw">year</span>(evt) -<span class="st"> </span><span class="kw">year</span>(naiss)</code></pre></div>
<pre><code>[1] 35</code></pre>
</div>
<div id="calcul-dun-age-moyen" class="section level2">
<h2>Calcul d’un âge moyen</h2>
<p>Le calcul d’un <dfn>âge moyen</dfn><dfn data-index="moyenne, âge"></dfn> s’effectue normalement à partir d’âges exacts. Il arrive fréquemment que l’on ne dispose dans les données d’enquêtes que de l’âge révolu. Auquel cas, il faut bien penser à rajouter 0,5 au résultat obtenu. En effet, un âge révolu peut être vu comme une classe d’âges exacts : les individus ayant 20 ans révolus ont entre 20 et 21 ans exacts, soit en moyenne 20,5 ans !</p>
</div>
<div id="notes" class="section level2">
<h2>Notes</h2>
<p>L’ensemble des fonctions présentées peuvent être appliquées à des vecteurs et, par conséquent, aux colonnes d’un tableau de données (<em>data.frame</em>).</p>
<p>Le package <code class="pkg">eeptools</code> fournit de son côté une fonction <code data-pkg="eeptools">age_calc</code><a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> qui permet le calcul des âges exacts et révolus.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(eeptools)</code></pre></div>
<pre><code>Loading required package: ggplot2
Loading required package: MASS</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&quot;1980-01-09&quot;</span>)
evt &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&quot;2015-01-01&quot;</span>)
<span class="kw">age_calc</span>(naiss, evt, <span class="dt">units =</span> <span class="st">&quot;years&quot;</span>, <span class="dt">precise =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 34.97814</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre></div>
<pre><code>[1] 34.97808</code></pre>
<p>La méthode utilisée par <code data-pkg="eeptools">age_calc</code> donne des résultats légèrement différent de ceux de <code data-pkg="lubridate">time_length</code>. Il est donc conseillé d’utiliser de préférence le package <code class="pkg">lubridate</code>.</p>
<p>En l’absence du package <code class="pkg">lubridate</code>, il reste facile de calculer une durée en jours avec les fonctions de base de <strong>R</strong> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&quot;1900-01-01&quot;</span>)
evt &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&quot;1999-12-31&quot;</span>)
evt -<span class="st"> </span>naiss</code></pre></div>
<pre><code>Time difference of 36523 days</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.integer</span>(evt -<span class="st"> </span>naiss)</code></pre></div>
<pre><code>[1] 36523</code></pre>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p><a href="https://github.com/jknowles/eeptools/blob/master/R/age_calc.R" class="uri">https://github.com/jknowles/eeptools/blob/master/R/age_calc.R</a><a href="#fnref1">↩</a></p></li>
</ol>
</div>

</article>
</div>

<div class="col-sm-3" role="complementary">
<nav class="hidden-print hidden-xs" id="nav_sidebar">
</nav>
</div>

</div>

<script>
// manage active state of menu based on current page
$(document).ready(function () {

    // active menu
    href = window.location.pathname;
    href = href.substr(href.lastIndexOf('/') + 1);
    if (href=='') href = 'index.html';
    $('a[href="' + href + '"]').parent().addClass('active');
    $('a[href="' + href + '"]').parent().parents('li').addClass('active');

    // élargir la page d'accueil
    if (href=='index.html') $('.col-sm-9').attr('class','col-sm-12');

    // rechercher
    $("#rechercher").submit(function(event) {
      $('input[name="q"]').val($('input[name="q"]').val() + ' site:larmarange.github.io/analyse-R');
    });

    // sidebar
    $("#nav_sidebar").append($("#TOC").html());
    $("#nav_sidebar ul").addClass("nav nav-stacked");
    $("#TOC").addClass("visible-xs-block");
    $('body').scrollspy({
      target: '#nav_sidebar',
      offset: 40
    });

    // Identifier les <pre> fermant
    $('pre').next("*:not(pre)").prev().addClass('last'); // Dernier <pre> de chaque groupe contigu de <pre>
    $('pre').parent().each(function (){
      $(this).children('pre').last().addClass('last');
    }); // Si <pre> est le dernier enfant de son parent

    // Ajout liens rdocumentation et tooltip
    $("code[data-pkg]").each(function( index ) {
      pkg = $(this).attr('data-pkg');
      if ($(this).attr('data-rdoc') !== undefined) {
        rdocumentation = $(this).attr('data-rdoc');
      } else {
        rdocumentation = $(this).text();
      }
      fonction = $(this).text();
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+pkg+'/functions/'+rdocumentation+'">');
      $(this).attr('data-toggle','tooltip');
      $(this).attr('data-placement','top');
      $(this).attr('title','package : ' + pkg);
      $('[data-toggle="tooltip"]').tooltip();
    });

    $("code.pkg").each(function( index ) {
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+$(this).text()+'">');
    });

    // Figures
    $("figure").each(function( index ) {
      if ($(this).children("figcaption").length > 0)
        $(this).children("figcaption:first").prepend('<span class="figure-number">Figure '+(index+1)+'.</span> ');
      else
        $(this).append($("<figcaption>").append('<span class="figure-number">Figure '+(index+1)+'</span>'));
    });

    // Colorbox
    jQuery('article div img').colorbox({
      maxWidth: '90%',
      maxHeight: '90%',
      rel: 'figures',
      current: "",
      href: function(){
        return $(this).attr('src');
      },
      title: function(){
        return $(this).attr('alt');
      }
    });
    jQuery('article div img').css('cursor', 'pointer');
    jQuery('figure img').colorbox({
      maxWidth: '90%',
      maxHeight: '90%',
      rel: 'figures',
      current: "",
      href: function(){
        return $(this).attr('src');
      },
      title: function(){
        return $(this).parent().children("figcaption").text();
      }
    });
    jQuery('figure img').css('cursor', 'pointer');

    // ZeroClipboard
    $('pre.r').parent().each(function(){
      $(this).children('pre.r').first().before('<div class="zero-clipboard hidden-print hidden-xs"><button class="btn-clipboard">Copier</button></div>');
    }); // Il peut arriver que le pre ne soit pas précédé (cf. figures)
    $('*:not(pre):not(.zero-clipboard) + pre.r').before('<div class="zero-clipboard hidden-print hidden-xs"><button class="btn-clipboard">Copier</button></div>');
    $('pre.last').after(function() {
      if ($(this).hasClass("r")) res = $(this).text(); else res = "";
      $(this).prevUntil('*:not(pre)','pre.r').each(function() {
        res = $(this).text() + '\n' + res;
      });
      return '<div class="clipboard">' + res + '</div>';
    });
    $('.zero-clipboard').each(function(index){
      $(this).children('.btn-clipboard').attr('data-clipboard-target','clipboard_'+index);
      $(this).nextAll("div.clipboard").first().attr('id','clipboard_'+index);
    });
    var client = new ZeroClipboard( $(".btn-clipboard") );
    client.on( "ready", function( readyEvent ) {
      // alert( "ZeroClipboard SWF is ready!" );
      client.on( "aftercopy", function( event ) {
        // `this` === `client`
        // `event.target` === the element that was clicked
        //event.target.style.display = "none";
        $(event.target).parent().before('<div class="alert alert-success"><a href="#" class="close" data-dismiss="alert">&times;</a>Le code <strong>R</strong> de l’exemple a été copié dans le presse-papier.</div>');
      } );
    } );

});
</script>

<!-- disqus -->
<div class="row">
  <div id="disqus_thread" class="col-sm-9" role="complementary"></div>
</div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'analyse-r'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Veuillez activer JavaScript pour voir les <a href="http://disqus.com/?ref_noscript">les commentaires gérés avec Disqus.</a></noscript>
    <!--<a href="http://disqus.com" class="dsq-brlink">Les commentaires sont hébergés par <span class="logo-disqus">Disqus</span>.</a>-->

<footer>
  <div class="row">
    <div class="col-lg-12">
      <p>Contenus sous licence <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/fr/" rel="nofollow">Creative Commons Attribution - Pas d’utilisation commerciale - Partage dans les mêmes conditions</a>.<br />
      Propulsé par <a href="http://www.r-project.org/" rel="nofollow">R</a>, </a><a href="http://www.rstudio.com/" rel="nofollow">RStudio</a>, <a href="http://rmarkdown.rstudio.com/" rel="nofollow">R Markdown</a>, <a href="http://yihui.name/knitr/" rel="nofollow">knitr</a>, <a href="http://pandoc.org/" rel="nofollow">pandoc</a> et <a href="http://www.princexml.com/" rel="nofollow">Prince XML</a>. Hébergé par <a href="https://github.com/" rel="nofollow">GitHub</a>.</p>
    </div>
  </div>
</footer>



</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>


</body>
</html>
