<!DOCTYPE html>

<html lang="fr" xml:lang="fr">

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Formules</title>

<script src="libs/header-attrs-2.25/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/paper.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="libs/navigation-1.1/tabsets.js"></script>
<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<meta name="robots" content="index, follow">
<link rel="stylesheet" href="./include/analyse-R.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
<script type="text/javascript" src="./libs/bigfoot-2.1.4/bigfoot.min.js"></script>
<link rel="stylesheet" href="./libs/bigfoot-2.1.4/bigfoot-number.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<link rel="stylesheet" href="./libs/colorbox-1.6.1/colorbox.css" />
<script type="text/javascript" src="./libs/colorbox-1.6.1/jquery.colorbox-min.js"></script>
<!--- favicon --->
<link rel="apple-touch-icon" sizes="57x57" href="./images/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="./images/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="./images/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="./images/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="./images/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="./images/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="./images/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="./images/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="./images/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="./images/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="./images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="./images/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="./images/favicon/favicon-16x16.png">
<link rel="manifest" href="./images/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="./images/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-86STMQ5JPT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-86STMQ5JPT');
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
      .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">



<nav>
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href=".">analyse-R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="manipuler" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Manipuler <span class="caret"></span></a>
          <ul class="dropdown-menu multi-column columns-3" role="menu" id="menu_manipuler">
            <div class="row">
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Prise en main</li>
                  <li><a href="presentation-et-philosophie.html">Présentation et Philosophie</a></li>
                  <li><a href="installation-de-R-et-RStudio.html">Installation de <strong>R</strong> et <strong>RStudio</strong></a></li>
                  <li><a href="premier-contact.html">Premier contact</a></li>
                  <li><a href="premier-travail-avec-les-donnees.html">Premier travail avec des données</a></li>
                  <li><a href="extensions.html">Extensions (installation, mise à jour)</a></li>
                  <li><a href="introduction-au-tidyverse.html">Introduction au <strong>tidyverse</strong></a></li>
                  <li><a href="vecteurs-indexation-et-assignation.html">Vecteurs, indexation et assignation</a></li>
                  <li><a href="listes-et-tableaux-de-donnees.html">Listes et Tableaux de données</a></li>
                  <li><a href="facteurs-et-vecteurs-labellises.html">Facteurs et vecteurs labellisés</a></li>
                  <li><a href="organiser-ses-fichiers.html">Organiser ses fichiers</a></li>
                  <li><a href="import-de-donnees.html">Import de données</a></li>
                  <li><a href="ou-trouver-de-l-aide.html">Où trouver de l'aide ?</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Manipulation de données</li>
  		            <li><a href="visualiser-ses-donnees.html">Visualiser ses données</a></li>
  		            <li><a href="recodage.html">Recodage de variables</a></li>
                  <li><a href="manipuler-les-donnees-avec-dplyr.html">Manipuler les données avec <strong>dplyr</strong></a></li>
                  <li><a href="manipulations-avancees-avec-data-table.html">Manipulations avancées avec <strong>data.table</strong></a></li>
                  <li><a href="tris.html">Tris</a></li>
                  <li><a href="sous-ensembles.html">Sous-ensembles</a></li>
                  <li><a href="fusion-de-tables.html">Fusion de tables</a></li>
                  <li><a href="gestion-des-dates.html">Gestion des dates</a></li>
                  <li><a href="fonctions-a-fenetre.html">Fonctions à fenêtre</a></li>
                  <li><a href="manipuler-du-texte.html">Manipuler du texte avec <strong>stringr</strong></a></li>
                  <li><a href="reorganiser-ses-donnees-avec-tidyr.html">Réorganiser ses données avec <strong>tidyr</strong></a></li>
                  <!--<li><a href="scraping.html.old">Scraping</a></li>-->
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
                  <li class="dropdown-header">Exporter</li>
                  <li><a href="export-de-donnees.html">Export de données</a></li>
                  <li><a href="export-de-graphiques.html">Export de graphiques</a></li>
  	            </ul>
              </div>
            </div>
          </ul>
        </li>
        <li class="dropdown">
          <a href="analyser" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Analyser <span class="caret"></span></a>
          <ul class="dropdown-menu multi-column columns-3" role="menu" id="menu_analyser">
            <div class="row">
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Statistiques introductives</li>
                  <li><a href="statistique-univariee.html">Statistique univariée</a></li>
                  <li><a href="statistique-bivariee.html">Statistique bivariée</a></li>
                  <li><a href="intro-ggplot2.html">Introduction à <strong>ggplot2</strong>, la grammaire des graphiques</a></li>
                  <li><a href="graphiques-bivaries-ggplot2.html">Graphiques univariés et bivariés avec <strong>ggplot2</strong></a></li>
                  <li><a href="donnees-ponderees.html">Données pondérées</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Statistiques intermédiaires</li>
  		            <li><a href="intervalles-de-confiance.html">Intervalles de confiance</a></li>
                  <li><a href="comparaisons-moyennes-et-proportions.html">Comparaisons (moyennes et proportions)</a></li>
                  <li><a href="definir-un-plan-d-echantillonnage-complexe.html">Définir un plan d'échantillonnage complexe avec <strong>survey</strong></a></li>
                  <li><a href="regression-lineaire.html">Régression linéaire</a></li>
                  <li><a href="regression-logistique.html">Régression logistique binaire, multinomiale et ordinale</a></li>
                  <li><a href="analyse-des-correspondances-multiples.html">Analyse des correspondances multiples (ACM)</a></li>
                  <li><a href="classification-ascendante-hierarchique.html">Classification ascendante hiérarchique (CAH)</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
                  <li class="dropdown-header">Statistiques avancées</li>
                  <li><a href="gtsummary.html">Tableaux statistiques avancés avec <strong>gtsummary</strong></a></li>
                  <li><a href="effets-d-interaction.html">Effets d'interaction dans un modèle</a></li>
                  <li><a href="multicolinearite.html">Multicolinéarité dans la régression</a></li>
                  <li><a href="modeles.html">Quel type de modèles choisir ?</a></li>
                  <li><a href="analyse-de-survie.html">Analyse de survie</a></li>
                  <li><a href="analyse-de-sequences.html">Analyse de séquences</a></li>
                  <!--<li><a href="modeles-a-effets-aleatoires.html">Modèles à effets aléatoires (modèles mixtes et GEE)</a></li>-->
                  <li><a href="trajectoires-de-soins.html">Trajectoires de soins&nbsp;: un exemple de données longitudinales</a></li>
                  <li><a href="analyse-de-reseaux.html">Analyse de réseaux</a></li>
                  <li><a href="analyse-spatiale.html">Analyse spatiale</a></li>
                  <li><a href="analyse-textuelle.html">Analyse textuelle</a></li>
  	            </ul>
              </div>
            </div>
          </ul>
        </li>
        <li class="dropdown">
          <a href="approfondir" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Approfondir <span class="caret"></span></a>
          <ul class="dropdown-menu multi-column columns-3" role="menu" id="menu_approfondir">
            <div class="row">
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Graphiques</li>
                  <li><a href="ggplot2.html"><strong>ggplot2</strong> et la grammaire des graphiques</a></li>
                  <li><a href="etendre-ggplot2.html">Étendre <strong>ggplot2</strong></a></li>
                  <li><a href="combiner-plusieurs-graphiques.html">Combiner plusieurs graphiques</a></li>
                  <li><a href="exemples-graphiques-avances.html">Exemples de graphiques avancés</a></li>
                  <li><a href="graphiques-interactifs.html">Graphiques interactifs</a></li>
                  <li><a href="lattice-graphiques-et-formules.html"><strong>lattice</strong> : graphiques et formules</a></li>
                  <li><a href="cartes.html">Cartes</a></li>
                  <li><a href="autres-extensions-graphiques.html">Autres extensions graphiques</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Programmation</li>
  		            <li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
                  <li><a href="formules.html">Formules</a></li>
                  <li><a href="structures-conditionnelles.html">Structures conditionnelles</a></li>
                  <li><a href="vectorisation.html">Vectorisation (dont <strong>purrr</strong>)</a></li>
                  <li><a href="expressions-regulieres.html">Expressions régulières</a></li>
                  <!--<li class="dev"><a href="ecrire-ses-propres-fonctions.html">Écrire ses propres fonctions</a></li>-->
                  <li><a href="rmarkdown-les-rapports-automatises.html"><strong>R Markdown</strong> : les rapports automatisés</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
                  <li class="dropdown-header">Divers</li>
                  <li><a href="formater-nombres.html">Mettre en forme des nombres avec <strong>scales</strong></a></li>
                  <li><a href="couleurs.html">Couleurs et Palettes</a></li>
                  <li><a href="annotations-mathematiques.html">Annotations mathématiques</a></li>
                  <li><a href="calculer-un-age.html">Calculer un âge</a></li>
                  <li><a href="diagramme-de-lexis.html">Diagramme de Lexis</a></li>
  	            </ul>
              </div>
            </div>
          </ul>
        </li>
        <li class="dropdown">
          <a href="index" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Index <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu" id="menu_naviguer">
            <li><a href="index-des-concepts.html">Index des concepts</a></li>
            <li><a href="index-des-fonctions.html">Index des fonctions</a></li>
            <li><a href="index-des-extensions.html">Index des extensions</a></li>
          </ul>
        </li>
        <li><a href="analyse-R.pdf">PDF</a></li>
        <li><a href="https://larmarange.github.io/guide-R/">guide-R</a></li>
        <li><a href="https://larmarange.github.io/webin-R/">webin-R</a></li>
        <li><a href="https://www.youtube.com/c/webinR"><i class="fa fa-youtube" aria-hidden="true"></i></a></li>
        <!--<li><a href="https://github.com/larmarange/analyse-R">GitHub</a></li>-->
      </ul>
    <form id="rechercher" class="navbar-form navbar-right" role="search" style="padding-top: 5px;" method="get" action="https://duckduckgo.com/">
      <div class="form-group">
        <input name="q" type="text" class="form-control input-sm" placeholder="Rechercher">
      </div>
      <button type="submit" class="btn btn-default btn-sm" name="Rechercher">
        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
      </button>
    </form>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
</nav>

<div class="row">

<div class="visible-lg">
<a href="https://github.com/larmarange/analyse-R"><img style="position: absolute; top: 60px; left: 40px; border: 0;" src="images/fork_me.png" alt="Contribuer sur GitHub"></a>
</div>

<div class="col-sm-9" role="main">
<article>

<div id="header">



<h1 class="title toc-ignore">Formules</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#statistiques-descriptives" id="toc-statistiques-descriptives">Statistiques descriptives</a>
<ul>
<li><a href="#tableaux-croisés-avec-xtabs" id="toc-tableaux-croisés-avec-xtabs">Tableaux croisés avec xtabs</a></li>
<li><a href="#statistiques-bivariées-avec-aggregate" id="toc-statistiques-bivariées-avec-aggregate">Statistiques bivariées avec aggregate</a></li>
</ul></li>
<li><a href="#panels-graphiques-avec-lattice" id="toc-panels-graphiques-avec-lattice">Panels graphiques avec lattice</a>
<ul>
<li><a href="#visualisation-bivariée" id="toc-visualisation-bivariée">Visualisation bivariée</a></li>
<li><a href="#visualisation-par-petits-multiples" id="toc-visualisation-par-petits-multiples">Visualisation par <q>petits multiples</q></a></li>
</ul></li>
<li><a href="#spécifier-des-modèles" id="toc-spécifier-des-modèles">Spécifier des modèles</a>
<ul>
<li><a href="#les-formules-r" id="toc-les-formules-r">Les formules R</a></li>
</ul></li>
<li><a href="#pour-aller-plus-loin" id="toc-pour-aller-plus-loin">Pour aller plus loin</a></li>
</ul>
</div>

<p>Ce chapitre vise à illustrer l’utilisation de la <dfn>notation <q>formule</q></dfn> de <strong>R</strong>, qui désigne l’emploi de cette notation par l’expression <code data-pkg="stats">formula</code>. Cette notation est utilisée par de très nombreuses fonctions de <strong>R</strong> : on en a notamment vu plusieurs exemples dans le <a href="graphiques-bivaries.html">chapitre sur les graphiques bivariés</a>, car l’extension <code class="pkg">ggplot2</code> se sert de cette notation dans ses paramètres <code data-pkg="ggplot2">facet_wrap</code> et <code data-pkg="ggplot2">facet_grid</code>.</p>
<p>Dans ce chapitre, on verra comment se servir de la notation <q>formule</q> dans deux contextes différents. D’une part, on verra que deux fonctions basiques de <strong>R</strong> se servent de cette notation pour produire des tableaux croisés et des statistiques bivariées. D’autre part, on verra que l’extension <code class="pkg">lattice</code> se sert de cette notation pour créer des graphiques <q>panelisés</q>, dits graphiques à <q>petits multiples</q>.</p>
<p>Dans plusieurs autres chapitres, les opérations décrites ci-dessus sont effectuées avec les extensions <code class="pkg">dplyr</code> d’une part, et <code class="pkg">ggplot2</code> d’autre part. On se servira également de ces extensions dans ce chapitre, de manière à mener une comparaison des différentes manières d’effectuer certaines opérations dans <strong>R</strong>, avec ou sans la notation <q>formule</q> :</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
<div id="statistiques-descriptives" class="section level2 hasAnchor">
<h2 class="hasAnchor">Statistiques descriptives<a href="#statistiques-descriptives" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Les premiers exemples de ce chapitre montrent l’utilisation de cette notation pour produire des tableaux croisés et des statistiques descriptives. Le jeu de données utilisé, <code data-pkg="questionr">hdv2003</code>, a déjà été utilisé dans plusieurs chapitres, et font partie de l’extension <code class="pkg">questionr</code>. Chargeons cette extension et le jeu de données <code data-pkg="questionr">hdv2003</code> :</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">library</span>(questionr)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">data</span>(hdv2003)</span></code></pre></div>
<p>Pour rappel, ce jeu de données contient des individus, leur âge, leur statut professionnel, et le nombre d’heures quotidiennes passées à regarder la télévision.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">glimpse</span>(hdv2003, <span class="dv">75</span>)</span></code></pre></div>
<pre><code>Rows: 2,000
Columns: 20
$ id            &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, …
$ age           &lt;int&gt; 28, 23, 59, 34, 71, 35, 60, 47, 20, 28, 65, 47, 63,…
$ sexe          &lt;fct&gt; Femme, Femme, Homme, Homme, Femme, Femme, Femme, Ho…
$ nivetud       &lt;fct&gt; &quot;Enseignement superieur y compris technique superie…
$ poids         &lt;dbl&gt; 2634.3982, 9738.3958, 3994.1025, 5731.6615, 4329.09…
$ occup         &lt;fct&gt; &quot;Exerce une profession&quot;, &quot;Etudiant, eleve&quot;, &quot;Exerce…
$ qualif        &lt;fct&gt; Employe, NA, Technicien, Technicien, Employe, Emplo…
$ freres.soeurs &lt;int&gt; 8, 2, 2, 1, 0, 5, 1, 5, 4, 2, 3, 4, 1, 5, 2, 3, 4, …
$ clso          &lt;fct&gt; Oui, Oui, Non, Non, Oui, Non, Oui, Non, Oui, Non, O…
$ relig         &lt;fct&gt; Ni croyance ni appartenance, Ni croyance ni apparte…
$ trav.imp      &lt;fct&gt; Peu important, NA, Aussi important que le reste, Mo…
$ trav.satisf   &lt;fct&gt; Insatisfaction, NA, Equilibre, Satisfaction, NA, Eq…
$ hard.rock     &lt;fct&gt; Non, Non, Non, Non, Non, Non, Non, Non, Non, Non, N…
$ lecture.bd    &lt;fct&gt; Non, Non, Non, Non, Non, Non, Non, Non, Non, Non, N…
$ peche.chasse  &lt;fct&gt; Non, Non, Non, Non, Non, Non, Oui, Oui, Non, Non, N…
$ cuisine       &lt;fct&gt; Oui, Non, Non, Oui, Non, Non, Oui, Oui, Non, Non, O…
$ bricol        &lt;fct&gt; Non, Non, Non, Oui, Non, Non, Non, Oui, Non, Non, O…
$ cinema        &lt;fct&gt; Non, Oui, Non, Oui, Non, Oui, Non, Non, Oui, Oui, O…
$ sport         &lt;fct&gt; Non, Oui, Oui, Oui, Non, Oui, Non, Non, Non, Oui, N…
$ heures.tv     &lt;dbl&gt; 0.0, 1.0, 0.0, 2.0, 3.0, 2.0, 2.9, 1.0, 2.0, 2.0, 1…</code></pre>
<div id="tableaux-croisés-avec-xtabs" class="section level3 hasAnchor">
<h3 class="hasAnchor">Tableaux croisés avec xtabs<a href="#tableaux-croisés-avec-xtabs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Utilisons, pour ce premier exemple, la variable <var>occup</var> du jeu de données <code data-pkg="questionr">hdv2003</code>, qui correspond au statut professionnel des individus inclus dans l’échantillon. La fonction de base pour compter les individus par statut est la fonction <code data-pkg="base">table</code> :</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">table</span>(hdv2003<span class="sc">$</span>occup)</span></code></pre></div>
<pre><code>
Exerce une profession               Chomeur 
                 1049                   134 
      Etudiant, eleve              Retraite 
                   94                   392 
  Retire des affaires              Au foyer 
                   77                   171 
        Autre inactif 
                   83 </code></pre>
<p>Avec la fonction <code data-pkg="stats">xtabs</code>, le même résultat est produit à partir de la notation suivante :</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span>occup, <span class="at">data =</span> hdv2003)</span></code></pre></div>
<pre><code>occup
Exerce une profession               Chomeur 
                 1049                   134 
      Etudiant, eleve              Retraite 
                   94                   392 
  Retire des affaires              Au foyer 
                   77                   171 
        Autre inactif 
                   83 </code></pre>
<p>Le premier argument est une formule, au sens où <strong>R</strong> entend cette expression. Le second argument, <code>data</code>, correspond au jeu de données auquel la formule doit être appliquée. On pourra se passer d’écrire explicitement cet argument dans les exemples suivants.</p>
<p>L’avantage de la fonction <code data-pkg="stats">xtabs</code> n’est pas évident dans ce premier exemple. En réalité, cette fonction devient utile lorsque l’on souhaite construire un ou plusieurs tableau(x) croisé(s). Par exemple, pour croiser la variable <var>occup</var> avec la variable <var>sexe</var>, une solution constiste à écrire :</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">with</span>(hdv2003, <span class="fu">table</span>(occup, sexe))</span></code></pre></div>
<pre><code>                       sexe
occup                   Homme Femme
  Exerce une profession   520   529
  Chomeur                  54    80
  Etudiant, eleve          48    46
  Retraite                208   184
  Retire des affaires      39    38
  Au foyer                  0   171
  Autre inactif            30    53</code></pre>
<p>Ou alors, ce qui revient au même :</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">table</span>(hdv2003<span class="sc">$</span>occup, hdv2003<span class="sc">$</span>sexe)</span></code></pre></div>
<p>Avec <code data-pkg="stats">xtabs</code>, la même opération s’écrit de la manière suivante :</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span> occup <span class="sc">+</span> sexe, hdv2003)</span></code></pre></div>
<pre><code>                       sexe
occup                   Homme Femme
  Exerce une profession   520   529
  Chomeur                  54    80
  Etudiant, eleve          48    46
  Retraite                208   184
  Retire des affaires      39    38
  Au foyer                  0   171
  Autre inactif            30    53</code></pre>
<p>Cette écriture est plus courte que le code équivalent dans <code class="pkg">dplyr</code> :</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>hdv2003 <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>  <span class="fu">group_by</span>(occup) <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>    <span class="at">Homme =</span> <span class="fu">sum</span>(sexe <span class="sc">==</span> <span class="st">&quot;Homme&quot;</span>),</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>    <span class="at">Femme =</span> <span class="fu">sum</span>(sexe <span class="sc">==</span> <span class="st">&quot;Femme&quot;</span>)</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>  )</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["occup"],"name":[1],"type":["fct"],"align":["left"]},{"label":["Homme"],"name":[2],"type":["int"],"align":["right"]},{"label":["Femme"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"Exerce une profession","2":"520","3":"529"},{"1":"Chomeur","2":"54","3":"80"},{"1":"Etudiant, eleve","2":"48","3":"46"},{"1":"Retraite","2":"208","3":"184"},{"1":"Retire des affaires","2":"39","3":"38"},{"1":"Au foyer","2":"0","3":"171"},{"1":"Autre inactif","2":"30","3":"53"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Par contre, on pourra éventuellement utiliser <code data-pkg="dplyr">count</code> de <code class="pkg">dplyr</code>. ATTENTION : le format du résultat ne sera pas le même.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>hdv2003 <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>  <span class="fu">group_by</span>(occup) <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(sexe)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["occup"],"name":[1],"type":["fct"],"align":["left"]},{"label":["sexe"],"name":[2],"type":["fct"],"align":["left"]},{"label":["n"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"Exerce une profession","2":"Homme","3":"520"},{"1":"Exerce une profession","2":"Femme","3":"529"},{"1":"Chomeur","2":"Homme","3":"54"},{"1":"Chomeur","2":"Femme","3":"80"},{"1":"Etudiant, eleve","2":"Homme","3":"48"},{"1":"Etudiant, eleve","2":"Femme","3":"46"},{"1":"Retraite","2":"Homme","3":"208"},{"1":"Retraite","2":"Femme","3":"184"},{"1":"Retire des affaires","2":"Homme","3":"39"},{"1":"Retire des affaires","2":"Femme","3":"38"},{"1":"Au foyer","2":"Femme","3":"171"},{"1":"Autre inactif","2":"Homme","3":"30"},{"1":"Autre inactif","2":"Femme","3":"53"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Pour un tableau croisé joliment mis en forme, on pourra avoir recours à <code data-pkg="gtsummary">tbl_cross</code> de <code class="pkg">gtsummary</code>.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">library</span>(gtsummary)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>hdv2003 <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>  <span class="fu">tbl_cross</span>(<span class="at">row =</span> <span class="st">&quot;occup&quot;</span>, <span class="at">col =</span> <span class="st">&quot;sexe&quot;</span>, <span class="at">percent =</span> <span class="st">&quot;row&quot;</span>)</span></code></pre></div>
<div id="jwfpsyznlw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#jwfpsyznlw .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#jwfpsyznlw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jwfpsyznlw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#jwfpsyznlw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#jwfpsyznlw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#jwfpsyznlw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jwfpsyznlw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jwfpsyznlw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#jwfpsyznlw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#jwfpsyznlw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#jwfpsyznlw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#jwfpsyznlw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#jwfpsyznlw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#jwfpsyznlw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#jwfpsyznlw .gt_from_md > :first-child {
  margin-top: 0;
}

#jwfpsyznlw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#jwfpsyznlw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#jwfpsyznlw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#jwfpsyznlw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#jwfpsyznlw .gt_row_group_first td {
  border-top-width: 2px;
}

#jwfpsyznlw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#jwfpsyznlw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#jwfpsyznlw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#jwfpsyznlw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jwfpsyznlw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#jwfpsyznlw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#jwfpsyznlw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#jwfpsyznlw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jwfpsyznlw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jwfpsyznlw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#jwfpsyznlw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jwfpsyznlw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#jwfpsyznlw .gt_left {
  text-align: left;
}

#jwfpsyznlw .gt_center {
  text-align: center;
}

#jwfpsyznlw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#jwfpsyznlw .gt_font_normal {
  font-weight: normal;
}

#jwfpsyznlw .gt_font_bold {
  font-weight: bold;
}

#jwfpsyznlw .gt_font_italic {
  font-style: italic;
}

#jwfpsyznlw .gt_super {
  font-size: 65%;
}

#jwfpsyznlw .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#jwfpsyznlw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#jwfpsyznlw .gt_indent_1 {
  text-indent: 5px;
}

#jwfpsyznlw .gt_indent_2 {
  text-indent: 10px;
}

#jwfpsyznlw .gt_indent_3 {
  text-indent: 15px;
}

#jwfpsyznlw .gt_indent_4 {
  text-indent: 20px;
}

#jwfpsyznlw .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id=""></th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="sexe">
        <span class="gt_column_spanner">sexe</span>
      </th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" scope="col" id="Total">Total</th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Homme">Homme</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Femme">Femme</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">occup</td>
<td headers="stat_1" class="gt_row gt_center"></td>
<td headers="stat_2" class="gt_row gt_center"></td>
<td headers="stat_0" class="gt_row gt_center"></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Exerce une profession</td>
<td headers="stat_1" class="gt_row gt_center">520 (50%)</td>
<td headers="stat_2" class="gt_row gt_center">529 (50%)</td>
<td headers="stat_0" class="gt_row gt_center">1 049 (100%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Chomeur</td>
<td headers="stat_1" class="gt_row gt_center">54 (40%)</td>
<td headers="stat_2" class="gt_row gt_center">80 (60%)</td>
<td headers="stat_0" class="gt_row gt_center">134 (100%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Etudiant, eleve</td>
<td headers="stat_1" class="gt_row gt_center">48 (51%)</td>
<td headers="stat_2" class="gt_row gt_center">46 (49%)</td>
<td headers="stat_0" class="gt_row gt_center">94 (100%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Retraite</td>
<td headers="stat_1" class="gt_row gt_center">208 (53%)</td>
<td headers="stat_2" class="gt_row gt_center">184 (47%)</td>
<td headers="stat_0" class="gt_row gt_center">392 (100%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Retire des affaires</td>
<td headers="stat_1" class="gt_row gt_center">39 (51%)</td>
<td headers="stat_2" class="gt_row gt_center">38 (49%)</td>
<td headers="stat_0" class="gt_row gt_center">77 (100%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Au foyer</td>
<td headers="stat_1" class="gt_row gt_center">0 (0%)</td>
<td headers="stat_2" class="gt_row gt_center">171 (100%)</td>
<td headers="stat_0" class="gt_row gt_center">171 (100%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Autre inactif</td>
<td headers="stat_1" class="gt_row gt_center">30 (36%)</td>
<td headers="stat_2" class="gt_row gt_center">53 (64%)</td>
<td headers="stat_0" class="gt_row gt_center">83 (100%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">Total</td>
<td headers="stat_1" class="gt_row gt_center">899 (45%)</td>
<td headers="stat_2" class="gt_row gt_center">1 101 (55%)</td>
<td headers="stat_0" class="gt_row gt_center">2 000 (100%)</td></tr>
  </tbody>
  
  
</table>
</div>
<p>De plus, <code data-pkg="stats">xtabs</code> permet de créer plusieurs tableaux croisés en une seule formule :</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span> occup <span class="sc">+</span> sexe <span class="sc">+</span> trav.imp, hdv2003)</span></code></pre></div>
<pre><code>, , trav.imp = Le plus important

                       sexe
occup                   Homme Femme
  Exerce une profession    13    16
  Chomeur                   0     0
  Etudiant, eleve           0     0
  Retraite                  0     0
  Retire des affaires       0     0
  Au foyer                  0     0
  Autre inactif             0     0

, , trav.imp = Aussi important que le reste

                       sexe
occup                   Homme Femme
  Exerce une profession   159   100
  Chomeur                   0     0
  Etudiant, eleve           0     0
  Retraite                  0     0
  Retire des affaires       0     0
  Au foyer                  0     0
  Autre inactif             0     0

, , trav.imp = Moins important que le reste

                       sexe
occup                   Homme Femme
  Exerce une profession   328   380
  Chomeur                   0     0
  Etudiant, eleve           0     0
  Retraite                  0     0
  Retire des affaires       0     0
  Au foyer                  0     0
  Autre inactif             0     0

, , trav.imp = Peu important

                       sexe
occup                   Homme Femme
  Exerce une profession    20    32
  Chomeur                   0     0
  Etudiant, eleve           0     0
  Retraite                  0     0
  Retire des affaires       0     0
  Au foyer                  0     0
  Autre inactif             0     0</code></pre>
<p>Cet exemple permet simplement de réaliser que la variable <var>trav.imp</var>, qui contient les réponses à une question portant sur l’importance du travail, n’a été mesurée (c’est-à-dire que la question n’a été posée) qu’aux seuls individus actifs de l’échantillon.</p>
</div>
<div id="statistiques-bivariées-avec-aggregate" class="section level3 hasAnchor">
<h3 class="hasAnchor">Statistiques bivariées avec aggregate<a href="#statistiques-bivariées-avec-aggregate" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="fu">aggregate</span>(heures.tv <span class="sc">~</span> sexe, mean, <span class="at">data =</span> hdv2003)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["sexe"],"name":[1],"type":["fct"],"align":["left"]},{"label":["heures.tv"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"Homme","2":"2.219330"},{"1":"Femme","2":"2.268727"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Ici, le premier argument est à nouveau une formule. Le second argument correspond à la statistique descriptive que l’on souhaite obtenir, et le dernier argument indique le jeu de données auquel appliquer les deux autres arguments. On peut d’ailleurs obtenir le même résultat en respectant de manière plus stricte l’ordre des arguments dans la syntaxe de la fonction <code data-pkg="stats">aggregate</code> :</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">aggregate</span>(heures.tv <span class="sc">~</span> sexe, hdv2003, mean)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["sexe"],"name":[1],"type":["fct"],"align":["left"]},{"label":["heures.tv"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"Homme","2":"2.219330"},{"1":"Femme","2":"2.268727"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Cette écriture est, à nouveau, plus compacte que le code équivalent dans <code class="pkg">dplyr</code>, qui demande de spécifier le retrait des valeurs manquantes :</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>hdv2003 %<span class="sc">&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>  <span class="fu">group_by</span>(sexe) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">heures.tv =</span> <span class="fu">mean</span>(heures.tv, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<p>À nouveau, on va pouvoir combiner plusieurs variables dans la formule que l’on passe à <code data-pkg="stats">aggregate</code>, ce qui va permettre d’obtenir la moyenne des heures de télévision quotidiennes par sexe et par statut professionnel :</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="fu">aggregate</span>(heures.tv <span class="sc">~</span> sexe <span class="sc">+</span> occup, hdv2003, mean)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["sexe"],"name":[1],"type":["fct"],"align":["left"]},{"label":["occup"],"name":[2],"type":["fct"],"align":["left"]},{"label":["heures.tv"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Homme","2":"Exerce une profession","3":"1.920463"},{"1":"Femme","2":"Exerce une profession","3":"1.724953"},{"1":"Homme","2":"Chomeur","3":"2.853846"},{"1":"Femme","2":"Chomeur","3":"2.888608"},{"1":"Homme","2":"Etudiant, eleve","3":"1.400000"},{"1":"Femme","2":"Etudiant, eleve","3":"1.256522"},{"1":"Homme","2":"Retraite","3":"2.826442"},{"1":"Femme","2":"Retraite","3":"2.877174"},{"1":"Homme","2":"Retire des affaires","3":"2.410256"},{"1":"Femme","2":"Retire des affaires","3":"2.844737"},{"1":"Femme","2":"Au foyer","3":"2.822222"},{"1":"Homme","2":"Autre inactif","3":"3.133333"},{"1":"Femme","2":"Autre inactif","3":"3.339623"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>La même opération <code class="pkg">dplyr</code> :</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>hdv2003 <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>  <span class="fu">group_by</span>(occup, sexe) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">heures.tv =</span> <span class="fu">mean</span>(heures.tv, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<p>La fonction <code data-pkg="stats">aggregate</code> permet bien sûr d’utiliser une autre fonction que la moyenne, comme dans cet exemple, suivi de son équivalent avec <code class="pkg">dplyr</code> :</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="co"># âge médian par sexe et statut professionnel</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="fu">aggregate</span>(age <span class="sc">~</span> sexe <span class="sc">+</span> occup, hdv2003, median)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["sexe"],"name":[1],"type":["fct"],"align":["left"]},{"label":["occup"],"name":[2],"type":["fct"],"align":["left"]},{"label":["age"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Homme","2":"Exerce une profession","3":"42.0"},{"1":"Femme","2":"Exerce une profession","3":"41.0"},{"1":"Homme","2":"Chomeur","3":"35.5"},{"1":"Femme","2":"Chomeur","3":"40.0"},{"1":"Homme","2":"Etudiant, eleve","3":"20.0"},{"1":"Femme","2":"Etudiant, eleve","3":"20.5"},{"1":"Homme","2":"Retraite","3":"68.0"},{"1":"Femme","2":"Retraite","3":"69.0"},{"1":"Homme","2":"Retire des affaires","3":"70.0"},{"1":"Femme","2":"Retire des affaires","3":"74.0"},{"1":"Femme","2":"Au foyer","3":"51.0"},{"1":"Homme","2":"Autre inactif","3":"56.0"},{"1":"Femme","2":"Autre inactif","3":"58.0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co"># code équivalent avec l&#39;extension &#39;dplyr&#39;</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>hdv2003 <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a>  <span class="fu">group_by</span>(occup, sexe) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">age =</span> <span class="fu">median</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<p>Si, comme dans le cas de <code data-pkg="dplyr">summarise</code>, on souhaite passer des arguments supplémentaires à la fonction <code data-pkg="stats">median</code>, il suffit de les lister à la suite du nom de la fonction. Par exemple, on écrirait : <code>aggregate(age ~ sexe + occup, hdv2003, median, na.rm = TRUE)</code>. Ceci étant, <code data-pkg="stats">aggregate</code> utilise par défaut l’option <code>na.action = na.omit</code>, donc il est bon de se rappeler que l’on peut désactiver cette option en utilisant l’option <code>na.action = na.pass</code>, ce qui permet éventuellement de conserver des lignes vides dans le tableau de résultat.</p>
<p>La fonction <code data-pkg="stats">aggregate</code> permet, par ailleurs, d’obtenir des résultats à plusieurs colonnes. Dans l’exemple ci-dessus, on illustre ce principe avec la fonction <code data-pkg="stats">range</code>, qui renvoie deux résultats (la valeur minimale et la valeur maximale de la variable, qui est toujours la variable <var>age</var>), chacun présentés dans une colonne :</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="fu">aggregate</span>(age <span class="sc">~</span> sexe <span class="sc">+</span> occup, hdv2003, range)</span></code></pre></div>
<pre><code>    sexe                 occup age.1 age.2
1  Homme Exerce une profession    18    63
2  Femme Exerce une profession    18    67
3  Homme               Chomeur    18    63
4  Femme               Chomeur    18    63
5  Homme       Etudiant, eleve    18    34
6  Femme       Etudiant, eleve    18    35
7  Homme              Retraite    48    92
8  Femme              Retraite    41    96
9  Homme   Retire des affaires    57    91
10 Femme   Retire des affaires    57    93
11 Femme              Au foyer    22    90
12 Homme         Autre inactif    39    71
13 Femme         Autre inactif    19    97</code></pre>
<p>Cette fonction ne peut pas être facilement écrite dans <code class="pkg">dplyr</code> sans réécrire chacune des colonnes, ce que le bloc de code suivant illustre. On y gagne en lisibilité dans les intitulés de colonnes :</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>hdv2003 <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>  <span class="fu">group_by</span>(occup, sexe) <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a>    <span class="at">min =</span> <span class="fu">min</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a>    <span class="at">max =</span> <span class="fu">max</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a>  )</span></code></pre></div>
<p>Depuis la version 1.0.0 de <code class="pkg">dplyr</code>, <code data-pkg="dplyr">summarise</code> accepte maintenant des fonctions pouvant renvoyer plusieurs valeurs, créant ainsi autant de lignes (voir <a href="https://www.tidyverse.org/blog/2020/03/dplyr-1-0-0-summarise/" class="uri">https://www.tidyverse.org/blog/2020/03/dplyr-1-0-0-summarise/</a>).</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>hdv2003 <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>  <span class="fu">group_by</span>(occup, sexe) <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">age =</span> <span class="fu">range</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;min&quot;</span>, <span class="st">&quot;max&quot;</span>))</span></code></pre></div>
<pre><code>Warning: Returning more (or less) than 1 row per `summarise()` group
was deprecated in dplyr 1.1.0.
ℹ Please use `reframe()` instead.
ℹ When switching from `summarise()` to `reframe()`,
  remember that `reframe()` always returns an ungrouped
  data frame and adjust accordingly.</code></pre>
<pre><code>`summarise()` has grouped output by &#39;occup&#39;, &#39;sexe&#39;. You
can override using the `.groups` argument.</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["occup"],"name":[1],"type":["fct"],"align":["left"]},{"label":["sexe"],"name":[2],"type":["fct"],"align":["left"]},{"label":["age"],"name":[3],"type":["int"],"align":["right"]},{"label":["type"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"Exerce une profession","2":"Homme","3":"18","4":"min"},{"1":"Exerce une profession","2":"Homme","3":"63","4":"max"},{"1":"Exerce une profession","2":"Femme","3":"18","4":"min"},{"1":"Exerce une profession","2":"Femme","3":"67","4":"max"},{"1":"Chomeur","2":"Homme","3":"18","4":"min"},{"1":"Chomeur","2":"Homme","3":"63","4":"max"},{"1":"Chomeur","2":"Femme","3":"18","4":"min"},{"1":"Chomeur","2":"Femme","3":"63","4":"max"},{"1":"Etudiant, eleve","2":"Homme","3":"18","4":"min"},{"1":"Etudiant, eleve","2":"Homme","3":"34","4":"max"},{"1":"Etudiant, eleve","2":"Femme","3":"18","4":"min"},{"1":"Etudiant, eleve","2":"Femme","3":"35","4":"max"},{"1":"Retraite","2":"Homme","3":"48","4":"min"},{"1":"Retraite","2":"Homme","3":"92","4":"max"},{"1":"Retraite","2":"Femme","3":"41","4":"min"},{"1":"Retraite","2":"Femme","3":"96","4":"max"},{"1":"Retire des affaires","2":"Homme","3":"57","4":"min"},{"1":"Retire des affaires","2":"Homme","3":"91","4":"max"},{"1":"Retire des affaires","2":"Femme","3":"57","4":"min"},{"1":"Retire des affaires","2":"Femme","3":"93","4":"max"},{"1":"Au foyer","2":"Femme","3":"22","4":"min"},{"1":"Au foyer","2":"Femme","3":"90","4":"max"},{"1":"Autre inactif","2":"Homme","3":"39","4":"min"},{"1":"Autre inactif","2":"Homme","3":"71","4":"max"},{"1":"Autre inactif","2":"Femme","3":"19","4":"min"},{"1":"Autre inactif","2":"Femme","3":"97","4":"max"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>On pourrait de même définir sa propre fonction et la passer à <code data-pkg="stats">aggregate</code> :</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">c</span>(<span class="at">mean =</span> <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">sd =</span> <span class="fu">sd</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a><span class="fu">aggregate</span>(age <span class="sc">~</span> sexe <span class="sc">+</span> occup, hdv2003, f)</span></code></pre></div>
<pre><code>    sexe                 occup  age.mean    age.sd
1  Homme Exerce une profession 41.461538 10.438113
2  Femme Exerce une profession 40.710775 10.203864
3  Homme               Chomeur 38.925926 13.256329
4  Femme               Chomeur 38.012500 11.648321
5  Homme       Etudiant, eleve 20.895833  2.926326
6  Femme       Etudiant, eleve 21.586957  3.249452
7  Homme              Retraite 68.418269  8.018882
8  Femme              Retraite 69.510870  8.228957
9  Homme   Retire des affaires 71.179487  7.687556
10 Femme   Retire des affaires 73.789474  7.651737
11 Femme              Au foyer 50.730994 15.458412
12 Homme         Autre inactif 54.166667  6.597196
13 Femme         Autre inactif 59.962264 14.660206</code></pre>
<p>Mais on réalisera vite une des limitations de <code data-pkg="stats">aggregate</code> dans ce cas-là : le tableau retourné ne contient pas 4 colonnes, mais 3 uniquement, ce que l’on peut vérifier à l’aide de <code data-pkg="base">dim</code> ou <code data-pkg="utils">str</code>.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">aggregate</span>(age <span class="sc">~</span> sexe <span class="sc">+</span> occup, hdv2003, f))</span></code></pre></div>
<pre><code>&#39;data.frame&#39;:   13 obs. of  3 variables:
 $ sexe : Factor w/ 2 levels &quot;Homme&quot;,&quot;Femme&quot;: 1 2 1 2 1 2 1 2 1 2 ...
 $ occup: Factor w/ 7 levels &quot;Exerce une profession&quot;,..: 1 1 2 2 3 3 4 4 5 5 ...
 $ age  : num [1:13, 1:2] 41.5 40.7 38.9 38 20.9 ...
  ..- attr(*, &quot;dimnames&quot;)=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:2] &quot;mean&quot; &quot;sd&quot;</code></pre>
<p>Pour ce type d’opération, dans lequel on souhaite récupérer plusieurs variables calculées afin de travailler sur ces données agrégées soit dans le cadre d’opérations numériques soit de constructions graphiques, <code class="pkg">dplyr</code> ou <code class="pkg">Hmisc</code> s’avèrent plus commodes. Voici un exemple avec <code data-pkg="Hmisc">summarize</code> de l’extension <code class="pkg">Hmisc</code> :</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="fu">library</span>(Hmisc, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>
Attachement du package : &#39;Hmisc&#39;</code></pre>
<pre><code>L&#39;objet suivant est masqué depuis &#39;package:srvyr&#39;:

    summarize</code></pre>
<pre><code>L&#39;objet suivant est masqué depuis &#39;package:gt&#39;:

    html</code></pre>
<pre><code>L&#39;objet suivant est masqué depuis &#39;package:survey&#39;:

    deff</code></pre>
<pre><code>L&#39;objet suivant est masqué depuis &#39;package:ggdendro&#39;:

    label</code></pre>
<pre><code>Les objets suivants sont masqués depuis &#39;package:dplyr&#39;:

    src, summarize</code></pre>
<pre><code>Les objets suivants sont masqués depuis &#39;package:questionr&#39;:

    describe, wtd.mean, wtd.table, wtd.var</code></pre>
<pre><code>Les objets suivants sont masqués depuis &#39;package:base&#39;:

    format.pval, units</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="fu">with</span>(hdv2003, <span class="fu">summarize</span>(age, <span class="fu">llist</span>(sexe, occup), f))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["sexe"],"name":[1],"type":["labelled"],"align":["right"]},{"label":["occup"],"name":[2],"type":["labelled"],"align":["right"]},{"label":["age"],"name":[3],"type":["labelled"],"align":["right"]},{"label":["sd"],"name":[4],"type":["labelled"],"align":["right"]}],"data":[{"1":"Homme","2":"Exerce une profession","3":"41.46154","4":"10.438113","_rn_":"11"},{"1":"Homme","2":"Chomeur","3":"38.92593","4":"13.256329","_rn_":"9"},{"1":"Homme","2":"Etudiant, eleve","3":"20.89583","4":"2.926326","_rn_":"10"},{"1":"Homme","2":"Retraite","3":"68.41827","4":"8.018882","_rn_":"13"},{"1":"Homme","2":"Retire des affaires","3":"71.17949","4":"7.687556","_rn_":"12"},{"1":"Homme","2":"Autre inactif","3":"54.16667","4":"6.597196","_rn_":"8"},{"1":"Femme","2":"Exerce une profession","3":"40.71078","4":"10.203864","_rn_":"5"},{"1":"Femme","2":"Chomeur","3":"38.01250","4":"11.648321","_rn_":"3"},{"1":"Femme","2":"Etudiant, eleve","3":"21.58696","4":"3.249452","_rn_":"4"},{"1":"Femme","2":"Retraite","3":"69.51087","4":"8.228957","_rn_":"7"},{"1":"Femme","2":"Retire des affaires","3":"73.78947","4":"7.651737","_rn_":"6"},{"1":"Femme","2":"Au foyer","3":"50.73099","4":"15.458412","_rn_":"1"},{"1":"Femme","2":"Autre inactif","3":"59.96226","4":"14.660206","_rn_":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Notons que <code class="pkg">Hmisc</code> offre déjà une telle fonction (<code data-pkg="Hmisc">smean.sd</code>), ce qui nous aurait épargné d’écrire notre propre fonction, <code>f</code>, et il en existe bien d’autres. Voici un exemple avec des intervalles de confiance estimés par bootstrap :</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="fu">with</span>(hdv2003, <span class="fu">summarize</span>(age, <span class="fu">llist</span>(sexe, occup), smean.cl.boot))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["sexe"],"name":[1],"type":["labelled"],"align":["right"]},{"label":["occup"],"name":[2],"type":["labelled"],"align":["right"]},{"label":["age"],"name":[3],"type":["labelled"],"align":["right"]},{"label":["Lower"],"name":[4],"type":["labelled"],"align":["right"]},{"label":["Upper"],"name":[5],"type":["labelled"],"align":["right"]}],"data":[{"1":"Homme","2":"Exerce une profession","3":"41.46154","4":"40.48226","5":"42.35197","_rn_":"11"},{"1":"Homme","2":"Chomeur","3":"38.92593","4":"35.49954","5":"42.24167","_rn_":"9"},{"1":"Homme","2":"Etudiant, eleve","3":"20.89583","4":"20.18750","5":"21.85417","_rn_":"10"},{"1":"Homme","2":"Retraite","3":"68.41827","4":"67.30745","5":"69.52416","_rn_":"13"},{"1":"Homme","2":"Retire des affaires","3":"71.17949","4":"69.02500","5":"73.51282","_rn_":"12"},{"1":"Homme","2":"Autre inactif","3":"54.16667","4":"51.90000","5":"56.50083","_rn_":"8"},{"1":"Femme","2":"Exerce une profession","3":"40.71078","4":"39.86167","5":"41.65241","_rn_":"5"},{"1":"Femme","2":"Chomeur","3":"38.01250","4":"35.08750","5":"40.72500","_rn_":"3"},{"1":"Femme","2":"Etudiant, eleve","3":"21.58696","4":"20.71739","5":"22.60870","_rn_":"4"},{"1":"Femme","2":"Retraite","3":"69.51087","4":"68.29891","5":"70.75543","_rn_":"7"},{"1":"Femme","2":"Retire des affaires","3":"73.78947","4":"71.31579","5":"76.10592","_rn_":"6"},{"1":"Femme","2":"Au foyer","3":"50.73099","4":"48.38494","5":"53.02924","_rn_":"1"},{"1":"Femme","2":"Autre inactif","3":"59.96226","4":"55.84906","5":"63.69953","_rn_":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Et un exemple avec <code class="pkg">dplyr</code>.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a>hdv2003 <span class="sc">%&gt;%</span></span>
<span id="cb47-2"><a href="#cb47-2" tabindex="-1"></a>  <span class="fu">group_by</span>(sexe, occup) <span class="sc">%&gt;%</span></span>
<span id="cb47-3"><a href="#cb47-3" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb47-4"><a href="#cb47-4" tabindex="-1"></a>    <span class="fu">tibble</span>(</span>
<span id="cb47-5"><a href="#cb47-5" tabindex="-1"></a>      <span class="at">age_mean =</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb47-6"><a href="#cb47-6" tabindex="-1"></a>      <span class="at">age_sd =</span> <span class="fu">sd</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb47-7"><a href="#cb47-7" tabindex="-1"></a>    )</span>
<span id="cb47-8"><a href="#cb47-8" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>`summarise()` has grouped output by &#39;sexe&#39;. You can
override using the `.groups` argument.</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["sexe"],"name":[1],"type":["fct"],"align":["left"]},{"label":["occup"],"name":[2],"type":["fct"],"align":["left"]},{"label":["age_mean"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["age_sd"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Homme","2":"Exerce une profession","3":"41.46154","4":"10.438113"},{"1":"Homme","2":"Chomeur","3":"38.92593","4":"13.256329"},{"1":"Homme","2":"Etudiant, eleve","3":"20.89583","4":"2.926326"},{"1":"Homme","2":"Retraite","3":"68.41827","4":"8.018882"},{"1":"Homme","2":"Retire des affaires","3":"71.17949","4":"7.687556"},{"1":"Homme","2":"Autre inactif","3":"54.16667","4":"6.597196"},{"1":"Femme","2":"Exerce une profession","3":"40.71078","4":"10.203864"},{"1":"Femme","2":"Chomeur","3":"38.01250","4":"11.648321"},{"1":"Femme","2":"Etudiant, eleve","3":"21.58696","4":"3.249452"},{"1":"Femme","2":"Retraite","3":"69.51087","4":"8.228957"},{"1":"Femme","2":"Retire des affaires","3":"73.78947","4":"7.651737"},{"1":"Femme","2":"Au foyer","3":"50.73099","4":"15.458412"},{"1":"Femme","2":"Autre inactif","3":"59.96226","4":"14.660206"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Enfin, il est également possible d’utiliser plusieurs variables numériques à gauche de l’opérateur <code>~</code>. En voici une illustration :</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="fu">aggregate</span>(<span class="fu">cbind</span>(age, poids) <span class="sc">~</span> sexe <span class="sc">+</span> occup, hdv2003, mean)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["sexe"],"name":[1],"type":["fct"],"align":["left"]},{"label":["occup"],"name":[2],"type":["fct"],"align":["left"]},{"label":["age"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["poids"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Homme","2":"Exerce une profession","3":"41.46154","4":"5989.928"},{"1":"Femme","2":"Exerce une profession","3":"40.71078","4":"5186.020"},{"1":"Homme","2":"Chomeur","3":"38.92593","4":"4334.421"},{"1":"Femme","2":"Chomeur","3":"38.01250","4":"4168.980"},{"1":"Homme","2":"Etudiant, eleve","3":"20.89583","4":"8712.073"},{"1":"Femme","2":"Etudiant, eleve","3":"21.58696","4":"6809.416"},{"1":"Homme","2":"Retraite","3":"68.41827","4":"4459.116"},{"1":"Femme","2":"Retraite","3":"69.51087","4":"5195.785"},{"1":"Homme","2":"Retire des affaires","3":"71.17949","4":"8786.239"},{"1":"Femme","2":"Retire des affaires","3":"73.78947","4":"10314.848"},{"1":"Femme","2":"Au foyer","3":"50.73099","4":"5471.705"},{"1":"Homme","2":"Autre inactif","3":"54.16667","4":"3740.738"},{"1":"Femme","2":"Autre inactif","3":"59.96226","4":"4679.955"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div id="panels-graphiques-avec-lattice" class="section level2 hasAnchor">
<h2 class="hasAnchor">Panels graphiques avec lattice<a href="#panels-graphiques-avec-lattice" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Les exemples suivants montreront ensuite comment la notation <q>formule</q> peut servir à produire des graphiques par panel avec l’extension <code class="pkg">lattice</code>.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="fu">library</span>(lattice)</span></code></pre></div>
<div class="note">
<p>L’extension <code class="pkg">lattice</code> présente l’avantage d’être installée par défaut avec <strong>R</strong>. Il n’est donc pas nécessaire de l’installer préalablement.</p>
</div>
<p>Chargeons les mêmes données que le <a href="graphiques-bivaries.html">chapitre sur les graphiques bivariés</a>.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a><span class="co"># charger l&#39;extension lisant le format CSV</span></span>
<span id="cb51-2"><a href="#cb51-2" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb51-3"><a href="#cb51-3" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" tabindex="-1"></a><span class="co"># emplacement souhaité pour le jeu de données</span></span>
<span id="cb51-5"><a href="#cb51-5" tabindex="-1"></a>file <span class="ot">&lt;-</span> <span class="st">&quot;data/debt.csv&quot;</span></span>
<span id="cb51-6"><a href="#cb51-6" tabindex="-1"></a></span>
<span id="cb51-7"><a href="#cb51-7" tabindex="-1"></a><span class="co"># télécharger le jeu de données s&#39;il n&#39;existe pas</span></span>
<span id="cb51-8"><a href="#cb51-8" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(file)) {</span>
<span id="cb51-9"><a href="#cb51-9" tabindex="-1"></a>  <span class="fu">download.file</span>(<span class="st">&quot;http://www.stat.cmu.edu/~cshalizi/uADA/13/hw/11/debt.csv&quot;</span>,</span>
<span id="cb51-10"><a href="#cb51-10" tabindex="-1"></a>    file,</span>
<span id="cb51-11"><a href="#cb51-11" tabindex="-1"></a>    <span class="at">mode =</span> <span class="st">&quot;wb&quot;</span></span>
<span id="cb51-12"><a href="#cb51-12" tabindex="-1"></a>  )</span>
<span id="cb51-13"><a href="#cb51-13" tabindex="-1"></a>}</span>
<span id="cb51-14"><a href="#cb51-14" tabindex="-1"></a></span>
<span id="cb51-15"><a href="#cb51-15" tabindex="-1"></a><span class="co"># charger les données dans l&#39;objet &#39;debt&#39;</span></span>
<span id="cb51-16"><a href="#cb51-16" tabindex="-1"></a>debt <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(file)</span></code></pre></div>
<pre><code>New names:
Rows: 1171 Columns: 5
── Column specification
──────────────────────────────────── Delimiter: &quot;,&quot; chr
(1): Country dbl (4): ...1, Year, growth, ratio
ℹ Use `spec()` to retrieve the full column specification
for this data. ℹ Specify the column types or set
`show_col_types = FALSE` to quiet this message.
• `` -&gt; `...1`</code></pre>
<p>Rejetons rapidement un coup d’oeil à ces données, qui sont structurées par pays (variable <var>Country</var>) et par année (variable <var>Year</var>). On y trouve deux variables, <var>growth</var> (le taux de croissance du produit intérieur brut réel), et <var>ratio</var> (le ratio entre la dette publique et le produit intérieur brut), ainsi qu’une première colonne vide, ne contenant que des numéros lignes, dont on va se débarrasser :</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a><span class="co"># inspection des données</span></span>
<span id="cb53-2"><a href="#cb53-2" tabindex="-1"></a><span class="fu">glimpse</span>(debt, <span class="dv">75</span>)</span></code></pre></div>
<pre><code>Rows: 1,171
Columns: 5
$ ...1    &lt;dbl&gt; 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 15…
$ Country &lt;chr&gt; &quot;Australia&quot;, &quot;Australia&quot;, &quot;Australia&quot;, &quot;Australia&quot;, &quot;Aust…
$ Year    &lt;dbl&gt; 1946, 1947, 1948, 1949, 1950, 1951, 1952, 1953, 1954, 195…
$ growth  &lt;dbl&gt; -3.5579515, 2.4594746, 6.4375341, 6.6119938, 6.9202012, 4…
$ ratio   &lt;dbl&gt; 190.41908, 177.32137, 148.92981, 125.82870, 109.80940, 87…</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a><span class="co"># suppression de la première colonne</span></span>
<span id="cb55-2"><a href="#cb55-2" tabindex="-1"></a>debt <span class="ot">&lt;-</span> debt[, <span class="sc">-</span><span class="dv">1</span>]</span></code></pre></div>
<div id="visualisation-bivariée" class="section level3 hasAnchor">
<h3 class="hasAnchor">Visualisation bivariée<a href="#visualisation-bivariée" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Le même graphique s’écrit de la manière suivante avec l’extension <code class="pkg">lattice</code> :</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a><span class="fu">xyplot</span>(growth <span class="sc">~</span> Year, <span class="at">data =</span> debt)</span></code></pre></div>
<p><img src="graphs/formules/unnamed-chunk-32-1.png" width="1050" /></p>
</div>
<div id="visualisation-par-petits-multiples" class="section level3 hasAnchor">
<h3 class="hasAnchor">Visualisation par <q>petits multiples</q><a href="#visualisation-par-petits-multiples" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Appliquons désormais la même visualisation par <q>petits multiples</q> que vue dans le chapitre :</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a><span class="fu">xyplot</span>(growth <span class="sc">~</span> Year <span class="sc">|</span> Country, <span class="at">data =</span> debt)</span></code></pre></div>
<p><img src="graphs/formules/unnamed-chunk-33-1.png" width="1050" /></p>
<p>Enfin, rajoutons quelques options au graphique, afin de montrer comment l’extension <code class="pkg">lattice</code> fonctionne :</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a><span class="fu">xyplot</span>(growth <span class="sc">~</span> Year <span class="sc">|</span> Country,</span>
<span id="cb58-2"><a href="#cb58-2" tabindex="-1"></a>  <span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;o&quot;</span>, <span class="st">&quot;l&quot;</span>),</span>
<span id="cb58-3"><a href="#cb58-3" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">&quot;Données Reinhart et Rogoff corrigées, 1946-2009&quot;</span>,</span>
<span id="cb58-4"><a href="#cb58-4" tabindex="-1"></a>  <span class="at">ylab =</span> <span class="st">&quot;Taux de croissance du PIB&quot;</span>,</span>
<span id="cb58-5"><a href="#cb58-5" tabindex="-1"></a>  <span class="at">xlab =</span> <span class="cn">NULL</span>,</span>
<span id="cb58-6"><a href="#cb58-6" tabindex="-1"></a>  <span class="at">data =</span> debt</span>
<span id="cb58-7"><a href="#cb58-7" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="graphs/formules/unnamed-chunk-34-1.png" width="1050" /></p>
</div>
</div>
<div id="spécifier-des-modèles" class="section level2 hasAnchor">
<h2 class="hasAnchor">Spécifier des modèles<a href="#spécifier-des-modèles" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="les-formules-r" class="section level3 hasAnchor">
<h3 class="hasAnchor">Les formules R<a href="#les-formules-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>En réalité, la notation par formule qu’utilise <strong>R</strong> est celle proposée par Wilkinson <em>et al.</em> dans les années 70 pour schématiser la relation entre plusieurs variables dans un plan d’expérience. Plus spécifiquement, l’idée revient à exprimer une <dfn>relation <q>fonctionnelle</q></dfn>, symbolisée par l’opérateur <code>~</code>, entre une variable réponse <code>y</code> et une ou plusieurs variables explicatives. Disons, pour simplifier, que <code>y</code> est une variable d’intérêt (numérique ou facteur selon le type de modèle), <code>x</code> une variable numérique et que <code>a</code> et <code>b</code> sont des variables catégorielles (des facteurs dans le langage <strong>R</strong>). Voici les principales relations auxquelles on peut s’intéresser dans un modèle statistique :</p>
<ul>
<li><code>y ~ x</code> : régression simple,</li>
<li><code>y ~ x + 0</code> : idem avec suppression du terme d’ordonnée à l’origine,</li>
<li><code>y ~ a + b</code> : régresse avec deux effets principaux indépendants,</li>
<li><code>y ~ a * b</code> : idem avec interaction (équivalent à <code>1 + a + b + a:b</code>),</li>
<li><code>y ~ a / b</code> : idem en considérant une relation d’emboîtement (équivalent à <code>1 + a + b + a %in% b</code>).</li>
</ul>
<p>L’opérateur <code>|</code> est quant à lui utilisé par l’extension <code class="pkg">lme4</code> dans le cadre de modèles mixtes avec effets aléatoires.</p>
<p>Voir le chapitre dédié à la <a href="regression-logistique.html">régression logistique</a> pour des exemples de modèles multivariés et le chapitre dédié aux <a href="effets-d-interaction.html">effets d’interaction</a> pour plus de détails sur cette notion.</p>
</div>
</div>
<div id="pour-aller-plus-loin" class="section level2 hasAnchor">
<h2 class="hasAnchor">Pour aller plus loin<a href="#pour-aller-plus-loin" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Comme vient de le voir dans ce chapitre, la notation <q>formule</q> apparaît çà et là dans les différentes fonctions de <strong>R</strong> est de ses extensions. Il est par conséquent utile d’en connaître les rudiments, et en particulier les opérateurs <code>~</code> (<em>tilde</em>) et <code>+</code>, ne serait-ce que pour pouvoir se servir des différentes fonctions présentées sur cette page. Le chapitre <a href="lattice-graphiques-et-formules.html">lattice et les formules</a> fournit plus de détails sur ces aspects.</p>
<p>La notation <q>formule</q> devient cruciale dès que l’on souhaite rédiger des modèles : la formule <code>y ~ x</code>, par exemple, qui est équivalente à la formule <code>y ~ 1 + x</code>, correspond à l’équation mathématique <span class="math inline"><em>Y</em> = <em>a</em> + <em>b</em><em>X</em></span>. On trouvera de nombreux exemples d’usage de cette notation dans les chapitres consacrés, notamment, à la régression linéaire ou à la <a href="regression-logistique.html">régression logistique</a>.</p>
<p>De la même manière, l’opérateur <code>|</code> (<em>pipe</em>) utilisé par l’extension <code class="pkg">lattice</code> joue aussi un rôle très important dans la rédaction de modèles multi-niveaux, où il sert à indiquer les variables à pentes ou à coefficients aléatoires. Ces modèles sont présentés dans un <a href="modeles-lineaires-a-effets-mixtes.html">chapitre dédié</a>.</p>
</div>

</article>
</div>

<div class="col-sm-3" role="complementary">
<nav class="hidden-print hidden-xs" id="nav_sidebar">
</nav>
</div>

</div>

<script>
// manage active state of menu based on current page
$(document).ready(function () {

    // active menu
    href = window.location.pathname;
    href = href.substr(href.lastIndexOf('/') + 1);
    if (href=='') href = 'index.html';
    $('a[href="' + href + '"]').parent().addClass('active');
    $('a[href="' + href + '"]').parent().parents('li').addClass('active');

    // élargir la page d'accueil
    if (href=='index.html') $('.col-sm-9').attr('class','col-sm-12');

    // rechercher
    $("#rechercher").submit(function(event) {
      $('input[name="q"]').val($('input[name="q"]').val() + ' site:larmarange.github.io/analyse-R');
    });

    // sidebar
    $("#nav_sidebar").append($("#TOC").html());
    $("#nav_sidebar ul").addClass("nav nav-stacked");
    $("#TOC").addClass("visible-xs-block");
    $('body').scrollspy({
      target: '#nav_sidebar',
      offset: 40
    });

    // Identifier les <pre> fermant
    $('pre').next("*:not(pre)").prev().addClass('last'); // Dernier <pre> de chaque groupe contigu de <pre>
    $('pre').parent().each(function (){
      $(this).children('pre').last().addClass('last');
    }); // Si <pre> est le dernier enfant de son parent

    // Ajout liens rdocumentation et tooltip
    $("code[data-pkg]").each(function( index ) {
      pkg = $(this).attr('data-pkg');
      if ($(this).attr('data-rdoc') !== undefined) {
        rdocumentation = $(this).attr('data-rdoc');
      } else {
        rdocumentation = $(this).text();
      }
      fonction = $(this).text();
      //$(this).wrap('<a href="http://www.rdocumentation.org/packages/'+pkg+'/functions/'+rdocumentation+'">');
      $(this).wrap('<a href="http://rdrr.io/pkg/'+pkg+'/sym/'+rdocumentation+'">');
      $(this).attr('data-toggle','tooltip');
      $(this).attr('data-placement','top');
      $(this).attr('title','package : ' + pkg);
      $('[data-toggle="tooltip"]').tooltip();
    });

    $("code.pkg").each(function( index ) {
      //$(this).wrap('<a href="http://www.rdocumentation.org/packages/'+$(this).text()+'">');
      $(this).wrap('<a href="http://rdrr.io/pkg/'+$(this).text()+'">');
    });

    // Figures
    $("figure").each(function( index ) {
      if ($(this).children("figcaption").length > 0)
        $(this).children("figcaption:first").prepend('<span class="figure-number">Figure '+(index+1)+'.</span> ');
      else
        $(this).append($("<figcaption>").append('<span class="figure-number">Figure '+(index+1)+'</span>'));
    });

    // Colorbox

    /*----
    jQuery('article div img').colorbox({
      maxWidth: '90%',
      maxHeight: '90%',
      rel: 'figures',
      current: "",
      href: function(){
        return $(this).attr('src');
      },
      title: function(){
        return $(this).attr('alt');
      }
    });
    jQuery('article div img').css('cursor', 'pointer');
    jQuery('figure img').colorbox({
      maxWidth: '90%',
      maxHeight: '90%',
      rel: 'figures',
      current: "",
      href: function(){
        return $(this).attr('src');
      },
      title: function(){
        return $(this).parent().children("figcaption").text();
      }
    });
    jQuery('figure img').css('cursor', 'pointer');

    -----*/

    /* Clipboard --------------------------*/

  function changeTooltipMessage(element, msg) {
    var tooltipOriginalTitle=element.getAttribute('data-original-title');
    element.setAttribute('data-original-title', msg);
    $(element).tooltip('show');
    element.setAttribute('data-original-title', tooltipOriginalTitle);
  }

  if(ClipboardJS.isSupported()) {
    $(document).ready(function() {
      var copyButton = "<button type='button' class='btn btn-primary btn-copy-ex' type = 'submit' title='Copier dans le presse-papier' aria-label='Copier dans le presse-papier' data-toggle='tooltip' data-placement='left auto' data-trigger='hover' data-clipboard-copy><i class='fa fa-copy'></i></button>";

      $(".examples, div.sourceCode").addClass("hasCopyButton");

      // Insert copy buttons:
      $(copyButton).prependTo(".hasCopyButton");

      // Initialize tooltips:
      $('.btn-copy-ex').tooltip({container: 'body'});

      // Initialize clipboard:
      var clipboardBtnCopies = new ClipboardJS('[data-clipboard-copy]', {
        text: function(trigger) {
          return trigger.parentNode.textContent;
        }
      });

      clipboardBtnCopies.on('success', function(e) {
        changeTooltipMessage(e.trigger, 'Copié !');
        e.clearSelection();
      });

      clipboardBtnCopies.on('error', function() {
        changeTooltipMessage(e.trigger,'Appuyez sur Ctrl+C ou Command+C pour copier');
      });
    });
  }

  // Bigfoot
  $(".footnotes > li").addClass("footnote");
  $.bigfoot({
    activateOnHover: true,
    actionOriginalFN: "ignore"
});
});
</script>

<!-- Utterances comments
<script src="https://utteranc.es/client.js"
        repo="larmarange/analyse-R"
        issue-term="pathname"
        label="commentaires"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
-->

<!-- Giscus comments -->
<script src="https://giscus.app/client.js"
        data-repo="larmarange/analyse-R"
        data-repo-id="MDEwOlJlcG9zaXRvcnkzNDk4NjY2Ng=="
        data-category-id="DIC_kwDOAhXaqs4B_iH_"
        data-mapping="pathname"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-theme="light"
        data-lang="fr"
        crossorigin="anonymous"
        async>
</script>

<!-- disqus -->
<!---
<div class="row">
  <div id="disqus_thread" class="col-sm-9" role="complementary"></div>
</div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'analyse-r'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Veuillez activer JavaScript pour voir les <a href="http://disqus.com/?ref_noscript">les commentaires gérés avec Disqus.</a></noscript>
    <!--<a href="http://disqus.com" class="dsq-brlink">Les commentaires sont hébergés par <span class="logo-disqus">Disqus</span>.</a>-->

<footer>
  <div class="row">
    <div class="col-lg-12">
      <p>Contenus sous licence <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/fr/" rel="nofollow">Creative Commons Attribution - Pas d’utilisation commerciale - Partage dans les mêmes conditions</a>.<br />
      Propulsé par <a href="http://www.r-project.org/" rel="nofollow">R</a>, </a><a href="http://www.rstudio.com/" rel="nofollow">RStudio</a>, <a href="http://rmarkdown.rstudio.com/" rel="nofollow">R Markdown</a>, <a href="http://yihui.name/knitr/" rel="nofollow">knitr</a>, <a href="http://pandoc.org/" rel="nofollow">pandoc</a> et <a href="http://www.princexml.com/" rel="nofollow">Prince XML</a>. Hébergé par <a href="https://github.com/" rel="nofollow">GitHub</a>.<br />
      <a href="https://www.zenodo.org/badge/latestdoi/34986666"><img src="https://www.zenodo.org/badge/34986666.svg" alt="DOI"></a></p>
    </div>
  </div>
</footer>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->



</body>
</html>
