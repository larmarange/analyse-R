<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<title>Analyse de séquences</title>

<script src="libs/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.1/css/flatly.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.1/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/respond.min.js"></script>
<link rel="stylesheet" href="./include/analyse-R.css" />
<script type="text/javascript" src="./libs/zeroclipboard-2.2.0/ZeroClipboard.js"></script>
<link rel="stylesheet" href="./libs/colorbox-1.6.1/colorbox.css" />
<script type="text/javascript" src="./libs/colorbox-1.6.1/jquery.colorbox-min.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">

<nav>
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href=".">analyse-R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="index.html">Accueil</a></li>
        <li class="dropdown">
          <a href="pem" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Prise en main <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="pem_presentation_installation.html">Présentation et Installation</a></li>
            <li><a href="pem_premier_contact.html">Premier contact</a></li>
            <li><a href="pem_premier_travail.html">Premier travail avec des données</a></li>
            <li><a href="pem_stat_univ.html">Statistique univariée</a></li>
            <li><a href="pem_organiser_fichiers.html">Organiser ses fichiers</a></li>
            <li><a href="pem_import_export.html">Import / Export de données</a></li>
            <li><a href="pem_manipulation.html">Manipulation de données</a></li>
            <li><a href="pem_export_graphiques.html">Exporter des graphiques</a></li>
            <li><a href="pem_ou_trouver_aide.html">Où trouver de l'aide ?</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="analyses" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Analyses <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="analyses_stat_biv.html">Statistique bivariée</a></li>
            <li><a href="analyses_reglog.html">Régression logistique</a></li>
            <li><a href="analyses_donnees_pond.html">Données pondérées</a></li>
            <li><a href="analyses_acm.html">Analyse des correspondances multiples (ACM)</a></li>
            <li><a href="analyses_cah.html">Classification ascendante hiérarchique (CAH)</a></li>
            <li><a href="analyses_seq.html">Analyse de séquences</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="avance" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Avancé <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li class="dropdown-header">Astuces</li>
            <li><a href="avance_age.html">Calculer un âge</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="index" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Index <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="index_fonctions.html">Index des fonctions</a></li>
            <li><a href="index_extensions.html">Index des extensions</a></li>
          </ul>
        </li>
        <li><a href="analyse-R.pdf">PDF</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="participer" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Participer <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
              <li><a href="https://github.com/larmarange/analyse-R">analyse-R sur GitHub</a></li>
          </ul>
        </li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
</nav>

<div class="row">

<div class="col-sm-9" role="main">
<article>

<div id="header">
<h1 class="title">Analyse de séquences</h1>
</div>

<div id="TOC">
<ul>
<li><a href="#lanalyse-de-sequences">L’analyse de séquences</a></li>
<li><a href="#installer-traminer-et-recuperer-les-donnees">Installer TraMineR et récupérer les données</a></li>
<li><a href="#appariement-optimal-et-classification">Appariement optimal et classification</a></li>
<li><a href="#representations-graphiques">Représentations graphiques</a></li>
<li><a href="#bibliographie">Bibliographie</a></li>
</ul>
</div>

<div class="note">
La version originale de ce chapitre est une reprise, avec l’aimable autorisation de son auteur, d’un article de Nicolas Robette intitulé <em>L’analyse de séquences : une introduction avec le logiciel R et le package TraMineR</em> et publié sur le blog Quanti (<a href="http://quanti.hypotheses.org/686/" class="uri">http://quanti.hypotheses.org/686/</a>).
</div>
<p>Depuis les années 1980, l’étude quantitative des trajectoires biographiques (<em>life course analysis</em>) a pris une ampleur considérable dans le champ des sciences sociales. Les collectes de données micro-individuelles longitudinales se sont développées, principalement sous la forme de panels ou d’enquêtes rétrospectives. Parallèlement à cette multiplication des données disponibles, la méthodologie statistique a connu de profondes évolutions. L’analyse des biographies (<em>event history analysis</em>) — qui ajoute une dimension diachronique aux modèles économétriques mainstream — s’est rapidement imposée comme l’approche dominante : il s’agit de modéliser la durée des situations ou le risque d’occurrence des événements.</p>
<div id="lanalyse-de-sequences" class="section level2">
<h2>L’analyse de séquences</h2>
<p>Cependant, ces dernières années ont vu la diffusion d’un large corpus de méthodes descriptives d’analyse de séquences, au sein desquelles l’appariement optimal (<em>optimal matching</em>) occupe une place centrale<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>. L’objectif principal de ces méthodes est d’identifier — dans la diversité d’un corpus de séquences constituées de séries d’états successifs — les régularités, les ressemblances, puis le plus souvent de construire des typologies de « séquences-types ». L’analyse de séquences constitue donc un moyen de décrire mais aussi de mieux comprendre le déroulement de divers processus.</p>
<p>La majeure partie des applications de l’analyse de séquences traite de trajectoires biographiques ou de carrières professionnelles. Dans ces cas, chaque trajectoire ou chaque carrière est décrite par une séquence, autrement dit par une suite chronologiquement ordonnée de « moments » élémentaires, chaque moment correspondant à un « état » déterminé de la trajectoire (par exemple, pour les carrières professionnelles : être en emploi, au chômage ou en inactivité). Mais on peut bien sûr imaginer des types de séquences plus originaux : Andrew Abbott<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a>, le sociologue américain qui a introduit l’<em>optimal matching</em> dans les sciences scientifiques ou des séquences de pas de danses traditionnelles.</p>
<p>En France, les premiers travaux utilisant l’appariement optimal sont ceux de Claire Lemercier<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a> sur les carrières des membres des institutions consulaires parisiennes au <span style="font-variant: small-caps;">xix</span><sup>e</sup> siècle (Lemercier, 2005), et de Laurent Lesnard<a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a> sur les emplois du temps (Lesnard, 2008). Mais dès les années 1980, les chercheurs du Céreq construisaient des typologies de trajectoires d’insertion à l’aide des méthodes d’analyse des données « à la française » (analyse des correspondances, etc.)<a href="#fn5" class="footnoteRef" id="fnref5"><sup>5</sup></a>. Au final, on dénombre maintenant plus d’une centaine d’articles de sciences sociales contenant ou discutant des techniques empruntées à l’analyse de séquences.</p>
<p>Pour une présentation des différentes méthodes d’analyse de séquences disponibles et de leur mise en oeuvre pratique, il existe un petit manuel en français, publié en 2011 dernière aux éditions du Ceped (collection « Les clefs pour »<a href="#fn6" class="footnoteRef" id="fnref6"><sup>6</sup></a>) et disponible en pdf<a href="#fn7" class="footnoteRef" id="fnref7"><sup>7</sup></a> (Robette, 2011). De plus, un article récemment publié dans le <em>Bulletin de Méthodologie Sociologique</em> compare de manière systématique les résultats obtenus par les principales méthodes d’analyse de séquences (Robette &amp; Bry, 2012). La conclusion en est qu’avec des données empiriques aussi structurées que celles que l’on utilise en sciences sociales, l’approche est robuste, c’est-à-dire qu’un changement de méthode aura peu d’influence sur les principaux résultats. Cependant, l’article tente aussi de décrire les spécificités de chaque méthode et les différences marginales qu’elles font apparaître, afin de permettre aux chercheurs de mieux adapter leurs choix méthodologiques à leur question de recherche.</p>
<p>Afin d’illustrer la démarche de l’analyse de séquences, nous allons procéder ici à la description « pas à pas » d’un corpus de carrières professionnelles, issues de l’enquête <em>Biographies et entourage</em> (Ined, 2000)<a href="#fn8" class="footnoteRef" id="fnref8"><sup>8</sup></a>. Et pour ce faire, on va utiliser le logiciel <strong>R</strong>, qui propose la solution actuellement la plus complète et la plus puissante en matière d’analyse de séquences. Les méthodes d’analyse de séquences par analyses factorielles ou de correspondances ne nécessitent pas de logiciel spécifique : tous les logiciels de statistiques généralistes peuvent être utilisés (<strong>SAS</strong>, <strong>SPSS</strong>, <strong>Stata</strong>, R, etc.). En revanche, il n’existe pas de fonctions pour l’appariement optimal dans <strong>SAS</strong> ou <strong>SPSS</strong>. Certains logiciels gratuits implémentent l’appariement optimal (comme <strong>Chesa</strong><a href="#fn9" class="footnoteRef" id="fnref9"><sup>9</sup></a> ou <strong>TDA</strong><a href="#fn10" class="footnoteRef" id="fnref10"><sup>10</sup></a>) mais il faut alors recourir à d’autres programmes pour dérouler l’ensemble de l’analyse (classification, représentation graphique). <strong>Stata</strong> propose le module <strong>sq</strong><a href="#fn11" class="footnoteRef" id="fnref11"><sup>11</sup></a>, qui dispose d’un éventail de fonctions intéressantes. Mais c’est <strong>R</strong> et le package <strong class="package">TraMineR</strong><a href="#fn12" class="footnoteRef" id="fnref12"><sup>12</sup></a>, développé par des collègues de l’Université de Genève (Gabadinho et al, 2011), qui fournit la solution la plus complète et la plus puissante à ce jour : on y trouve l’appariement optimal mais aussi d’autres algorithmes alternatifs, ainsi que de nombreuses fonctions de description des séquences et de représentation graphique.</p>
</div>
<div id="installer-traminer-et-recuperer-les-donnees" class="section level2">
<h2>Installer TraMineR et récupérer les données</h2>
<p>Tout d’abord, à quoi ressemblent nos données ? On a reconstruit à partir de l’enquête les carrières de 1000 hommes. Pour chacune, on connaît la position professionnelle chaque année, de l’âge de 14 ans jusqu’à 50 ans. Cette position est codée de la manière suivante : les codes 1 à 6 correspondent aux groupes socioprofessionnels de la nomenclature des PCS de l’INSEE 13 (agriculteurs exploitants ; artisans, commerçants et chefs d’entreprise ; cadres et professions intellectuelles supérieures ; professions intermédiaires ; employés ; ouvriers) ; on y a ajouté « études » (code 7), « inactivité » (code 8) et « service militaire » (code 9). Le fichier de données comporte une ligne par individu et une colonne par année : la variable <em>csp1</em> correspond à la position à 14 ans, la variable <em>csp2</em> à la position à 15 ans, etc. Par ailleurs, les enquêtés étant tous nés entre 1930 et 1950, on ajoute à notre base une variable « génération » à trois modalités, prenant les valeurs suivantes : 1=“1930-1938” ; 2=“1939-1945” ; 3=“1946-1950”. Au final, la base est constituée de 500 lignes et de 37 + 1 = 38 colonnes et se présente sous la forme d’un fichier texte au format <strong>csv</strong> (téléchargeable à <a href="http://larmarange.github.io/analyse-R/data/trajpro.csv" class="uri">http://larmarange.github.io/analyse-R/data/trajpro.csv</a>).</p>
<p>Une fois <strong>R</strong> ouvert, on commence par installer les extensions nécessaires à ce programme (opération à ne réaliser que lors de leur première utilisation) et par les charger en mémoire. L’extension <strong class="package">TraMineR</strong> propose de nombreuses fonctions pour l’analyse de séquences. L’extension <strong class="package">cluster</strong> comprend un certain nombre de méthodes de classification automatique<a href="#fn13" class="footnoteRef" id="fnref13"><sup>13</sup></a>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="kw">c</span>(<span class="st">&quot;TraMineR&quot;</span>))</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(TraMineR)</code></pre>
<pre><code>
TraMineR stable version 1.8-9 (Built: 2015-05-07)
Website: http://mephisto.unige.ch/traminer
Please type &#39;citation(&quot;TraMineR&quot;)&#39; for citation information.</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(cluster)</code></pre>
<p>On importe ensuite les données, on recode la variable « génération » pour lui donner des étiquettes plus explicites. On jette également un coup d’oeil à la structure du tableau de données :</p>
<pre class="sourceCode r"><code class="sourceCode r">donnees &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;http://larmarange.github.io/analyse-R/data/trajpro.csv&quot;</span>, 
  <span class="dt">header =</span> T)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">donnees$generation &lt;-<span class="st"> </span><span class="kw">factor</span>(donnees$generation, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;1930-38&quot;</span>, 
  <span class="st">&quot;1939-45&quot;</span>, <span class="st">&quot;1946-50&quot;</span>))
<span class="kw">str</span>(donnees)</code></pre>
<pre><code>&#39;data.frame&#39;:   1000 obs. of  38 variables:
 $ csp1      : int  1 7 6 7 7 6 7 7 7 6 ...
 $ csp2      : int  1 7 6 7 7 6 7 7 6 6 ...
 $ csp3      : int  1 7 6 6 7 6 7 7 6 6 ...
 $ csp4      : int  1 7 6 6 7 6 7 7 6 6 ...
 $ csp5      : int  1 7 6 6 7 6 7 7 6 6 ...
 $ csp6      : int  1 7 6 6 7 6 9 7 6 6 ...
 $ csp7      : int  6 9 6 6 7 6 9 7 9 6 ...
 $ csp8      : int  6 9 9 6 7 6 9 7 4 6 ...
 $ csp9      : int  6 6 9 6 7 6 9 3 4 9 ...
 $ csp10     : int  6 6 9 6 7 6 4 3 4 9 ...
 $ csp11     : int  6 6 6 6 3 6 4 3 4 6 ...
 $ csp12     : int  6 6 6 6 3 6 4 3 4 6 ...
 $ csp13     : int  6 6 6 6 3 6 4 3 4 6 ...
 $ csp14     : int  6 4 6 6 3 6 4 3 4 6 ...
 $ csp15     : int  6 4 6 6 3 6 4 3 4 6 ...
 $ csp16     : int  6 4 6 6 3 6 6 3 4 6 ...
 $ csp17     : int  6 4 6 6 3 6 6 3 4 6 ...
 $ csp18     : int  6 4 6 6 3 6 6 3 4 6 ...
 $ csp19     : int  6 4 6 6 3 6 6 3 4 6 ...
 $ csp20     : int  6 4 6 6 3 6 6 3 4 6 ...
 $ csp21     : int  6 4 6 6 6 6 6 3 4 6 ...
 $ csp22     : int  6 4 6 6 6 6 6 3 4 4 ...
 $ csp23     : int  6 4 6 6 6 6 6 3 4 4 ...
 $ csp24     : int  6 6 6 6 5 6 6 3 4 4 ...
 $ csp25     : int  6 6 6 6 5 6 6 3 4 4 ...
 $ csp26     : int  6 6 6 6 5 6 6 3 4 4 ...
 $ csp27     : int  6 6 6 6 5 6 6 3 4 4 ...
 $ csp28     : int  6 6 6 6 5 6 6 3 4 4 ...
 $ csp29     : int  6 6 6 6 5 6 6 3 4 4 ...
 $ csp30     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ csp31     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ csp32     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ csp33     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ csp34     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ csp35     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ csp36     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ csp37     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ generation: Factor w/ 3 levels &quot;1930-38&quot;,&quot;1939-45&quot;,..: 2 1 1 3 2 3 1 1 2 1 ...</code></pre>
<p>On a bien 1000 observations et 38 variables. On définit maintenant des <em>labels</em> pour les différents états qui composent les séquences et on crée un objet « séquence » avec <code data-package="TraMineR">seqdef</code> :</p>
<pre class="sourceCode r"><code class="sourceCode r">labels &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;agric&quot;</span>, <span class="st">&quot;acce&quot;</span>, <span class="st">&quot;cadr&quot;</span>, <span class="st">&quot;pint&quot;</span>, <span class="st">&quot;empl&quot;</span>, 
  <span class="st">&quot;ouvr&quot;</span>, <span class="st">&quot;etud&quot;</span>, <span class="st">&quot;inact&quot;</span>, <span class="st">&quot;smil&quot;</span>)
seq &lt;-<span class="st"> </span><span class="kw">seqdef</span>(donnees[, <span class="dv">1</span>:<span class="dv">37</span>], <span class="dt">states =</span> labels)</code></pre>
<pre><code> [&gt;] state coding:
       [alphabet]  [label]  [long label] 
     1  1           agric    agric
     2  2           acce     acce
     3  3           cadr     cadr
     4  4           pint     pint
     5  5           empl     empl
     6  6           ouvr     ouvr
     7  7           etud     etud
     8  8           inact    inact
     9  9           smil     smil
 [&gt;] 1000 sequences in the data set
 [&gt;] min/max sequence length: 37/37</code></pre>
</div>
<div id="appariement-optimal-et-classification" class="section level2">
<h2>Appariement optimal et classification</h2>
<p>Ces étapes préalables achevées, on peut comparer les séquences en calculant les dissimilarités entre paires de séquences. On va ici utiliser la méthode la plus répandue, l’appariement optimal (<em>optimal matching</em>). Cette méthode consiste, pour chaque paire de séquences, à compter le nombre minimal de modifications (substitutions, suppressions, insertions) qu’il faut faire subir à l’une des séquences pour obtenir l’autre. On peut considérer que chaque modification est équivalente, mais il est aussi possible de prendre en compte le fait que les « distances » entre les différents états n’ont pas toutes la même « valeur » (par exemple, la distance sociale entre emploi à temps plein et chômage est plus grande qu’entre emploi à temps plein et emploi à temps partiel), en assignant aux différentes modifications des « coûts » distincts. Dans notre exemple, on va créer avec <code data-package="TraMineR">seqsubm</code> une « matrice des coûts de substitution » dans laquelle tous les coûts sont constants et égaux à 2<a href="#fn14" class="footnoteRef" id="fnref14"><sup>14</sup></a> :</p>
<pre class="sourceCode r"><code class="sourceCode r">couts &lt;-<span class="st"> </span><span class="kw">seqsubm</span>(seq, <span class="dt">method =</span> <span class="st">&quot;CONSTANT&quot;</span>, <span class="dt">cval =</span> <span class="dv">2</span>)</code></pre>
<pre><code> [&gt;] creating 9x9 substitution-cost matrix using 2 as constant value</code></pre>
<p>Ensuite, on calcule la matrice de distance entre les séquences (i.e contenant les « dissimilarités » entre les séquences) avec <code data-package="TraMineR">seqdist</code>, avec un coût d’insertion/suppression (<em>indel</em>) que l’on fixe ici à 1,1 :</p>
<pre class="sourceCode r"><code class="sourceCode r">seq.om &lt;-<span class="st"> </span><span class="kw">seqdist</span>(seq, <span class="dt">method =</span> <span class="st">&quot;OM&quot;</span>, <span class="dt">indel =</span> <span class="fl">1.1</span>, 
  <span class="dt">sm =</span> couts)</code></pre>
<pre><code> [&gt;] 1000 sequences with 9 distinct events/states
 [&gt;] 818 distinct sequences
 [&gt;] min/max sequence length: 37/37
 [&gt;] computing distances using OM metric
 [&gt;] total time: 1.83 secs</code></pre>
<p>Cette matrice des distances ou des dissimilarités entre séquences peut ensuite être utilisée pour une classification ascendante hiérarchique (CAH), qui permet de regrouper les séquences en un certain nombre de « classes » en fonction de leur proximité :</p>
<pre class="sourceCode r"><code class="sourceCode r">seq.agnes &lt;-<span class="st"> </span><span class="kw">agnes</span>(<span class="kw">as.dist</span>(seq.om), <span class="dt">method =</span> <span class="st">&quot;ward&quot;</span>, 
  <span class="dt">keep.diss =</span> <span class="ot">FALSE</span>)</code></pre>
<p>Avec la fonction <code data-package="stats" data-rdocumentation="dendrogram">plot</code>, il est possible de tracer l’arbre de la classification (dendrogramme).</p>
<figure>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="kw">as.dendrogram</span>(seq.agnes), <span class="dt">leaflab =</span> <span class="st">&quot;none&quot;</span>)</code></pre>
<img src="images/analyses_seq/unnamed-chunk-10-1.png" title="" alt="" width="1050" />
<figcaption>
Dendrogramme de la classification des séquences
</figcaption>
</figure>
<p>De même, on peut représenter les sauts d’inertie.</p>
<figure>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="kw">sort</span>(seq.agnes$height, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>)[<span class="dv">1</span>:<span class="dv">20</span>], 
  <span class="dt">type =</span> <span class="st">&quot;s&quot;</span>, <span class="dt">xlab =</span> <span class="st">&quot;nb de classes&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;inertie&quot;</span>)</code></pre>
<img src="images/analyses_seq/unnamed-chunk-11-1.png" title="" alt="" width="1050" />
<figcaption>
Sauts d’inertie de la classification des séquences
</figcaption>
</figure>
<p>L’observation, sur ce dendogramme ou sur la courbe des sauts d’inertie, des sauts d’inertie des dernières étapes de la classification peut servir de guide pour déterminer le nombre de classes que l’on va retenir pour la suite des analyses. Une première inflexion dans la courbe des sauts d’inertie apparaît au niveau d’une partition en 5 classes. On voit aussi une seconde inflexion assez nette à 7 classes. Mais il faut garder en tête le fait que ces outils ne sont que des guides, le choix devant avant tout se faire après différents essais, en fonction de l’intérêt des résultats par rapport à la question de recherche et en arbitrant entre exhaustivité et parcimonie.</p>
<p>On fait ici le choix d’une partition en 5 classes :</p>
<pre class="sourceCode r"><code class="sourceCode r">nbcl &lt;-<span class="st"> </span><span class="dv">5</span>
seq.part &lt;-<span class="st"> </span><span class="kw">cutree</span>(seq.agnes, nbcl)
seq.part &lt;-<span class="st"> </span><span class="kw">factor</span>(seq.part, <span class="dt">labels =</span> <span class="kw">paste</span>(<span class="st">&quot;classe&quot;</span>, 
  <span class="dv">1</span>:nbcl, <span class="dt">sep =</span> <span class="st">&quot;.&quot;</span>))</code></pre>
</div>
<div id="representations-graphiques" class="section level2">
<h2>Représentations graphiques</h2>
<p>Pour se faire une première idée de la nature des classes de la typologie, il existe un certain nombre de représentations graphiques. Les chronogrammes (<em>state distribution plots</em>) présentent une série de coupes transversales : pour chaque âge, on a les proportions d’individus de la classe dans les différentes situations (agriculteur, étudiant, etc.). Ce graphique s’obtient avec <code data-package="TraMineR" data-rdocumentation="seqplot">seqdplot</code> :</p>
<figure>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seqdplot</span>(seq, <span class="dt">group =</span> seq.part, <span class="dt">xtlab =</span> <span class="dv">14</span>:<span class="dv">50</span>, <span class="dt">border =</span> <span class="ot">NA</span>, 
  <span class="dt">withlegend =</span> T)</code></pre>
<img src="images/analyses_seq/unnamed-chunk-13-1.png" title="" alt="" width="1050" />
<figcaption>
Chronogrammes
</figcaption>
</figure>
<p>Chacune des classes semble caractérisée par un groupe professionnel principal : profession intermédiaire pour la classe 1, ouvrier pour la 2, employé pour la 3, cadre pour la 4 et indépendant pour la 5. Cependant, on aperçoit aussi des « couches » d’autres couleurs, indiquant que l’ensemble des carrières ne sont probablement pas stables.</p>
<p>Les « tapis » (<em>index plots</em>), obtenus avec <code data-package="TraMineR" data-rdocumentation="seqplot">seqiplot</code>, permettent de mieux visualiser la dimension individuelle des séquences. Chaque segment horizontal représente une séquence, découpée en sous-segments correspondant aux aux différents états successifs qui composent la séquence.</p>
<figure>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seqiplot</span>(seq, <span class="dt">group =</span> seq.part, <span class="dt">xtlab =</span> <span class="dv">14</span>:<span class="dv">50</span>, <span class="dt">tlim =</span> <span class="dv">0</span>, 
  <span class="dt">space =</span> <span class="dv">0</span>, <span class="dt">border =</span> <span class="ot">NA</span>, <span class="dt">withlegend =</span> T, <span class="dt">yaxis =</span> <span class="ot">FALSE</span>)</code></pre>
<img src="images/analyses_seq/unnamed-chunk-14-1.png" title="" alt="" width="1050" />
<figcaption>
Tapis des séquences triés
</figcaption>
</figure>
<p>Il est possible de trier les séquences pour rendre les tapis plus lisibles (on trie ici par <em>multidimensional scaling</em> à l’aide de la fonction <code data-package="stats">cmdscale</code>).</p>
<figure>
<pre class="sourceCode r"><code class="sourceCode r">ordre &lt;-<span class="st"> </span><span class="kw">cmdscale</span>(<span class="kw">as.dist</span>(seq.om), <span class="dt">k =</span> <span class="dv">1</span>)
<span class="kw">seqiplot</span>(seq, <span class="dt">group =</span> seq.part, <span class="dt">sortv =</span> ordre, <span class="dt">xtlab =</span> <span class="dv">14</span>:<span class="dv">50</span>, 
  <span class="dt">tlim =</span> <span class="dv">0</span>, <span class="dt">space =</span> <span class="dv">0</span>, <span class="dt">border =</span> <span class="ot">NA</span>, <span class="dt">withlegend =</span> T, 
  <span class="dt">yaxis =</span> <span class="ot">FALSE</span>)</code></pre>
<img src="images/analyses_seq/unnamed-chunk-15-1.png" title="" alt="" width="1050" />
<figcaption>
Tapis des séquences triés par multidimensional scaling
</figcaption>
</figure>
<p>On voit mieux apparaître ainsi l’hétérogénéité de certaines classes. Les classes 1, 3 et 4, par exemple, semblent regrouper des carrières relativement stables (respectivement de professions intermédiaires, d’employés et de cadres) et des carrières plus « mobiles » commencées comme ouvrier (classes 1 et 3, en orange) ou comme profession intermédiaire (classe 4, en rouge). De même, la majorité des membres de la dernière classe commencent leur carrière dans un groupe professionnel distinct de celui qu’ils occuperont par la suite (indépendants). Ces distinctions apparaissent d’ailleurs si on relance le programme avec un nombre plus élevé de classes (en remplaçant le 5 de la ligne <code>nbcl &lt;- 5</code> par 7, seconde inflexion de la courbe des sauts d’inertie, et en exécutant de nouveau le programme à partir de cette ligne) : les stables et les mobiles se trouvent alors dans des classes distinctes.</p>
<p>Le package <strong class="package">JLutils</strong>, disponible seulement sur <a href="https://github.com/larmarange/JLutils">GitHub</a>, propose une fonction <code data-package="JLutils">seq_heatmap</code> permettant de représenter le tapis de l’ensemble des séquences selon l’ordre du dendrogramme.</p>
<p>Pour installer <strong class="package">JLutils</strong>, on aura recours au package <strong class="package">devtools</strong> et à sa fonction <code data-package="devtools">install_github</code> :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="kw">install_github</span>(<span class="st">&quot;larmarange/JLutils&quot;</span>)</code></pre>
<p>On peut ensuite générer le graphique ainsi :</p>
<figure>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(JLutils)
<span class="kw">seq_heatmap</span>(seq, seq.agnes, <span class="dt">labCol =</span> <span class="dv">14</span>:<span class="dv">50</span>)</code></pre>
<img src="images/analyses_seq/unnamed-chunk-17-1.png" title="" alt="" width="1050" />
<figcaption>
Tapis des séquences trié selon le dendrogramme
</figcaption>
</figure>
<p>La distance moyenne des séquences d’une classe au centre de cette classe, obtenue avec <code data-package="TraMineR">disscenter</code>, permet de mesurer plus précisément l’homogénéité des classes :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">round</span>(<span class="kw">aggregate</span>(<span class="kw">disscenter</span>(<span class="kw">as.dist</span>(seq.om), <span class="dt">group =</span> seq.part), 
  <span class="kw">list</span>(seq.part), mean)[, -<span class="dv">1</span>], <span class="dv">1</span>)</code></pre>
<pre><code>[1] 13.1  8.9 15.6  9.7 16.5</code></pre>
<p>Cela nous confirme que les classes 1, 3 et 5 sont nettement plus hétérogènes que les autres, alors que la classe 2 est la plus homogène.</p>
<p>D’autres représentations graphiques existent pour poursuivre l’examen de la typologie. On peut visualiser les 10 séquences les plus fréquentes de chaque classe avec <code data-package="TraMineR" data-rdocumentation="seqplot">seqfplot</code>.</p>
<figure>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seqfplot</span>(seq, <span class="dt">group =</span> seq.part, <span class="dt">withlegend =</span> T)</code></pre>
<img src="images/analyses_seq/unnamed-chunk-19-1.png" title="" alt="" width="1050" />
<figcaption>
Séquences les plus fréquentes de chaque classe
</figcaption>
</figure>
<p>On peut aussi visualiser avec <code data-package="TraMineR" data-rdocumentation="seqplot">seqmsplot</code> l’état modal (celui qui correspond au plus grand nombre de séquences de la classe) à chaque âge.</p>
<figure>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seqmsplot</span>(seq, <span class="dt">group =</span> seq.part, <span class="dt">xtlab =</span> <span class="dv">14</span>:<span class="dv">50</span>, <span class="dt">withlegend =</span> T, 
  <span class="dt">title =</span> <span class="st">&quot;classe&quot;</span>)</code></pre>
<img src="images/analyses_seq/unnamed-chunk-20-1.png" title="" alt="" width="1050" />
<figcaption>
Statut modal à chaque âge
</figcaption>
</figure>
<p>On peut également représenter avec <code data-package="TraMineR" data-rdocumentation="seqplot">seqmtplot</code> les durées moyennes passées dans les différents états.</p>
<figure>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seqmtplot</span>(seq, <span class="dt">group =</span> seq.part, <span class="dt">withlegend =</span> T)</code></pre>
<img src="images/analyses_seq/unnamed-chunk-21-1.png" title="" alt="" width="1050" />
<figcaption>
Durée moyenne dans chaque statut
</figcaption>
</figure>
<p>Enfin, l’entropie transversale décrit l’évolution de l’homogénéité de la classe. Pour un âge donné, une entropie proche de 0 signifie que tous les individus de la classe (ou presque) sont dans la même situation. À l’inverse, l’entropie est de 1 si les individus sont dispersés dans toutes les situations. Ce type de graphique produit par <code data-package="TraMineR" data-rdocumentation="seqplot">seqHtplot</code> peut être pratique pour localiser les moments de transition, l’insertion professionnelle ou une mobilité sociale ascendante.</p>
<figure>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seqHtplot</span>(seq, <span class="dt">group =</span> seq.part, <span class="dt">xtlab =</span> <span class="dv">14</span>:<span class="dv">50</span>, <span class="dt">withlegend =</span> T)</code></pre>
<img src="images/analyses_seq/unnamed-chunk-22-1.png" title="" alt="" width="1050" />
<figcaption>
Entropie transversale
</figcaption>
</figure>
<p>On souhaite maintenant connaître la distribution de la typologie (en effectifs et en pourcentages) :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">freq</span>(seq.part)</code></pre>
<pre><code>           n    % val%
classe.1 280 28.0 28.0
classe.2 199 19.9 19.9
classe.3 114 11.4 11.4
classe.4 341 34.1 34.1
classe.5  66  6.6  6.6
NA         0  0.0   NA</code></pre>
<p>On poursuit ensuite la description des classes en croisant la typologie avec la variable <em>generation</em> :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cprop</span>(<span class="kw">table</span>(seq.part, donnees$generation))</code></pre>
<pre><code>          
seq.part   1930-38 1939-45 1946-50 Ensemble
  classe.1  25.6    27.1    31.0    28.0   
  classe.2  20.9    20.0    18.9    19.9   
  classe.3   7.9    13.6    12.9    11.4   
  classe.4  38.2    31.9    32.1    34.1   
  classe.5   7.4     7.5     5.2     6.6   
  Total    100.0   100.0   100.0   100.0   </code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">chisq.test</span>(<span class="kw">table</span>(seq.part, donnees$generation))</code></pre>
<pre><code>
    Pearson&#39;s Chi-squared test

data:  table(seq.part, donnees$generation)
X-squared = 12.032, df = 8, p-value = 0.1498</code></pre>
<p>Le lien entre le fait d’avoir un certain type de carrières et la cohorte de naissance est significatif à un seuil de 15 %. On constate par exemple l’augmentation continue de la proportion de carrières de type « professions intermédiaires » (classe 1) et, entre les deux cohortes les plus anciennes, l’augmentation de la part des carrières de type « employés » (classe 3) et la baisse de la part des carrières de type « cadres » (classe 4).</p>
<p>Bien d’autres analyses sont envisageables : croiser la typologie avec d’autres variables (origine sociale, etc.), construire l’espace des carrières possibles, étudier les interactions entre trajectoires familiales et professionnelles, analyser la variance des dissimilarités entre séquences en fonction de plusieurs variables « explicatives<a href="#fn15" class="footnoteRef" id="fnref15"><sup>15</sup></a> »…</p>
<p>Mais l’exemple proposé est sans doute bien suffisant pour une première introduction !</p>
</div>
<div id="bibliographie" class="section level2">
<h2>Bibliographie</h2>
<ul>
<li>Abbott A., 2001, <em>Time matters. On theory and method</em>, The University of Chicago Press.</li>
<li>Abbott A., Hrycak A., 1990, « Measuring ressemblance in sequence data: an optimal matching analysis of musicians’ careers», <em>American journal of sociology</em>, (96), p.144-185. <a href="http://www.jstor.org/stable/10.2307/2780695" class="uri">http://www.jstor.org/stable/10.2307/2780695</a></li>
<li>Abbott A., Tsay A., 2000, « Sequence analysis and optimal matching methods in sociology: Review and prospect », <em>Sociological methods &amp; research</em>, 29(1), p.3-33. <a href="http://smr.sagepub.com/content/29/1/3.short" class="uri">http://smr.sagepub.com/content/29/1/3.short</a></li>
<li>Gabadinho, A., Ritschard, G., Müller, N.S. &amp; Studer, M., 2011, « Analyzing and visualizing state sequences in R with TraMineR », <em>Journal of Statistical Software</em>, 40(4), p.1-37. <a href="http://archive-ouverte.unige.ch/downloader/vital/pdf/tmp/4hff8pe6uhukqiavvgaluqmjq2/out.pdf" class="uri">http://archive-ouverte.unige.ch/downloader/vital/pdf/tmp/4hff8pe6uhukqiavvgaluqmjq2/out.pdf</a></li>
<li>Grelet Y., 2002, « Des typologies de parcours. Méthodes et usages », <em>Document Génération</em> 92, (20), 47 p. <a href="http://www.cmh.greco.ens.fr/programs/Grelet_typolparc.pdf" class="uri">http://www.cmh.greco.ens.fr/programs/Grelet_typolparc.pdf</a></li>
<li>Lelièvre É., Vivier G., 2001, « Évaluation d’une collecte à la croisée du quantitatif et du qualitatif : l’enquête Biographies et entourage », <em>Population</em>, (6), p.1043-1073. <a href="http://www.persee.fr/web/revues/home/prescript/article/pop_0032-4663_2001_num_56_6_7217" class="uri">http://www.persee.fr/web/revues/home/prescript/article/pop_0032-4663_2001_num_56_6_7217</a></li>
<li>Lemercier C., 2005, « Les carrières des membres des institutions consulaires parisiennes au XIX<sup>e</sup> siècle », <em>Histoire et mesure</em>, XX (1-2), p.59-95. <a href="http://histoiremesure.revues.org/786" class="uri">http://histoiremesure.revues.org/786</a></li>
<li>Lesnard L., 2008, « Off-Scheduling within Dual-Earner Couples: An Unequal and Negative Externality for Family Time », <em>American Journal of Sociology</em>, 114(2), p.447-490. <a href="http://laurent.lesnard.free.fr/IMG/pdf/lesnard_2008_off-scheduling_within_dual-earner_couples-2.pdf" class="uri">http://laurent.lesnard.free.fr/IMG/pdf/lesnard_2008_off-scheduling_within_dual-earner_couples-2.pdf</a></li>
<li>Lesnard L., Saint Pol T. (de), 2006, « Introduction aux Méthodes d’Appariement Optimal (Optimal Matching Analysis) », <em>Bulletin de Méthodologie Sociologique</em>, 90, p.5-25. <a href="http://bms.revues.org/index638.html" class="uri">http://bms.revues.org/index638.html</a></li>
<li>Robette N., 2011, <em>Explorer et décrire les parcours de vie : les typologies de trajectoires</em>, Ceped (Les Clefs pour), 86 p. <a href="http://nicolas.robette.free.fr/Docs/Robette2011_Manuel_TypoTraj.pdf" class="uri">http://nicolas.robette.free.fr/Docs/Robette2011_Manuel_TypoTraj.pdf</a></li>
<li>Robette N., 2012, « Du prosélytisme à la sécularisation. Le processus de diffusion de l’Optimal Matching Analysis », <em>document de travail</em>. <a href="http://nicolas.robette.free.fr/Docs/Proselytisme_secularisation_NRobette.pdf" class="uri">http://nicolas.robette.free.fr/Docs/Proselytisme_secularisation_NRobette.pdf</a></li>
<li>Robette N., Bry X., 2012, « Harpoon or bait? A comparison of various metrics to fish for life course patterns », <em>Bulletin de Méthodologie Sociologique</em>, 116, p.5-24. <a href="http://nicolas.robette.free.fr/Docs/Harpoon_maggot_RobetteBry.pdf" class="uri">http://nicolas.robette.free.fr/Docs/Harpoon_maggot_RobetteBry.pdf</a></li>
<li>Robette N., Thibault N., 2008, « L’analyse exploratoire de trajectoires professionnelles : analyse harmonique qualitative ou appariement optimal ? », <em>Population</em>, 64(3), p.621-646. <a href="http://www.cairn.info/revue-population-2008-4-p-621.htm" class="uri">http://www.cairn.info/revue-population-2008-4-p-621.htm</a></li>
<li>Savage M., 2009, « Contemporary Sociology and the Challenge of Descriptive Assemblage », <em>European Journal of Social Theory</em>, 12(1), p.155-174. <a href="http://est.sagepub.com/content/12/1/155.short" class="uri">http://est.sagepub.com/content/12/1/155.short</a></li>
</ul>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Pour une analyse des conditions sociales de la diffusion de l’analyse de séquences dans le champ des sciences sociales, voir Robette, 2012.<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p><a href="http://home.uchicago.edu/~aabbott/" class="uri">http://home.uchicago.edu/~aabbott/</a><a href="#fnref2">↩</a></p></li>
<li id="fn3"><p><a href="http://lemercier.ouvaton.org/document.php?id=62" class="uri">http://lemercier.ouvaton.org/document.php?id=62</a><a href="#fnref3">↩</a></p></li>
<li id="fn4"><p><a href="http://laurent.lesnard.free.fr/article.php3?id_article=22" class="uri">http://laurent.lesnard.free.fr/article.php3?id_article=22</a><a href="#fnref4">↩</a></p></li>
<li id="fn5"><p>Voir par exemple l’article d’Yvette Grelet (2002).<a href="#fnref5">↩</a></p></li>
<li id="fn6"><p><a href="http://www.ceped.org/?rubrique57" class="uri">http://www.ceped.org/?rubrique57</a><a href="#fnref6">↩</a></p></li>
<li id="fn7"><p><a href="http://nicolas.robette.free.fr/Docs/Robette2011_Manuel_TypoTraj.pdf" class="uri">http://nicolas.robette.free.fr/Docs/Robette2011_Manuel_TypoTraj.pdf</a><a href="#fnref7">↩</a></p></li>
<li id="fn8"><p>Pour une analyse plus poussée de ces données, avec deux méthodes différentes, voir Robette &amp; Thibault, 2008. Pour une présentation de l’enquête, voir Lelièvre &amp; Vivier, 2001.<a href="#fnref8">↩</a></p></li>
<li id="fn9"><p><a href="http://home.fsw.vu.nl/ch.elzinga/" class="uri">http://home.fsw.vu.nl/ch.elzinga/</a><a href="#fnref9">↩</a></p></li>
<li id="fn10"><p><a href="http://steinhaus.stat.ruhr-uni-bochum.de/tda.html" class="uri">http://steinhaus.stat.ruhr-uni-bochum.de/tda.html</a><a href="#fnref10">↩</a></p></li>
<li id="fn11"><p><a href="http://www.stata-journal.com/article.html?article=st0111" class="uri">http://www.stata-journal.com/article.html?article=st0111</a><a href="#fnref11">↩</a></p></li>
<li id="fn12"><p><a href="http://mephisto.unige.ch/traminer/" class="uri">http://mephisto.unige.ch/traminer/</a><a href="#fnref12">↩</a></p></li>
<li id="fn13"><p>Pour une présentation plus détaillée, voir le chapitre sur la <a href="analyses_cah.html">classification ascendante hiérarchique (CAH)</a>.<a href="#fnref13">↩</a></p></li>
<li id="fn14"><p>Le fonctionnement de l’algorithme d’appariement optimal — et notamment le choix des coûts — est décrit dans le chapitre 9 du manuel de <strong class="package">TraMineR</strong> (<a href="http://mephisto.unige.ch/pub/TraMineR/doc/TraMineR-Users-Guide.pdf" class="uri">http://mephisto.unige.ch/pub/TraMineR/doc/TraMineR-Users-Guide.pdf</a>).<a href="#fnref14">↩</a></p></li>
<li id="fn15"><p>L’articulation entre méthodes « descriptives » et méthodes « explicatives » est un prolongement possible de l’analyse de séquences. Cependant, l’analyse de séquences était envisagée par Abbott comme une alternative à la sociologie quantitative <em>mainstream</em>, i.e le « paradigme des variables » et ses hypothèses implicites souvent difficilement tenables (Abbott, 2001). Une bonne description solidement fondée théoriquement vaut bien des « modèles explicatifs » (Savage, 2009).<a href="#fnref15">↩</a></p></li>
</ol>
</div>

</article>
</div>

<div class="col-sm-3" role="complementary">
<nav class="hidden-print hidden-xs" id="nav_sidebar">
</nav>
</div>

</div>

<script>
// manage active state of menu based on current page
$(document).ready(function () {

    // active menu
    href = window.location.pathname;
    href = href.substr(href.lastIndexOf('/') + 1);
    if (href=='') href = 'index.html';
    $('a[href="' + href + '"]').parent().addClass('active');

    // manage active menu header
    if (href.startsWith('pem_'))
      $('a[href="' + 'pem' + '"]').parent().addClass('active');
    else if (href.startsWith('analyses_'))
      $('a[href="' + 'analyses' + '"]').parent().addClass('active');
    else if (href.startsWith('avance_'))
      $('a[href="' + 'avance' + '"]').parent().addClass('active');
    else if (href.startsWith('index_'))
      $('a[href="' + 'index' + '"]').parent().addClass('active');

    // élargir la page d'accueil
    if (href=='index.html') $('.col-sm-9').attr('class','col-sm-12');

    // sidebar
    $("#nav_sidebar").append($("#TOC").html());
    $("#nav_sidebar ul").addClass("nav nav-stacked");
    $("#TOC").addClass("visible-xs-block");
    $('body').scrollspy({
      target: '#nav_sidebar',
      offset: 40
    });

    // Identifier les <pre> fermant
    $('pre').next("*:not(pre)").prev().addClass('last'); // Dernier <pre> de chaque groupe contigu de <pre>
    $('pre').parent().each(function (){
      $(this).children('pre').last().addClass('last');
    }); // Si <pre> est le dernier enfant de son parent

    // Ajout liens rdocumentation et tooltip
    $("code[data-package]").each(function( index ) {
      pack = $(this).attr('data-package');
      if ($(this).attr('data-rdocumentation') !== undefined) {
        rdocumentation = $(this).attr('data-rdocumentation');
        page = ' (' + $(this).attr('data-rdocumentation') + ')';
      } else {
        rdocumentation = $(this).text();
        page = '';
      }
      fonction = $(this).text();
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+pack+'/functions/'+rdocumentation+'">');
      $(this).attr('data-toggle','tooltip');
      $(this).attr('data-placement','top');
      $(this).attr('title','package : ' + pack + page);
      $('[data-toggle="tooltip"]').tooltip();
    });

    $("strong.package").each(function( index ) {
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+$(this).text()+'">');
    });

    // Figures
    $("figure").each(function( index ) {
      if ($(this).children("figcaption").length > 0)
        $(this).children("figcaption:first").prepend('<span class="figure-number">Figure '+(index+1)+'.</span> ');
      else
        $(this).append($("<figcaption>").append('<span class="figure-number">Figure '+(index+1)+'</span>'));
    });

    // Colorbox
    jQuery('div img').colorbox({
      maxWidth: '90%',
      maxHeight: '90%',
      rel: 'figures',
      current: "{current}/{total}",
      href: function(){
        return $(this).attr('src');
      },
      title: function(){
        return $(this).attr('alt');
      }
    });
    jQuery('div img').css('cursor', 'pointer');
    jQuery('figure img').colorbox({
      maxWidth: '90%',
      maxHeight: '90%',
      rel: 'figures',
      current: "{current}/{total}",
      href: function(){
        return $(this).attr('src');
      },
      title: function(){
        return $(this).parent().children("figcaption").text();
      }
    });
    jQuery('figure img').css('cursor', 'pointer');

    // ZeroClipboard
    $('pre.r').parent().each(function(){
      $(this).children('pre.r').first().before('<div class="zero-clipboard hidden-print hidden-xs"><button class="btn-clipboard">Copier</button></div>');
    }); // Il peut arriver que le pre ne soit pas précédé (cf. figures)
    $('*:not(pre):not(.zero-clipboard) + pre.r').before('<div class="zero-clipboard hidden-print hidden-xs"><button class="btn-clipboard">Copier</button></div>');
    $('pre.last').after(function() {
      if ($(this).hasClass("r")) res = $(this).text(); else res = "";
      $(this).prevUntil('*:not(pre)','pre.r').each(function() {
        res = $(this).text() + '\n' + res;
      });
      return '<div class="clipboard">' + res + '</div>';
    });
    $('.zero-clipboard').each(function(index){
      $(this).children('.btn-clipboard').attr('data-clipboard-target','clipboard_'+index);
      $(this).nextAll("div.clipboard").first().attr('id','clipboard_'+index);
    });
    var client = new ZeroClipboard( $(".btn-clipboard") );
    client.on( "ready", function( readyEvent ) {
      // alert( "ZeroClipboard SWF is ready!" );
      client.on( "aftercopy", function( event ) {
        // `this` === `client`
        // `event.target` === the element that was clicked
        //event.target.style.display = "none";
        $(event.target).parent().before('<div class="alert alert-success"><a href="#" class="close" data-dismiss="alert">&times;</a>Le code <strong>R</strong> de l’exemple a été copié dans le presse-papier.</div>');
      } );
    } );

});
</script>

<!-- disqus -->
<div class="row">
  <div id="disqus_thread" class="col-sm-9" role="complementary"></div>
</div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'analyse-r'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Veuillez activer JavaScript pour voir les <a href="http://disqus.com/?ref_noscript">les commentaires gérés avec Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">Les commentaires sont hébergés par <span class="logo-disqus">Disqus</span>.</a>

</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>


</body>
</html>
