<!DOCTYPE html>

<html lang="fr" xml:lang="fr">

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Facteurs et vecteurs labellis√©s</title>

<script src="libs/header-attrs-2.19/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/paper.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="libs/navigation-1.1/tabsets.js"></script>
<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<meta name="robots" content="index, follow">
<link rel="stylesheet" href="./include/analyse-R.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
<script type="text/javascript" src="./libs/bigfoot-2.1.4/bigfoot.min.js"></script>
<link rel="stylesheet" href="./libs/bigfoot-2.1.4/bigfoot-number.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<link rel="stylesheet" href="./libs/colorbox-1.6.1/colorbox.css" />
<script type="text/javascript" src="./libs/colorbox-1.6.1/jquery.colorbox-min.js"></script>
<!--- favicon --->
<link rel="apple-touch-icon" sizes="57x57" href="./images/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="./images/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="./images/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="./images/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="./images/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="./images/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="./images/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="./images/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="./images/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="./images/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="./images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="./images/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="./images/favicon/favicon-16x16.png">
<link rel="manifest" href="./images/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="./images/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-121727005-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-121727005-1');
</script>


<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
      .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">



<nav>
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href=".">analyse-R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="manipuler" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Manipuler <span class="caret"></span></a>
          <ul class="dropdown-menu multi-column columns-3" role="menu" id="menu_manipuler">
            <div class="row">
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Prise en main</li>
                  <li><a href="presentation-et-philosophie.html">Pr√©sentation et Philosophie</a></li>
                  <li><a href="installation-de-R-et-RStudio.html">Installation de <strong>R</strong> et <strong>RStudio</strong></a></li>
                  <li><a href="premier-contact.html">Premier contact</a></li>
                  <li><a href="premier-travail-avec-les-donnees.html">Premier travail avec des donn√©es</a></li>
                  <li><a href="extensions.html">Extensions (installation, mise √† jour)</a></li>
                  <li><a href="introduction-au-tidyverse.html">Introduction au <strong>tidyverse</strong></a></li>
                  <li><a href="vecteurs-indexation-et-assignation.html">Vecteurs, indexation et assignation</a></li>
                  <li><a href="listes-et-tableaux-de-donnees.html">Listes et Tableaux de donn√©es</a></li>
                  <li><a href="facteurs-et-vecteurs-labellises.html">Facteurs et vecteurs labellis√©s</a></li>
                  <li><a href="organiser-ses-fichiers.html">Organiser ses fichiers</a></li>
                  <li><a href="import-de-donnees.html">Import de donn√©es</a></li>
                  <li><a href="ou-trouver-de-l-aide.html">O√π trouver de l'aide¬†?</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Manipulation de donn√©es</li>
  		            <li><a href="visualiser-ses-donnees.html">Visualiser ses donn√©es</a></li>
  		            <li><a href="recodage.html">Recodage de variables</a></li>
                  <li><a href="manipuler-les-donnees-avec-dplyr.html">Manipuler les donn√©es avec <strong>dplyr</strong></a></li>
                  <li><a href="manipulations-avancees-avec-data-table.html">Manipulations avanc√©es avec <strong>data.table</strong></a></li>
                  <li><a href="tris.html">Tris</a></li>
                  <li><a href="sous-ensembles.html">Sous-ensembles</a></li>
                  <li><a href="fusion-de-tables.html">Fusion de tables</a></li>
                  <li><a href="gestion-des-dates.html">Gestion des dates</a></li>
                  <li><a href="fonctions-a-fenetre.html">Fonctions √† fen√™tre</a></li>
                  <li><a href="manipuler-du-texte.html">Manipuler du texte avec <strong>stringr</strong></a></li>
                  <li><a href="reorganiser-ses-donnees-avec-tidyr.html">R√©organiser ses donn√©es avec <strong>tidyr</strong></a></li>
                  <!--<li><a href="scraping.html">Scraping</a></li>-->
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
                  <li class="dropdown-header">Exporter</li>
                  <li><a href="export-de-donnees.html">Export de donn√©es</a></li>
                  <li><a href="export-de-graphiques.html">Export de graphiques</a></li>
  	            </ul>
              </div>
            </div>
          </ul>
        </li>
        <li class="dropdown">
          <a href="analyser" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Analyser <span class="caret"></span></a>
          <ul class="dropdown-menu multi-column columns-3" role="menu" id="menu_analyser">
            <div class="row">
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Statistiques introductives</li>
                  <li><a href="statistique-univariee.html">Statistique univari√©e</a></li>
                  <li><a href="statistique-bivariee.html">Statistique bivari√©e</a></li>
                  <li><a href="intro-ggplot2.html">Introduction √† <strong>ggplot2</strong>, la grammaire des graphiques</a></li>
                  <li><a href="graphiques-bivaries-ggplot2.html">Graphiques univari√©s et bivari√©s avec <strong>ggplot2</strong></a></li>
                  <li><a href="donnees-ponderees.html">Donn√©es pond√©r√©es</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Statistiques interm√©diaires</li>
  		            <li><a href="intervalles-de-confiance.html">Intervalles de confiance</a></li>
                  <li><a href="comparaisons-moyennes-et-proportions.html">Comparaisons (moyennes et proportions)</a></li>
                  <li><a href="definir-un-plan-d-echantillonnage-complexe.html">D√©finir un plan d'√©chantillonnage complexe avec <strong>survey</strong></a></li>
                  <li><a href="regression-lineaire.html">R√©gression lin√©aire</a></li>
                  <li><a href="regression-logistique.html">R√©gression logistique binaire, multinomiale et ordinale</a></li>
                  <li><a href="analyse-des-correspondances-multiples.html">Analyse des correspondances multiples (ACM)</a></li>
                  <li><a href="classification-ascendante-hierarchique.html">Classification ascendante hi√©rarchique (CAH)</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
                  <li class="dropdown-header">Statistiques avanc√©es</li>
                  <li><a href="gtsummary.html">Tableaux statistiques avanc√©s avec <strong>gtsummary</strong></a></li>
                  <li><a href="effets-d-interaction.html">Effets d'interaction dans un mod√®le</a></li>
                  <li><a href="multicolinearite.html">Multicolin√©arit√© dans la r√©gression</a></li>
                  <li><a href="modeles.html">Quel type de mod√®les choisir¬†?</a></li>
                  <li><a href="analyse-de-survie.html">Analyse de survie</a></li>
                  <li><a href="analyse-de-sequences.html">Analyse de s√©quences</a></li>
                  <!--<li><a href="modeles-a-effets-aleatoires.html">Mod√®les √† effets al√©atoires (mod√®les mixtes et GEE)</a></li>-->
                  <li><a href="trajectoires-de-soins.html">Trajectoires de soins&nbsp;: un exemple de donn√©es longitudinales</a></li>
                  <li><a href="analyse-de-reseaux.html">Analyse de r√©seaux</a></li>
                  <li><a href="analyse-spatiale.html">Analyse spatiale</a></li>
                  <li><a href="analyse-textuelle.html">Analyse textuelle</a></li>
  	            </ul>
              </div>
            </div>
          </ul>
        </li>
        <li class="dropdown">
          <a href="approfondir" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Approfondir <span class="caret"></span></a>
          <ul class="dropdown-menu multi-column columns-3" role="menu" id="menu_approfondir">
            <div class="row">
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Graphiques</li>
                  <li><a href="ggplot2.html"><strong>ggplot2</strong> et la grammaire des graphiques</a></li>
                  <li><a href="etendre-ggplot2.html">√âtendre <strong>ggplot2</strong></a></li>
                  <li><a href="combiner-plusieurs-graphiques.html">Combiner plusieurs graphiques</a></li>
                  <li><a href="exemples-graphiques-avances.html">Exemples de graphiques avanc√©s</a></li>
                  <li><a href="graphiques-interactifs.html">Graphiques interactifs</a></li>
                  <li><a href="lattice-graphiques-et-formules.html"><strong>lattice</strong>¬†: graphiques et formules</a></li>
                  <li><a href="cartes.html">Cartes</a></li>
                  <li><a href="autres-extensions-graphiques.html">Autres extensions graphiques</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Programmation</li>
  		            <li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
                  <li><a href="formules.html">Formules</a></li>
                  <li><a href="structures-conditionnelles.html">Structures conditionnelles</a></li>
                  <li><a href="vectorisation.html">Vectorisation (dont <strong>purrr</strong>)</a></li>
                  <li><a href="expressions-regulieres.html">Expressions r√©guli√®res</a></li>
                  <!--<li class="dev"><a href="ecrire-ses-propres-fonctions.html">√âcrire ses propres fonctions</a></li>-->
                  <li><a href="rmarkdown-les-rapports-automatises.html"><strong>R Markdown</strong>¬†: les rapports automatis√©s</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
                  <li class="dropdown-header">Divers</li>
                  <li><a href="formater-nombres.html">Mettre en forme des nombres avec <strong>scales</strong></a></li>
                  <li><a href="couleurs.html">Couleurs et Palettes</a></li>
                  <li><a href="annotations-mathematiques.html">Annotations math√©matiques</a></li>
                  <li><a href="calculer-un-age.html">Calculer un √¢ge</a></li>
                  <li><a href="diagramme-de-lexis.html">Diagramme de Lexis</a></li>
  	            </ul>
              </div>
            </div>
          </ul>
        </li>
        <li class="dropdown">
          <a href="index" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Index <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu" id="menu_naviguer">
            <li><a href="index-des-concepts.html">Index des concepts</a></li>
            <li><a href="index-des-fonctions.html">Index des fonctions</a></li>
            <li><a href="index-des-extensions.html">Index des extensions</a></li>
          </ul>
        </li>
        <li><a href="analyse-R.pdf">PDF</a></li>
        <li><a href="https://larmarange.github.io/guide-R/">guide-R</a></li>
        <li><a href="https://larmarange.github.io/webin-R/">webin-R</a></li>
        <li><a href="https://www.youtube.com/c/webinR"><i class="fa fa-youtube" aria-hidden="true"></i></a></li>
        <!--<li><a href="https://github.com/larmarange/analyse-R">GitHub</a></li>-->
      </ul>
    <form id="rechercher" class="navbar-form navbar-right" role="search" style="padding-top: 5px;" method="get" action="https://duckduckgo.com/">
      <div class="form-group">
        <input name="q" type="text" class="form-control input-sm" placeholder="Rechercher">
      </div>
      <button type="submit" class="btn btn-default btn-sm" name="Rechercher">
        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
      </button>
    </form>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
</nav>

<div class="row">

<div class="visible-lg">
<a href="https://github.com/larmarange/analyse-R"><img style="position: absolute; top: 60px; left: 40px; border: 0;" src="images/fork_me.png" alt="Contribuer sur GitHub"></a>
</div>

<div class="col-sm-9" role="main">
<article>

<div id="header">



<h1 class="title toc-ignore">Facteurs et vecteurs labellis√©s</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#facteurs" id="toc-facteurs">Facteurs</a></li>
<li><a href="#labelled" id="toc-labelled">Vecteurs labellis√©s</a>
<ul>
<li><a href="#les-√©tiquettes-de-variable" id="toc-les-√©tiquettes-de-variable">Les √©tiquettes de variable</a></li>
<li><a href="#les-√©tiquettes-de-valeur" id="toc-les-√©tiquettes-de-valeur">Les √©tiquettes de valeur</a></li>
<li><a href="#assignation-et-condition" id="toc-assignation-et-condition">Assignation et condition</a></li>
<li><a href="#quelques-fonctions-suppl√©mentaires" id="toc-quelques-fonctions-suppl√©mentaires">Quelques fonctions suppl√©mentaires</a></li>
</ul></li>
</ul>
</div>

<div class="webin-R">
<p>Ce chapitre est √©voqu√© dans le webin-R #02 (les bases du langage R) sur <a href="https://youtu.be/Eh8piunoqQc">YouTube</a>.</p>
</div>
<p>Dans le chapire sur les <a href="vecteurs-indexation-et-assignation.html">vecteurs</a>, nous avons abord√© les types fondementaux de vecteurs (num√©riques, textuels, logiques). Mais il existe de nombreux autres classes de vecteurs afin de repr√©senter des donn√©es diverses (comme les dates). Dans ce chapitre, nous nous int√©ressons plus particuli√®rement aux <dfn data-index="variable cat√©gorielle">variables cat√©gorielles</dfn><dfn data-index="cat√©gorielle, variable"></dfn>.</p>
<p>Les <dfn data-index="facteur">facteurs</dfn> (ou <dfn data-index="factor" lang="en">factors</dfn> an anglais) sont un type de vecteur g√©r√© nativement par <strong>R</strong> et utilis√©s dans de nombreux domaines (mod√®les statistiques, repr√©sentations graphiques, ‚Ä¶).</p>
<p>Les facteurs sont souvent mis en regard des <dfn data-index="donn√©e labeliss√©e">donn√©es labellis√©es</dfn><dfn data-index="labellis√©e, donn√©e"></dfn><dfn data-index="labelled data"></dfn> telles qu‚Äôelles sont utilis√©es dans d‚Äôautres logiciels comme <strong>SPSS</strong> ou <strong>Stata</strong>. Or, les limites propres aux facteurs font qu‚Äôils ne sont pas adpat√©s pour rendre compte des diff√©rents usages qui sont fait des donn√©es labellis√©es. Plusieurs extensions (telles que <code class="pkg">memisc</code> ou <code class="pkg">Hmisc</code>) ont propos√© leur propre solution qui, bien qu‚Äôelles apportaient un plus pour la gestion des donn√©es labellis√©es, ne permettaient pas que celles-ci soient utilis√©es en dehors de ces extensions ou des extensions compatibles. Nous aborderons ici une nouvelle classe de vecteurs, la classe <code data-pkg="labelled">labelled</code>, introduite par l‚Äôextension <code class="pkg">haven</code> (que nous aborderons dans le cadre de l‚Äô<a
href="import-de-donnees.html">import de donn√©es</a>) et qui peut √™tre manipul√©e avec l‚Äôextension homonyme <code class="pkg">labelled</code>.</p>
<div id="facteurs" class="section level2 hasAnchor">
<h2 class="hasAnchor">Facteurs<a href="#facteurs" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Dans ce qui suit on travaillera sur le jeu de donn√©es tir√© de l‚Äôenqu√™te <em>Histoire de vie</em>, fourni avec l‚Äôextension <code class="pkg">questionr</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(questionr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(hdv2003)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> hdv2003</span></code></pre></div>
<p>Jetons un ≈ìil √† la liste des variables de <code>d</code>¬†:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(d)</span></code></pre></div>
<pre><code>&#39;data.frame&#39;:   2000 obs. of  20 variables:
 $ id           : int  1 2 3 4 5 6 7 8 9 10 ...
 $ age          : int  28 23 59 34 71 35 60 47 20 28 ...
 $ sexe         : Factor w/ 2 levels &quot;Homme&quot;,&quot;Femme&quot;: 2 2 1 1 2 2 2 1 2 1 ...
 $ nivetud      : Factor w/ 8 levels &quot;N&#39;a jamais fait d&#39;etudes&quot;,..: 8 NA 3 8 3 6 3 6 NA 7 ...
 $ poids        : num  2634 9738 3994 5732 4329 ...
 $ occup        : Factor w/ 7 levels &quot;Exerce une profession&quot;,..: 1 3 1 1 4 1 6 1 3 1 ...
 $ qualif       : Factor w/ 7 levels &quot;Ouvrier specialise&quot;,..: 6 NA 3 3 6 6 2 2 NA 7 ...
 $ freres.soeurs: int  8 2 2 1 0 5 1 5 4 2 ...
 $ clso         : Factor w/ 3 levels &quot;Oui&quot;,&quot;Non&quot;,&quot;Ne sait pas&quot;: 1 1 2 2 1 2 1 2 1 2 ...
 $ relig        : Factor w/ 6 levels &quot;Pratiquant regulier&quot;,..: 4 4 4 3 1 4 3 4 3 2 ...
 $ trav.imp     : Factor w/ 4 levels &quot;Le plus important&quot;,..: 4 NA 2 3 NA 1 NA 4 NA 3 ...
 $ trav.satisf  : Factor w/ 3 levels &quot;Satisfaction&quot;,..: 2 NA 3 1 NA 3 NA 2 NA 1 ...
 $ hard.rock    : Factor w/ 2 levels &quot;Non&quot;,&quot;Oui&quot;: 1 1 1 1 1 1 1 1 1 1 ...
 $ lecture.bd   : Factor w/ 2 levels &quot;Non&quot;,&quot;Oui&quot;: 1 1 1 1 1 1 1 1 1 1 ...
 $ peche.chasse : Factor w/ 2 levels &quot;Non&quot;,&quot;Oui&quot;: 1 1 1 1 1 1 2 2 1 1 ...
 $ cuisine      : Factor w/ 2 levels &quot;Non&quot;,&quot;Oui&quot;: 2 1 1 2 1 1 2 2 1 1 ...
 $ bricol       : Factor w/ 2 levels &quot;Non&quot;,&quot;Oui&quot;: 1 1 1 2 1 1 1 2 1 1 ...
 $ cinema       : Factor w/ 2 levels &quot;Non&quot;,&quot;Oui&quot;: 1 2 1 2 1 2 1 1 2 2 ...
 $ sport        : Factor w/ 2 levels &quot;Non&quot;,&quot;Oui&quot;: 1 2 2 2 1 2 1 1 1 2 ...
 $ heures.tv    : num  0 1 0 2 3 2 2.9 1 2 2 ...</code></pre>
<p>Nous voyons que de nombreuses variables de ce tableau de donn√©es, telles que <var>sexe</var> ou <var>nivetud</var>, sont du type facteur.</p>
<p>Les facteurs prennent leurs valeurs dans un ensemble de modalit√©s pr√©d√©finies et ne peuvent en prendre d‚Äôautres. La liste des valeurs possibles est donn√©e par la fonction <code data-pkg="base">levels</code>¬†:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(d<span class="sc">$</span>sexe)</span></code></pre></div>
<pre><code>[1] &quot;Homme&quot; &quot;Femme&quot;</code></pre>
<p>Si on veut modifier la valeur du sexe du premier individu de notre tableau de donn√©es avec une valeur non autoris√©e, on obient un message d‚Äôerreur et une valeur manquante est utilis√©e √† la place¬†:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>sexe[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">&quot;Chihuahua&quot;</span></span></code></pre></div>
<pre><code>Warning in `[&lt;-.factor`(`*tmp*`, 1, value = structure(c(NA,
2L, 1L, 1L, : niveau de facteur incorrect, NAs g√©n√©r√©s</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>sexe[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>[1] &lt;NA&gt;
Levels: Homme Femme</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>sexe[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">&quot;Homme&quot;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>sexe[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>[1] Homme
Levels: Homme Femme</code></pre>
<p>On peut tr√®s facilement cr√©er un facteur √† partir d‚Äôune variable textuelle avec la fonction <code data-pkg="base">factor</code>¬†:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;H&quot;</span>, <span class="st">&quot;H&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;H&quot;</span>))</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>v</span></code></pre></div>
<pre><code>[1] H H F H
Levels: F H</code></pre>
<p>Par d√©faut, les niveaux d‚Äôun facteur nouvellement cr√©√©s sont l‚Äôensemble des valeurs de la variable textuelle, ordonn√©es par ordre alphab√©tique. Cette ordre des niveaux est utilis√© √† chaque fois qu‚Äôon utilise des fonctions comme <code data-pkg="base">table</code>, par exemple¬†:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(v)</span></code></pre></div>
<pre><code>v
F H 
1 3 </code></pre>
<p>On peut modifier cet ordre au moment de la cr√©ation du facteur en utilisant l‚Äôoption <code>levels</code>¬†:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;H&quot;</span>, <span class="st">&quot;H&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;H&quot;</span>), <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;H&quot;</span>, <span class="st">&quot;F&quot;</span>))</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(v)</span></code></pre></div>
<pre><code>v
H F 
3 1 </code></pre>
<p>On peut aussi modifier l‚Äôordre des niveaux d‚Äôune variable d√©j√† existante¬†:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>qualif <span class="ot">&lt;-</span> <span class="fu">factor</span>(d<span class="sc">$</span>qualif, <span class="at">levels =</span> <span class="fu">c</span>(</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Ouvrier specialise&quot;</span>, <span class="st">&quot;Ouvrier qualifie&quot;</span>,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Employe&quot;</span>, <span class="st">&quot;Technicien&quot;</span>, <span class="st">&quot;Profession intermediaire&quot;</span>, <span class="st">&quot;Cadre&quot;</span>, <span class="st">&quot;Autre&quot;</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(d<span class="sc">$</span>qualif)</span></code></pre></div>
<pre><code>
      Ouvrier specialise         Ouvrier qualifie 
                     203                      292 
                 Employe               Technicien 
                     594                       86 
Profession intermediaire                    Cadre 
                     160                      260 
                   Autre 
                      58 </code></pre>
<div class="note">
<p>L‚Äôextension <code class="pkg">questionr</code> propose une <em>interface interactive</em> pour le r√©ordonnancement des niveaux d‚Äôun facteur. Cette fonction, nomm√©e <code data-pkg="questionr">iorder</code>, vous permet de r√©ordonner les modalit√©s de mani√®re graphique et de g√©n√©rer le code <strong>R</strong> correspondant.</p>
<p>Dans l‚Äôexemple pr√©c√©dant, si vous ex√©cutez¬†:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iorder</span>(d, <span class="st">&quot;qualif&quot;</span>)</span></code></pre></div>
<p><strong>RStudio</strong> devrait ouvrir une fen√™tre semblable √† celle de la figure ci-dessous.</p>
<div class="figure">
<img src="images/capture_iorder.png" alt="" />
<p class="caption">Interface de la commande iorder</p>
</div>
<p>Vous pouvez alors d√©placer les modalit√©s par glisser-d√©poser, v√©rifier le r√©sultat dans l‚Äôonglet <em>V√©rification</em> et, une fois le r√©sultat satisfaisant, r√©cup√©rer le code g√©n√©r√© pour l‚Äôinclure dans votre script.</p>
</div>
<p>On peut √©galement modifier les niveaux eux-m√™mes. Imaginons que l‚Äôon souhaite cr√©er une nouvelle variable <em>qualif.abr</em> contenant les noms abr√©g√©s des cat√©gories socioprofessionnelles de <em>qualif</em>. On peut alors proc√©der comme suit¬†:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>qualif.abr <span class="ot">&lt;-</span> <span class="fu">factor</span>(d<span class="sc">$</span>qualif,</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> <span class="fu">c</span>(</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Ouvrier specialise&quot;</span>, <span class="st">&quot;Ouvrier qualifie&quot;</span>,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Employe&quot;</span>, <span class="st">&quot;Technicien&quot;</span>, <span class="st">&quot;Profession intermediaire&quot;</span>, <span class="st">&quot;Cadre&quot;</span>, <span class="st">&quot;Autre&quot;</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;OS&quot;</span>, <span class="st">&quot;OQ&quot;</span>, <span class="st">&quot;Empl&quot;</span>, <span class="st">&quot;Tech&quot;</span>, <span class="st">&quot;Interm&quot;</span>, <span class="st">&quot;Cadre&quot;</span>, <span class="st">&quot;Autre&quot;</span>)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(d<span class="sc">$</span>qualif.abr)</span></code></pre></div>
<pre><code>
    OS     OQ   Empl   Tech Interm  Cadre  Autre 
   203    292    594     86    160    260     58 </code></pre>
<p>Dans ce qui pr√©c√®de, le param√®tre <code>levels</code> de <code data-pkg="base">factor</code> permet de sp√©cifier quels sont les niveaux retenus dans le facteur r√©sultat, ainsi que leur ordre. Le param√®tre <code>labels</code>, lui, permet de modifier les noms de ces niveaux dans le facteur r√©sultat. Il est donc capital d‚Äôindiquer les noms de <code>labels</code> exactement dans le m√™me ordre que les niveaux de <code>levels</code>. Pour s‚Äôassurer de ne pas avoir commis d‚Äôerreur, il est recommand√© d‚Äôeffectuer un tableau crois√© entre l‚Äôancien et le nouveau facteur¬†:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(d<span class="sc">$</span>qualif, d<span class="sc">$</span>qualif.abr)</span></code></pre></div>
<pre><code>                          
                            OS  OQ Empl Tech Interm Cadre
  Ouvrier specialise       203   0    0    0      0     0
  Ouvrier qualifie           0 292    0    0      0     0
  Employe                    0   0  594    0      0     0
  Technicien                 0   0    0   86      0     0
  Profession intermediaire   0   0    0    0    160     0
  Cadre                      0   0    0    0      0   260
  Autre                      0   0    0    0      0     0
                          
                           Autre
  Ouvrier specialise           0
  Ouvrier qualifie             0
  Employe                      0
  Technicien                   0
  Profession intermediaire     0
  Cadre                        0
  Autre                       58</code></pre>
<p>On a donc ici un premier moyen d‚Äôeffectuer un recodage des modalit√©s d‚Äôune variable de type facteur. D‚Äôautres m√©thodes existent, que nous aborderons dans le chapitre <a href="recodage.html">Recodage</a>.</p>
<p>√Ä noter que par d√©faut, les valeurs manquantes ne sont pas consid√©r√©es comme un niveau de facteur. On peut cependant les transformer en niveau en utilisant la fonction <code data-pkg="base" data-rdoc="factor">addNA</code>. Ceci signifie cependant qu‚Äôelle ne seront plus consid√©r√©es comme manquantes par <strong>R</strong> mais comme une modalit√© √† part enti√®re¬†:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(d<span class="sc">$</span>trav.satisf)</span></code></pre></div>
<pre><code>  Satisfaction Insatisfaction      Equilibre           NA&#39;s 
           480            117            451            952 </code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">addNA</span>(d<span class="sc">$</span>trav.satisf))</span></code></pre></div>
<pre><code>  Satisfaction Insatisfaction      Equilibre           &lt;NA&gt; 
           480            117            451            952 </code></pre>
<p>La fonction <code data-pkg="questionr">addNAstr</code> de l‚Äôextension <code class="pkg">questionr</code> fait la m√™me chose mais permet de sp√©cifier l‚Äô√©tiquette de la modalit√© des valeurs manquantes.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(questionr)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">addNAstr</span>(d<span class="sc">$</span>trav.satisf, <span class="st">&quot;Manquant&quot;</span>))</span></code></pre></div>
<pre><code>  Satisfaction Insatisfaction      Equilibre       Manquant 
           480            117            451            952 </code></pre>
</div>
<div id="labelled" class="section level2 hasAnchor">
<h2 class="hasAnchor">Vecteurs labellis√©s<a href="#labelled" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><dfn data-index="vecteur labellis√©"></dfn><dfn data-index="labellis√©, vecteur"></dfn>Nous abordons ici une nouvelle classe de vecteurs, la classe <code data-pkg="labelled" data-rdoc="labelled">haven_labelled</code>, introduite r√©cemment par l‚Äôextension <code class="pkg">haven</code> (que nous aborderons dans le cadre de l‚Äô<a href="import-de-donnees.html">import de donn√©es</a>) et qui peut √™tre manipul√©e avec l‚Äôextension homonyme <code class="pkg">labelled</code>.</p>
<p>Pour cette section, nous allons utiliser d‚Äôautres donn√©es d‚Äôexemple, √©galement disponibles dans l‚Äôextension <code class="pkg">questionr</code>. Il s‚Äôagit d‚Äôun ensemble de trois tableaux de donn√©es (<code>menages</code>, <code>femmes</code> et <code>enfants</code>) contenant les donn√©es d‚Äôune enqu√™te de f√©condit√©. Commen√ßons par les charger en m√©moire¬†:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(questionr)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(fecondite)</span></code></pre></div>
<p>Pour ailleurs, nous allons avoir besoin de l‚Äôextension <code class="pkg">labelled</code> qui permet de manipuler ces donn√©es labellis√©es.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(labelled)</span></code></pre></div>
<div id="les-√©tiquettes-de-variable" class="section level3 hasAnchor">
<h3 class="hasAnchor">Les √©tiquettes de variable<a href="#les-√©tiquettes-de-variable" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Les <dfn data-index="√©tiquette de variable">√©tiquettes de variable</dfn><dfn data-index="variable, √©tiquette"></dfn> permettent de donner un nom long, plus explicite, aux diff√©rentes colonnes d‚Äôun tableau de donn√©es (ou encore directement √† un vecteur autonome).</p>
<p>La visonneuse de donn√©es de <strong>RStudio</strong> sait reconna√Ætre et afficher ces √©tiquettes de variable lorsqu‚Äôelles existent. Essayez par exemple la commande suivante¬†:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(femmes)</span></code></pre></div>
<p>Les fonctions <code data-pkg="labelled">look_for</code> de l‚Äôextension <code class="pkg">laballed</code> et <code data-pkg="questionr">describe</code> de l‚Äôextension <code class="pkg">questionr</code> affichent √©galement les √©tiquettes de variables lorsqu‚Äôelles existent.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">look_for</span>(femmes, <span class="st">&quot;r√©s&quot;</span>)</span></code></pre></div>
<pre><code>pos   variable label               col_type values    
&lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;               &lt;chr&gt;    &lt;chr&gt;     
7     milieu   Milieu de r√©sidence dbl+lbl  [1] urbain
‚Äã      ‚Äã         ‚Äã                    ‚Äã         [2] rural 
8     region   R√©gion de r√©sidence dbl+lbl  [1] Nord  
‚Äã      ‚Äã         ‚Äã                    ‚Äã         [2] Est   
‚Äã      ‚Äã         ‚Äã                    ‚Äã         [3] Sud   
‚Äã      ‚Äã         ‚Äã                    ‚Äã         [4] Ouest</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(femmes<span class="sc">$</span>id_femme)</span></code></pre></div>
<pre><code>[2000 obs.] Identifiant de l&#39;enqu√™t√©e
numeric: 391 1643 85 881 1981 1072 1978 1607 738 1656 ...
min: 1 - max: 2000 - NAs: 0 (0%) - 2000 unique values</code></pre>
<p>Pour manipuler les √©tiquettes de variable, il suffit d‚Äôutiliser la fonction <code data-pkg="labelled">var_label</code> de l‚Äôextension <code class="pkg">labelled</code>.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(femmes<span class="sc">$</span>id_menage)</span></code></pre></div>
<pre><code>[1] &quot;Identifiant du m√©nage&quot;</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(femmes<span class="sc">$</span>id_menage) <span class="ot">&lt;-</span> <span class="st">&quot;ID du m√©nage auquel elle appartient&quot;</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(femmes<span class="sc">$</span>id_menage)</span></code></pre></div>
<pre><code>[1] &quot;ID du m√©nage auquel elle appartient&quot;</code></pre>
<p>On utilisera la valeur <code>NULL</code> pour supprimer une √©tiquette¬†:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">1</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(v)</span></code></pre></div>
<pre><code>NULL</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(v) <span class="ot">&lt;-</span> <span class="st">&quot;Ma variable&quot;</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(v)</span></code></pre></div>
<pre><code>[1] &quot;Ma variable&quot;</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(v) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(v)</span></code></pre></div>
<pre><code>NULL</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(v) <span class="ot">&lt;-</span> <span class="st">&quot;Une autre √©tiquette&quot;</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">var_label</span>(v)</span></code></pre></div>
<pre><code>[1] &quot;Une autre √©tiquette&quot;</code></pre>
<p>Le fait d‚Äôajouter une √©tiquette √† un vecteur ne modifie en rien son type. Regardons la structure de notre objet <code>v</code>¬†:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(v)</span></code></pre></div>
<pre><code> num [1:5] 1 5 2 4 1
 - attr(*, &quot;label&quot;)= chr &quot;Une autre √©tiquette&quot;</code></pre>
<p>Que voit-on¬†? Notre vecteur poss√®de maintenant ce qu‚Äôon appelle un <dfn>attribut</dfn>, c‚Äôest-√†-dire une information suppl√©mentaire qui lui est attach√©e. Un objet peut avoir plusieurs attributs. Ici, notre √©tiquette de variable est strock√© dans un attribut nomm√© <code>"label"</code>. Cela ne modifie en rien sa nature. Il ne s‚Äôagit que d‚Äôinformation en plus. Toutes les fonctions ne tiennent pas compte des √©tiquettes de variable. Peu importe¬†! La pr√©sence d‚Äôun attribut ne les emp√™chera de fonctionner. De m√™me, m√™me si l‚Äôextension <code class="pkg">labelled</code> n‚Äôest pas install√©e sur votre machine, vous pourrez toujours manipuler vos donn√©es comme si de rien n‚Äô√©tait.</p>
<p>On peut associer une √©tiquette de variable √† n‚Äôimporte quel type de variable, qu‚Äôelle soit num√©rique, textuelle, un facteur ou encore des dates.</p>
</div>
<div id="les-√©tiquettes-de-valeur" class="section level3 hasAnchor">
<h3 class="hasAnchor">Les √©tiquettes de valeur<a href="#les-√©tiquettes-de-valeur" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Les <dfn data-index="√©tiquette de valeur">√©tiquettes de valeur</dfn><dfn data-index="valeur, √©tiquette"></dfn> consistent √† attribuer une √©tiquette textuelle √† certaines valeurs d‚Äôun vecteur. Elles ne peuvent s‚Äôappliquer qu‚Äôaux vecteurs num√©riques ou textuels.</p>
<p>Lorsqu‚Äôun vecteur poss√®de des √©tiquettes de valeur, sa classe change et devient <code data-pkg="labelled">labelled</code>. Regardons d√©j√† quelques exemples. Tout d‚Äôabord, jetons un apercu au contenu de l‚Äôobjet <code>femmes</code> grace √† la fonction <code data-pkg="dplyr">glimpse</code> de l‚Äôextension <code class="pkg">dplyr</code>.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(femmes)</span></code></pre></div>
<pre><code>Rows: 2,000
Columns: 17
$ id_femme       &lt;dbl&gt; 391, 1643, 85, 881, 1981, 1072, 197‚Ä¶
$ id_menage      &lt;dbl&gt; 381, 1515, 85, 844, 1797, 1015, 179‚Ä¶
$ poids          &lt;dbl&gt; 1.803150, 1.803150, 1.803150, 1.803‚Ä¶
$ date_entretien &lt;date&gt; 2012-05-05, 2012-01-23, 2012-01-21‚Ä¶
$ date_naissance &lt;date&gt; 1997-03-07, 1982-01-06, 1979-01-01‚Ä¶
$ age            &lt;dbl&gt; 15, 30, 33, 43, 25, 18, 45, 23, 49,‚Ä¶
$ milieu         &lt;dbl+lbl&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2‚Ä¶
$ region         &lt;dbl+lbl&gt; 4, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3‚Ä¶
$ educ           &lt;dbl+lbl&gt; 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0‚Ä¶
$ travail        &lt;hvn_lbl_&gt; 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, ‚Ä¶
$ matri          &lt;dbl+lbl&gt; 0, 2, 2, 2, 1, 0, 1, 1, 2, 5, 2‚Ä¶
$ religion       &lt;dbl+lbl&gt; 1, 3, 2, 3, 2, 2, 3, 1, 3, 3, 2‚Ä¶
$ journal        &lt;dbl+lbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0‚Ä¶
$ radio          &lt;dbl+lbl&gt; 0, 1, 1, 0, 0, 1, 1, 0, 0, 0, 1‚Ä¶
$ tv             &lt;dbl+lbl&gt; 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1‚Ä¶
$ nb_enf_ideal   &lt;hvn_lbl_&gt;  4,  4,  4,  4,  4,  5, 10,  5‚Ä¶
$ test           &lt;hvn_lbl_&gt; 0, 9, 0, 0, 1, 0, 0, 0, 0, 1, ‚Ä¶</code></pre>
<p>Il appara√Æt que la variable <var>region</region> est de type <code data-pkg="labelled" data-rdoc="labelled">haven_labelled</code>. On peut le confirmer avec <code data-pkg="base">class</code>.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(femmes<span class="sc">$</span>region)</span></code></pre></div>
<pre><code>[1] &quot;haven_labelled&quot; &quot;vctrs_vctr&quot;     &quot;double&quot;        </code></pre>
<p>Regardons les premi√®res valeurs prises par cette variable.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(femmes<span class="sc">$</span>region)</span></code></pre></div>
<pre><code>&lt;labelled&lt;double&gt;[6]&gt;: R√©gion de r√©sidence
[1] 4 4 4 4 4 3

Labels:
 value label
     1  Nord
     2   Est
     3   Sud
     4 Ouest</code></pre>
<p>Nous voyons que quatre √©tiquettes de valeurs ont √©t√© associ√©es √† notre variable. Le code 1 correspond ainsi √† la r√©gion <q>Nord</q>, le code 2 √† la r√©gion <q>Est</q>, etc. Laissons de c√¥t√© pour le moment la colonne <code>is_na</code> que nous aborderons dans une prochaine section.</p>
<p>La liste des √©tiquettes est √©galement renvoy√©e par la fonction <code data-pkg="questionr">describe</code> de <code class="pkg">questionr</code>.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(femmes<span class="sc">$</span>region)</span></code></pre></div>
<pre><code>[2000 obs.] R√©gion de r√©sidence
labelled double: 4 4 4 4 4 3 3 3 3 3 ...
min: 1 - max: 4 - NAs: 0 (0%) - 4 unique values
4 value labels: [1] Nord [2] Est [3] Sud [4] Ouest

             n     %
[1] Nord   707  35.4
[2] Est    324  16.2
[3] Sud    407  20.3
[4] Ouest  562  28.1
Total     2000 100.0</code></pre>
<p>L‚Äôextension <code class="pkg">labelled</code> fournit la fonction <code data-pkg="labelled">val_labels</code> qui renvoie la liste des √©tiquettes de valeurs d‚Äôune variable sous la forme d‚Äôun vecteur nomm√© et la fonction <code data-pkg="labelled" data-rdoc="val_labels">val_label</code> (notez l‚Äôabsence de ‚Äòs‚Äô) qui renvoie l‚Äô√©tiquette associ√©e √† une valeur particuli√®re. S‚Äôil n‚Äôy a pas d‚Äô√©tiquette de valeur, ces fonctions renvoient <code>NULL</code>.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">val_labels</span>(femmes<span class="sc">$</span>region)</span></code></pre></div>
<pre><code> Nord   Est   Sud Ouest 
    1     2     3     4 </code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">val_label</span>(femmes<span class="sc">$</span>region, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>[1] &quot;Est&quot;</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">val_label</span>(femmes<span class="sc">$</span>region, <span class="dv">6</span>)</span></code></pre></div>
<pre><code>NULL</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">val_labels</span>(femmes<span class="sc">$</span>age)</span></code></pre></div>
<pre><code>NULL</code></pre>
<p>Re-regardons d‚Äôun peu plus pr√®s les premi√®res valeurs de notre variable <var>region</var>.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(femmes<span class="sc">$</span>region)</span></code></pre></div>
<pre><code>&lt;labelled&lt;double&gt;[6]&gt;: R√©gion de r√©sidence
[1] 4 4 4 4 4 3

Labels:
 value label
     1  Nord
     2   Est
     3   Sud
     4 Ouest</code></pre>
<p>On s‚Äôaper√ßoit qu‚Äôil s‚Äôagit de valeurs num√©riques. Et l‚Äôaffichage indique que notre variable est plus pr√©cis√©ment du type <code>labelled double</code>. Pour rappel, <code>double</code> est synonyme de <code>numeric</code>. Autrement dit, la classe <code data-pkg="labelled" data-rdoc="labelled">haven_labelled</code> ne modifie pas le type sous-jacent d‚Äôun vecteur, que l‚Äôon peut toujours obtenir avec la fonction <code data-pkg="base">typeof</code>. Nous pouvons √©galement tester si notre variable est num√©rique avec la fonction <code data-pkg="base" data-rdoc="numeric">is.numeric</code>.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(femmes<span class="sc">$</span>region)</span></code></pre></div>
<pre><code>[1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(femmes<span class="sc">$</span>region)</span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<p>√Ä la diff√©rence des facteurs, le type original d‚Äôune variable labellis√©e n‚Äôest pas modifi√© par la pr√©sence d‚Äô√©tiquettes de valeur. Ainsi, il reste possible de calculer une moyenne √† partir de notre variable <var>region</var> (m√™me si cela n‚Äôest pas pertinent ici d‚Äôun point de vue s√©mantique).</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(femmes<span class="sc">$</span>region)</span></code></pre></div>
<pre><code>[1] 2.412</code></pre>
<p>Avec un facteur, nous aurions eu un bon message d‚Äôerreur.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(d<span class="sc">$</span>nivetud)</span></code></pre></div>
<pre><code>Warning in mean.default(d$nivetud): l&#39;argument n&#39;est ni
num√©rique, ni logique : renvoi de NA</code></pre>
<pre><code>[1] NA</code></pre>
<p>Nous allons voir qu‚Äôil est aussi possible d‚Äôassocier des √©tiquettes de valeurs √† des vecteurs textuels. Cr√©ons tout d‚Äôabord un vecteur textuel qui nous servira d‚Äôexemple.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;f&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;h&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;h&quot;</span>)</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>v</span></code></pre></div>
<pre><code>[1] &quot;f&quot; &quot;f&quot; &quot;h&quot; &quot;f&quot; &quot;h&quot;</code></pre>
<p>Le plus facile pour lui associer des √©tiquettes de valeur est d‚Äôutiliser <code data-pkg="labelled" data-rdoc="val_labels">val_label</code>.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">val_label</span>(v, <span class="st">&quot;f&quot;</span>) <span class="ot">&lt;-</span> <span class="st">&quot;femmes&quot;</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">val_label</span>(v, <span class="st">&quot;h&quot;</span>) <span class="ot">&lt;-</span> <span class="st">&quot;hommes&quot;</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>v</span></code></pre></div>
<pre><code>&lt;labelled&lt;character&gt;[5]&gt;
[1] f f h f h

Labels:
 value  label
     f femmes
     h hommes</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(v)</span></code></pre></div>
<pre><code>[1] &quot;character&quot;</code></pre>
<p>Notre vecteur <code>v</code> a automatiquement √©t√© transform√© en un vecteur de la classe <code>labelled</code>. Mais son type sous-jacent est rest√© <code>"character"</code>. Par ailleurs, les donn√©es elle-m√™me n‚Äôont pas √©t√© modifi√©es et ont conserv√© leurs valeurs originales.</p>
<p>Il est √©galement possible de d√©finir/modifier/supprimer l‚Äôensemble des √©tiquettes de valeur d‚Äôune variable avec <code data-pkg="labelled">val_labels</code> en lui assignant un vecteur nomm√©.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">val_labels</span>(v) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">Homme =</span> <span class="st">&quot;h&quot;</span>, <span class="at">Femme =</span> <span class="st">&quot;f&quot;</span>, <span class="st">&quot;Valeur ind√©termin√©e&quot;</span> <span class="ot">=</span> <span class="st">&quot;i&quot;</span>)</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>v</span></code></pre></div>
<pre><code>&lt;labelled&lt;character&gt;[5]&gt;
[1] f f h f h

Labels:
 value               label
     h               Homme
     f               Femme
     i Valeur ind√©termin√©e</code></pre>
<p>Comme pr√©c√©demment, on utilisera <code>NULL</code> pour supprimer une ou toutes les √©tiquettes.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">val_label</span>(v, <span class="st">&quot;i&quot;</span>) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>v</span></code></pre></div>
<pre><code>&lt;labelled&lt;character&gt;[5]&gt;
[1] f f h f h

Labels:
 value label
     h Homme
     f Femme</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">val_labels</span>(v) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>v</span></code></pre></div>
<pre><code>[1] &quot;f&quot; &quot;f&quot; &quot;h&quot; &quot;f&quot; &quot;h&quot;</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(v)</span></code></pre></div>
<pre><code>[1] &quot;character&quot;</code></pre>
<p>Si l‚Äôon supprime toutes les √©tiquettes de valeur, alors notre vecteur retrouve sa classe initiale.</p>
</div>
<div id="assignation-et-condition" class="section level3 hasAnchor">
<h3 class="hasAnchor">Assignation et condition<a href="#assignation-et-condition" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Les √©tiquettes de valeur sont plus souples que les facteurs, en ce sens qu‚Äôil n‚Äôest pas obligatoire d‚Äôindiquer une √©tiquette pour chaque valeur prise par une variable. Alors qu‚Äôil n‚Äôest pas possible avec un facteur d‚Äôassigner une valeur qui n‚Äôa pas √©t√© pr√©alablement d√©finie comme une des modalit√©s possibles du facteur, nous n‚Äôavons pas cette limite avec les vecteurs labellis√©s.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>femmes<span class="sc">$</span>region[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="dv">5</span></span></code></pre></div>
<p>Important¬†: quand on assigne une valeur √† un facteur, on doit transmettre le texte correspondant √† la modalit√©, alors que pour un vecteur labellis√© on transmettra le code sous-jacent (pour rappel, les √©tiquettes de valeur ne sont qu‚Äôune information additionnelle).</p>
<p>De plus, nous avons vu que les donn√©es initiales n‚Äô√©taient pas modifi√©es par l‚Äôajout ou la suppression d‚Äô√©tiquettes de valeur, alors que pour les facteurs ce n‚Äôest pas vrai. Pour mieux comprendre, essayons la commande suivante¬†:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unclass</span>(<span class="fu">factor</span>(v))</span></code></pre></div>
<pre><code>[1] 1 1 2 1 2
attr(,&quot;levels&quot;)
[1] &quot;f&quot; &quot;h&quot;</code></pre>
<p>Un facteur stocke de mani√®re interne les valeurs sous la forme d‚Äôune suite d‚Äôentiers, d√©marrant toujours par 1, forc√©ment cons√©cutifs, et dont les valeurs d√©pendent de l‚Äôordre des facteurs. Pour s‚Äôen rendre compte¬†:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unclass</span>(<span class="fu">factor</span>(v, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;h&quot;</span>, <span class="st">&quot;f&quot;</span>)))</span></code></pre></div>
<pre><code>[1] 2 2 1 2 1
attr(,&quot;levels&quot;)
[1] &quot;h&quot; &quot;f&quot;</code></pre>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unclass</span>(<span class="fu">factor</span>(v, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;f&quot;</span>, <span class="st">&quot;h&quot;</span>)))</span></code></pre></div>
<pre><code>[1] 1 1 2 1 2
attr(,&quot;levels&quot;)
[1] &quot;f&quot; &quot;h&quot;</code></pre>
<p>Ce qui importe pour un facteur ce sont les modalit√©s de ce dernier tandis que pour un vecteur labellis√© ce sont les valeurs du vecteur elles-m√™mes. Cela reste vrai pour l‚Äô√©criture de conditions.</p>
<p>Prenons un premier exemple avec un facteur¬†:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(d<span class="sc">$</span>sexe)</span></code></pre></div>
<pre><code>[2000 obs.] 
nominal factor: &quot;Homme&quot; &quot;Femme&quot; &quot;Homme&quot; &quot;Homme&quot; &quot;Femme&quot; &quot;Femme&quot; &quot;Femme&quot; &quot;Homme&quot; &quot;Femme&quot; &quot;Homme&quot; ...
2 levels: Homme | Femme
NAs: 0 (0%)

         n   %
Homme  900  45
Femme 1100  55
Total 2000 100</code></pre>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(d<span class="sc">$</span>sexe <span class="sc">==</span> <span class="st">&quot;Homme&quot;</span>)</span></code></pre></div>
<pre><code>
FALSE  TRUE 
 1100   900 </code></pre>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(d<span class="sc">$</span>sexe <span class="sc">==</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>
FALSE 
 2000 </code></pre>
<p>La condition valide est celle utilisant <code>"Homme"</code> qui est la valeur de la modalit√© du facteur.</p>
<p>Et avec un vecteur labellis√©¬†?</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(femmes<span class="sc">$</span>milieu)</span></code></pre></div>
<pre><code>[2000 obs.] Milieu de r√©sidence
labelled double: 2 2 2 2 2 2 2 2 2 2 ...
min: 1 - max: 2 - NAs: 0 (0%) - 2 unique values
2 value labels: [1] urbain [2] rural

              n     %
[1] urbain  912  45.6
[2] rural  1088  54.4
Total      2000 100.0</code></pre>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(femmes<span class="sc">$</span>milieu <span class="sc">==</span> <span class="st">&quot;urbain&quot;</span>)</span></code></pre></div>
<pre><code>Erreur : Can&#39;t combine `..1` &lt;character&gt; and `..2` &lt;double&gt;.</code></pre>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(femmes<span class="sc">$</span>milieu <span class="sc">==</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>
FALSE  TRUE 
 1088   912 </code></pre>
<p>Ici, pour √™tre valide, la condition doit porter sur les valeurs de la variable elle-m√™me et non sur les √©tiquette.</p>
</div>
<div id="quelques-fonctions-suppl√©mentaires" class="section level3 hasAnchor">
<h3 class="hasAnchor">Quelques fonctions suppl√©mentaires<a href="#quelques-fonctions-suppl√©mentaires" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>L‚Äôextension <code class="pkg">labelled</code> fournit quelques fonctions suppl√©mentaires qui peuvent s‚Äôav√©rer utiles¬†:</p>
<ul>
<li><code data-pkg="labelled">labelled</code> pour cr√©er directement des vecteurs labellis√©s¬†;</li>
<li><code data-pkg="labelled">nolabel_to_na</code> pour convertir les valeurs n‚Äôayant pas d‚Äô√©tiquette en <code>NA</code>¬†;</li>
<li><code data-pkg="labelled">val_labels_to_na</code> qui, √† l‚Äôinverse, converti les valeurs avec √©tiquette en <code>NA</code>¬†;</li>
<li><code data-pkg="labelled">sort_val_labels</code> pour trier l‚Äôordre des √©tiquettes de valeurs.</li>
</ul>
<p>On pourra se r√©ferrer √† l‚Äôaide de chacune de ces fonctions.</p>
<p>L‚Äô<a href="import-de-donnees.html">import de donn√©es labellis√©es</a> et le <a href="recodage.html#labelled">recodage de variables</a> (dont la conversion d‚Äôun vecteur labellis√© en facteur) seront quant √† eux abord√©s dans les prochains chapitres.</p>
</div>
</div>

</article>
</div>

<div class="col-sm-3" role="complementary">
<nav class="hidden-print hidden-xs" id="nav_sidebar">
</nav>
</div>

</div>

<script>
// manage active state of menu based on current page
$(document).ready(function () {

    // active menu
    href = window.location.pathname;
    href = href.substr(href.lastIndexOf('/') + 1);
    if (href=='') href = 'index.html';
    $('a[href="' + href + '"]').parent().addClass('active');
    $('a[href="' + href + '"]').parent().parents('li').addClass('active');

    // √©largir la page d'accueil
    if (href=='index.html') $('.col-sm-9').attr('class','col-sm-12');

    // rechercher
    $("#rechercher").submit(function(event) {
      $('input[name="q"]').val($('input[name="q"]').val() + ' site:larmarange.github.io/analyse-R');
    });

    // sidebar
    $("#nav_sidebar").append($("#TOC").html());
    $("#nav_sidebar ul").addClass("nav nav-stacked");
    $("#TOC").addClass("visible-xs-block");
    $('body').scrollspy({
      target: '#nav_sidebar',
      offset: 40
    });

    // Identifier les <pre> fermant
    $('pre').next("*:not(pre)").prev().addClass('last'); // Dernier <pre> de chaque groupe contigu de <pre>
    $('pre').parent().each(function (){
      $(this).children('pre').last().addClass('last');
    }); // Si <pre> est le dernier enfant de son parent

    // Ajout liens rdocumentation et tooltip
    $("code[data-pkg]").each(function( index ) {
      pkg = $(this).attr('data-pkg');
      if ($(this).attr('data-rdoc') !== undefined) {
        rdocumentation = $(this).attr('data-rdoc');
      } else {
        rdocumentation = $(this).text();
      }
      fonction = $(this).text();
      //$(this).wrap('<a href="http://www.rdocumentation.org/packages/'+pkg+'/functions/'+rdocumentation+'">');
      $(this).wrap('<a href="http://rdrr.io/pkg/'+pkg+'/sym/'+rdocumentation+'">');
      $(this).attr('data-toggle','tooltip');
      $(this).attr('data-placement','top');
      $(this).attr('title','package¬†: ' + pkg);
      $('[data-toggle="tooltip"]').tooltip();
    });

    $("code.pkg").each(function( index ) {
      //$(this).wrap('<a href="http://www.rdocumentation.org/packages/'+$(this).text()+'">');
      $(this).wrap('<a href="http://rdrr.io/pkg/'+$(this).text()+'">');
    });

    // Figures
    $("figure").each(function( index ) {
      if ($(this).children("figcaption").length > 0)
        $(this).children("figcaption:first").prepend('<span class="figure-number">Figure '+(index+1)+'.</span> ');
      else
        $(this).append($("<figcaption>").append('<span class="figure-number">Figure '+(index+1)+'</span>'));
    });

    // Colorbox

    /*----
    jQuery('article div img').colorbox({
      maxWidth: '90%',
      maxHeight: '90%',
      rel: 'figures',
      current: "",
      href: function(){
        return $(this).attr('src');
      },
      title: function(){
        return $(this).attr('alt');
      }
    });
    jQuery('article div img').css('cursor', 'pointer');
    jQuery('figure img').colorbox({
      maxWidth: '90%',
      maxHeight: '90%',
      rel: 'figures',
      current: "",
      href: function(){
        return $(this).attr('src');
      },
      title: function(){
        return $(this).parent().children("figcaption").text();
      }
    });
    jQuery('figure img').css('cursor', 'pointer');

    -----*/

    /* Clipboard --------------------------*/

  function changeTooltipMessage(element, msg) {
    var tooltipOriginalTitle=element.getAttribute('data-original-title');
    element.setAttribute('data-original-title', msg);
    $(element).tooltip('show');
    element.setAttribute('data-original-title', tooltipOriginalTitle);
  }

  if(ClipboardJS.isSupported()) {
    $(document).ready(function() {
      var copyButton = "<button type='button' class='btn btn-primary btn-copy-ex' type = 'submit' title='Copier dans le presse-papier' aria-label='Copier dans le presse-papier' data-toggle='tooltip' data-placement='left auto' data-trigger='hover' data-clipboard-copy><i class='fa fa-copy'></i></button>";

      $(".examples, div.sourceCode").addClass("hasCopyButton");

      // Insert copy buttons:
      $(copyButton).prependTo(".hasCopyButton");

      // Initialize tooltips:
      $('.btn-copy-ex').tooltip({container: 'body'});

      // Initialize clipboard:
      var clipboardBtnCopies = new ClipboardJS('[data-clipboard-copy]', {
        text: function(trigger) {
          return trigger.parentNode.textContent;
        }
      });

      clipboardBtnCopies.on('success', function(e) {
        changeTooltipMessage(e.trigger, 'Copi√© !');
        e.clearSelection();
      });

      clipboardBtnCopies.on('error', function() {
        changeTooltipMessage(e.trigger,'Appuyez sur Ctrl+C ou Command+C pour copier');
      });
    });
  }

  // Bigfoot
  $(".footnotes > li").addClass("footnote");
  $.bigfoot({
    activateOnHover: true,
    actionOriginalFN: "ignore"
});
});
</script>

<!-- Utterances comments
<script src="https://utteranc.es/client.js"
        repo="larmarange/analyse-R"
        issue-term="pathname"
        label="commentaires"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
-->

<!-- Giscus comments -->
<script src="https://giscus.app/client.js"
        data-repo="larmarange/analyse-R"
        data-repo-id="MDEwOlJlcG9zaXRvcnkzNDk4NjY2Ng=="
        data-category-id="DIC_kwDOAhXaqs4B_iH_"
        data-mapping="pathname"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-theme="light"
        data-lang="fr"
        crossorigin="anonymous"
        async>
</script>

<!-- disqus -->
<!---
<div class="row">
  <div id="disqus_thread" class="col-sm-9" role="complementary"></div>
</div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'analyse-r'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Veuillez activer JavaScript pour voir les <a href="http://disqus.com/?ref_noscript">les commentaires g√©r√©s avec Disqus.</a></noscript>
    <!--<a href="http://disqus.com" class="dsq-brlink">Les commentaires sont h√©berg√©s par <span class="logo-disqus">Disqus</span>.</a>-->

<footer>
  <div class="row">
    <div class="col-lg-12">
      <p>Contenus sous licence <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/fr/" rel="nofollow">Creative Commons Attribution - Pas d‚Äôutilisation commerciale - Partage dans les m√™mes conditions</a>.<br />
      Propuls√© par <a href="http://www.r-project.org/" rel="nofollow">R</a>, </a><a href="http://www.rstudio.com/" rel="nofollow">RStudio</a>, <a href="http://rmarkdown.rstudio.com/" rel="nofollow">R Markdown</a>, <a href="http://yihui.name/knitr/" rel="nofollow">knitr</a>, <a href="http://pandoc.org/" rel="nofollow">pandoc</a> et <a href="http://www.princexml.com/" rel="nofollow">Prince XML</a>. H√©berg√© par <a href="https://github.com/" rel="nofollow">GitHub</a>.<br />
      <a href="https://www.zenodo.org/badge/latestdoi/34986666"><img src="https://www.zenodo.org/badge/34986666.svg" alt="DOI"></a></p>
    </div>
  </div>
</footer>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->



</body>
</html>
