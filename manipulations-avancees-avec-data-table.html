<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Manipulations avancées avec data.table</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/paper.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>
<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<meta name="robots" content="index, follow">
<link rel="stylesheet" href="./include/analyse-R.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
<script type="text/javascript" src="./libs/bigfoot-2.1.4/bigfoot.min.js"></script>
<link rel="stylesheet" href="./libs/bigfoot-2.1.4/bigfoot-number.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<link rel="stylesheet" href="./libs/colorbox-1.6.1/colorbox.css" />
<script type="text/javascript" src="./libs/colorbox-1.6.1/jquery.colorbox-min.js"></script>
<!--- favicon --->
<link rel="apple-touch-icon" sizes="57x57" href="./images/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="./images/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="./images/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="./images/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="./images/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="./images/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="./images/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="./images/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="./images/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="./images/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="./images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="./images/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="./images/favicon/favicon-16x16.png">
<link rel="manifest" href="./images/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="./images/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-121727005-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-121727005-1');
</script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' || rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">



<nav>
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href=".">analyse-R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="manipuler" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Manipuler <span class="caret"></span></a>
          <ul class="dropdown-menu multi-column columns-3" role="menu" id="menu_manipuler">
            <div class="row">
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Prise en main</li>
                  <li><a href="presentation-et-philosophie.html">Présentation et Philosophie</a></li>
                  <li><a href="installation-de-R-et-RStudio.html">Installation de <strong>R</strong> et <strong>RStudio</strong></a></li>
                  <li><a href="premier-contact.html">Premier contact</a></li>
                  <li><a href="premier-travail-avec-les-donnees.html">Premier travail avec des données</a></li>
                  <li><a href="extensions.html">Extensions (installation, mise à jour)</a></li>
                  <li><a href="introduction-au-tidyverse.html">Introduction au <strong>tidyverse</strong></a></li>
                  <li><a href="vecteurs-indexation-et-assignation.html">Vecteurs, indexation et assignation</a></li>
                  <li><a href="listes-et-tableaux-de-donnes.html">Listes et Tableaux de données</a></li>
                  <li><a href="facteurs-et-vecteurs-labellises.html">Facteurs et vecteurs labellisés</a></li>
                  <li><a href="organiser-ses-fichiers.html">Organiser ses fichiers</a></li>
                  <li><a href="import-de-donnees.html">Import de données</a></li>
                  <li><a href="ou-trouver-de-l-aide.html">Où trouver de l'aide ?</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Manipulation de données</li>
  		            <li><a href="visualiser-ses-donnees.html">Visualiser ses données</a></li>
  		            <li><a href="recodage.html">Recodage de variables</a></li>
                  <li><a href="manipuler-les-donnees-avec-dplyr.html">Manipuler les données avec <strong>dplyr</strong></a></li>
                  <li><a href="manipulations-avancees-avec-data-table.html">Manipulations avancées avec <strong>data.table</strong></a></li>
                  <li><a href="tris.html">Tris</a></li>
                  <li><a href="sous-ensembles.html">Sous-ensembles</a></li>
                  <li><a href="fusion-de-tables.html">Fusion de tables</a></li>
                  <li><a href="gestion-des-dates.html">Gestion des dates</a></li>
                  <li><a href="fonctions-a-fenetre.html">Fonctions à fenêtre</a></li>
                  <li><a href="manipuler-du-texte.html">Manipuler du texte avec <strong>stringr</strong></a></li>
                  <li><a href="reorganiser-ses-donnees-avec-tidyr.html">Réorganiser ses données avec <strong>tidyr</strong></a></li>
                  <li><a href="scraping.html">Scraping</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
                  <li class="dropdown-header">Exporter</li>
                  <li><a href="export-de-donnees.html">Export de données</a></li>
                  <li><a href="export-de-graphiques.html">Export de graphiques</a></li>
  	            </ul>
              </div>
            </div>
          </ul>
        </li>
        <li class="dropdown">
          <a href="analyser" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Analyser <span class="caret"></span></a>
          <ul class="dropdown-menu multi-column columns-3" role="menu" id="menu_analyser">
            <div class="row">
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Statistiques introductives</li>
                  <li><a href="statistique-univariee.html">Statistique univariée</a></li>
                  <li><a href="statistique-bivariee.html">Statistique bivariée</a></li>
                  <li><a href="intro-ggplot2.html">Introduction à <strong>ggplot2</strong>, la grammaire des graphiques</a></li>
                  <li><a href="graphiques-bivaries-ggplot2.html">Graphiques univariés et bivariés avec <strong>ggplot2</strong></a></li>
                  <li><a href="donnees-ponderees.html">Données pondérées</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Statistiques intermédiaires</li>
  		            <li><a href="intervalles-de-confiance.html">Intervalles de confiance</a></li>
                  <li><a href="comparaisons-moyennes-et-proportions.html">Comparaisons (moyennes et proportions)</a></li>
                  <li><a href="definir-un-plan-d-echantillonnage-complexe.html">Définir un plan d'échantillonnage complexe</a></li>
                  <li><a href="regression-lineaire.html">Régression linéaire</a></li>
                  <li><a href="regression-logistique.html">Régression logistique binaire, multinomiale et ordinale</a></li>
                  <li><a href="analyse-des-correspondances-multiples.html">Analyse des correspondances multiples (ACM)</a></li>
                  <li><a href="classification-ascendante-hierarchique.html">Classification ascendante hiérarchique (CAH)</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
                  <li class="dropdown-header">Statistiques avancées</li>
                  <li><a href="effets-d-interaction.html">Effets d'interaction dans un modèle</a></li>
                  <li><a href="multicolinearite.html">Multicolinéarité dans la régression</a></li>
                  <li><a href="analyse-de-survie.html">Analyse de survie</a></li>
                  <li><a href="analyse-de-sequences.html">Analyse de séquences</a></li>
                  <!--<li><a href="modeles-a-effets-aleatoires.html">Modèles à effets aléatoires (modèles mixtes et GEE)</a></li>-->
                  <li><a href="trajectoires-de-soins.html">Trajectoires de soins&nbsp;: un exemple de données longitudinales</a></li>
                  <li><a href="analyse-de-reseaux.html">Analyse de réseaux</a></li>
                  <li><a href="analyse-spatiale.html">Analyse spatiale</a></li>
  	            </ul>
              </div>
            </div>
          </ul>
        </li>
        <li class="dropdown">
          <a href="approfondir" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Approfondir <span class="caret"></span></a>
          <ul class="dropdown-menu multi-column columns-3" role="menu" id="menu_approfondir">
            <div class="row">
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Graphiques</li>
                  <li><a href="ggplot2.html"><strong>ggplot2</strong> et la grammaire des graphiques</a></li>
                  <li><a href="etendre-ggplot2.html">Étendre ggplot2</a></li>
                  <li><a href="combiner-plusieurs-graphiques.html">Combiner plusieurs graphiques</a></li>
                  <li><a href="graphiques-interactifs.html">Graphiques interactifs</a></li>
                  <li><a href="lattice-graphiques-et-formules.html"><strong>lattice</strong> : graphiques et formules</a></li>
                  <li><a href="cartes.html">Cartes</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Programmation</li>
  		            <li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
                  <li><a href="formules.html">Formules</a></li>
                  <li><a href="structures-conditionnelles.html">Structures conditionnelles</a></li>
                  <li><a href="vectorisation.html">Vectorisation</a></li>
                  <li><a href="expressions-regulieres.html">Expressions régulières</a></li>
                  <!--<li class="dev"><a href="ecrire-ses-propres-fonctions.html">Écrire ses propres fonctions</a></li>-->
                  <li><a href="rmarkdown-les-rapports-automatises.html"><strong>R Markdown</strong> : les rapports automatisés</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
                  <li class="dropdown-header">Divers</li>
                  <li><a href="formater-nombres.html">Mettre en forme des nombres</a></li>
                  <li><a href="couleurs.html">Couleurs et Palettes</a></li>
                  <li><a href="annotations-mathematiques.html">Annotations mathématiques</a></li>
                  <li><a href="calculer-un-age.html">Calculer un âge</a></li>
                  <li><a href="diagramme-de-lexis.html">Diagramme de Lexis</a></li>
  	            </ul>
              </div>
            </div>
          </ul>
        </li>
        <li class="dropdown">
          <a href="index" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Index <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu" id="menu_naviguer">
            <li><a href="index-des-concepts.html">Index des concepts</a></li>
            <li><a href="index-des-fonctions.html">Index des fonctions</a></li>
            <li><a href="index-des-extensions.html">Index des extensions</a></li>
          </ul>
        </li>
        <li><a href="analyse-R.pdf">PDF</a></li>
        <!--<li><a href="https://github.com/larmarange/analyse-R">GitHub</a></li>-->
      </ul>
    <form id="rechercher" class="navbar-form navbar-right" role="search" style="padding-top: 5px;" method="get" action="https://duckduckgo.com/">
      <div class="form-group">
        <input name="q" type="text" class="form-control input-sm" placeholder="Rechercher">
      </div>
      <button type="submit" class="btn btn-default btn-sm" name="Rechercher">
        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
      </button>
    </form>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
</nav>

<div class="row">

<div class="visible-lg">
<a href="https://github.com/larmarange/analyse-R"><img style="position: absolute; top: 60px; left: 40px; border: 0;" src="./images/fork_me.png" alt="Contribuer sur GitHub"></a>
</div>

<div class="col-sm-9" role="main">
<article>

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Manipulations avancées avec data.table</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#convertir-un-data.frame-en-data.table">Convertir un data.frame en data.table</a><ul>
<li><a href="#setdt-et-setdf">setDT et setDF</a></li>
<li><a href="#dplyr-et-data.table">dplyr et data.table</a></li>
</ul></li>
<li><a href="#la-syntaxe-des-crochets">La syntaxe des crochets</a><ul>
<li><a href="#selectionner-des-observations">Sélectionner des observations</a></li>
<li><a href="#selectionner-des-variables">Sélectionner des variables</a></li>
<li><a href="#grouper-les-resultats">Grouper les résultats</a></li>
<li><a href="#ajouter-modifier-supprimer-une-variable">Ajouter / Modifier / Supprimer une variable</a></li>
</ul></li>
<li><a href="#enchainer-les-operations">Enchaîner les opérations</a></li>
</ul>
</div>

<p>L’extension <code class="pkg">data.table</code> permets d’étendre les tableaux de données. Elle modifie radicalement la syntaxe des crochets, permettant un code plus court et surtout plus puissant. Par ailleurs, elle est particulièrement rapide pour opérer des opérations sur les données et permets d’effectuer des opérations par assignation directe sans avoir à copier les objets en mémoire. Autrement dit, elle est particulièrement utile lorsque l’on travaille sur des gros fichiers de données.</p>
<p>Certes, l’apprentissage de cette nouvelle syntaxe peut faire peur au début, mais c’est un gain tellement notable une fois qu’on la maîtrise, qu’il est difficile de revenir en arrière.</p>
<p>Pour un tutoriel (en anglais et en ligne) écrit par les développeurs de <code class="pkg">data.table</code>, voir <a href="https://www.datacamp.com/courses/data-table-data-manipulation-r-tutorial" class="uri">https://www.datacamp.com/courses/data-table-data-manipulation-r-tutorial</a>. On pourra aussi se référer à la vignette officielle <a href="https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html" class="uri">https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html</a>.</p>
<div id="convertir-un-data.frame-en-data.table" class="section level1">
<h1>Convertir un data.frame en data.table</h1>
<p>Il suffit d’avoir recours à la fonction <code data-pkg="data.table">as.data.table</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">library</span>(data.table)</a>
<a class="sourceLine" id="cb1-2" title="2">iris2 &lt;-<span class="st"> </span><span class="kw">as.data.table</span>(iris)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">class</span>(iris2)</a></code></pre></div>
<pre><code>[1] &quot;data.table&quot; &quot;data.frame&quot;</code></pre>
<p>Comme on le voit, cela ajoute plusieurs classes additionnelles au tableau de données, celui-ci restant malgré tout toujours un <em>data.frame</em>. Cependant, la syntaxe des crochets simples <code>[]</code> change radicalement, tandis que les crochets doubles <code>[[]]</code> restent inchangés. Par contre, comme il s’agit toujours d’un tableau de données classique, on pourra l’utiliser avec les fonctions des autres extensions de R. Si jamais vous rencontriez un problème, il est toujours possible de reconvertir en tableau de données classique avec <code data-pkg="data.table">setDF</code> (voir ci-dessous).</p>
<div id="setdt-et-setdf" class="section level2">
<h2>setDT et setDF</h2>
<p>Lors de l’utilisation de <code data-pkg="data.table">as.data.table</code>, le tableau de données original a d’abord été copié en mémoire, converti puis il a fallu le sauvegarder dans un objet avec <code>&lt;-</code>. Lorsqu’on l’on manipule de gros tableaux, cela est gourmand en ressources système et prend du temps.</p>
<p>C’est pour cela que <code class="pkg">data.table</code> fournie plusieurs fonctions (commençant parle préfixe <code>set</code>) qui modifient directement l’objet sélectionné en mémoire, ce qu’on appelle <q>modification par assignation</q>. Ce type de fonction est beaucoup plus rapide et efficace en termes de ressources système. On notera également qu’il est inutile de stocker le résultats dans un objet puisque l’objet a été modifié directement en mémoire.</p>
<p><code data-pkg="data.table">setDT</code> converti un tableaux de données en <em>data.table</em> tandis que <code data-pkg="data.table">setDF</code> fait l’opération opposée.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">setDT</span>(iris)</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">class</span>(iris)</a></code></pre></div>
<pre><code>[1] &quot;data.table&quot; &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">setDF</span>(iris)</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw">class</span>(iris)</a></code></pre></div>
<pre><code>[1] &quot;data.frame&quot;</code></pre>
</div>
<div id="dplyr-et-data.table" class="section level2">
<h2>dplyr et data.table</h2>
<p>Pour ceux travaillant également avec les extension <code class="pkg">dplyr</code> et <code class="pkg">tibble</code>, il est possible de concilier <em>tibble</em> et <em>data.table</em> avec l’extension <code class="pkg">dtplyr</code> et sa fonction <code data-pkg="dtplyr">tbl_dt</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">library</span>(dtplyr)</a>
<a class="sourceLine" id="cb7-2" title="2">iris_dt &lt;-<span class="st"> </span><span class="kw">tbl_dt</span>(iris)</a>
<a class="sourceLine" id="cb7-3" title="3"><span class="kw">class</span>(iris_dt)</a></code></pre></div>
<pre><code>[1] &quot;tbl_dt&quot;     &quot;tbl&quot;        &quot;data.table&quot; &quot;data.frame&quot;</code></pre>
<p>Le tableau de données est à la fois compatible avec <code class="pkg">data.table</code> (et notamment sa syntaxe particulière des crochets) et les verbes de <code class="pkg">dplyr</code>.</p>
</div>
</div>
<div id="la-syntaxe-des-crochets" class="section level1">
<h1>La syntaxe des crochets</h1>
<p>La syntaxe des crochets change radicalement avec <code class="pkg">data.table</code>. Elle est de la forme <code>objet[i, j, by]</code> (dans sa forme la plus simple, pour une présentation exhaustive, voir le fichier d’aide de <code data-pkg="data.table">data.table-package</code>).</p>
<div id="selectionner-des-observations" class="section level2">
<h2>Sélectionner des observations</h2>
<p>Cela se fait en indiquant une indiquant une condition au premier argument, à savoir <code>i</code>. Si l’on ne procède à une sélection en même temps sur les variables, il n’est pas nécessaire d’indiquer de virgule <code>,</code> dans les crochets.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">iris2[Sepal.Length <span class="op">&lt;</span><span class="st"> </span><span class="dv">5</span>]</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Sepal.Length"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Sepal.Width"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Petal.Length"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Petal.Width"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["Species"],"name":[5],"type":["fctr"],"align":["left"]}],"data":[{"1":"4.9","2":"3.0","3":"1.4","4":"0.2","5":"setosa"},{"1":"4.7","2":"3.2","3":"1.3","4":"0.2","5":"setosa"},{"1":"4.6","2":"3.1","3":"1.5","4":"0.2","5":"setosa"},{"1":"4.6","2":"3.4","3":"1.4","4":"0.3","5":"setosa"},{"1":"4.4","2":"2.9","3":"1.4","4":"0.2","5":"setosa"},{"1":"4.9","2":"3.1","3":"1.5","4":"0.1","5":"setosa"},{"1":"4.8","2":"3.4","3":"1.6","4":"0.2","5":"setosa"},{"1":"4.8","2":"3.0","3":"1.4","4":"0.1","5":"setosa"},{"1":"4.3","2":"3.0","3":"1.1","4":"0.1","5":"setosa"},{"1":"4.6","2":"3.6","3":"1.0","4":"0.2","5":"setosa"},{"1":"4.8","2":"3.4","3":"1.9","4":"0.2","5":"setosa"},{"1":"4.7","2":"3.2","3":"1.6","4":"0.2","5":"setosa"},{"1":"4.8","2":"3.1","3":"1.6","4":"0.2","5":"setosa"},{"1":"4.9","2":"3.1","3":"1.5","4":"0.2","5":"setosa"},{"1":"4.9","2":"3.6","3":"1.4","4":"0.1","5":"setosa"},{"1":"4.4","2":"3.0","3":"1.3","4":"0.2","5":"setosa"},{"1":"4.5","2":"2.3","3":"1.3","4":"0.3","5":"setosa"},{"1":"4.4","2":"3.2","3":"1.3","4":"0.2","5":"setosa"},{"1":"4.8","2":"3.0","3":"1.4","4":"0.3","5":"setosa"},{"1":"4.6","2":"3.2","3":"1.4","4":"0.2","5":"setosa"},{"1":"4.9","2":"2.4","3":"3.3","4":"1.0","5":"versicolor"},{"1":"4.9","2":"2.5","3":"4.5","4":"1.7","5":"virginica"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>On notera que les noms indiquer entre les crochets sont évalués en fonction du contexte, en l’occurence la liste des variables de l’objet considéré. Ainsi, les noms des variables peuvent être indiqués tels quels, sans utilisation du symbole <code>$</code> ni des guillemets.</p>
<div class="important">
<p>Une différence de taille : lorsqu’il y a des observations pour lesquelles la condition indiquée en <code>i</code> renvoie <code>NA</code>, elles ne sont pas sélectionnées par <code class="pkg">data.table</code> tandis que, pour un <em>data.frame</em> classique cela renvoie des lignes manquantes.</p>
</div>
</div>
<div id="selectionner-des-variables" class="section level2">
<h2>Sélectionner des variables</h2>
<p>Pour sélectionner une variable, il suffit d’indiquer son nom dans la seconde partie, à savoir <code>j</code>. Noter la virgule qui permets d’indiquer que c’est une condition sur <code>j</code> et non sur <code>i</code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">iris2[, Sepal.Length]</a></code></pre></div>
<pre><code>  [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8
 [14] 4.3 5.8 5.7 5.4 5.1 5.7 5.1 5.4 5.1 4.6 5.1 4.8 5.0
 [27] 5.0 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0 5.5 4.9 4.4
 [40] 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4
 [53] 6.9 5.5 6.5 5.7 6.3 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6
 [66] 6.7 5.6 5.8 6.2 5.6 5.9 6.1 6.3 6.1 6.4 6.6 6.8 6.7
 [79] 6.0 5.7 5.5 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5 5.5
 [92] 6.1 5.8 5.0 5.6 5.7 5.7 6.2 5.1 5.7 6.3 5.8 7.1 6.3
[105] 6.5 7.6 4.9 7.3 6.7 7.2 6.5 6.4 6.8 5.7 5.8 6.4 6.5
[118] 7.7 7.7 6.0 6.9 5.6 7.7 6.3 6.7 7.2 6.2 6.1 6.4 7.2
[131] 7.4 7.9 6.4 6.3 6.1 7.7 6.3 6.4 6.0 6.9 6.7 6.9 5.8
[144] 6.8 6.7 6.7 6.3 6.5 6.2 5.9</code></pre>
<p>Pour sélectionner plusieurs variables, on fournira une liste définie avec <code data-pkg="base">list</code> (et non un vecteur défini avec <code data-pkg="base">c</code>).</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">iris2[, <span class="kw">list</span>(Sepal.Length, Sepal.Width)]</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Sepal.Length"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Sepal.Width"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"5.1","2":"3.5"},{"1":"4.9","2":"3.0"},{"1":"4.7","2":"3.2"},{"1":"4.6","2":"3.1"},{"1":"5.0","2":"3.6"},{"1":"5.4","2":"3.9"},{"1":"4.6","2":"3.4"},{"1":"5.0","2":"3.4"},{"1":"4.4","2":"2.9"},{"1":"4.9","2":"3.1"},{"1":"5.4","2":"3.7"},{"1":"4.8","2":"3.4"},{"1":"4.8","2":"3.0"},{"1":"4.3","2":"3.0"},{"1":"5.8","2":"4.0"},{"1":"5.7","2":"4.4"},{"1":"5.4","2":"3.9"},{"1":"5.1","2":"3.5"},{"1":"5.7","2":"3.8"},{"1":"5.1","2":"3.8"},{"1":"5.4","2":"3.4"},{"1":"5.1","2":"3.7"},{"1":"4.6","2":"3.6"},{"1":"5.1","2":"3.3"},{"1":"4.8","2":"3.4"},{"1":"5.0","2":"3.0"},{"1":"5.0","2":"3.4"},{"1":"5.2","2":"3.5"},{"1":"5.2","2":"3.4"},{"1":"4.7","2":"3.2"},{"1":"4.8","2":"3.1"},{"1":"5.4","2":"3.4"},{"1":"5.2","2":"4.1"},{"1":"5.5","2":"4.2"},{"1":"4.9","2":"3.1"},{"1":"5.0","2":"3.2"},{"1":"5.5","2":"3.5"},{"1":"4.9","2":"3.6"},{"1":"4.4","2":"3.0"},{"1":"5.1","2":"3.4"},{"1":"5.0","2":"3.5"},{"1":"4.5","2":"2.3"},{"1":"4.4","2":"3.2"},{"1":"5.0","2":"3.5"},{"1":"5.1","2":"3.8"},{"1":"4.8","2":"3.0"},{"1":"5.1","2":"3.8"},{"1":"4.6","2":"3.2"},{"1":"5.3","2":"3.7"},{"1":"5.0","2":"3.3"},{"1":"7.0","2":"3.2"},{"1":"6.4","2":"3.2"},{"1":"6.9","2":"3.1"},{"1":"5.5","2":"2.3"},{"1":"6.5","2":"2.8"},{"1":"5.7","2":"2.8"},{"1":"6.3","2":"3.3"},{"1":"4.9","2":"2.4"},{"1":"6.6","2":"2.9"},{"1":"5.2","2":"2.7"},{"1":"5.0","2":"2.0"},{"1":"5.9","2":"3.0"},{"1":"6.0","2":"2.2"},{"1":"6.1","2":"2.9"},{"1":"5.6","2":"2.9"},{"1":"6.7","2":"3.1"},{"1":"5.6","2":"3.0"},{"1":"5.8","2":"2.7"},{"1":"6.2","2":"2.2"},{"1":"5.6","2":"2.5"},{"1":"5.9","2":"3.2"},{"1":"6.1","2":"2.8"},{"1":"6.3","2":"2.5"},{"1":"6.1","2":"2.8"},{"1":"6.4","2":"2.9"},{"1":"6.6","2":"3.0"},{"1":"6.8","2":"2.8"},{"1":"6.7","2":"3.0"},{"1":"6.0","2":"2.9"},{"1":"5.7","2":"2.6"},{"1":"5.5","2":"2.4"},{"1":"5.5","2":"2.4"},{"1":"5.8","2":"2.7"},{"1":"6.0","2":"2.7"},{"1":"5.4","2":"3.0"},{"1":"6.0","2":"3.4"},{"1":"6.7","2":"3.1"},{"1":"6.3","2":"2.3"},{"1":"5.6","2":"3.0"},{"1":"5.5","2":"2.5"},{"1":"5.5","2":"2.6"},{"1":"6.1","2":"3.0"},{"1":"5.8","2":"2.6"},{"1":"5.0","2":"2.3"},{"1":"5.6","2":"2.7"},{"1":"5.7","2":"3.0"},{"1":"5.7","2":"2.9"},{"1":"6.2","2":"2.9"},{"1":"5.1","2":"2.5"},{"1":"5.7","2":"2.8"},{"1":"6.3","2":"3.3"},{"1":"5.8","2":"2.7"},{"1":"7.1","2":"3.0"},{"1":"6.3","2":"2.9"},{"1":"6.5","2":"3.0"},{"1":"7.6","2":"3.0"},{"1":"4.9","2":"2.5"},{"1":"7.3","2":"2.9"},{"1":"6.7","2":"2.5"},{"1":"7.2","2":"3.6"},{"1":"6.5","2":"3.2"},{"1":"6.4","2":"2.7"},{"1":"6.8","2":"3.0"},{"1":"5.7","2":"2.5"},{"1":"5.8","2":"2.8"},{"1":"6.4","2":"3.2"},{"1":"6.5","2":"3.0"},{"1":"7.7","2":"3.8"},{"1":"7.7","2":"2.6"},{"1":"6.0","2":"2.2"},{"1":"6.9","2":"3.2"},{"1":"5.6","2":"2.8"},{"1":"7.7","2":"2.8"},{"1":"6.3","2":"2.7"},{"1":"6.7","2":"3.3"},{"1":"7.2","2":"3.2"},{"1":"6.2","2":"2.8"},{"1":"6.1","2":"3.0"},{"1":"6.4","2":"2.8"},{"1":"7.2","2":"3.0"},{"1":"7.4","2":"2.8"},{"1":"7.9","2":"3.8"},{"1":"6.4","2":"2.8"},{"1":"6.3","2":"2.8"},{"1":"6.1","2":"2.6"},{"1":"7.7","2":"3.0"},{"1":"6.3","2":"3.4"},{"1":"6.4","2":"3.1"},{"1":"6.0","2":"3.0"},{"1":"6.9","2":"3.1"},{"1":"6.7","2":"3.1"},{"1":"6.9","2":"3.1"},{"1":"5.8","2":"2.7"},{"1":"6.8","2":"3.2"},{"1":"6.7","2":"3.3"},{"1":"6.7","2":"3.0"},{"1":"6.3","2":"2.5"},{"1":"6.5","2":"3.0"},{"1":"6.2","2":"3.4"},{"1":"5.9","2":"3.0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p><code class="pkg">data.table</code> fourni un raccourci pour écrire une liste : <code>.()</code>. A l’intérieur des crochets (mais pas en dehors), <code>.()</code> sera compris comme <code>list()</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">iris2[, .(Sepal.Length, Sepal.Width)]</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Sepal.Length"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Sepal.Width"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"5.1","2":"3.5"},{"1":"4.9","2":"3.0"},{"1":"4.7","2":"3.2"},{"1":"4.6","2":"3.1"},{"1":"5.0","2":"3.6"},{"1":"5.4","2":"3.9"},{"1":"4.6","2":"3.4"},{"1":"5.0","2":"3.4"},{"1":"4.4","2":"2.9"},{"1":"4.9","2":"3.1"},{"1":"5.4","2":"3.7"},{"1":"4.8","2":"3.4"},{"1":"4.8","2":"3.0"},{"1":"4.3","2":"3.0"},{"1":"5.8","2":"4.0"},{"1":"5.7","2":"4.4"},{"1":"5.4","2":"3.9"},{"1":"5.1","2":"3.5"},{"1":"5.7","2":"3.8"},{"1":"5.1","2":"3.8"},{"1":"5.4","2":"3.4"},{"1":"5.1","2":"3.7"},{"1":"4.6","2":"3.6"},{"1":"5.1","2":"3.3"},{"1":"4.8","2":"3.4"},{"1":"5.0","2":"3.0"},{"1":"5.0","2":"3.4"},{"1":"5.2","2":"3.5"},{"1":"5.2","2":"3.4"},{"1":"4.7","2":"3.2"},{"1":"4.8","2":"3.1"},{"1":"5.4","2":"3.4"},{"1":"5.2","2":"4.1"},{"1":"5.5","2":"4.2"},{"1":"4.9","2":"3.1"},{"1":"5.0","2":"3.2"},{"1":"5.5","2":"3.5"},{"1":"4.9","2":"3.6"},{"1":"4.4","2":"3.0"},{"1":"5.1","2":"3.4"},{"1":"5.0","2":"3.5"},{"1":"4.5","2":"2.3"},{"1":"4.4","2":"3.2"},{"1":"5.0","2":"3.5"},{"1":"5.1","2":"3.8"},{"1":"4.8","2":"3.0"},{"1":"5.1","2":"3.8"},{"1":"4.6","2":"3.2"},{"1":"5.3","2":"3.7"},{"1":"5.0","2":"3.3"},{"1":"7.0","2":"3.2"},{"1":"6.4","2":"3.2"},{"1":"6.9","2":"3.1"},{"1":"5.5","2":"2.3"},{"1":"6.5","2":"2.8"},{"1":"5.7","2":"2.8"},{"1":"6.3","2":"3.3"},{"1":"4.9","2":"2.4"},{"1":"6.6","2":"2.9"},{"1":"5.2","2":"2.7"},{"1":"5.0","2":"2.0"},{"1":"5.9","2":"3.0"},{"1":"6.0","2":"2.2"},{"1":"6.1","2":"2.9"},{"1":"5.6","2":"2.9"},{"1":"6.7","2":"3.1"},{"1":"5.6","2":"3.0"},{"1":"5.8","2":"2.7"},{"1":"6.2","2":"2.2"},{"1":"5.6","2":"2.5"},{"1":"5.9","2":"3.2"},{"1":"6.1","2":"2.8"},{"1":"6.3","2":"2.5"},{"1":"6.1","2":"2.8"},{"1":"6.4","2":"2.9"},{"1":"6.6","2":"3.0"},{"1":"6.8","2":"2.8"},{"1":"6.7","2":"3.0"},{"1":"6.0","2":"2.9"},{"1":"5.7","2":"2.6"},{"1":"5.5","2":"2.4"},{"1":"5.5","2":"2.4"},{"1":"5.8","2":"2.7"},{"1":"6.0","2":"2.7"},{"1":"5.4","2":"3.0"},{"1":"6.0","2":"3.4"},{"1":"6.7","2":"3.1"},{"1":"6.3","2":"2.3"},{"1":"5.6","2":"3.0"},{"1":"5.5","2":"2.5"},{"1":"5.5","2":"2.6"},{"1":"6.1","2":"3.0"},{"1":"5.8","2":"2.6"},{"1":"5.0","2":"2.3"},{"1":"5.6","2":"2.7"},{"1":"5.7","2":"3.0"},{"1":"5.7","2":"2.9"},{"1":"6.2","2":"2.9"},{"1":"5.1","2":"2.5"},{"1":"5.7","2":"2.8"},{"1":"6.3","2":"3.3"},{"1":"5.8","2":"2.7"},{"1":"7.1","2":"3.0"},{"1":"6.3","2":"2.9"},{"1":"6.5","2":"3.0"},{"1":"7.6","2":"3.0"},{"1":"4.9","2":"2.5"},{"1":"7.3","2":"2.9"},{"1":"6.7","2":"2.5"},{"1":"7.2","2":"3.6"},{"1":"6.5","2":"3.2"},{"1":"6.4","2":"2.7"},{"1":"6.8","2":"3.0"},{"1":"5.7","2":"2.5"},{"1":"5.8","2":"2.8"},{"1":"6.4","2":"3.2"},{"1":"6.5","2":"3.0"},{"1":"7.7","2":"3.8"},{"1":"7.7","2":"2.6"},{"1":"6.0","2":"2.2"},{"1":"6.9","2":"3.2"},{"1":"5.6","2":"2.8"},{"1":"7.7","2":"2.8"},{"1":"6.3","2":"2.7"},{"1":"6.7","2":"3.3"},{"1":"7.2","2":"3.2"},{"1":"6.2","2":"2.8"},{"1":"6.1","2":"3.0"},{"1":"6.4","2":"2.8"},{"1":"7.2","2":"3.0"},{"1":"7.4","2":"2.8"},{"1":"7.9","2":"3.8"},{"1":"6.4","2":"2.8"},{"1":"6.3","2":"2.8"},{"1":"6.1","2":"2.6"},{"1":"7.7","2":"3.0"},{"1":"6.3","2":"3.4"},{"1":"6.4","2":"3.1"},{"1":"6.0","2":"3.0"},{"1":"6.9","2":"3.1"},{"1":"6.7","2":"3.1"},{"1":"6.9","2":"3.1"},{"1":"5.8","2":"2.7"},{"1":"6.8","2":"3.2"},{"1":"6.7","2":"3.3"},{"1":"6.7","2":"3.0"},{"1":"6.3","2":"2.5"},{"1":"6.5","2":"3.0"},{"1":"6.2","2":"3.4"},{"1":"5.9","2":"3.0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Il est possible de renommer une variable à la volée et même d’en calculer d’autres.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">iris2[, .(<span class="dt">espece =</span> Species, <span class="dt">aire_petal =</span> Petal.Length <span class="op">*</span><span class="st"> </span>Petal.Width)]</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["espece"],"name":[1],"type":["fctr"],"align":["left"]},{"label":["aire_petal"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"setosa","2":"0.28"},{"1":"setosa","2":"0.28"},{"1":"setosa","2":"0.26"},{"1":"setosa","2":"0.30"},{"1":"setosa","2":"0.28"},{"1":"setosa","2":"0.68"},{"1":"setosa","2":"0.42"},{"1":"setosa","2":"0.30"},{"1":"setosa","2":"0.28"},{"1":"setosa","2":"0.15"},{"1":"setosa","2":"0.30"},{"1":"setosa","2":"0.32"},{"1":"setosa","2":"0.14"},{"1":"setosa","2":"0.11"},{"1":"setosa","2":"0.24"},{"1":"setosa","2":"0.60"},{"1":"setosa","2":"0.52"},{"1":"setosa","2":"0.42"},{"1":"setosa","2":"0.51"},{"1":"setosa","2":"0.45"},{"1":"setosa","2":"0.34"},{"1":"setosa","2":"0.60"},{"1":"setosa","2":"0.20"},{"1":"setosa","2":"0.85"},{"1":"setosa","2":"0.38"},{"1":"setosa","2":"0.32"},{"1":"setosa","2":"0.64"},{"1":"setosa","2":"0.30"},{"1":"setosa","2":"0.28"},{"1":"setosa","2":"0.32"},{"1":"setosa","2":"0.32"},{"1":"setosa","2":"0.60"},{"1":"setosa","2":"0.15"},{"1":"setosa","2":"0.28"},{"1":"setosa","2":"0.30"},{"1":"setosa","2":"0.24"},{"1":"setosa","2":"0.26"},{"1":"setosa","2":"0.14"},{"1":"setosa","2":"0.26"},{"1":"setosa","2":"0.30"},{"1":"setosa","2":"0.39"},{"1":"setosa","2":"0.39"},{"1":"setosa","2":"0.26"},{"1":"setosa","2":"0.96"},{"1":"setosa","2":"0.76"},{"1":"setosa","2":"0.42"},{"1":"setosa","2":"0.32"},{"1":"setosa","2":"0.28"},{"1":"setosa","2":"0.30"},{"1":"setosa","2":"0.28"},{"1":"versicolor","2":"6.58"},{"1":"versicolor","2":"6.75"},{"1":"versicolor","2":"7.35"},{"1":"versicolor","2":"5.20"},{"1":"versicolor","2":"6.90"},{"1":"versicolor","2":"5.85"},{"1":"versicolor","2":"7.52"},{"1":"versicolor","2":"3.30"},{"1":"versicolor","2":"5.98"},{"1":"versicolor","2":"5.46"},{"1":"versicolor","2":"3.50"},{"1":"versicolor","2":"6.30"},{"1":"versicolor","2":"4.00"},{"1":"versicolor","2":"6.58"},{"1":"versicolor","2":"4.68"},{"1":"versicolor","2":"6.16"},{"1":"versicolor","2":"6.75"},{"1":"versicolor","2":"4.10"},{"1":"versicolor","2":"6.75"},{"1":"versicolor","2":"4.29"},{"1":"versicolor","2":"8.64"},{"1":"versicolor","2":"5.20"},{"1":"versicolor","2":"7.35"},{"1":"versicolor","2":"5.64"},{"1":"versicolor","2":"5.59"},{"1":"versicolor","2":"6.16"},{"1":"versicolor","2":"6.72"},{"1":"versicolor","2":"8.50"},{"1":"versicolor","2":"6.75"},{"1":"versicolor","2":"3.50"},{"1":"versicolor","2":"4.18"},{"1":"versicolor","2":"3.70"},{"1":"versicolor","2":"4.68"},{"1":"versicolor","2":"8.16"},{"1":"versicolor","2":"6.75"},{"1":"versicolor","2":"7.20"},{"1":"versicolor","2":"7.05"},{"1":"versicolor","2":"5.72"},{"1":"versicolor","2":"5.33"},{"1":"versicolor","2":"5.20"},{"1":"versicolor","2":"5.28"},{"1":"versicolor","2":"6.44"},{"1":"versicolor","2":"4.80"},{"1":"versicolor","2":"3.30"},{"1":"versicolor","2":"5.46"},{"1":"versicolor","2":"5.04"},{"1":"versicolor","2":"5.46"},{"1":"versicolor","2":"5.59"},{"1":"versicolor","2":"3.30"},{"1":"versicolor","2":"5.33"},{"1":"virginica","2":"15.00"},{"1":"virginica","2":"9.69"},{"1":"virginica","2":"12.39"},{"1":"virginica","2":"10.08"},{"1":"virginica","2":"12.76"},{"1":"virginica","2":"13.86"},{"1":"virginica","2":"7.65"},{"1":"virginica","2":"11.34"},{"1":"virginica","2":"10.44"},{"1":"virginica","2":"15.25"},{"1":"virginica","2":"10.20"},{"1":"virginica","2":"10.07"},{"1":"virginica","2":"11.55"},{"1":"virginica","2":"10.00"},{"1":"virginica","2":"12.24"},{"1":"virginica","2":"12.19"},{"1":"virginica","2":"9.90"},{"1":"virginica","2":"14.74"},{"1":"virginica","2":"15.87"},{"1":"virginica","2":"7.50"},{"1":"virginica","2":"13.11"},{"1":"virginica","2":"9.80"},{"1":"virginica","2":"13.40"},{"1":"virginica","2":"8.82"},{"1":"virginica","2":"11.97"},{"1":"virginica","2":"10.80"},{"1":"virginica","2":"8.64"},{"1":"virginica","2":"8.82"},{"1":"virginica","2":"11.76"},{"1":"virginica","2":"9.28"},{"1":"virginica","2":"11.59"},{"1":"virginica","2":"12.80"},{"1":"virginica","2":"12.32"},{"1":"virginica","2":"7.65"},{"1":"virginica","2":"7.84"},{"1":"virginica","2":"14.03"},{"1":"virginica","2":"13.44"},{"1":"virginica","2":"9.90"},{"1":"virginica","2":"8.64"},{"1":"virginica","2":"11.34"},{"1":"virginica","2":"13.44"},{"1":"virginica","2":"11.73"},{"1":"virginica","2":"9.69"},{"1":"virginica","2":"13.57"},{"1":"virginica","2":"14.25"},{"1":"virginica","2":"11.96"},{"1":"virginica","2":"9.50"},{"1":"virginica","2":"10.40"},{"1":"virginica","2":"12.42"},{"1":"virginica","2":"9.18"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Seul le retour est ici affecté. Cela n’impacte pas le tableau d’origine. Nous verrons plus loin comment créer / modifier une variable.</p>
<p>Attention : on ne peut pas directement sélectionner une variable par sa position ou en indiquant une chaîne de caractères. En effet, une valeur numérique ou textuelle est comprise comme une constante.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1">iris2[, .(<span class="st">&quot;Species&quot;</span>, <span class="dv">3</span>)]</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["V1"],"name":[1],"type":["chr"],"align":["left"]},{"label":["V2"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"Species","2":"3"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="grouper-les-resultats" class="section level2">
<h2>Grouper les résultats</h2>
<p>Si en <code>j</code> on utilise des fonctions qui à partir d’un vecteur renvoient une valeur unique (telles que <code data-pkg="base">mean</code>, <code data-pkg="stats">median</code>, <code data-pkg="base" data-rdoc="Extremes">min</code>, <code data-pkg="base" data-rdoc="Extremes">max</code>, <code data-pkg="data.table">first</code>, <code data-pkg="data.table">last</code>, <code data-pkg="dplyr">nth</code>, etc.), on peut ainsi obtenir un résumé. On pourra également utiliser <code data-pkg="data.table" data-rdoc="special-symbols">.N</code> pour obtenir le nombre d’observations.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">iris2[, .(<span class="dt">min_sepal_width =</span> <span class="kw">min</span>(Sepal.Width), <span class="dt">max_sepal_width =</span> <span class="kw">max</span>(Sepal.Width), </a>
<a class="sourceLine" id="cb16-2" title="2">  <span class="dt">n_observations =</span> .N)]</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["min_sepal_width"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["max_sepal_width"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["n_observations"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"2","2":"4.4","3":"150"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Cela devient particulièrement intéressant en calculant ces mêmes valeurs par sous-groupe, grace au troisième paramètre : <code>by</code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">iris2[, .(<span class="dt">min_sepal_width =</span> <span class="kw">min</span>(Sepal.Width), <span class="dt">max_sepal_width =</span> <span class="kw">max</span>(Sepal.Width), </a>
<a class="sourceLine" id="cb17-2" title="2">  <span class="dt">n_observations =</span> .N), by =<span class="st"> </span>Species]</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Species"],"name":[1],"type":["fctr"],"align":["left"]},{"label":["min_sepal_width"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["max_sepal_width"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["n_observations"],"name":[4],"type":["int"],"align":["right"]}],"data":[{"1":"setosa","2":"2.3","3":"4.4","4":"50"},{"1":"versicolor","2":"2.0","3":"3.4","4":"50"},{"1":"virginica","2":"2.2","3":"3.8","4":"50"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="ajouter-modifier-supprimer-une-variable" class="section level2">
<h2>Ajouter / Modifier / Supprimer une variable</h2>
<p><code class="pkg">data.table</code> introduit un nouvel opérateur <code>:=</code> permettant de modifier une variable par assignation directe. Cela signifie que la modification a lieu directement en mémoire dans le tableau de données, sans qu’il soit besoin réaffecter le résultat avec <code>&lt;-</code>.</p>
<p>On peut également combiner <code>:=</code> avec une sélection sur les observations en <code>i</code> pour ne modifier que certaines observations. De même, le recours à <code>by</code> permets des calculs par groupe.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1">iris2[, group <span class="op">:</span><span class="er">=</span><span class="st"> &quot;A&quot;</span>]</a>
<a class="sourceLine" id="cb18-2" title="2">iris2[Species <span class="op">==</span><span class="st"> &quot;virginica&quot;</span>, group <span class="op">:</span><span class="er">=</span><span class="st"> &quot;B&quot;</span>]</a>
<a class="sourceLine" id="cb18-3" title="3">iris2[, n_obs_per_species <span class="op">:</span><span class="er">=</span><span class="st"> </span>.N, by =<span class="st"> </span>Species]</a></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1">iris2</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Sepal.Length"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Sepal.Width"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Petal.Length"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Petal.Width"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["Species"],"name":[5],"type":["fctr"],"align":["left"]},{"label":["group"],"name":[6],"type":["chr"],"align":["left"]},{"label":["n_obs_per_species"],"name":[7],"type":["int"],"align":["right"]}],"data":[{"1":"5.1","2":"3.5","3":"1.4","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"4.9","2":"3.0","3":"1.4","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"4.7","2":"3.2","3":"1.3","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"4.6","2":"3.1","3":"1.5","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"5.0","2":"3.6","3":"1.4","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"5.4","2":"3.9","3":"1.7","4":"0.4","5":"setosa","6":"A","7":"50"},{"1":"4.6","2":"3.4","3":"1.4","4":"0.3","5":"setosa","6":"A","7":"50"},{"1":"5.0","2":"3.4","3":"1.5","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"4.4","2":"2.9","3":"1.4","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"4.9","2":"3.1","3":"1.5","4":"0.1","5":"setosa","6":"A","7":"50"},{"1":"5.4","2":"3.7","3":"1.5","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"4.8","2":"3.4","3":"1.6","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"4.8","2":"3.0","3":"1.4","4":"0.1","5":"setosa","6":"A","7":"50"},{"1":"4.3","2":"3.0","3":"1.1","4":"0.1","5":"setosa","6":"A","7":"50"},{"1":"5.8","2":"4.0","3":"1.2","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"5.7","2":"4.4","3":"1.5","4":"0.4","5":"setosa","6":"A","7":"50"},{"1":"5.4","2":"3.9","3":"1.3","4":"0.4","5":"setosa","6":"A","7":"50"},{"1":"5.1","2":"3.5","3":"1.4","4":"0.3","5":"setosa","6":"A","7":"50"},{"1":"5.7","2":"3.8","3":"1.7","4":"0.3","5":"setosa","6":"A","7":"50"},{"1":"5.1","2":"3.8","3":"1.5","4":"0.3","5":"setosa","6":"A","7":"50"},{"1":"5.4","2":"3.4","3":"1.7","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"5.1","2":"3.7","3":"1.5","4":"0.4","5":"setosa","6":"A","7":"50"},{"1":"4.6","2":"3.6","3":"1.0","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"5.1","2":"3.3","3":"1.7","4":"0.5","5":"setosa","6":"A","7":"50"},{"1":"4.8","2":"3.4","3":"1.9","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"5.0","2":"3.0","3":"1.6","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"5.0","2":"3.4","3":"1.6","4":"0.4","5":"setosa","6":"A","7":"50"},{"1":"5.2","2":"3.5","3":"1.5","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"5.2","2":"3.4","3":"1.4","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"4.7","2":"3.2","3":"1.6","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"4.8","2":"3.1","3":"1.6","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"5.4","2":"3.4","3":"1.5","4":"0.4","5":"setosa","6":"A","7":"50"},{"1":"5.2","2":"4.1","3":"1.5","4":"0.1","5":"setosa","6":"A","7":"50"},{"1":"5.5","2":"4.2","3":"1.4","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"4.9","2":"3.1","3":"1.5","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"5.0","2":"3.2","3":"1.2","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"5.5","2":"3.5","3":"1.3","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"4.9","2":"3.6","3":"1.4","4":"0.1","5":"setosa","6":"A","7":"50"},{"1":"4.4","2":"3.0","3":"1.3","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"5.1","2":"3.4","3":"1.5","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"5.0","2":"3.5","3":"1.3","4":"0.3","5":"setosa","6":"A","7":"50"},{"1":"4.5","2":"2.3","3":"1.3","4":"0.3","5":"setosa","6":"A","7":"50"},{"1":"4.4","2":"3.2","3":"1.3","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"5.0","2":"3.5","3":"1.6","4":"0.6","5":"setosa","6":"A","7":"50"},{"1":"5.1","2":"3.8","3":"1.9","4":"0.4","5":"setosa","6":"A","7":"50"},{"1":"4.8","2":"3.0","3":"1.4","4":"0.3","5":"setosa","6":"A","7":"50"},{"1":"5.1","2":"3.8","3":"1.6","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"4.6","2":"3.2","3":"1.4","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"5.3","2":"3.7","3":"1.5","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"5.0","2":"3.3","3":"1.4","4":"0.2","5":"setosa","6":"A","7":"50"},{"1":"7.0","2":"3.2","3":"4.7","4":"1.4","5":"versicolor","6":"A","7":"50"},{"1":"6.4","2":"3.2","3":"4.5","4":"1.5","5":"versicolor","6":"A","7":"50"},{"1":"6.9","2":"3.1","3":"4.9","4":"1.5","5":"versicolor","6":"A","7":"50"},{"1":"5.5","2":"2.3","3":"4.0","4":"1.3","5":"versicolor","6":"A","7":"50"},{"1":"6.5","2":"2.8","3":"4.6","4":"1.5","5":"versicolor","6":"A","7":"50"},{"1":"5.7","2":"2.8","3":"4.5","4":"1.3","5":"versicolor","6":"A","7":"50"},{"1":"6.3","2":"3.3","3":"4.7","4":"1.6","5":"versicolor","6":"A","7":"50"},{"1":"4.9","2":"2.4","3":"3.3","4":"1.0","5":"versicolor","6":"A","7":"50"},{"1":"6.6","2":"2.9","3":"4.6","4":"1.3","5":"versicolor","6":"A","7":"50"},{"1":"5.2","2":"2.7","3":"3.9","4":"1.4","5":"versicolor","6":"A","7":"50"},{"1":"5.0","2":"2.0","3":"3.5","4":"1.0","5":"versicolor","6":"A","7":"50"},{"1":"5.9","2":"3.0","3":"4.2","4":"1.5","5":"versicolor","6":"A","7":"50"},{"1":"6.0","2":"2.2","3":"4.0","4":"1.0","5":"versicolor","6":"A","7":"50"},{"1":"6.1","2":"2.9","3":"4.7","4":"1.4","5":"versicolor","6":"A","7":"50"},{"1":"5.6","2":"2.9","3":"3.6","4":"1.3","5":"versicolor","6":"A","7":"50"},{"1":"6.7","2":"3.1","3":"4.4","4":"1.4","5":"versicolor","6":"A","7":"50"},{"1":"5.6","2":"3.0","3":"4.5","4":"1.5","5":"versicolor","6":"A","7":"50"},{"1":"5.8","2":"2.7","3":"4.1","4":"1.0","5":"versicolor","6":"A","7":"50"},{"1":"6.2","2":"2.2","3":"4.5","4":"1.5","5":"versicolor","6":"A","7":"50"},{"1":"5.6","2":"2.5","3":"3.9","4":"1.1","5":"versicolor","6":"A","7":"50"},{"1":"5.9","2":"3.2","3":"4.8","4":"1.8","5":"versicolor","6":"A","7":"50"},{"1":"6.1","2":"2.8","3":"4.0","4":"1.3","5":"versicolor","6":"A","7":"50"},{"1":"6.3","2":"2.5","3":"4.9","4":"1.5","5":"versicolor","6":"A","7":"50"},{"1":"6.1","2":"2.8","3":"4.7","4":"1.2","5":"versicolor","6":"A","7":"50"},{"1":"6.4","2":"2.9","3":"4.3","4":"1.3","5":"versicolor","6":"A","7":"50"},{"1":"6.6","2":"3.0","3":"4.4","4":"1.4","5":"versicolor","6":"A","7":"50"},{"1":"6.8","2":"2.8","3":"4.8","4":"1.4","5":"versicolor","6":"A","7":"50"},{"1":"6.7","2":"3.0","3":"5.0","4":"1.7","5":"versicolor","6":"A","7":"50"},{"1":"6.0","2":"2.9","3":"4.5","4":"1.5","5":"versicolor","6":"A","7":"50"},{"1":"5.7","2":"2.6","3":"3.5","4":"1.0","5":"versicolor","6":"A","7":"50"},{"1":"5.5","2":"2.4","3":"3.8","4":"1.1","5":"versicolor","6":"A","7":"50"},{"1":"5.5","2":"2.4","3":"3.7","4":"1.0","5":"versicolor","6":"A","7":"50"},{"1":"5.8","2":"2.7","3":"3.9","4":"1.2","5":"versicolor","6":"A","7":"50"},{"1":"6.0","2":"2.7","3":"5.1","4":"1.6","5":"versicolor","6":"A","7":"50"},{"1":"5.4","2":"3.0","3":"4.5","4":"1.5","5":"versicolor","6":"A","7":"50"},{"1":"6.0","2":"3.4","3":"4.5","4":"1.6","5":"versicolor","6":"A","7":"50"},{"1":"6.7","2":"3.1","3":"4.7","4":"1.5","5":"versicolor","6":"A","7":"50"},{"1":"6.3","2":"2.3","3":"4.4","4":"1.3","5":"versicolor","6":"A","7":"50"},{"1":"5.6","2":"3.0","3":"4.1","4":"1.3","5":"versicolor","6":"A","7":"50"},{"1":"5.5","2":"2.5","3":"4.0","4":"1.3","5":"versicolor","6":"A","7":"50"},{"1":"5.5","2":"2.6","3":"4.4","4":"1.2","5":"versicolor","6":"A","7":"50"},{"1":"6.1","2":"3.0","3":"4.6","4":"1.4","5":"versicolor","6":"A","7":"50"},{"1":"5.8","2":"2.6","3":"4.0","4":"1.2","5":"versicolor","6":"A","7":"50"},{"1":"5.0","2":"2.3","3":"3.3","4":"1.0","5":"versicolor","6":"A","7":"50"},{"1":"5.6","2":"2.7","3":"4.2","4":"1.3","5":"versicolor","6":"A","7":"50"},{"1":"5.7","2":"3.0","3":"4.2","4":"1.2","5":"versicolor","6":"A","7":"50"},{"1":"5.7","2":"2.9","3":"4.2","4":"1.3","5":"versicolor","6":"A","7":"50"},{"1":"6.2","2":"2.9","3":"4.3","4":"1.3","5":"versicolor","6":"A","7":"50"},{"1":"5.1","2":"2.5","3":"3.0","4":"1.1","5":"versicolor","6":"A","7":"50"},{"1":"5.7","2":"2.8","3":"4.1","4":"1.3","5":"versicolor","6":"A","7":"50"},{"1":"6.3","2":"3.3","3":"6.0","4":"2.5","5":"virginica","6":"B","7":"50"},{"1":"5.8","2":"2.7","3":"5.1","4":"1.9","5":"virginica","6":"B","7":"50"},{"1":"7.1","2":"3.0","3":"5.9","4":"2.1","5":"virginica","6":"B","7":"50"},{"1":"6.3","2":"2.9","3":"5.6","4":"1.8","5":"virginica","6":"B","7":"50"},{"1":"6.5","2":"3.0","3":"5.8","4":"2.2","5":"virginica","6":"B","7":"50"},{"1":"7.6","2":"3.0","3":"6.6","4":"2.1","5":"virginica","6":"B","7":"50"},{"1":"4.9","2":"2.5","3":"4.5","4":"1.7","5":"virginica","6":"B","7":"50"},{"1":"7.3","2":"2.9","3":"6.3","4":"1.8","5":"virginica","6":"B","7":"50"},{"1":"6.7","2":"2.5","3":"5.8","4":"1.8","5":"virginica","6":"B","7":"50"},{"1":"7.2","2":"3.6","3":"6.1","4":"2.5","5":"virginica","6":"B","7":"50"},{"1":"6.5","2":"3.2","3":"5.1","4":"2.0","5":"virginica","6":"B","7":"50"},{"1":"6.4","2":"2.7","3":"5.3","4":"1.9","5":"virginica","6":"B","7":"50"},{"1":"6.8","2":"3.0","3":"5.5","4":"2.1","5":"virginica","6":"B","7":"50"},{"1":"5.7","2":"2.5","3":"5.0","4":"2.0","5":"virginica","6":"B","7":"50"},{"1":"5.8","2":"2.8","3":"5.1","4":"2.4","5":"virginica","6":"B","7":"50"},{"1":"6.4","2":"3.2","3":"5.3","4":"2.3","5":"virginica","6":"B","7":"50"},{"1":"6.5","2":"3.0","3":"5.5","4":"1.8","5":"virginica","6":"B","7":"50"},{"1":"7.7","2":"3.8","3":"6.7","4":"2.2","5":"virginica","6":"B","7":"50"},{"1":"7.7","2":"2.6","3":"6.9","4":"2.3","5":"virginica","6":"B","7":"50"},{"1":"6.0","2":"2.2","3":"5.0","4":"1.5","5":"virginica","6":"B","7":"50"},{"1":"6.9","2":"3.2","3":"5.7","4":"2.3","5":"virginica","6":"B","7":"50"},{"1":"5.6","2":"2.8","3":"4.9","4":"2.0","5":"virginica","6":"B","7":"50"},{"1":"7.7","2":"2.8","3":"6.7","4":"2.0","5":"virginica","6":"B","7":"50"},{"1":"6.3","2":"2.7","3":"4.9","4":"1.8","5":"virginica","6":"B","7":"50"},{"1":"6.7","2":"3.3","3":"5.7","4":"2.1","5":"virginica","6":"B","7":"50"},{"1":"7.2","2":"3.2","3":"6.0","4":"1.8","5":"virginica","6":"B","7":"50"},{"1":"6.2","2":"2.8","3":"4.8","4":"1.8","5":"virginica","6":"B","7":"50"},{"1":"6.1","2":"3.0","3":"4.9","4":"1.8","5":"virginica","6":"B","7":"50"},{"1":"6.4","2":"2.8","3":"5.6","4":"2.1","5":"virginica","6":"B","7":"50"},{"1":"7.2","2":"3.0","3":"5.8","4":"1.6","5":"virginica","6":"B","7":"50"},{"1":"7.4","2":"2.8","3":"6.1","4":"1.9","5":"virginica","6":"B","7":"50"},{"1":"7.9","2":"3.8","3":"6.4","4":"2.0","5":"virginica","6":"B","7":"50"},{"1":"6.4","2":"2.8","3":"5.6","4":"2.2","5":"virginica","6":"B","7":"50"},{"1":"6.3","2":"2.8","3":"5.1","4":"1.5","5":"virginica","6":"B","7":"50"},{"1":"6.1","2":"2.6","3":"5.6","4":"1.4","5":"virginica","6":"B","7":"50"},{"1":"7.7","2":"3.0","3":"6.1","4":"2.3","5":"virginica","6":"B","7":"50"},{"1":"6.3","2":"3.4","3":"5.6","4":"2.4","5":"virginica","6":"B","7":"50"},{"1":"6.4","2":"3.1","3":"5.5","4":"1.8","5":"virginica","6":"B","7":"50"},{"1":"6.0","2":"3.0","3":"4.8","4":"1.8","5":"virginica","6":"B","7":"50"},{"1":"6.9","2":"3.1","3":"5.4","4":"2.1","5":"virginica","6":"B","7":"50"},{"1":"6.7","2":"3.1","3":"5.6","4":"2.4","5":"virginica","6":"B","7":"50"},{"1":"6.9","2":"3.1","3":"5.1","4":"2.3","5":"virginica","6":"B","7":"50"},{"1":"5.8","2":"2.7","3":"5.1","4":"1.9","5":"virginica","6":"B","7":"50"},{"1":"6.8","2":"3.2","3":"5.9","4":"2.3","5":"virginica","6":"B","7":"50"},{"1":"6.7","2":"3.3","3":"5.7","4":"2.5","5":"virginica","6":"B","7":"50"},{"1":"6.7","2":"3.0","3":"5.2","4":"2.3","5":"virginica","6":"B","7":"50"},{"1":"6.3","2":"2.5","3":"5.0","4":"1.9","5":"virginica","6":"B","7":"50"},{"1":"6.5","2":"3.0","3":"5.2","4":"2.0","5":"virginica","6":"B","7":"50"},{"1":"6.2","2":"3.4","3":"5.4","4":"2.3","5":"virginica","6":"B","7":"50"},{"1":"5.9","2":"3.0","3":"5.1","4":"1.8","5":"virginica","6":"B","7":"50"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1">iris2[, .N, by =<span class="st"> </span>group]</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["group"],"name":[1],"type":["chr"],"align":["left"]},{"label":["N"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"A","2":"100"},{"1":"B","2":"50"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div id="enchainer-les-operations" class="section level1">
<h1>Enchaîner les opérations</h1>
<p>Il est possible d’enchaîner les opérations avec une succession de crochets.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1">iris2[, .(<span class="dt">petal_area =</span> Petal.Width <span class="op">*</span><span class="st"> </span>Petal.Length, Species)][, </a>
<a class="sourceLine" id="cb21-2" title="2">  .(<span class="dt">min_petal_area =</span> <span class="kw">min</span>(petal_area)), by =<span class="st"> </span>Species]</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Species"],"name":[1],"type":["fctr"],"align":["left"]},{"label":["min_petal_area"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"setosa","2":"0.11"},{"1":"versicolor","2":"3.30"},{"1":"virginica","2":"7.50"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>

</article>
</div>

<div class="col-sm-3" role="complementary">
<nav class="hidden-print hidden-xs" id="nav_sidebar">
</nav>
</div>

</div>

<script>
// manage active state of menu based on current page
$(document).ready(function () {

    // active menu
    href = window.location.pathname;
    href = href.substr(href.lastIndexOf('/') + 1);
    if (href=='') href = 'index.html';
    $('a[href="' + href + '"]').parent().addClass('active');
    $('a[href="' + href + '"]').parent().parents('li').addClass('active');

    // élargir la page d'accueil
    if (href=='index.html') $('.col-sm-9').attr('class','col-sm-12');

    // rechercher
    $("#rechercher").submit(function(event) {
      $('input[name="q"]').val($('input[name="q"]').val() + ' site:larmarange.github.io/analyse-R');
    });

    // sidebar
    $("#nav_sidebar").append($("#TOC").html());
    $("#nav_sidebar ul").addClass("nav nav-stacked");
    $("#TOC").addClass("visible-xs-block");
    $('body').scrollspy({
      target: '#nav_sidebar',
      offset: 40
    });

    // Identifier les <pre> fermant
    $('pre').next("*:not(pre)").prev().addClass('last'); // Dernier <pre> de chaque groupe contigu de <pre>
    $('pre').parent().each(function (){
      $(this).children('pre').last().addClass('last');
    }); // Si <pre> est le dernier enfant de son parent

    // Ajout liens rdocumentation et tooltip
    $("code[data-pkg]").each(function( index ) {
      pkg = $(this).attr('data-pkg');
      if ($(this).attr('data-rdoc') !== undefined) {
        rdocumentation = $(this).attr('data-rdoc');
      } else {
        rdocumentation = $(this).text();
      }
      fonction = $(this).text();
      //$(this).wrap('<a href="http://www.rdocumentation.org/packages/'+pkg+'/functions/'+rdocumentation+'">');
      $(this).wrap('<a href="http://rdrr.io/pkg/'+pkg+'/sym/'+rdocumentation+'">');
      $(this).attr('data-toggle','tooltip');
      $(this).attr('data-placement','top');
      $(this).attr('title','package : ' + pkg);
      $('[data-toggle="tooltip"]').tooltip();
    });

    $("code.pkg").each(function( index ) {
      //$(this).wrap('<a href="http://www.rdocumentation.org/packages/'+$(this).text()+'">');
      $(this).wrap('<a href="http://rdrr.io/pkg/'+$(this).text()+'">');
    });

    // Figures
    $("figure").each(function( index ) {
      if ($(this).children("figcaption").length > 0)
        $(this).children("figcaption:first").prepend('<span class="figure-number">Figure '+(index+1)+'.</span> ');
      else
        $(this).append($("<figcaption>").append('<span class="figure-number">Figure '+(index+1)+'</span>'));
    });

    // Colorbox

    /*----
    jQuery('article div img').colorbox({
      maxWidth: '90%',
      maxHeight: '90%',
      rel: 'figures',
      current: "",
      href: function(){
        return $(this).attr('src');
      },
      title: function(){
        return $(this).attr('alt');
      }
    });
    jQuery('article div img').css('cursor', 'pointer');
    jQuery('figure img').colorbox({
      maxWidth: '90%',
      maxHeight: '90%',
      rel: 'figures',
      current: "",
      href: function(){
        return $(this).attr('src');
      },
      title: function(){
        return $(this).parent().children("figcaption").text();
      }
    });
    jQuery('figure img').css('cursor', 'pointer');

    -----*/

    /* Clipboard --------------------------*/

  function changeTooltipMessage(element, msg) {
    var tooltipOriginalTitle=element.getAttribute('data-original-title');
    element.setAttribute('data-original-title', msg);
    $(element).tooltip('show');
    element.setAttribute('data-original-title', tooltipOriginalTitle);
  }

  if(ClipboardJS.isSupported()) {
    $(document).ready(function() {
      var copyButton = "<button type='button' class='btn btn-primary btn-copy-ex' type = 'submit' title='Copier dans le presse-papier' aria-label='Copier dans le presse-papier' data-toggle='tooltip' data-placement='left auto' data-trigger='hover' data-clipboard-copy><i class='fa fa-copy'></i></button>";

      $(".examples, div.sourceCode").addClass("hasCopyButton");

      // Insert copy buttons:
      $(copyButton).prependTo(".hasCopyButton");

      // Initialize tooltips:
      $('.btn-copy-ex').tooltip({container: 'body'});

      // Initialize clipboard:
      var clipboardBtnCopies = new ClipboardJS('[data-clipboard-copy]', {
        text: function(trigger) {
          return trigger.parentNode.textContent;
        }
      });

      clipboardBtnCopies.on('success', function(e) {
        changeTooltipMessage(e.trigger, 'Copié !');
        e.clearSelection();
      });

      clipboardBtnCopies.on('error', function() {
        changeTooltipMessage(e.trigger,'Appuyez sur Ctrl+C ou Command+C pour copier');
      });
    });
  }

  // Bigfoot
  $(".footnotes > li").addClass("footnote");
  $.bigfoot({
    activateOnHover: true,
    actionOriginalFN: "ignore"
});
});
</script>

<!-- Utterances comments --->
<script src="https://utteranc.es/client.js"
        repo="larmarange/analyse-R"
        issue-term="pathname"
        label="commentaires"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

<!-- disqus -->
<!---
<div class="row">
  <div id="disqus_thread" class="col-sm-9" role="complementary"></div>
</div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'analyse-r'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Veuillez activer JavaScript pour voir les <a href="http://disqus.com/?ref_noscript">les commentaires gérés avec Disqus.</a></noscript>
    <!--<a href="http://disqus.com" class="dsq-brlink">Les commentaires sont hébergés par <span class="logo-disqus">Disqus</span>.</a>-->

<footer>
  <div class="row">
    <div class="col-lg-12">
      <p>Contenus sous licence <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/fr/" rel="nofollow">Creative Commons Attribution - Pas d’utilisation commerciale - Partage dans les mêmes conditions</a>.<br />
      Propulsé par <a href="http://www.r-project.org/" rel="nofollow">R</a>, </a><a href="http://www.rstudio.com/" rel="nofollow">RStudio</a>, <a href="http://rmarkdown.rstudio.com/" rel="nofollow">R Markdown</a>, <a href="http://yihui.name/knitr/" rel="nofollow">knitr</a>, <a href="http://pandoc.org/" rel="nofollow">pandoc</a> et <a href="http://www.princexml.com/" rel="nofollow">Prince XML</a>. Hébergé par <a href="https://github.com/" rel="nofollow">GitHub</a>.<br />
      <a href="https://www.zenodo.org/badge/latestdoi/34986666"><img src="https://www.zenodo.org/badge/34986666.svg" alt="DOI"></a></p>
    </div>
  </div>
</footer>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>


</body>
</html>
