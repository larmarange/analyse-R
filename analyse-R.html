<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>analyse-R</title>

<script src="libs/jquery-1.11.0/jquery.min.js"></script>
<link href="include/flatly.print.css" rel="stylesheet" />
<link href="include/analyse-R.css" rel="stylesheet" />

</head>

<body>

<style type = "text/css">
/* CSS générées par knitr */

.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}

code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}

code{white-space: pre;}

table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }

pre:not([class]) {
  background-color: white;
}

/* Print CSS */
@media print {
  math {margin: 11px auto;}

  .main-container {margin:0; padding:0; max-width: 100%;}

  @page {
		size: A4;
		margin: 2.5cm; padding: 0;
 		@bottom {content: "\2013\0000a0\0000a0\0000a0\0000a0" counter(page) "\0000a0\0000a0\0000a0\0000a0\2013"; font-size: 9pt; font-family: Lato, 'Helvetica Neue', Helvetica, Arial, sans-serif;}
		@footnotes {
			border-top: solid #999 thin;
			padding-top: 8pt;
			footnote-style-position: inside;
    }
	}
	@page:first {
  	@bottom { content: normal;}
	  @top-left { content:normal;}
		@top-right { content:normal;}
  }
  @page:left{
    @top-left {content: "analyse-R\0000a0\0000a0\2013\0000a0\0000a0" string(titre_doc);
    font-style: italic; font-size: 9pt; font-family: Lato, 'Helvetica Neue', Helvetica, Arial, sans-serif;}
  }
  @page:right{
    @top-right {content: string(titre_chap); font-style: italic; font-size: 9pt; font-family: Lato, 'Helvetica Neue', Helvetica, Arial, sans-serif;}
  }
  @page:blank{
		@bottom { content: normal;}
	  @top-left { content:normal;}
		@top-right { content:normal;}
	}

  article {string-set: titre_chap "";} /* éviter en-tête en début de chapitre */
	h1 {string-set: titre_chap content();}
	article:first-child .jumbotron h1 {string-set: titre_doc content();}

	body {font-size: 10pt; color: black;}
	pre {font-size: 10pt;}
	h1 {font-size:36pt; margin-top: 3cm; margin-bottom: 1cm; padding:0; color: #2c3e50;}
	article:first-child h1:first-child {margin-top: 0; margin-bottom: .5cm; padding:0; font-size: 48pt;}
	article:first-child .jumbotron h1 {font-size: 32pt;  color: #2c3e50;}
	article:first-child .jumbotron {margin-bottom: 5cm;}
	h2 {font-size: 20pt; margin-top: 1cm; margin-bottom: .5cm; padding:0; color: #2c3e50;}
	h3 {font-size: 16pt; margin-top: 1cm; margin-bottom: .5cm; padding:0; color: #2c3e50;}
	h4 {font-size: 11pt; margin-top: 1cm; margin-bottom: .5cm; padding:0; color: #2c3e50;}
	blockquote p {font-size: 11pt;}
	pre {font-size: 9pt;}

	/* Page-break */
	article, #tdm {page-break-before: right;}
	#presentation {page-break-before: always;}
	article:first-child {page-break-before: auto;}
	h1, h2, h3, h4, heading, caption, pre.r {page-break-after: avoid;}
	figcaption {page-break-before: avoid;}
	figure, table, pre.r {page-break-inside: avoid;}
	div.note, div.important, #licence {page-break-inside: avoid;}

  /* Footnotes */
  .fn {
    float: footnote;
    counter-increment: footnote;
    font-size: 9pt;
  }
  article {counter-reset: footnote;}
  .fn::footnote-call {font-size: 75%; vertical-align: super; line-height: none;}

  /* Liens */
  a[href^="#"] {color: black;}
  a[href^="#"]:after { content: ", page\0000a0" target-counter(attr(href), page);}

  /* Table des matières */
  #tdm strong {font-size: 11pt;}
  .list-group-item {padding: 2pt 0; border:none;}
  a.list-group-item::after {content: leader(" . ") target-counter(attr(href), page);}
  .TOC a::after {content: leader(" . ") target-counter(attr(href), page);}
  .TOC a {color: black;}
  .TOC ul {list-style: none; padding:0; margin:0;}
  .TOC ul ul {padding-left: 0.5cm; font-size: 9pt;}
  .TOC {margin-bottom: 1cm;}

  /* Index des fonctions */
  #index_fonctions nav, #index_extensions nav, #index_concepts nav
    {display: none;}
  #index_fonctions_index_fonctions, #index_extensions_index_extensions, #index_concepts_index_concepts
    {column-count: 2; column-rule: thin solid #2c3e50; column-gap: 1cm;}
  #index_fonctions p, #index_extensions p, #index_concepts p
    {page-break-after: avoid; margin: 10px 0 0 0;}
  #index_fonctions ul a[href^="#"],
  #index_extensions ul a[href^="#"],
  #index_concepts ul a[href^="#"]
    {color: black;}
  #index_fonctions ul a[href^="#"]:after,
  #index_extensions ul a[href^="#"]:after,
  #index_concepts ul a[href^="#"]:after
    {content: leader(" . ") target-counter(attr(href), page);}
  #index_fonctions ul, #index_extensions ul, #index_concepts ul
  {
    list-style: none;
    padding: 0; margin: 0;
    font-size: 8pt;
    page-break-inside: avoid;
  }
  #index_fonctions li, #index_extensions li, #index_concepts li
    {padding-left: 0.5cm;}

  dfn {border-bottom: dotted .5pt #AAA;}

  /* Styles des exemples de fusion de tables */
  table.exemple_df td,
  table.exemple_df th {
    text-align: center;
    padding: 3px 10px;
  }
  table.exemple_df th {
    border-bottom: solid 1px #999;
  }

  table.exemple_df td + td,
  table.exemple_df th + th {
    border-left: solid 1px #999;
  }

  table.exemple_operateur td {
    font-size: 3em;
    padding: 20px;
  }

}

</style>

<div class="container-fluid main-container">
<article>

<div class="fluid-row" id="header">


<h1 class="title">analyse-R</h1>

</div>


<div class="jumbotron">
<h1>
Introduction <br/>Ã  lâ€™analyse dâ€™enquÃªtes <br/>avec R et RStudio
</h1>
<p>
DerniÃ¨re mise Ã  jourÂ : 4 avril 2016
</p>
</div>
<div id="contributeurs" class="section level2">
<h2>Contributeurs</h2>
<p><strong>Par ordre alphabÃ©tiqueÂ :</strong></p>
<p>Julien Barnier, Julien Biaudet, FranÃ§ois Briatte, Milan Bouchet-Valat, FrÃ©dÃ©rique Giraud, JoÃ«l Gombin, Mayeul Kauffmann, Joseph Larmarange, Nicolas Robette.</p>
<p><strong>CrÃ©ation et MaintenanceÂ :</strong></p>
<p>Joseph Larmarange â€” <a href="http://joseph.larmarange.net" class="uri">http://joseph.larmarange.net</a></p>
</div>
<div id="presentation" class="section level2">
<h2>PrÃ©sentation</h2>
<p>Lâ€™objectif premier dâ€™<strong>analyse-R</strong> est de prÃ©senter comment rÃ©aliser des analyses statistiques et diverses opÃ©rations courantes (comme la manipulation de donnÃ©es ou la production de graphiques) avec <strong>R</strong>. Il ne sâ€™agit pas dâ€™un cours de statistiquesÂ : les diffÃ©rents chapitres prÃ©supposent donc que vous avez dÃ©jÃ  une connaissance des diffÃ©rentes techniques prÃ©sentÃ©es. Si vous souhaitez des prÃ©cisions thÃ©oriques / mÃ©thodologiques Ã  propos dâ€™un certain type dâ€™analyses, nous vous conseillons dâ€™utiliser votre moteur de recherche prÃ©fÃ©rÃ©. En effet, on trouve sur internet de trÃ¨s nombreux supports de cours (sans compter les nombreux ouvrages spÃ©cialisÃ©s disponibles en libraririe).</p>
<div class="alert alert-warning" style="font-weight: bold;">
<p>
<strong>analyse-R</strong> est en cours de dÃ©veloppement. La structuration du site et des chapitre sera probablement amenÃ©e Ã  Ã©voluer dans les semaines qui viennent, tout comme les contenus.
</p>
<p>
Les chapitres en cours dâ€™Ã©criture et/ou de refonte sont indiquÃ©s sur fond jaune orangÃ© dans le menu situÃ© en haut de page.
</p>
<p>
Si vous constatez des incohÃ©rences et/ou si vous avez des suggestions dâ€™amÃ©liorations, nâ€™hÃ©sitez pas Ã  les signaler sur <a href="https://github.com/larmarange/analyse-R/issues" style="color: white;">https://github.com/larmarange/analyse-R/issues</a>.
</p>
</div>
</div>
<div id="tdm" class="section level2">
<h2>Table des matiÃ¨res</h2>
<p>Si vous dÃ©butez avec <strong>R</strong> et <strong>RStudio</strong>, nous vous conseillons de parcourir en premier lieu les chapitres suivantsÂ :</p>
<ol style="list-style-type: decimal">
<li>Manipuler &gt; Prise en main</li>
<li>Analyser &gt; Statistiques introductives</li>
<li>Manipuler &gt; Manipulations de donnÃ©es</li>
<li>Analyser &gt; Statistiques intermÃ©diares</li>
</ol>
<p>puis de complÃ©ter votre lecture en fonction de vos besoins.</p>
<div id="manipuler" class="section level3">
<h3>Manipuler</h3>
<div class="row">
<div class="col-md-4">
<p>
<strong>Prise en main</strong>
</p>
<div class="list-group">
<p><a href="#presentation-et-philosophie" class="list-group-item">PrÃ©sentation et Philosophie</a> <a href="#installation-de-R-et-RStudio" class="list-group-item">Installation de R et RStudio</a> <a href="#premier-contact" class="list-group-item">Premier contact</a> <a href="#premier-travail-avec-les-donnees" class="list-group-item">Premier travail avec des donnÃ©es</a> <a href="#extensions" class="list-group-item">Extensions</a> <a href="#vecteurs-indexation-et-assignation" class="list-group-item">Vecteurs, indexation et assignation</a> <a href="#listes-et-tableaux-de-donnes" class="list-group-item">Listes et Tableaux de donnÃ©es</a> <a href="#facteurs-et-vecteurs-labellises" class="list-group-item">Facteurs et vecteurs labellisÃ©s</a> <a href="#organiser-ses-fichiers" class="list-group-item">Organiser ses fichiers</a> <a href="#import-de-donnees" class="list-group-item">Import de donnÃ©es</a> <a href="#recodage" class="list-group-item">Recodage</a> <a href="#ou-trouver-de-l-aide" class="list-group-item">OÃ¹ trouver de lâ€™aideÂ ?</a></p>
</div>
</div>
<div class="col-md-4">
<p>
<strong>Manipulation de donnÃ©es</strong>
</p>
<div class="list-group">
<p><a href="#introduction-a-dplyr" class="list-group-item">Introduction Ã  dplyr</a> <a href="#introduction-a-data-table" class="list-group-item">Introduction Ã  data.table</a> <a href="#doublons" class="list-group-item">Doublons</a> <a href="#tris" class="list-group-item">Tris</a> <a href="#sous-ensembles" class="list-group-item">Sous-ensembles</a> <a href="#fusion-de-tables" class="list-group-item">Fusion de tables</a> <a href="#gestion-des-dates" class="list-group-item">Gestion des dates</a> <a href="#aggregation" class="list-group-item">AggrÃ©gation</a> <a href="#fonctions-a-fenetre" class="list-group-item">Fonctions Ã  fenÃªtre</a> <a href="#restructuration-de-donnees" class="list-group-item">Restructuration de donnÃ©es</a> <a href="#manipuler-du-texte" class="list-group-item">Manipuler du texte</a></p>
</div>
</div>
<div class="col-md-4">
<p>
<strong>Exporter</strong>
</p>
<div class="list-group">
<p><a href="#export-de-donnees" class="list-group-item">Export de donnÃ©es</a> <a href="#export-de-graphiques" class="list-group-item">Export de graphiques</a> <a href="#export-de-tableaux" class="list-group-item">Export de tableaux</a></p>
</div>
</div>
</div>
</div>
<div id="analyser" class="section level3">
<h3>Analyser</h3>
<div class="row">
<div class="col-md-4">
<p>
<strong>Statistiques introductives</strong>
</p>
<div class="list-group">
<p><a href="#statistique-univariee" class="list-group-item">Statistique univariÃ©e</a> <a href="#graphiques-univaries" class="list-group-item">Graphiques univariÃ©s</a> <a href="#statistique-bivariee" class="list-group-item">Statistique bivariÃ©e</a> <a href="#graphiques-bivaries" class="list-group-item">Graphiques bivariÃ©s</a> <a href="#donnees-ponderees" class="list-group-item">DonnÃ©es pondÃ©rÃ©es</a> <a href="#graphiques-de-donnees-ponderees" class="list-group-item">Graphiques de donnÃ©es pondÃ©rÃ©es</a></p>
</div>
</div>
<div class="col-md-4">
<p>
<strong>Statistiques intermÃ©diaires</strong>
</p>
<div class="list-group">
<p><a href="#intervalles-de-confiance" class="list-group-item">Intervalles de confiance</a> <a href="#comparaisons-moyennes-et-proportions" class="list-group-item">Comparaisons (moyennes et proportions)</a> <a href="#definir-un-plan-d-echantillonnage-complexe" class="list-group-item">DÃ©finir un plan dâ€™Ã©chantillonnage complexe</a> <a href="#regression-lineaire" class="list-group-item">RÃ©gression linÃ©aire</a> <a href="#regression-logistique" class="list-group-item">RÃ©gression logistique</a> <a href="#analyse-en-composantes-principales" class="list-group-item">Analyse en composantes principales (ACP)</a> <a href="#analyse-des-correspondances-multiples" class="list-group-item">Analyse des correspondances multiples (ACM)</a> <a href="#classification-ascendante-hierarchique" class="list-group-item">Classification ascendante hiÃ©rarchique (CAH)</a></p>
</div>
</div>
<div class="col-md-4">
<p>
<strong>Statistiques avancÃ©es</strong>
</p>
<div class="list-group">
<p><a href="#modeles-lineaires-a-effets-mixtes" class="list-group-item">ModÃ¨les linÃ©aires Ã  effets mixtes</a> <a href="#modeles-gee" class="list-group-item">ModÃ¨les GEE</a> <a href="#series-temporelles" class="list-group-item">SÃ©ries temporelles</a> <a href="#modeles-a-temps-discret" class="list-group-item">ModÃ¨les Ã  temps discret</a> <a href="#analyse-de-survie" class="list-group-item">Analyse de survie</a> <a href="#analyse-de-sequences" class="list-group-item">Analyse de sÃ©quences</a> <a href="#analyse-de-reseaux" class="list-group-item">Analyse de rÃ©seaux</a> <a href="#analyse-spatiale" class="list-group-item">Analyse spatiale</a></p>
</div>
</div>
</div>
</div>
<div id="approfondir" class="section level3">
<h3>Approfondir</h3>
<div class="row">
<div class="col-md-4">
<p>
<strong>Graphiques</strong>
</p>
<div class="list-group">
<p><a href="#ggplot2-la-grammaire-des-graphiques" class="list-group-item">ggplot2Â : la grammaire des graphiques</a> <a href="#etendre-ggplot2" class="list-group-item">Ã‰tendre ggplot2</a> <a href="#lattice-graphiques-et-formules" class="list-group-item">latticeÂ : graphiques et formules</a> <a href="#diagrammes" class="list-group-item">Diagrammes</a> <a href="#representer-des-flux" class="list-group-item">ReprÃ©senter des flux</a> <a href="#reseaux-dynamiques" class="list-group-item">RÃ©seaux dynamiques</a> <a href="#ggvis-les-graphiques-interactifs" class="list-group-item">ggvisÂ : les graphiques interactifs</a> <a href="#htmlwidgets-la-puissance-du-javascript" class="list-group-item">htmlwidgetsÂ : la puissance de javascript</a> <a href="#cartes" class="list-group-item">Cartes</a></p>
</div>
</div>
<div class="col-md-4">
<p>
<strong>Programmation</strong>
</p>
<div class="list-group">
<p><a href="#formules" class="list-group-item">Formules</a> <a href="#structures-conditionnelles" class="list-group-item">Structures conditionnelles</a> <a href="#expressions-regulieres" class="list-group-item">Expressions rÃ©guliÃ¨res</a> <a href="#ecrire-ses-propres-fonctions" class="list-group-item">Ã‰crire ses propres fonctions</a> <a href="#rmarkdown-les-rapports-automatises" class="list-group-item">R MarkdownÂ : les rapports automatisÃ©s</a> <a href="#shiny-les-interfaces-interactives" class="list-group-item">ShinyÂ : les interfaces interactives</a> <a href="#git" class="list-group-item">Git</a> <a href="#developper-un-package" class="list-group-item">DÃ©velopper un package</a></p>
</div>
</div>
<div class="col-md-4">
<p>
<strong>Divers</strong>
</p>
<div class="list-group">
<p><a href="#calculer-un-age" class="list-group-item">Calculer un Ã¢ge</a> <a href="#prevR-cartes-de-prevalence" class="list-group-item">prevRÂ : cartes de prÃ©valence Ã  partir des EDS</a></p>
</div>
</div>
</div>
</div>
<div id="index" class="section level3">
<h3>Index</h3>
<div class="list-group">
<p><a href="#index-des-concepts" class="list-group-item">Index des concepts</a> <a href="#index-des-fonctions" class="list-group-item">Index des fonctions</a> <a href="#index-des-extensions" class="list-group-item">Index des extensions</a></p>
</div>
</div>
</div>
<div id="licence" class="section level2">
<h2>Licence</h2>
<p>Le contenu de ce site est diffusÃ© sous licence <em>Creative Commons Attribution - Pas dâ€™utilisation commerciale - Partage dans les mÃªmes conditions</em> (<a href="https://creativecommons.org/licenses/by-nc-sa/3.0/fr/" class="uri">https://creativecommons.org/licenses/by-nc-sa/3.0/fr/</a>).</p>
<p><img src="images/by-nc-sa.svg" alt="CC by-nc-sa"/></p>
<p>Cela signifie donc que vous Ãªtes libre de recopier / modifier / redistribuer les contenus dâ€™<strong>analyse-R</strong>, Ã  condition que vous citiez la source et que vos modifications soient elle-mÃªmes distribuÃ©es sous la mÃªme licence (autorisant ainsi dâ€™autres Ã  pouvoir rÃ©utiliser Ã  leur tour vos ajouts).</p>
</div>
<div id="contribuer" class="section level2">
<h2>Contribuer</h2>
<p><strong>analyse-R</strong> est dÃ©veloppÃ© avec <strong>RStudio</strong> et le code source est librement disponible sur <strong>GitHub</strong>Â :<br/> <a href="https://github.com/larmarange/analyse-R" class="uri">https://github.com/larmarange/analyse-R</a>.</p>
<p>Ce projet se veut collaboratif. Nâ€™hÃ©sitez donc pas Ã  proposer des corrections ou ajouts, voire mÃªme Ã  rÃ©diger des chapitres additionnels.</p>
</div>

</article>
<article id="presentation-et-philosophie">

<div class="fluid-row" id="presentation-et-philosophie_header">


<h1 class="title">PrÃ©sentation et Philosophie</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#presentation-et-philosophie_presentation-de-r">PrÃ©sentation de R</a></li>
<li><a href="#presentation-et-philosophie_philosophie-de-r">Philosophie de R</a></li>
<li><a href="#presentation-et-philosophie_presentation-de-rstudio">PrÃ©sentation de RStudio</a></li>
</ul>
</div>

<div id="presentation-et-philosophie_presentation-de-r" class="section level2">
<h2>PrÃ©sentation de R</h2>
<p><strong>R</strong> est un langage orientÃ© vers le traitement de donnÃ©es et lâ€™analyse statistique dÃ©rivÃ© du langage <strong>S</strong>. Il est dÃ©veloppÃ© depuis une vingtaine dâ€™annÃ©es par un groupe de volontaires de diffÃ©rents pays. Câ€™est un <dfn>logiciel libre</dfn><dfn data-index="libre, logiciel"/><a href="#presentation-et-philosophie_fn1" class="footnoteRef" id="presentation-et-philosophie_fnref1"><sup>1</sup></a>, publiÃ© sous licence GNU GPL.</p>
<p>Lâ€™utilisation de <strong>R</strong> prÃ©sente plusieurs avantagesÂ :</p>
<ul>
<li>câ€™est un logiciel multiplateforme, qui fonctionne aussi bien sur des sytÃ¨mes <strong>Linux</strong>, <strong>Mac OS X</strong> ou <strong>Windows</strong>Â ;</li>
<li>câ€™est un logiciel libre, dÃ©veloppÃ© par ses utilisateurs et modifiable par tout un chacunÂ ;</li>
<li>câ€™est un logiciel gratuitÂ ;</li>
<li>câ€™est un logiciel trÃ¨s puissant, dont les fonctionnalitÃ©s de base peuvent Ãªtre Ã©tendues Ã  lâ€™aide de plusieurs milliers dâ€™extensionsÂ ;</li>
<li>câ€™est un logiciel dont le dÃ©veloppement est trÃ¨s actif et dont la communautÃ© dâ€™utilisateurs ne cesse de sâ€™Ã©largirÂ ;</li>
<li>les possibilitÃ©s de manipulation de donnÃ©es sous <strong>R</strong> sont en gÃ©nÃ©ral largement supÃ©rieures Ã  celles des autres logiciels usuels dâ€™analyse statistiqueÂ ;</li>
<li>câ€™est un logiciel avec dâ€™excellentes capacitÃ©s graphiques et de nombreuses possibilitÃ©s dâ€™exportÂ ;</li>
<li>avec <strong>Rmarkdown</strong><a href="#presentation-et-philosophie_fn2" class="footnoteRef" id="presentation-et-philosophie_fnref2"><sup>2</sup></a>, il est devenu trÃ¨s aisÃ© de produire des rapports automatisÃ©s dans divers format (<strong>Word</strong>, <strong>PDF</strong>, <strong>HTML</strong>, â€¦)Â ;</li>
<li><strong>R</strong> est de plus utilisÃ© dans tous les secteurs scientifiques, y compris dans le domaine des analyses dâ€™enquÃªtes et, plus gÃ©nÃ©ralement, des sciences sociales.</li>
</ul>
<p>Comme rien nâ€™est parfait, on peut Ã©galement trouver quelques inconvÃ©nientsÂ :</p>
<ul>
<li>le logiciel, la documentation de rÃ©fÃ©rence et les principales ressources sont en anglais. Il est toutefois parfaitement possible dâ€™utiliser <strong>R</strong> sans spÃ©cialement maÃ®triser cette langueÂ ;</li>
<li>il nâ€™existe pas encore dâ€™interface graphique pour <strong>R</strong> Ã©quivalente Ã  celle dâ€™autres logiciels comme <strong>SPSS</strong> ou <strong>Modalisa</strong>. <strong>R</strong> fonctionne Ã  lâ€™aide de <dfn>scripts</dfn> (des petits programmes) Ã©ditÃ©s et exÃ©cutÃ©s au fur et Ã  mesure de lâ€™analyse et se rapprocherait davantage de <strong>SAS</strong> dans son utilisation (mais avec une syntaxe et une philosophie trÃ¨s diffÃ©rentes). Ce point, qui peut apparaÃ®tre comme un gros handicap, sâ€™avÃ¨re aprÃ¨s un temps dâ€™apprentissage Ãªtre un mode dâ€™utilisation dâ€™une grande souplesseÂ ;</li>
<li>comme <strong>R</strong> sâ€™apparente davantage Ã  un langage de programmation quâ€™Ã  un logiciel proprement dit, la courbe dâ€™apprentissage peut Ãªtre un peu Â«Â raideÂ Â», notamment pour ceux nâ€™ayant jamais programmÃ© auparavant.</li>
</ul>
<p>Il est Ã  noter que le dÃ©veloppement autour de <strong>R</strong> a Ã©tÃ© particuliÃ¨rement actif ces derniÃ¨res annÃ©es. On trouvera dÃ¨s lors aujourdâ€™hui de nombreuses extensions permettant de se Â«Â faciliter la vieÂ Â» au quotidien, ce qui nâ€™Ã©tait pas vraiment encore le cas il y a 5 ans.</p>
</div>
<div id="presentation-et-philosophie_philosophie-de-r" class="section level2">
<h2>Philosophie de R</h2>
<p>Quelques points particuliers dans le fonctionnement de <strong>R</strong> peuvent parfois dÃ©router les utilisateurs habituÃ©s Ã  dâ€™autres logicielsÂ :</p>
<ul>
<li>Sous <strong>R</strong>, en gÃ©nÃ©ral, on ne voit pas directement les donnÃ©es sur lesquelles on travailleÂ ; on ne dispose pas en permanence dâ€™une vue des donnÃ©es sous forme de tableau<a href="#presentation-et-philosophie_fn3" class="footnoteRef" id="presentation-et-philosophie_fnref3"><sup>3</sup></a>, comme sous <strong>Modalisa ou SPSS</strong>. Ceci peut Ãªtre dÃ©routant au dÃ©but, mais on se rend vite compte quâ€™on nâ€™a pas besoin de voir en permanence les donnÃ©es pour les analyser.</li>
<li>Alors quâ€™avec la plupart des logiciels on rÃ©flÃ©chira avec un fichier de donnÃ©es ouvert Ã  la fois, sous <strong>R</strong> chaque fichier de donnÃ©es correspondra Ã  un objet diffÃ©rent chargÃ© en mÃ©moire, permettant de manipuler trÃ¨s facilement plusieurs objets Ã  la fois (par exemple dans le cadre de fusion de tables<a href="#presentation-et-philosophie_fn4" class="footnoteRef" id="presentation-et-philosophie_fnref4"><sup>4</sup></a>).</li>
<li>Avec les autres logiciels, en gÃ©nÃ©ral la production dâ€™une analyse gÃ©nÃ¨re un grand nombre de rÃ©sultats de toutes sortes dans lesquels lâ€™utilisateur est censÃ© retrouver et isoler ceux qui lâ€™intÃ©ressent. Avec <strong>R</strong>, câ€™est lâ€™inverseÂ : par dÃ©faut lâ€™affichage est rÃ©duit au minimum et câ€™est lâ€™utilisateur qui demande Ã  voir des rÃ©sultats supplÃ©mentaires ou plus dÃ©taillÃ©s.</li>
<li>Sous <strong>R</strong>, les rÃ©sultats des analyses sont eux aussi stockÃ©s dans des objets et sont dÃ¨s lors manipulables.</li>
</ul>
<p>Inhabituel au dÃ©but, ce fonctionnement permet en fait assez rapidement de gagner du temps dans la conduite des analyses.</p>
</div>
<div id="presentation-et-philosophie_presentation-de-rstudio" class="section level2">
<h2>PrÃ©sentation de RStudio</h2>
<p>Lâ€™interface de base de <strong>R</strong> est assez rudimentaire (voir figure ci-aprÃ¨s).</p>
<figure>
<img src="images/capture_RGui.png" alt="Interface de R sous Windows"/>
<figcaption>
Interface de R sous Windows
</figcaption>
</figure>
<p><strong>RStudio</strong> est un <dfn>environnement de dÃ©veloppement</dfn> intÃ©grÃ© libre, gratuit, et qui fonctionne sous <strong>Windows</strong>, <strong>Mac OS X</strong> et <strong>Linux</strong>. Il complÃ¨te <strong>R</strong> et fournit un <dfn>Ã©diteur de script</dfn> avec <dfn>coloration syntaxique</dfn>, des fonctionnalitÃ©s pratiques dâ€™Ã©dition et dâ€™exÃ©cution du code (comme lâ€™<dfn>autocomplÃ©tion</dfn>), un affichage simultanÃ© du code, de la console <strong>R</strong>, des fichiers, graphiques et pages dâ€™aide, une gestion des extensions, une intÃ©gration avec des systÃ¨mes de contrÃ´le de versions comme <strong>git</strong>, etc. Il intÃ¨gre de base divers outils comme par exemple la production de rapports au format <strong>Rmarkdown</strong>. Il est en dÃ©veloppement actif et de nouvelles fonctionnalitÃ©s sont ajoutÃ©es rÃ©guliÃ¨rement. Son principal dÃ©faut est dâ€™avoir une interface uniquement anglophone.</p>
<figure>
<img src="images/capture_RStudio.png" alt="Interface de RStudio sous Windows"/>
<figcaption>
Interface de RStudio sous Windows
</figcaption>
</figure>
<p>Pour une prÃ©sentation plus gÃ©nÃ©rale de <strong>RStudio</strong> on pourra se rÃ©fÃ©rer au site du projetÂ : <a href="http://www.rstudio.com/" class="uri">http://www.rstudio.com/</a>.</p>
<p><strong>RStudio</strong> peut tout Ã  fait Ãªtre utilisÃ© pour dÃ©couvrir et dÃ©marrer avec <strong>R</strong>. Les diffÃ©rents chapitres dâ€™<strong>analyse-R</strong> partent du principe que vous utilisez <strong>R</strong> avec <strong>RStudio</strong>. Cependant, Ã  part les Ã©lÃ©ments portant sur lâ€™interface de <strong>RStudio</strong>, lâ€™ensemble du code et des fonctions <strong>R</strong> peuvent Ãªtre utilisÃ©s directement dans <strong>R</strong>, mÃªme en lâ€™absence de <strong>RStudio</strong>.</p>
<p>La documentation de <strong>RStudio</strong> (en anglais) est disponible en ligne Ã  <a href="https://support.rstudio.com" class="uri">https://support.rstudio.com</a>. Pour Ãªtre tenu informÃ© des derniÃ¨res Ã©volutions de <strong>RStudio</strong>, mais Ã©galement de plusieurs extensions dÃ©veloppÃ©es dans le cadre de ce projet, vous pouvez suivre le blog dÃ©diÃ© <a href="http://blog.rstudio.org/" class="uri">http://blog.rstudio.org/</a>.</p>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="presentation-et-philosophie_fn1"><p>Pour plus dâ€™informations sur ce quâ€™est un logiciel libre, voirÂ : <a href="http://www.gnu.org/philosophy/free-sw.fr.html" class="uri">http://www.gnu.org/philosophy/free-sw.fr.html</a>.<a href="#presentation-et-philosophie_fnref1">â†©</a></p></li>
<li id="presentation-et-philosophie_fn2"><p>Voir <a href="http://rmarkdown.rstudio.com/" class="uri">http://rmarkdown.rstudio.com/</a>.<a href="#presentation-et-philosophie_fnref2">â†©</a></p></li>
<li id="presentation-et-philosophie_fn3"><p>On verra quâ€™il est possible avec <strong>RStudio</strong> de disposer dâ€™une telle vue.<a href="#presentation-et-philosophie_fnref3">â†©</a></p></li>
<li id="presentation-et-philosophie_fn4"><p>Voir par exemple la section dÃ©diÃ©e Ã  ce sujet dans le <a href="pem_manipulation.html#fusion_tables">chapitre sur la manipulation de donnÃ©es</a>.<a href="#presentation-et-philosophie_fnref4">â†©</a></p></li>
</ol>
</div>

</article>
<article id="installation-de-R-et-RStudio">

<div class="fluid-row" id="installation-de-R-et-RStudio_header">


<h1 class="title">Installation de R et RStudio</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#installation-de-R-et-RStudio_installation-de-r">Installation de R</a></li>
<li><a href="#installation-de-R-et-RStudio_installation-de-rstudio">Installation de RStudio</a></li>
<li><a href="#installation-de-R-et-RStudio_mise-a-jour-de-r-sous-windows">Mise Ã  jour de R sous Windows</a></li>
</ul>
</div>

<p>Il est prÃ©fÃ©rable de commencer par installer <strong>R</strong> avant dâ€™installer <strong>RStudio</strong>.</p>
<div id="installation-de-R-et-RStudio_installation-de-r" class="section level2">
<h2>Installation de R</h2>
<p>Pour une <dfn>installation</dfn> sous <strong>Windows</strong>, on se rendra sur cette pageÂ : <a href="http://cran.r-project.org/bin/windows/base/" class="uri">http://cran.r-project.org/bin/windows/base/</a> et lâ€™on suivra le premier lien pour tÃ©lÃ©charger le programme dâ€™installation. Une fois le programme dâ€™installation lancÃ©, il suffira dâ€™installer <strong>R</strong> avec les options par dÃ©faut<a href="#installation-de-R-et-RStudio_fn1" class="footnoteRef" id="installation-de-R-et-RStudio_fnref1"><sup>1</sup></a>.</p>
<p>Pour <strong>Mac OS X</strong>, les fichiers dâ€™installation sont disponibles Ã  <a href="http://cran.r-project.org/bin/macosx/" class="uri">http://cran.r-project.org/bin/macosx/</a>.</p>
<p>Si vous travaillez sous <strong>Linux</strong>, vous devriez pouvoir trouver <strong>R</strong> via votre gestionnaire de paquets, cela pouvant dÃ©pendre dâ€™une distribution de <strong>Linux</strong> Ã  une autre.</p>
</div>
<div id="installation-de-R-et-RStudio_installation-de-rstudio" class="section level2">
<h2>Installation de RStudio</h2>
<p>Une fois <strong>R</strong> correctement installÃ©, rendez-vous sur <a href="http://www.rstudio.com/products/rstudio/download/" class="uri">http://www.rstudio.com/products/rstudio/download/</a> pour tÃ©lÃ©charger la derniÃ¨re version stable de <strong>RStudio</strong>. Plus prÃ©cisÃ©ment, il sâ€™agit de lâ€™Ã©dition <em>Open Source</em> de <strong>RStudio Desktop</strong> (en effet, il existe aussi une version serveur).</p>
<p>Choisissez lâ€™installateur correspondant Ã  votre systÃ¨me dâ€™exploitation et suivez les instructions du programme dâ€™installation.</p>
<p>Si vous voulez tester les derniÃ¨res fonctionnalitÃ©s de <strong>RStudio</strong>, vous pouvez tÃ©lÃ©charger la version de dÃ©veloppement (plus riche en fonctionnalitÃ©s que la version stable, mais pouvant contenir des bugs) sur <a href="http://www.rstudio.com/products/rstudio/download/preview/" class="uri">http://www.rstudio.com/products/rstudio/download/preview/</a>.</p>
</div>
<div id="installation-de-R-et-RStudio_mise-a-jour-de-r-sous-windows" class="section level2">
<h2>Mise Ã  jour de R sous Windows</h2>
<p>Pour mettre Ã  jour <strong>R</strong> sous <strong>Windows</strong>&lt;dfndata-index=â€œmise Ã  jour, Râ€&gt;, il suffit de tÃ©lÃ©charger et dâ€™installer la derniÃ¨re version du programme dâ€™installation.</p>
<p>Petite particularitÃ©, la nouvelle version sera installÃ©e Ã  cÃ´tÃ© de lâ€™ancienne version. Si vous souhaitez faire de la place sur votre disque dur, vous pouvez dÃ©sinstaller lâ€™ancienne version en utilisant lâ€™utilitaire <em>DÃ©sinstaller un programme</em> de <strong>Windows</strong>.</p>
<p>Lorsque plusieurs versions de <strong>R</strong> sont disponibles, <strong>RStudio</strong> choisit par dÃ©faut la plus rÃ©cente. Il est vous est possible de spÃ©cifier Ã  <strong>RStudio</strong> quelle version de <strong>R</strong> utiliser via le menu <em>Tools</em> &gt; <em>Global Options</em> &gt; <em>General</em>.</p>
<p>Petit dÃ©faut, les extensions (<em>packages</em>) sont installÃ©es par dÃ©faut sous <strong>Windows</strong> dans le rÃ©pertoire <code>Documents de l'utilisateur &gt; R &gt; win-library &gt; x.y</code> avec <code>x.y</code> correspondant au numÃ©ro de la version de <strong>R</strong>. Ainsi, si lâ€™on travaillait avec la version 3.0 et que lâ€™on passe Ã  la version 3.2, les extensions que lâ€™on avait sous lâ€™ancienne version ne sont plus disponibles pour la nouvelle version. Une astuce consiste Ã  recopier le contenu du rÃ©pertoire <code>3.0</code> dans le rÃ©pertoire <code>3.2</code>. Puis, on lancera <strong>RStudio</strong> (sâ€™il Ã©tait dÃ©jÃ  ouvert, on le fermera puis relancera) et on mettra Ã  jour lâ€™ensemble des packages, soit avec la fonction, <code data-pkg="utils">update.packages</code> soit en cliquant sur <em>Update</em> dans lâ€™onglet <em>Packages</em> du quadrant infÃ©rieur droit.</p>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="installation-de-R-et-RStudio_fn1"><p>Dans le cas particulier oÃ¹ votre ordinateur est situÃ© derriÃ¨re un <dfn>proxy</dfn>, il est prÃ©fÃ©rable de choisir <em>Options de dÃ©marrage personnalisÃ©es</em> lorsque cela vous sera demandÃ© par le programme dâ€™installation, puis <em>Internet2</em> lorsquâ€™on vous demandera le mode de connexion Ã  Internet. Ainsi, <strong>R</strong> utilisera par dÃ©faut la configuration internet du navigateur <strong>Internet Explorer</strong> et prendra ainsi en compte les paramÃ¨tres du <em>proxy</em>.<a href="#installation-de-R-et-RStudio_fnref1">â†©</a></p></li>
</ol>
</div>

</article>
<article id="premier-contact">

<div class="fluid-row" id="premier-contact_header">


<h1 class="title">Premier contact</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#premier-contact_linvite-de-commandes">Lâ€™invite de commandes</a></li>
<li><a href="#premier-contact_des-objets">Des objets</a><ul>
<li><a href="#premier-contact_objets-simples">Objets simples</a></li>
<li><a href="#premier-contact_vecteurs">Vecteurs</a></li>
</ul></li>
<li><a href="#premier-contact_des-fonctions">Des fonctions</a><ul>
<li><a href="#premier-contact_arguments">Arguments</a></li>
<li><a href="#premier-contact_quelques-fonctions-utiles">Quelques fonctions utiles</a></li>
<li><a href="#premier-contact_aide-sur-une-fonction">Aide sur une fonction</a></li>
<li><a href="#premier-contact_interpretation-des-arguments">InterprÃ©tation des arguments</a></li>
<li><a href="#premier-contact_autocompletion">AutocomplÃ©tion</a></li>
</ul></li>
</ul>
</div>

<div class="note">
<p>Ce chapitre est inspirÃ© de la section <em>Prise en main</em> du support de cours <a href="https://github.com/juba/intro-r">Introduction Ã  R</a> rÃ©alisÃ© par Julien Barnier.</p>
</div>
<p>Une fois <strong>RStudio</strong> lancÃ©, vous devriez obtenir une fenÃªtre similaire Ã  la figure ci-aprÃ¨s.</p>
<figure>
<img src="images/capture_RStudio.png" alt="Interface de RStudio au dÃ©marrage"/>
<figcaption>
Interface de RStudio au dÃ©marrage
</figcaption>
</figure>
<p>Lâ€™<dfn>interface</dfn> de <strong>RStudio</strong> est divisÃ©e en quatre quadrantsÂ :</p>
<ul>
<li>le quadrant supÃ©rieur gauche est dÃ©diÃ© aux diffÃ©rents fichiers de travail (nous y reviendrons dans le chapitre <a href="#premier-travail-avec-les-donnees">Premier travail avec les donnÃ©es</a>)Â ;</li>
<li>le quadrant infÃ©rieur gauche correspond Ã  ce que lâ€™on appelle la <em>console</em>, câ€™est-Ã -dire Ã  <strong>R</strong> proprement ditÂ ;</li>
<li>le quadrant supÃ©rieur droit permet de connaÃ®tre
<ul>
<li>la liste des objets en mÃ©moire ou <dfn>environnement de travail</dfn> (onglet <em>Environment</em>)</li>
<li>ainsi que lâ€™<dfn>historique des commandes</dfn> saisies dans la console (onglet <em>History</em>)Â ;</li>
</ul></li>
<li>le quadrant infÃ©rieur droit affiche
<ul>
<li>la liste des fichiers du rÃ©pertoire de travail (onglet <em>Files</em>),</li>
<li>les graphiques rÃ©alisÃ©s (onglet <em>Plots</em>),</li>
<li>la liste des extensions disponibles (onglet <em>Packages</em>),</li>
<li>lâ€™aide en ligne (onglet <em>Help</em>)</li>
<li>et un <em>Viewer</em> utilisÃ© pour visualiser certains types de graphiques au format web.</li>
</ul></li>
</ul>
<p>Inutile de tout retenir pour le moment. Nous aborderons chaque outil en temps utile. Pour lâ€™heure, concentrons-nous sur la <dfn>console</dfn>, câ€™est-Ã -dire le quadrant infÃ©rieur gauche.</p>
<div id="premier-contact_linvite-de-commandes" class="section level2">
<h2>Lâ€™invite de commandes</h2>
<p>Au dÃ©marrage, la console contient un petit texte de bienvenue ressemblant Ã  peu prÃ¨s Ã  ce qui suitÂ :</p>
<pre><code>R version 3.2.0 (2015-04-16) -- "Full of Ingredients"
Copyright (C) 2015 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

&gt;</code></pre>
<p>suivi dâ€™une ligne commenÃ§ant par le caractÃ¨re <code>&gt;</code> et sur laquelle devrait se trouver votre curseur. Cette ligne est appelÃ©e lâ€™<dfn>invite de commande</dfn> (ou <dfn>prompt</dfn> en anglais). Elle signifie que <strong>R</strong> est disponible et en attente de votre prochaine commande.</p>
<p>Nous allons tout de suite lui fournir une premiÃ¨re commande. Tapez <code>2 + 3</code> dans la console et validez avec la touche <kbd>EntrÃ©e</kbd>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> +<span class="st"> </span><span class="dv">3</span></code></pre></div>
<pre><code>[1] 5</code></pre>
<p>En premier lieu, vous pouvez noter la convention typographique utilisÃ©e dans ce documents. Les commandes saisies dans la console sont indiquÃ©es sur un fond gris et prÃ©cÃ©dÃ© de <code>R&gt;</code>. Le rÃ©sultat renvoyÃ© par <strong>R</strong> est quant Ã  lui affichÃ© juste en-dessous sur fond blanc.</p>
<p>Bien, nous savons dÃ©sormais que <strong>R</strong> sait faire les additions Ã  un chiffre<a href="#premier-contact_fn1" class="footnoteRef" id="premier-contact_fnref1"><sup>1</sup></a>. Nous pouvons dÃ©sormais continuer avec dâ€™autres opÃ©rations arithmÃ©tiques de baseÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">8</span> -<span class="st"> </span><span class="dv">12</span></code></pre></div>
<pre><code>[1] -4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">14</span> *<span class="st"> </span><span class="dv">25</span></code></pre></div>
<pre><code>[1] 350</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">-<span class="dv">3</span>/<span class="dv">10</span></code></pre></div>
<pre><code>[1] -0.3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">-<span class="fl">0.3</span></code></pre></div>
<pre><code>[1] -0.3</code></pre>
<p>On remarquera que <strong>R</strong> est anglo-saxon. Les nombres sont donc saisies Â«Â Ã  lâ€™anglaiseÂ Â», câ€™est-Ã -dire en utilisant le point (<code>.</code>) comme sÃ©parateur pour les dÃ©cimales.</p>
<div class="note">
<p>Une petite astuce trÃ¨s utile lorsque vous tapez des commandes directement dans la consoleÂ : en utilisant les flÃ¨ches Haut et Bas du clavier, vous pouvez naviguer dans lâ€™historique des commandes tapÃ©es prÃ©cÃ©demment. Vous pouvez alors facilement rÃ©exÃ©cuter ou modifier une commande particuliÃ¨re.</p>
<p>Sous <strong>RStudio</strong>, lâ€™onglet <em>History</em> du quadrant haut-droite vous permet de consulter lâ€™historique des commandes que vous avez transmises Ã  <strong>R</strong>.</p>
<p><img src="images/capture_RStudio_onglet_history.png" alt="Onglet History sous RStudio"/></p>
<p>Un double-clic sur une commande la recopiera automatiquement dans la console. Vous pouvez Ã©galement sÃ©lectionner une ou plusieurs commandes puis cliquer sur <em>To Console</em>.</p>
<p>Voir Ã©galement (en anglais)Â : <a href="https://support.rstudio.com/hc/en-us/articles/200526217-Command-History" class="uri">https://support.rstudio.com/hc/en-us/articles/200526217-Command-History</a>.</p>
</div>
<p>Lorsquâ€™on fournit Ã  <strong>R</strong> une commande incomplÃ¨te, celui-ci nous propose de la complÃ©ter en nous prÃ©sentant une invite de commande spÃ©ciale utilisant les signe <code>+</code>. Imaginons par exemple que nous avons malencontreusement tapÃ© sur <kbd>EntrÃ©e</kbd> alors que nous souhaitions calculer <code>4 * 3</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">4</span> *</code></pre></div>
<p>On peut alors complÃ©ter la commande en saisissant simplement <code>3</code> :</p>
<pre class="r">4 *
+ 3
</pre>
<pre>
[1] 12
</pre>
<div class="note">
<p>Pour des commandes plus complexes, il arrive parfois quâ€™on se retrouve coincÃ© avec une invite <code>+</code> sans plus savoir comment complÃ©ter la saisie correctement. On peut alors annuler la commande en utilisant la touche <kbd>Echap</kbd> ou <kbd>Esc</kbd> sous <strong>Windows</strong>.</p>
<p>Sous <strong>Linux</strong> on utilise le traditionnel <kbd>Control + C</kbd>.</p>
</div>
<p>Ã€ noter que les espaces autour des opÃ©rateurs nâ€™ont pas dâ€™importance lorsque lâ€™on saisit les commandes dans <strong>R</strong>. Les trois commandes suivantes sont donc Ã©quivalentes, mais on privilÃ©gie en gÃ©nÃ©ral la deuxiÃ¨me pour des raisons de lisibilitÃ© du code.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">10+2</span>
<span class="dv">10</span> +<span class="st"> </span><span class="dv">2</span>
<span class="dv">10</span>    +<span class="st">    </span><span class="dv">2</span></code></pre></div>
</div>
<div id="premier-contact_des-objets" class="section level2">
<h2>Des objets</h2>
<div id="premier-contact_objets-simples" class="section level3">
<h3>Objets simples</h3>
<p>Faire des opÃ©rations arithmÃ©tiques, câ€™est bien, mais sans doute pas totalement suffisant. Notamment, on aimerait pouvoir rÃ©utiliser le rÃ©sultat dâ€™une opÃ©ration sans avoir Ã  le resaisir ou Ã  le copier/coller.</p>
<p>Comme tout langage de programmation, <strong>R</strong> permet de faire cela en utilisant des objets. Prenons tout de suite un exempleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">2</span></code></pre></div>
<p>Que signifie cette commandeÂ ? Lâ€™opÃ©rateur <code data-pkg="base" data-rdoc="assignOps">&lt;-</code> est appelÃ© <dfn>opÃ©rateur dâ€™assignation</dfn><dfn data-index="assignation, opÃ©rateur"/>. Il prend une valeur quelconque Ã  droite et la place dans lâ€™objet indiquÃ© Ã  gauche. La commande pourrait donc se lire <em>mettre la valeur 2 dans lâ€™objet nommÃ© <code>x</code></em>.</p>
<div class="important">
<p>Il existe trois opÃ©rateurs dâ€™assignation sous <strong>R</strong>. Ainsi les trois Ã©critures suivantes sont Ã©quivalentesÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">2</span>
x =<span class="st"> </span><span class="dv">2</span>
x &lt;-<span class="st"> </span><span class="dv">2</span></code></pre></div>
<p>Cependant, pour une meilleure lecture du code, il est conseillÃ© de nâ€™utiliser que <code>&lt;-</code>. Ainsi, lâ€™objet crÃ©Ã© est systÃ©matiquement affichÃ© Ã  gauche. De plus, le symbole <code>=</code> sert Ã©galement pour Ã©crire des conditions ou Ã  lâ€™intÃ©rieur de fonctions. Il est donc prÃ©fÃ©rable de ne pas lâ€™utiliser pour assigner une valeur (afin dâ€™Ã©viter les confusions).</p>
</div>
<p>On va ensuite pouvoir rÃ©utiliser cet objet dans dâ€™autres calculs ou simplement afficher son contenuÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x +<span class="st"> </span><span class="dv">3</span></code></pre></div>
<pre><code>[1] 5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x</code></pre></div>
<pre><code>[1] 2</code></pre>
<div class="note">
<p>Par dÃ©faut, si on donne Ã  <strong>R</strong> seulement le nom dâ€™un objet, il va se dÃ©brouiller pour nous prÃ©senter son contenu dâ€™une maniÃ¨re plus ou moins lisible.</p>
</div>
<p>On peut utiliser autant dâ€™objets quâ€™on veut. Ceux-ci peuvent contenir des nombres, des chaÃ®nes de caractÃ¨res (indiquÃ©es par des guillemets droits doubles <code>"</code> ou simples <code>'</code>) et bien dâ€™autres choses encoreÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">27</span>
y &lt;-<span class="st"> </span><span class="dv">10</span>
foo &lt;-<span class="st"> </span>x +<span class="st"> </span>y
foo</code></pre></div>
<pre><code>[1] 37</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> "Hello"</span>
foo &lt;-<span class="st"> </span>x
foo</code></pre></div>
<pre><code>[1] "Hello"</code></pre>
<div class="important">
<p>Les noms dâ€™objets peuvent contenir des lettres, des chiffres, les symboles <code>.</code> et <code>_</code>. Ils doivent impÃ©rativement commencer par une lettre (jamais par un chiffre). <strong>R</strong> fait la diffÃ©rence entre les majuscules et les minuscules, ce qui signifie que <code>x</code> et <code>X</code> sont deux objets diffÃ©rents. On Ã©vitera Ã©galement dâ€™utiliser des caractÃ¨res accentuÃ©s dans les noms dâ€™objets. Comme les espaces ne sont pas autorisÃ©s on pourra les remplacer par un point ou un tiret bas.</p>
<p>Enfin, signalons que certains noms courts sont rÃ©servÃ©s par <strong>R</strong> pour son usage interne et doivent Ãªtre Ã©vitÃ©s. On citera notamment <code>c</code>, <code>q</code>, <code>t</code>, <code>C</code>, <code>D</code>, <code>F</code>, <code>I</code>, <code>T</code>, <code>max</code>, <code>min</code>â€¦</p>
</div>
<p>Dans <strong>RStudio</strong>, lâ€™onglet <em>Environment</em> dans le quadrant supÃ©rieur droit indique la liste des objets que vous avez prÃ©cÃ©demment crÃ©Ã©s, leur type et la taille quâ€™ils occupent en mÃ©moire.</p>
<figure>
<img src="images/capture_RStudio_onglet_environment.png" alt="Onglet Environment de RStudio"/>
<figcaption>
Onglet Environment de RStudio
</figcaption>
</figure>
</div>
<div id="premier-contact_vecteurs" class="section level3">
<h3>Vecteurs</h3>
<p>Imaginons maintenant que nous avons interrogÃ© dix personnes au hasard dans la rue et que nous avons relevÃ© pour chacune dâ€™elle sa taille en centimÃ¨tres. Nous avons donc une sÃ©rie de dix nombres que nous souhaiterions pouvoir rÃ©unir de maniÃ¨re Ã  pouvoir travailler sur lâ€™ensemble de nos mesures.</p>
<p>Un ensemble de donnÃ©es de mÃªme nature constituent pour <strong>R</strong> un <dfn>vecteur</dfn> (en anglais <dfn>vector</dfn>) et se construit Ã  lâ€™aide dâ€™une fonction nommÃ©e <code data-pkg="base">c</code><a href="#premier-contact_fn2" class="footnoteRef" id="premier-contact_fnref2"><sup>2</sup></a>. On lâ€™utilise en lui donnant la liste de nos donnÃ©es, entre parenthÃ¨ses, sÃ©parÃ©es par des virgulesÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">167</span>, <span class="dv">192</span>, <span class="dv">173</span>, <span class="dv">174</span>, <span class="dv">172</span>, <span class="dv">167</span>, <span class="dv">171</span>, <span class="dv">185</span>, 
  <span class="dv">163</span>, <span class="dv">170</span>)</code></pre></div>
<p>Ce faisant, nous avons crÃ©Ã© un objet nommÃ© <code>tailles</code> et comprenant lâ€™ensemble de nos donnÃ©es, que nous pouvons afficher en saisissant simplement son nomÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles</code></pre></div>
<pre><code> [1] 167 192 173 174 172 167 171 185 163 170</code></pre>
<p>Que se passe-t-il sâ€™il on crÃ©Ã© un vecteur plus grandÂ ?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dv">144</span>, <span class="dv">168</span>, <span class="dv">179</span>, <span class="dv">175</span>, <span class="dv">182</span>, <span class="dv">188</span>, <span class="dv">167</span>, <span class="dv">152</span>, <span class="dv">163</span>, <span class="dv">145</span>, 
  <span class="dv">176</span>, <span class="dv">155</span>, <span class="dv">156</span>, <span class="dv">164</span>, <span class="dv">167</span>, <span class="dv">155</span>, <span class="dv">157</span>, <span class="dv">185</span>, <span class="dv">155</span>, <span class="dv">169</span>, 
  <span class="dv">124</span>, <span class="dv">178</span>, <span class="dv">182</span>, <span class="dv">195</span>, <span class="dv">151</span>, <span class="dv">185</span>, <span class="dv">159</span>, <span class="dv">156</span>, <span class="dv">184</span>, <span class="dv">172</span>)</code></pre></div>
<pre><code> [1] 144 168 179 175 182 188 167 152 163 145 176
[12] 155 156 164 167 155 157 185 155 169 124 178
[23] 182 195 151 185 159 156 184 172</code></pre>
<p>On a bien notre suite de trente tailles, mais on peut remarquer la prÃ©sence de nombres entre crochets au dÃ©but de chaque ligne (<code>[1]</code>, <code>[12]</code> et <code>[23]</code>). En fait ces nombres entre crochets indiquent la position du premier Ã©lÃ©ment de la ligne dans notre vecteur. Ainsi, le 155 en dÃ©but de deuxiÃ¨me ligne est le 12<sup>e</sup> Ã©lÃ©ment du vecteur, tandis que le 182 de la troisiÃ¨me ligne est Ã  la 23<sup>e</sup> position.</p>
<p>On en dÃ©duira dâ€™ailleurs que lorsque lâ€™on faitÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span></code></pre></div>
<pre><code>[1] 2</code></pre>
<p><strong>R</strong> considÃ¨re en fait le nombre 2 comme un vecteur Ã  un seul Ã©lÃ©ment.</p>
<p>On peut appliquer des opÃ©rations arithmÃ©tiques simples directement sur des vecteursÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">167</span>, <span class="dv">192</span>, <span class="dv">173</span>, <span class="dv">174</span>, <span class="dv">172</span>, <span class="dv">167</span>, <span class="dv">171</span>, <span class="dv">185</span>, 
  <span class="dv">163</span>, <span class="dv">170</span>)
tailles +<span class="st"> </span><span class="dv">20</span></code></pre></div>
<pre><code> [1] 187 212 193 194 192 187 191 205 183 190</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles/<span class="dv">100</span></code></pre></div>
<pre><code> [1] 1.67 1.92 1.73 1.74 1.72 1.67 1.71 1.85 1.63
[10] 1.70</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles^<span class="dv">2</span></code></pre></div>
<pre><code> [1] 27889 36864 29929 30276 29584 27889 29241
 [8] 34225 26569 28900</code></pre>
<p>On peut aussi combiner des vecteurs entre eux. Lâ€™exemple suivant calcule lâ€™indice de masse corporelle Ã  partir de la taille et du poidsÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">167</span>, <span class="dv">192</span>, <span class="dv">173</span>, <span class="dv">174</span>, <span class="dv">172</span>, <span class="dv">167</span>, <span class="dv">171</span>, <span class="dv">185</span>, 
  <span class="dv">163</span>, <span class="dv">170</span>)
poids &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">86</span>, <span class="dv">74</span>, <span class="dv">83</span>, <span class="dv">50</span>, <span class="dv">78</span>, <span class="dv">66</span>, <span class="dv">66</span>, <span class="dv">51</span>, <span class="dv">50</span>, <span class="dv">55</span>)
tailles.m &lt;-<span class="st"> </span>tailles/<span class="dv">100</span>
imc &lt;-<span class="st"> </span>poids/(tailles.m^<span class="dv">2</span>)
imc</code></pre></div>
<pre><code> [1] 30.83653 20.07378 27.73230 16.51473 26.36560
 [6] 23.66524 22.57105 14.90139 18.81892 19.03114</code></pre>
<div class="important">
<p>Quand on fait des opÃ©rations sur les vecteurs, il faut veiller Ã  soit utiliser un vecteur et un chiffre (dans des opÃ©rations du type <code>v * 2</code> ou <code>v + 10</code>), soit Ã  utiliser des vecteurs de mÃªme longueur (dans des opÃ©rations du type <code>u + v</code>).</p>
<p>Si on utilise des vecteurs de longueur diffÃ©rentes, on peut avoir quelques surprises. Quand <strong>R</strong> effectue une opÃ©ration avec deux vecteurs de longueurs diffÃ©rentes, il recopie le vecteur le plus court de maniÃ¨re Ã  lui donner la mÃªme taille que le plus long, ce qui sâ€™appelle la rÃ¨gle de <dfn>recyclage</dfn> (<dfn lang="en">recycling rule</dfn>). Ainsi, <code>c(1,2) + c(4,5,6,7,8)</code> vaudra lâ€™Ã©quivalent de <code>c(1,2,1,2,1) + c(4,5,6,7,8)</code>.</p>
</div>
<p>On a vu jusque-lÃ  des vecteurs composÃ©s de nombres, mais on peut tout Ã  fait crÃ©er des vecteurs composÃ©s de chaÃ®nes de caractÃ¨res, reprÃ©sentant par exemple les rÃ©ponses Ã  une question ouverte ou fermÃ©eÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reponse &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Bac+2"</span>, <span class="st">"Bac"</span>, <span class="st">"CAP"</span>, <span class="st">"Bac"</span>, <span class="st">"Bac"</span>, <span class="st">"CAP"</span>, 
  <span class="st">"BEP"</span>)
reponse</code></pre></div>
<pre><code>[1] "Bac+2" "Bac"   "CAP"   "Bac"   "Bac"  
[6] "CAP"   "BEP"  </code></pre>
<p>Enfin, notons que lâ€™on peut accÃ©der Ã  un Ã©lÃ©ment particulier du vecteur en faisant suivre le nom du vecteur de crochets contenant le numÃ©ro de lâ€™Ã©lÃ©ment dÃ©sirÃ©. Par exempleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reponse &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Bac+2"</span>, <span class="st">"Bac"</span>, <span class="st">"CAP"</span>, <span class="st">"Bac"</span>, <span class="st">"Bac"</span>, <span class="st">"CAP"</span>, 
  <span class="st">"BEP"</span>)
reponse[<span class="dv">2</span>]</code></pre></div>
<pre><code>[1] "Bac"</code></pre>
<p>Cette opÃ©ration sâ€™appelle lâ€™<dfn>indexation</dfn> dâ€™un vecteur. Il sâ€™agit ici de sa forme la plus simple, mais il en existe dâ€™autres beaucoup plus complexes. Lâ€™indexation des vecteurs et des tableaux dans <strong>R</strong> est lâ€™un des Ã©lÃ©ments particuliÃ¨rement souples et puissants du langage (mais aussi lâ€™un des plus dÃ©licats Ã  comprendre et Ã  maÃ®triser). Nous en reparlerons dans le chapitre sur la <a href="pem_manipulation.html#indexation">manipulation de donnÃ©es</a>.</p>
<div class="note">
<p>Sous <strong>RStudio</strong>, vous avez du remarquer que ce dernier effectue une <dfn>coloration syntaxique</dfn>. Lorsque vous tapez une commande, les valeurs numÃ©riques sont affichÃ©es dans une certaine couleur, les valeurs textuelles dans une autre et les noms des fonctions dans une troisiÃ¨me. De plus, si vous tapez une parenthÃ¨se ouvrante, <strong>RStudio</strong> va crÃ©er automatiquement aprÃ¨s le curseur la parenthÃ¨se fermante correspondante (de mÃªme avec les guillements ou les crochets). Si vous placez le curseur juste aprÃ¨s une parenthÃ¨se fermante, la parenthÃ¨se ouvrante correspondante sera surlignÃ©e, ce qui sera bien pratique lors de la rÃ©daction de commandes complexes.</p>
</div>
</div>
</div>
<div id="premier-contact_des-fonctions" class="section level2">
<h2>Des fonctions</h2>
<p>Nous savons dÃ©sormais faire des opÃ©rations simples sur des nombres et des vecteurs, stocker ces donnÃ©es et rÃ©sultats dans des objets pour les rÃ©utiliser par la suite.</p>
<p>Pour aller un peu plus loin nous allons aborder, aprÃ¨s les objets, lâ€™autre concept de base de <strong>R</strong>, Ã  savoir les <dfn data-index="fonction">fonctions</dfn>. Une fonction se caractÃ©rise de la maniÃ¨re suivanteÂ :</p>
<ul>
<li>elle a un nomÂ ;</li>
<li>elle accepte des <dfn data-index="argument">arguments</dfn> (qui peuvent avoir un nom ou pas)Â ;</li>
<li>elle retourne un rÃ©sultat et peut effectuer une action comme dessiner un graphique ou lire un fichier.</li>
</ul>
<p>En fait rien de bien nouveau puisque nous avons dÃ©jÃ  utilisÃ© plusieurs fonctions jusquâ€™ici, dont la plus visible est la fonction <code data-pkg="&quot;base">c</code>. Dans la ligne suivanteÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reponse &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Bac+2"</span>, <span class="st">"Bac"</span>, <span class="st">"CAP"</span>, <span class="st">"Bac"</span>, <span class="st">"Bac"</span>, <span class="st">"CAP"</span>, 
  <span class="st">"BEP"</span>)</code></pre></div>
<p>on fait appel Ã  la fonction nommÃ©e <code data-pkg="base">c</code>, on lui passe en arguments (entre parenthÃ¨ses et sÃ©parÃ©es par des virgules) une sÃ©rie de chaÃ®nes de caractÃ¨res et elle retourne comme rÃ©sultat un vecteur de chaÃ®nes de caractÃ¨res, que nous stockons dans lâ€™objet <code>reponse</code>.</p>
<p>Prenons tout de suite dâ€™autres exemples de fonctions courantesÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">167</span>, <span class="dv">192</span>, <span class="dv">173</span>, <span class="dv">174</span>, <span class="dv">172</span>, <span class="dv">167</span>, <span class="dv">171</span>, <span class="dv">185</span>, 
  <span class="dv">163</span>, <span class="dv">170</span>)
<span class="kw">length</span>(tailles)</code></pre></div>
<pre><code>[1] 10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(tailles)</code></pre></div>
<pre><code>[1] 173.4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">var</span>(tailles)</code></pre></div>
<pre><code>[1] 76.71111</code></pre>
<p>Ici, la fonction <code data-pkg="base">length</code> nous renvoie le nombre dâ€™Ã©lÃ©ments du vecteur, la fonction <code data-pkg="base">mean</code> nous donne la moyenne des Ã©lÃ©ments du vecteur et fonction <code data-pkg="stats" data-rdoc="cor">var</code> sa variance.</p>
<div id="premier-contact_arguments" class="section level3">
<h3>Arguments</h3>
<p>Les arguments de la fonction lui sont indiquÃ©s entre parenthÃ¨ses, juste aprÃ¨s son nom. En gÃ©nÃ©ral les premiers arguments passÃ©s Ã  la fonction sont des donnÃ©es servant au calcul et les suivants des paramÃ¨tres influant sur ce calcul. Ceux-ci sont en gÃ©nÃ©ral transmis sous la forme dâ€™argument nommÃ©s.</p>
<p>Reprenons lâ€™exemple des tailles prÃ©cÃ©dentÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">167</span>, <span class="dv">192</span>, <span class="dv">173</span>, <span class="dv">174</span>, <span class="dv">172</span>, <span class="dv">167</span>, <span class="dv">171</span>, <span class="dv">185</span>, 
  <span class="dv">163</span>, <span class="dv">170</span>)</code></pre></div>
<p>Imaginons que le deuxiÃ¨me enquÃªtÃ© nâ€™ait pas voulu nous rÃ©pondre. Nous avons alors dans notre vecteur une <dfn>valeur manquante</dfn>. Celle-ci est symbolisÃ©e dans <strong>R</strong> par le code <code>NA</code><dfn data-index="NA"/>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">167</span>, <span class="ot">NA</span>, <span class="dv">173</span>, <span class="dv">174</span>, <span class="dv">172</span>, <span class="dv">167</span>, <span class="dv">171</span>, <span class="dv">185</span>, 
  <span class="dv">163</span>, <span class="dv">170</span>)</code></pre></div>
<p>Recalculons notre taille moyenneÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(tailles)</code></pre></div>
<pre><code>[1] NA</code></pre>
<p>Et oui, par dÃ©faut, <strong>R</strong> renvoie <code>NA</code> pour un grand nombre de calculs (dont la moyenne) lorsque les donnÃ©es comportent une valeur manquante. On peut cependant modifier ce comportement en fournissant un paramÃ¨tre supplÃ©mentaire Ã  la fonction <code data-pkg="base">mean</code>, nommÃ© <code>na.rm</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(tailles, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 171.3333</code></pre>
<p>Positionner le paramÃ¨tre <code>na.rm</code> Ã  <code>TRUE</code> (vrai) indique Ã  la fonction <code data-pkg="base">mean</code> de ne pas tenir compte des valeurs manquantes dans le calcul.</p>
<p>Lorsquâ€™on passe un argument Ã  une fonction de cette maniÃ¨re, câ€™est-Ã -dire sous la forme <code>nom=valeur</code>, on parle dâ€™<dfn>argument nommÃ©</dfn>.</p>
<div class="important">
<p><code>NA</code> signifie <em>not available</em>. Cette valeur particuliÃ¨re peut Ãªtre utilisÃ©e pour indiquer une valeur manquante pour tout type de liste (nombres, textes, valeurs logique, etc.).</p>
</div>
</div>
<div id="premier-contact_quelques-fonctions-utiles" class="section level3">
<h3>Quelques fonctions utiles</h3>
<p>RÃ©capitulons la liste des fonctions que nous avons dÃ©jÃ  rencontrÃ©esÂ :</p>
<table style="width:35%;">
<colgroup>
<col width="15%"/>
<col width="19%"/>
</colgroup>
<thead>
<tr class="header">
<th align="left">Fonction</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code data-pkg="base">c</code></td>
<td align="left">construit un vecteur Ã  partir dâ€™une sÃ©rie de valeurs</td>
</tr>
<tr class="even">
<td align="left"><code data-pkg="base">length</code></td>
<td align="left">nombre dâ€™Ã©lÃ©ments dâ€™un vecteur</td>
</tr>
<tr class="odd">
<td align="left"><code data-pkg="base">mean</code></td>
<td align="left">moyenne dâ€™un vecteur de type numÃ©rique</td>
</tr>
<tr class="even">
<td align="left"><code data-pkg="stats" data-rdoc="cor">var</code></td>
<td align="left">variance dâ€™un vecteur de type numÃ©rique</td>
</tr>
<tr class="odd">
<td align="left"><code data-pkg="base" data-rdoc="Arithmetic">+</code>, <code data-pkg="base" data-rdoc="Arithmetic">-</code>, <code data-pkg="base" data-rdoc="Arithmetic">*</code>, <code data-pkg="base" data-rdoc="Arithmetic">/</code></td>
<td align="left">opÃ©rateurs mathÃ©matiques de base</td>
</tr>
<tr class="even">
<td align="left"><code data-pkg="base" data-rdoc="Arithmetic">Ë†</code></td>
<td align="left">passage Ã  la puissance</td>
</tr>
</tbody>
</table>
<p>On peut rajouter les fonctions de base suivantesÂ :</p>
<table style="width:35%;">
<colgroup>
<col width="15%"/>
<col width="19%"/>
</colgroup>
<thead>
<tr class="header">
<th align="left">Fonction</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code data-pkg="base" data-rdoc="Extremes">min</code></td>
<td align="left">valeur minimale dâ€™un vecteur numÃ©rique</td>
</tr>
<tr class="even">
<td align="left"><code data-pkg="base" data-rdoc="Extremes">max</code></td>
<td align="left">valeur maximale dâ€™un vecteur numÃ©rique</td>
</tr>
<tr class="odd">
<td align="left"><code data-pkg="stats">sd</code></td>
<td align="left">Ã©cart-type dâ€™un vecteur numÃ©rique</td>
</tr>
<tr class="even">
<td align="left"><code data-pkg="base" data-rdoc="Colon">:</code></td>
<td align="left">gÃ©nÃ¨re une sÃ©quence de nombres. <code>1:4</code> Ã©quivaut Ã  <code>c(1,2,3,4)</code></td>
</tr>
</tbody>
</table>
</div>
<div id="premier-contact_aide-sur-une-fonction" class="section level3">
<h3>Aide sur une fonction</h3>
<p>Il est trÃ¨s frÃ©quent de ne plus se rappeler quels sont les paramÃ¨tres dâ€™une fonction ou le type de rÃ©sultat quâ€™elle retourne. Dans ce cas on peut trÃ¨s facilement accÃ©der Ã  lâ€™<dfn>aide</dfn> dÃ©crivant une fonction particuliÃ¨re avec <code data-pkg="=&quot;utils&quot;" data-rdoc="=&quot;Question&quot;">?</code> ou <code data-pkg="utils">help</code>. Ainsi, pour obtenir de lâ€™aide sur la fonction <code data-pkg="base">mean</code>, on saisira lâ€™une des deux entrÃ©es Ã©quivalentes suivantesÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?mean
<span class="kw">help</span>(<span class="st">"mean"</span>)</code></pre></div>
<div class="note">
<p>Lâ€™utilisation du raccourci <code data-pkg="=&quot;utils&quot;" data-rdoc="=&quot;Question&quot;">?</code> ne fonctionne pas pour certains opÃ©rateurs comme <code data-pkg="base" data-rdoc="Arithmetic">*</code>. Dans ce cas on pourra utiliser <code>?'*'</code> ou bien simplement <code>help("*")</code>.</p>
</div>
<p>Sous <strong>RStudio</strong>, le fichier dâ€™aide associÃ© apparaitra dans le quadrant infÃ©rieur droit sous lâ€™onglet <em>Help</em>.</p>
<figure>
<img src="images/capture_RStudio_onglet_help.png" alt="Onglet Help de RStudio"/>
<figcaption>
Onglet Help de RStudio
</figcaption>
</figure>
<p>Cette page dÃ©crit (en anglais) la fonction, ses arguments, son rÃ©sultat, le tout accompagnÃ© de diverses notes, rÃ©fÃ©rences et exemples. Ces pages dâ€™aide contiennent Ã  peu prÃ¨s tout ce que vous pourrez chercher Ã  savoir, mais elles ne sont pas toujours dâ€™une lecture aisÃ©e.</p>
<p>Un autre cas trÃ¨s courant dans <strong>R</strong> est de ne pas se souvenir ou de ne pas connaÃ®tre le nom de la fonction effectuant une tÃ¢che donnÃ©e. Dans ce cas on se reportera aux diffÃ©rentes maniÃ¨res de trouver de lâ€™aide dÃ©crites dans le chapitre <a href="#ou-trouver-de-l-aide">OÃ¹ trouver de lâ€™aideÂ ?</a>.</p>
</div>
<div id="premier-contact_interpretation-des-arguments" class="section level3">
<h3>InterprÃ©tation des arguments</h3>
<p>Prenons lâ€™exemple de la fonction <code data-pkg="base">format</code> dont la version de base permet de mettre en forme un nombre. Affichons le fichier dâ€™aide associÃ©.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="st">`</span><span class="dt">?</span><span class="st">`</span>(format)</code></pre></div>
<p>La section <em>Usage</em> prÃ©sente les arguments de cette fonction et leur valeur par dÃ©fautÂ :</p>
<pre>
format(x, trim = FALSE, digits = NULL, nsmall = 0L,
       justify = c("left", "right", "centre", "none"),
       width = NULL, na.encode = TRUE, scientific = NA,
       big.mark = "",   big.interval = 3L,
       small.mark = "", small.interval = 5L,
       decimal.mark = ".", zero.print = NULL,
       drop0trailing = FALSE, ...)
</pre>
<p>Regardons ce que cette fonction peut faire. Passons-lui un vecteur avec deux nombresÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(<span class="kw">c</span>(<span class="fl">12.3</span>, <span class="dv">5678</span>))</code></pre></div>
<pre><code>[1] "  12.3" "5678.0"</code></pre>
<p>Elle renvoie un vecteur de chaÃ®nes de caractÃ¨res. Le nombre de dÃ©cimales a Ã©tÃ© harmonisÃ© et des espaces ont Ã©tÃ© ajoutÃ©s au dÃ©but du premier nombre afin que lâ€™ensemble des valeurs soient alignÃ©es vers la droite.</p>
<p>Lâ€™argument <code>trim</code> permet de supprimer les espaces ajoutÃ©s en dÃ©but de chaÃ®ne.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(<span class="kw">c</span>(<span class="fl">12.3</span>, <span class="dv">5678</span>), <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] "12.3"   "5678.0"</code></pre>
<p>Dans le cas prÃ©sent, nous avons saisi les arguments de la fonction sans les nommer. DÃ¨s lors, <strong>R</strong> considÃ¨re lâ€™ordre dans lesquels nous avons saisi les arguments, ordre qui correspond Ã  celui du fichier dâ€™aide. Il a dÃ¨s lors considÃ©rÃ© que <code>c(12.3, 5678)</code> correspond Ã  la valeur attribuÃ©e Ã  <code>x</code> et que <code>TRUE</code> est la valeur attribuÃ©e Ã  <code>trim</code>.</p>
<p>Lâ€™argument <code>nsmall</code> permet dâ€™indiquer le nombre minimum de dÃ©cimales que lâ€™on souhaite afficher. Il est en quatriÃ¨me position. DÃ¨s lors, pour pouvoir le renseigner avec des <dfn data-index="argument non nommÃ©">arguments non nommÃ©s</dfn>, il faut fournir Ã©galement une valeur pour le troisiÃ¨me argument <code>digits</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(<span class="kw">c</span>(<span class="fl">12.3</span>, <span class="dv">5678</span>), <span class="ot">TRUE</span>, <span class="ot">NULL</span>, <span class="dv">2</span>)</code></pre></div>
<pre><code>[1] "12.30"   "5678.00"</code></pre>
<p>Ce nâ€™est pas forcÃ©ment ce quâ€™il y a de plus pratique. Dâ€™oÃ¹ lâ€™intÃ©rÃªt des <dfn data-index="argument nommÃ©">arguments nommÃ©s</dfn>. En prÃ©cisant <code>nsmall =</code> dans lâ€™appel de la fonction, on pourra indiquer que lâ€™on souhaite modifier spÃ©cifiquement cet argument. Lorsque lâ€™on utilise des arguments non nommÃ©s, lâ€™ordre nâ€™importe plus puisque <strong>R</strong> sera en capacitÃ© de reconnaÃ®tre ses petits.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(<span class="dt">nsmall =</span> <span class="dv">2</span>, <span class="dt">x =</span> <span class="kw">c</span>(<span class="fl">12.3</span>, <span class="dv">5678</span>))</code></pre></div>
<pre><code>[1] "  12.30" "5678.00"</code></pre>
<p>Ã€ lâ€™usage, on aura le plus souvent recours Ã  une combinaison dâ€™arguments non nommÃ©s et dâ€™arguments nommÃ©s. On indiquera les premiers arguments (qui correspondent en gÃ©nÃ©ral aux donnÃ©es de dÃ©part) sans les nommer et on prÃ©cisera les options souhaitÃ©es avec des arguments nommÃ©s. Par exemple, pour un affichage Ã  la franÃ§aiseÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(<span class="kw">c</span>(<span class="fl">12.3</span>, <span class="dv">5678</span>), <span class="dt">decimal.mark =</span> <span class="st">","</span>, <span class="dt">big.mark =</span> <span class="st">" "</span>)</code></pre></div>
<pre><code>[1] "   12,3" "5 678,0"</code></pre>
<p>Lorsque lâ€™on regarde la section <em>Usage</em> du fichier dâ€™aide, il apparait que certains arguments, suivi par le symbole <code>=</code>, ont une valeur par dÃ©faut. Il nâ€™est donc pas nÃ©cessaire de les inclure dans lâ€™appel de la fonction, auquel cas la valeur pas dÃ©faut sera prise en compte. Par contre, dâ€™autres arguments, ici <code>x</code>, nâ€™ont pas de valeur par dÃ©faut et il est donc nÃ©cessaire de fournir systÃ©matiquement une valeur.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(<span class="dt">decimal.mark =</span> <span class="st">","</span>)</code></pre></div>
<pre><code>Error in format.default(decimal.mark = ","): l'argument "x" est manquant, avec aucune valeur par dÃ©faut</code></pre>
<p>Enfin, pour certaines fonctions, on verra parfois apparaÃ®tre le symbole <code>...</code> Ce dernier correspond Ã  un nombre indÃ©terminÃ© dâ€™arguments. Il peut sâ€™agir, comme dans le cas de <code data-pkg="base">format</code> dâ€™arguments additionnels qui seront utilisÃ©s dans certains cas de figure, ou bien dâ€™arguments qui seront transmis Ã  une fonction secondaire appelÃ©e par la fonction principale, ou encore, comme pour le cas de la fonction <code data-pkg="base">c</code>, de la possibilitÃ© de saisir un nombre indÃ©fini de donnÃ©es sources.</p>
</div>
<div id="premier-contact_autocompletion" class="section level3">
<h3>AutocomplÃ©tion</h3>
<p><strong>RStudio</strong> fournit un outil bien pratique appelÃ© <dfn>autocomplÃ©tion</dfn><a href="#premier-contact_fn3" class="footnoteRef" id="premier-contact_fnref3"><sup>3</sup></a>. Saisissez les premiÃ¨res lettres dâ€™une fonction, par exemple <code>me</code> puis appuyez sur la touche <kbd>Tabulation</kbd>. <strong>RStudio</strong> affichera la liste des fonctions dont le nom commence par <code>me</code> ainsi quâ€™un court descriptif de chacune. Un appui sur la touche <kbd>EntrÃ©e</kbd> provoquera la saisie du nom complet de la fonction choisie.</p>
<figure>
<img src="images/capture_RStudio_autocompletion.png" alt="Auto-complÃ©tion sous RStudio"/>
<figcaption>
Auto-complÃ©tion sous RStudio
</figcaption>
</figure>
<p>Ã€ lâ€™intÃ©rieur des parenthÃ¨ses dâ€™une fonction, vous pouvez utiliser lâ€™autocomplÃ©tion pour retrouver un argument de cette fonction.</p>
<p>Vous pouvez Ã©galement utiliser lâ€™autocomplÃ©tion pour retrouver le nom dâ€™un objet que vous avez prÃ©cÃ©demment crÃ©Ã©.</p>
<p>Pour plus de dÃ©tails, voir la documentation officielle de <strong>RStudio</strong> (<a href="https://support.rstudio.com/hc/en-us/articles/205273297-Code-Completion" class="uri">https://support.rstudio.com/hc/en-us/articles/205273297-Code-Completion</a>).</p>
</div>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="premier-contact_fn1"><p>La prÃ©sence du <code>[1]</code> en dÃ©but de ligne sera expliquÃ©e par la suite dans la section sur les <a href="#premier-contact_vecteurs">vecteurs</a>.<a href="#premier-contact_fnref1">â†©</a></p></li>
<li id="premier-contact_fn2"><p><code data-pkg="base">c</code> est lâ€™abbrÃ©viation de <em>combine</em>. Le nom de cette fonction est trÃ¨s court car on lâ€™utilise trÃ¨s souvent.<a href="#premier-contact_fnref2">â†©</a></p></li>
<li id="premier-contact_fn3"><p>En bon franÃ§ais, il faudrait dire <em>complÃ¨tement automatique</em>.<a href="#premier-contact_fnref3">â†©</a></p></li>
</ol>
</div>

</article>
<article id="premier-travail-avec-les-donnees">

<div class="fluid-row" id="premier-travail-avec-les-donnees_header">


<h1 class="title">Premier travail avec des donnÃ©es</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#premier-travail-avec-les-donnees_regrouper-les-commandes-dans-des-scripts">Regrouper les commandes dans des scripts</a></li>
<li><a href="#premier-travail-avec-les-donnees_ajouter-des-commentaires">Ajouter des commentaires</a></li>
<li><a href="#premier-travail-avec-les-donnees_tableaux-de-donnees">Tableaux de donnÃ©es</a></li>
<li><a href="#premier-travail-avec-les-donnees_inspecter">Inspection visuelle des donnÃ©es</a></li>
<li><a href="#premier-travail-avec-les-donnees_structure-du-tableau">Structure du tableau</a></li>
<li><a href="#premier-travail-avec-les-donnees_acceder-aux-variables">AccÃ©der aux variables</a></li>
<li><a href="#premier-travail-avec-les-donnees_la-fonction-str">La fonction str</a></li>
<li><a href="#premier-travail-avec-les-donnees_quelques-calculs-simples">Quelques calculs simples</a></li>
<li><a href="#premier-travail-avec-les-donnees_nos-premiers-graphiques">Nos premiers graphiques</a></li>
<li><a href="#premier-travail-avec-les-donnees_et-ensuite">Et ensuiteÂ ?</a></li>
</ul>
</div>

<div class="note">
<p>Ce chapitre est inspirÃ© de la section <em>Premier travail avec les donnÃ©es</em> du support de cours <a href="https://github.com/juba/intro-r">Introduction Ã  R</a> rÃ©alisÃ© par Julien Barnier.</p>
</div>
<div id="premier-travail-avec-les-donnees_regrouper-les-commandes-dans-des-scripts" class="section level2">
<h2>Regrouper les commandes dans des scripts</h2>
<p>Jusquâ€™Ã  maintenant nous avons utilisÃ© uniquement la console pour communiquer avec <strong>R</strong> via lâ€™invite de commandes. Le principal problÃ¨me de ce mode dâ€™interaction est quâ€™une fois quâ€™une commande est tapÃ©e, elle est pour ainsi dire Â«Â perdueÂ Â», câ€™est-Ã -dire quâ€™on doit la saisir Ã  nouveau si on veut lâ€™exÃ©cuter une seconde fois. Lâ€™utilisation de la console est donc restreinte aux petites commandes Â«Â jetablesÂ Â», le plus souvent utilisÃ©es comme test.</p>
<p>La plupart du temps, les commandes seront stockÃ©es dans un fichier Ã  part, que lâ€™on pourra facilement ouvrir, Ã©diter et exÃ©cuter en tout ou partie si besoin. On appelle en gÃ©nÃ©ral ce type de fichier un <dfn>script</dfn><dfn data-index="fichier de commandes"/>.</p>
<p>Pour comprendre comment cela fonctionne, dans <strong>RStudio</strong> cliquez sur lâ€™icÃ´ne en haut Ã  gauche reprÃ©sentant un fichier avec un signe plus vert, puis choisissez <em>R script</em>.</p>
<figure>
<img src="images/capture_RStudio_new_R_script.png" alt="CrÃ©er un nouveau script R dans RStudio"/>
<figcaption>
CrÃ©er un nouveau script R dans RStudio
</figcaption>
</figure>
<p>Un nouvel onglet apparaÃ®t dans le quadrant supÃ©rieur gauche.</p>
<figure>
<img src="images/capture_RStudio_onglet_R_script.png" alt="Onglet dâ€™un script R dans RStudio"/>
<figcaption>
Onglet dâ€™un script R dans RStudio
</figcaption>
</figure>
<p>Nous pouvons dÃ©sormais y saisir des commandes. Par exemple, tapez sur la premiÃ¨re ligne la commande suivanteÂ : <code>2 + 2</code>. Ensuite, cliquez sur lâ€™icÃ´ne <em>Run</em> (en haut Ã  droite de lâ€™onglet du script) ou bien pressez simulatÃ©ment les touches <kbd>CTRL</kbd> et <kbd>EntrÃ©e</kbd><a href="#premier-travail-avec-les-donnees_fn1" class="footnoteRef" id="premier-travail-avec-les-donnees_fnref1"><sup>1</sup></a>.</p>
<p>Les lignes suivantes ont dÃ» faire leur apparition dans la consoleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> +<span class="st"> </span><span class="dv">2</span></code></pre></div>
<pre><code>[1] 4</code></pre>
<p>Voici donc comment soumettre rapidement Ã  <strong>R</strong> les commandes saisies dans votre fichier. Vous pouvez dÃ©sormais lâ€™enregistrer, lâ€™ouvrir plus tard, et en exÃ©cuter tout ou partie. Ã€ noter que vous avez plusieurs possibilitÃ©s pour soumettre des commandes Ã  <strong>R</strong>Â :</p>
<ul>
<li>vous pouvez exÃ©cuter la ligne sur laquelle se trouve votre curseur en cliquant sur <em>Run</em> ou en pressant simulatÃ©ment les touches <kbd>CTRL</kbd> et <kbd>EntrÃ©e</kbd>Â ;</li>
<li>vous pouvez sÃ©lectionner plusieurs lignes contenant des commandes et les exÃ©cuter toutes en une seule fois exactement de la mÃªme maniÃ¨reÂ ;</li>
<li>vous pouvez exÃ©cuter dâ€™un coup lâ€™intÃ©gralitÃ© de votre fichier en cliquant sur lâ€™icÃ´ne <em>Source</em>.</li>
</ul>
<p>La plupart du travail sous <strong>R</strong> consistera donc Ã  Ã©diter un ou plusieurs fichiers de commandes et Ã  envoyer rÃ©guliÃ¨rement les commandes saisies Ã  <strong>R</strong> en utilisant les raccourcis clavier <em>ad hoc</em>.</p>
<p>Pour plus dâ€™information sur lâ€™utilisation des scripts <strong>R</strong> dans <strong>RStudio</strong>, voir (en anglais)Â : <a href="https://support.rstudio.com/hc/en-us/articles/200484448-Editing-and-Executing-Code" class="uri">https://support.rstudio.com/hc/en-us/articles/200484448-Editing-and-Executing-Code</a>.</p>
<div class="note">
<p>Quand vous enregistrez un script sous <strong>RStudio</strong>, il est possible quâ€™il vous demande de choisir un type dâ€™encodage des caractÃ¨res (<em>Choose Encoding</em>). Si tel est le cas, utilisez de prÃ©fÃ©rence <strong>UTF-8</strong>.</p>
</div>
</div>
<div id="premier-travail-avec-les-donnees_ajouter-des-commentaires" class="section level2">
<h2>Ajouter des commentaires</h2>
<p>Un <dfn>commentaire</dfn> est une ligne ou une portion de ligne qui sera ignorÃ©e par <strong>R</strong>. Ceci signifie quâ€™on peut y Ã©crire ce quâ€™on veut et quâ€™on va les utiliser pour ajouter tout un tas de commentaires Ã  notre code permettant de dÃ©crire les diffÃ©rentes Ã©tapes du travail, les choses Ã  se rappeler, les questions en suspens, etc.</p>
<p>Un commentaire sous <strong>R</strong> commence par un ou plusieurs symboles <code>#</code> (qui sâ€™obtient avec les touches <kbd>AltÂ Gr</kbd> et <kbd>3</kbd> sur les claviers de type PC). Tout ce qui suit ce symbole jusquâ€™Ã  la fin de la ligne est considÃ©rÃ© comme un commentaire. On peut crÃ©er une ligne entiÃ¨re de commentaire en la faisant dÃ©buter par <code>##</code>. Par exempleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Tableau croisÃ© de la CSP par le nombre de livres
## lus.  Attention au nombre de non rÃ©ponses !</code></pre></div>
<p>On peut aussi crÃ©er des commentaires pour une ligne en coursÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">2</span>  <span class="co"># On met 2 dans x, parce qu'il le vaut bien</span></code></pre></div>
<div class="important">
<p>Dans tous les cas, il est trÃ¨s important de documenter ses fichiers <strong>R</strong> au fur et Ã  mesure, faute de quoi on risque de ne plus y comprendre grand chose si on les reprend ne serait-ce que quelques semaines plus tard.</p>
</div>
<p>Avec <strong>RStudio</strong>, vous pouvez Ã©galement utiliser les commentaires pour crÃ©er des <dfn data-index="section">sections</dfn> au sein de votre script et naviguer plus rapidement. Il suffit de faire suivre une ligne de commentaires dâ€™au moins 4 signes moins (<code>----</code>). Par exemple, si vous saisissez ceci dans votre scriptÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## CrÃ©er les objets ----

x &lt;-<span class="st"> </span><span class="dv">2</span>
y &lt;-<span class="st"> </span><span class="dv">5</span>

## Calculs ----

x +<span class="st"> </span>y</code></pre></div>
<p>Vous verrez apparaÃ®tre en bas Ã  gauche de la fenÃªtre du script un symbole diÃ¨se orange. Si vous cliquez dessus, un menu de navigation sâ€™affichera vous permettant de vous dÃ©placez rapidement au sein de votre script. Pour plus dâ€™information, voir la documentation de <strong>RStudio</strong> (en anglais)Â : <a href="https://support.rstudio.com/hc/en-us/articles/200484568-Code-Folding-and-Sections" class="uri">https://support.rstudio.com/hc/en-us/articles/200484568-Code-Folding-and-Sections</a>.</p>
<figure>
<img src="images/capture_RStudio_navigation_script.png" alt="Navigation rapide dans les scripts sous RStudio"/>
<figcaption>
Navigation rapide dans les scripts sous RStudio
</figcaption>
</figure>
<p>NoteÂ : on remarquera au passage que le titre de lâ€™onglet est affichÃ© en rouge et suivi dâ€™une astÃ©risque (<code>*</code>), nous indiquant ainsi quâ€™il y a des modifications non enregistrÃ©es dans notre fichier.</p>
</div>
<div id="premier-travail-avec-les-donnees_tableaux-de-donnees" class="section level2">
<h2>Tableaux de donnÃ©es</h2>
<p>Dans cette partie nous allons utiliser un jeu de donnÃ©es inclus dans lâ€™extension <code class="pkg">questionr</code>. Lâ€™installation dâ€™extension est dÃ©crite dans le chapitre <a href="#extensions">Extensions</a>.</p>
<p>Le jeu de donnÃ©es en question est un extrait de lâ€™enquÃªte <em>Histoire de vie</em> rÃ©alisÃ©e par lâ€™INSEE en 2003. Il contient 2000 individus et 20 variables. Pour pouvoir utiliser ces donnÃ©es, il faut dâ€™abord charger lâ€™extension <code class="pkg">questionr</code> (aprÃ¨s lâ€™avoir installÃ©e, bien entendu). Le chargement dâ€™une extension en mÃ©moire se fait Ã  lâ€™aide de la fonction <code data-pkg="base">library</code>. Sous <strong>RStudio</strong>, vous pouvez Ã©galement charger une extension en allant dans lâ€™onglet <em>Packages</em> du quadrant infÃ©rieur droit qui liste lâ€™ensemble des packages disponibles et en cliquant la case Ã  cocher situÃ©e Ã  gauche du nom du package dÃ©sirÃ©.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)</code></pre></div>
<p>Puis nous allons indiquer Ã  <strong>R</strong> que nous souhaitons accÃ©der au jeu de donnÃ©es <code data-pkg="questionr">hdv2003</code> Ã  lâ€™aide de la fonction <code data-pkg="utils">data</code> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(hdv2003)</code></pre></div>
<p>Bien. Et maintenant, elles sont oÃ¹ mes donnÃ©es ? Et bien elles se trouvent dans un objet nommÃ© <code>hdv2003</code> dÃ©sormais chargÃ© en mÃ©moire et accessible directement. Dâ€™ailleurs, cet objet est maintenant visible dans lâ€™onglet <em>Environment</em> du quadrant supÃ©rieur droit.</p>
<p>Essayons de taper son nom Ã  lâ€™invite de commande :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">hdv2003</code></pre></div>
<p>Le rÃ©sultat (non reproduit ici) ne ressemble pas forcÃ©ment Ã  grand-choseâ€¦ Il faut se rappeler que par dÃ©faut, lorsquâ€™on lui fournit seulement un nom dâ€™objet, <strong>R</strong> essaye de lâ€™afficher de la maniÃ¨re la meilleure (ou la moins pire) possible. La rÃ©ponse Ã  la commande <code>hdv2003</code> nâ€™est donc rien moins que lâ€™affichage des donnÃ©es brutes contenues dans cet objet.</p>
<p>Ce qui signifie donc que lâ€™intÃ©gralitÃ© de notre jeu de donnÃ©es est inclus dans lâ€™objet nommÃ© <code>hdv2003</code> ! En effet, dans <strong>R</strong>, un objet peut trÃ¨s bien contenir un simple nombre, un vecteur ou bien le rÃ©sultat dâ€™une enquÃªte tout entier. Dans ce cas, les objets sont appelÃ©s des <dfn data-index="data frame" lang="en">data frames</dfn>, ou <dfn data-index="tableau de donnÃ©e">tableaux de donnÃ©es</dfn>. Ils peuvent Ãªtre manipulÃ©s comme tout autre objet. Par exemple :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<p>va entraÃ®ner la copie de lâ€™ensemble de nos donnÃ©es dans un nouvel objet nommÃ© <code>d</code>, ce qui peut paraÃ®tre parfaitement inutile mais a en fait lâ€™avantage de fournir un objet avec un nom beaucoup plus court, ce qui diminuera la quantitÃ© de texte Ã  saisir par la suite.</p>
<p><strong>RÃ©sumons</strong></p>
<p>Comme nous avons dÃ©sormais dÃ©cidÃ© de saisir nos commandes dans un script et non plus directement dans la console, les premiÃ¨res lignes de notre fichier de travail sur les donnÃ©es de lâ€™enquÃªte <em>Histoire de vie</em> pourraient donc ressembler Ã  ceci :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Chargement des extensions nÃ©cessaires ----
<span class="kw">library</span>(questionr)
## Jeu de donnÃ©es hdv2003 ----
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
</div>
<div id="premier-travail-avec-les-donnees_inspecter" class="section level2">
<h2>Inspection visuelle des donnÃ©es</h2>
<p>La particularitÃ© de <strong>R</strong> par rapport Ã  dâ€™autres logiciels comme <strong>Modalisa</strong> ou <strong>SPSS</strong> est de ne pas proposer, par dÃ©faut, de vue des donnÃ©es sous forme de tableau. Ceci peut parfois Ãªtre un peu dÃ©stabilisant dans les premiers temps dâ€™utilisation, mÃªme si lâ€™on perd vite lâ€™habitude et quâ€™on finit par se rendre compte que Â«Â voirÂ Â» les donnÃ©es nâ€™est pas forcÃ©ment un gage de productivitÃ© ou de rigueur dans le traitement.</p>
<p>NÃ©anmoins, <strong>R</strong> propose une interface permettant de visualiser le contenu dâ€™un tableau de donnÃ©es Ã  lâ€™aide de la fonction <code data-pkg="utils">View</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">View</span>(d)</code></pre></div>
<p>Sous <strong>RStudio</strong>, on peut aussi afficher la <dfn>visionneusee</dfn> (<dfn lang="en">viewer</dfn>) en cliquant sur la petite icÃ´ne en forme de tableau situÃ©e Ã  droite de la ligne dâ€™un tableau de donnÃ©es dans lâ€™onglet <em>Environment</em> du quadrant supÃ©rieur droit (cf.Â figure ci-aprÃ¨s).</p>
<figure>
<img src="images/capture_RStudio_icone_viewer.png" alt="IcÃ´ne pour afficher une vue du contenu dâ€™un tableau"/>
<figcaption>
IcÃ´ne pour afficher une vue du contenu dâ€™un tableau
</figcaption>
</figure>
<p>Dans tous les cas, <strong>RStudio</strong> lancera le <em>viewer</em> dans un onglet dÃ©diÃ© dans le quadrant supÃ©rieur gauche. Le visualiseur de <strong>RStudio</strong> est plus avancÃ© que celui-de base fournit par <strong>R</strong>. Il est possible de trier les donnÃ©es selon une variable en cliquant sur le nom de cette derniÃ¨re. Il y a Ã©galement un champs de recherche et un bouton <em>Filter</em> donnant accÃ¨s Ã  des options de filtrage avancÃ©es.</p>
<figure>
<img src="images/capture_RStudio_data_viewer.png" alt="La visionneuse de donnÃ©es de RStudio"/>
<figcaption>
La visionneuse de donnÃ©es de RStudio
</figcaption>
</figure>
</div>
<div id="premier-travail-avec-les-donnees_structure-du-tableau" class="section level2">
<h2>Structure du tableau</h2>
<p>Avant de travailler sur les donnÃ©es, nous allons essayer de comprendre comment elles sont structurÃ©es. Lors de lâ€™import de donnÃ©es depuis un autre logiciel (que nous aborderons dans un autre <a href="#import-de-donnees">chapitre</a>), il sâ€™agira souvent de vÃ©rifier que lâ€™importation sâ€™est bien dÃ©roulÃ©e.</p>
<p>Nous avons dÃ©jÃ  vu quâ€™un tableau de donnÃ©es est organisÃ© en lignes et en colonnes, les lignes correspondant aux <dfn data-index="observation">observations</dfn> et les colonnes aux <dfn data-index="variable">variables</dfn>. Les fonctions <code data-pkg="base">nrow</code>, <code data-pkg="base" data-rdoc="nrow">ncol</code> et <code data-pkg="base">dim</code> donnent respectivement le nombre de lignes, le nombre de colonnes et les dimensions de notre tableau. Nous pouvons donc dâ€™ores et dÃ©jÃ  vÃ©rifier que nous avons bien 2000 lignes et 20 colonnesÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nrow</span>(d)</code></pre></div>
<pre><code>[1] 2000</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ncol</span>(d)</code></pre></div>
<pre><code>[1] 20</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(d)</code></pre></div>
<pre><code>[1] 2000   20</code></pre>
<p>La fonction <code data-pkg="base">names</code> donne les noms des colonnes de notre tableau, câ€™est-Ã -dire les noms des variablesÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(d)</code></pre></div>
<pre><code> [1] "id"            "age"          
 [3] "sexe"          "nivetud"      
 [5] "poids"         "occup"        
 [7] "qualif"        "freres.soeurs"
 [9] "clso"          "relig"        
[11] "trav.imp"      "trav.satisf"  
[13] "hard.rock"     "lecture.bd"   
[15] "peche.chasse"  "cuisine"      
[17] "bricol"        "cinema"       
[19] "sport"         "heures.tv"    </code></pre>
</div>
<div id="premier-travail-avec-les-donnees_acceder-aux-variables" class="section level2">
<h2>AccÃ©der aux variables</h2>
<p><code>d</code> reprÃ©sente donc lâ€™ensemble de notre tableau de donnÃ©es. Nous avons vu que si lâ€™on saisit simplement <code>d</code> Ã  lâ€™invite de commandes, on obtient un affichage du tableau en question. Mais comment accÃ©der aux variables, câ€™est Ã  dire aux colonnes de notre tableauÂ ?</p>
<p>La rÃ©ponse est simpleÂ : on utilise le nom de lâ€™objet, suivi de lâ€™opÃ©rateur <code data-pkg="base" data-rdoc="Extract">$</code>, suivi du nom de la variable, comme ceciÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$sexe</code></pre></div>
<p>Au regard du rÃ©sultat (non reproduit ici), on constate alors que <strong>R</strong> a bien accÃ©dÃ© au contenu de notre variable <var>sexe</var> du tableau <code>d</code> et a affichÃ© son contenu, câ€™est-Ã -dire lâ€™ensemble des valeurs prises par la variable.</p>
<p>Les fonctions <code data-pkg="utils">head</code> et <code data-pkg="utils" data-rdoc="head">tail</code> permettent dâ€™afficher seulement les premiÃ¨res (respectivement les derniÃ¨res) valeurs prises par la variable. On peut leur passer en argument le nombre dâ€™Ã©lÃ©ments Ã  afficherÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(d$nivetud)</code></pre></div>
<pre><code>[1] Enseignement superieur y compris technique superieur
[2] &lt;NA&gt;                                                
[3] Derniere annee d'etudes primaires                   
[4] Enseignement superieur y compris technique superieur
[5] Derniere annee d'etudes primaires                   
[6] Enseignement technique ou professionnel court       
8 Levels: N'a jamais fait d'etudes ...</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tail</span>(d$age, <span class="dv">10</span>)</code></pre></div>
<pre><code> [1] 52 42 50 41 46 45 46 24 24 66</code></pre>
<p>Ã€ noter que ces fonctions marchent aussi pour afficher les lignes du tableau <code>d</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(d, <span class="dv">2</span>)</code></pre></div>
<pre><code>  id age  sexe
1  1  28 Femme
2  2  23 Femme
                                               nivetud
1 Enseignement superieur y compris technique superieur
2                                                 &lt;NA&gt;
     poids                 occup  qualif
1 2634.398 Exerce une profession Employe
2 9738.396       Etudiant, eleve    &lt;NA&gt;
  freres.soeurs clso                       relig
1             8  Oui Ni croyance ni appartenance
2             2  Oui Ni croyance ni appartenance
       trav.imp    trav.satisf hard.rock
1 Peu important Insatisfaction       Non
2          &lt;NA&gt;           &lt;NA&gt;       Non
  lecture.bd peche.chasse cuisine bricol cinema
1        Non          Non     Oui    Non    Non
2        Non          Non     Non    Non    Oui
  sport heures.tv
1   Non         0
2   Oui         1</code></pre>
</div>
<div id="premier-travail-avec-les-donnees_la-fonction-str" class="section level2">
<h2>La fonction str</h2>
<p>La fonction <code data-pkg="utils">str</code> est plus complÃ¨te que <code data-pkg="base">names</code>. Elle liste les diffÃ©rentes variables, indique leur type et donne le cas Ã©chÃ©ant des informations supplÃ©mentaires ainsi quâ€™un Ã©chantillon des premiÃ¨res valeurs prises par cette variableÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(d)</code></pre></div>
<pre><code>'data.frame':   2000 obs. of  20 variables:
 $ id           : int  1 2 3 4 5 6 7 8 9 10 ...
 $ age          : int  28 23 59 34 71 35 60 47 20 28 ...
 $ sexe         : Factor w/ 2 levels "Homme","Femme": 2 2 1 1 2 2 2 1 2 1 ...
 $ nivetud      : Factor w/ 8 levels "N'a jamais fait d'etudes",..: 8 NA 3 8 3 6 3 6 NA 7 ...
 $ poids        : num  2634 9738 3994 5732 4329 ...
 $ occup        : Factor w/ 7 levels "Exerce une profession",..: 1 3 1 1 4 1 6 1 3 1 ...
 $ qualif       : Factor w/ 7 levels "Ouvrier specialise",..: 6 NA 3 3 6 6 2 2 NA 7 ...
 $ freres.soeurs: int  8 2 2 1 0 5 1 5 4 2 ...
 $ clso         : Factor w/ 3 levels "Oui","Non","Ne sait pas": 1 1 2 2 1 2 1 2 1 2 ...
 $ relig        : Factor w/ 6 levels "Pratiquant regulier",..: 4 4 4 3 1 4 3 4 3 2 ...
 $ trav.imp     : Factor w/ 4 levels "Le plus important",..: 4 NA 2 3 NA 1 NA 4 NA 3 ...
 $ trav.satisf  : Factor w/ 3 levels "Satisfaction",..: 2 NA 3 1 NA 3 NA 2 NA 1 ...
 $ hard.rock    : Factor w/ 2 levels "Non","Oui": 1 1 1 1 1 1 1 1 1 1 ...
 $ lecture.bd   : Factor w/ 2 levels "Non","Oui": 1 1 1 1 1 1 1 1 1 1 ...
 $ peche.chasse : Factor w/ 2 levels "Non","Oui": 1 1 1 1 1 1 2 2 1 1 ...
 $ cuisine      : Factor w/ 2 levels "Non","Oui": 2 1 1 2 1 1 2 2 1 1 ...
 $ bricol       : Factor w/ 2 levels "Non","Oui": 1 1 1 2 1 1 1 2 1 1 ...
 $ cinema       : Factor w/ 2 levels "Non","Oui": 1 2 1 2 1 2 1 1 2 2 ...
 $ sport        : Factor w/ 2 levels "Non","Oui": 1 2 2 2 1 2 1 1 1 2 ...
 $ heures.tv    : num  0 1 0 2 3 2 2.9 1 2 2 ...</code></pre>
<p>La premiÃ¨re ligne nous informe quâ€™il sâ€™agit bien dâ€™un tableau de donnÃ©es avec 2000 observations et 20 variables. Vient ensuite la liste des variables. La premiÃ¨re se nomme <var>id</var> et est de type <dfn>entier</dfn> (<em>int</em><dfn data-index="integer" lang="en"/>). La seconde se nomme <var>age</var> et est de type <dfn data-index="numÃ©rique, variable">numÃ©rique</dfn><dfn data-index="variable numÃ©rique"/><dfn data-index="numeric" lang="en"/>. La troisiÃ¨me se nomme <var>sexe</var>, il sâ€™agit dâ€™un <dfn>facteur</dfn> (<dfn lang="en">factor</dfn>).</p>
<p>Un facteur est une variable pouvant prendre un nombre limitÃ© de <dfn data-index="modalitÃ©, facteur">modalitÃ©s</dfn> (<dfn data-index="level, factor" lang="en">levels</dfn>). Ici notre variable a deux modalitÃ©s possiblesÂ : Â«Â HommeÂ Â» et Â«Â FemmeÂ Â». Ce type de variable est dÃ©crit plus en dÃ©tail dans le chapitre sur la <a href="pem_manipulation.html#variables">manipulation de donnÃ©es</a>.</p>
<div class="important">
<p>La fonction <code data-pkg="utils">str</code> est essentielle Ã  connaÃ®tre et peut sâ€™appliquer Ã  nâ€™importe quel type dâ€™objet. Câ€™est un excellent moyen de connaÃ®tre en dÃ©tail la <dfn>structure dâ€™un objet</dfn>. Cependant, les rÃ©sultats peuvent Ãªtre parfois trop dÃ©taillÃ©s et on lui priviligiera dans certains cas la fonction <code data-pkg="questionr">describe</code> (voir ci-aprÃ¨s), cependant moins gÃ©nÃ©rique puisque ne sâ€™appliquant quâ€™Ã  des tableaux de donnÃ©es et Ã  des vecteurs, tandis que <code data-pkg="utils">str</code> peut sâ€™appliquer Ã  absolument <strong>tout</strong> objet, y compris des fonctions.</p>
</div>
</div>
<div id="premier-travail-avec-les-donnees_quelques-calculs-simples" class="section level2">
<h2>Quelques calculs simples</h2>
<p>Maintenant que nous savons accÃ©der aux variables, effectuons quelques calculs simples comme la moyenne, la mÃ©diane, le minimum et le maximum, Ã  lâ€™aide des fonctions <code data-pkg="base">mean</code>, <code data-pkg="stats">median</code>, <code data-pkg="base" data-rdoc="Extrems">min</code> et <code data-pkg="base" data-rdoc="Extrems">max</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(d$age)</code></pre></div>
<pre><code>[1] 48.157</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">median</span>(d$age)</code></pre></div>
<pre><code>[1] 48</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">min</span>(d$age)</code></pre></div>
<pre><code>[1] 18</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">max</span>(d$age)</code></pre></div>
<pre><code>[1] 97</code></pre>
<div class="note">
<p>Au sens strict, il ne sâ€™agit pas dâ€™un vÃ©ritable Ã¢ge moyen puisquâ€™il faudrait ajouter 0,5 Ã  cette valeur calculÃ©e, un Ã¢ge moyen se calculant Ã  partir dâ€™Ã¢ges exacts et non Ã  partir dâ€™Ã¢ges rÃ©volus. Voir le chapitre <a href="#calculer-un-age">Calculer un Ã¢ge</a>.</p>
</div>
<p>On peut aussi trÃ¨s facilement obtenir un tri Ã  plat Ã  lâ€™aide la fonction <code data-pkg="base">table</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$qualif)</code></pre></div>
<pre><code>
      Ouvrier specialise         Ouvrier qualifie 
                     203                      292 
              Technicien Profession intermediaire 
                      86                      160 
                   Cadre                  Employe 
                     260                      594 
                   Autre 
                      58 </code></pre>
<p>La fonction <code data-pkg="base">summary</code>, bien pratique, permet dâ€™avoir une vue rÃ©sumÃ©e dâ€™une variable. Elle sâ€™applique Ã  tout type dâ€™objets (y compris un tableau de donnÃ©es entier) et sâ€™adapte Ã  celui-ci.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d$age)</code></pre></div>
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  18.00   35.00   48.00   48.16   60.00   97.00 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d$qualif)</code></pre></div>
<pre><code>      Ouvrier specialise         Ouvrier qualifie 
                     203                      292 
              Technicien Profession intermediaire 
                      86                      160 
                   Cadre                  Employe 
                     260                      594 
                   Autre                     NA's 
                      58                      347 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d)</code></pre></div>
<pre><code>       id              age           sexe     
 Min.   :   1.0   Min.   :18.00   Homme: 899  
 1st Qu.: 500.8   1st Qu.:35.00   Femme:1101  
 Median :1000.5   Median :48.00               
 Mean   :1000.5   Mean   :48.16               
 3rd Qu.:1500.2   3rd Qu.:60.00               
 Max.   :2000.0   Max.   :97.00               
                                              
                                                 nivetud   
 Enseignement technique ou professionnel court       :463  
 Enseignement superieur y compris technique superieur:441  
 Derniere annee d'etudes primaires                   :341  
 1er cycle                                           :204  
 2eme cycle                                          :183  
 (Other)                                             :256  
 NA's                                                :112  
     poids                            occup     
 Min.   :   78.08   Exerce une profession:1049  
 1st Qu.: 2221.82   Chomeur              : 134  
 Median : 4631.19   Etudiant, eleve      :  94  
 Mean   : 5535.61   Retraite             : 392  
 3rd Qu.: 7626.53   Retire des affaires  :  77  
 Max.   :31092.14   Au foyer             : 171  
                    Autre inactif        :  83  
                      qualif    freres.soeurs   
 Employe                 :594   Min.   : 0.000  
 Ouvrier qualifie        :292   1st Qu.: 1.000  
 Cadre                   :260   Median : 2.000  
 Ouvrier specialise      :203   Mean   : 3.283  
 Profession intermediaire:160   3rd Qu.: 5.000  
 (Other)                 :144   Max.   :22.000  
 NA's                    :347                   
          clso     
 Oui        : 936  
 Non        :1037  
 Ne sait pas:  27  
                   
                   
                   
                   
                         relig    
 Pratiquant regulier        :266  
 Pratiquant occasionnel     :442  
 Appartenance sans pratique :760  
 Ni croyance ni appartenance:399  
 Rejet                      : 93  
 NSP ou NVPR                : 40  
                                  
                         trav.imp  
 Le plus important           : 29  
 Aussi important que le reste:259  
 Moins important que le reste:708  
 Peu important               : 52  
 NA's                        :952  
                                   
                                   
         trav.satisf  hard.rock  lecture.bd
 Satisfaction  :480   Non:1986   Non:1953  
 Insatisfaction:117   Oui:  14   Oui:  47  
 Equilibre     :451                        
 NA's          :952                        
                                           
                                           
                                           
 peche.chasse cuisine    bricol     cinema    
 Non:1776     Non:1119   Non:1147   Non:1174  
 Oui: 224     Oui: 881   Oui: 853   Oui: 826  
                                              
                                              
                                              
                                              
                                              
 sport        heures.tv     
 Non:1277   Min.   : 0.000  
 Oui: 723   1st Qu.: 1.000  
            Median : 2.000  
            Mean   : 2.247  
            3rd Qu.: 3.000  
            Max.   :12.000  
            NA's   :5       </code></pre>
</div>
<div id="premier-travail-avec-les-donnees_nos-premiers-graphiques" class="section level2">
<h2>Nos premiers graphiques</h2>
<p><strong>R</strong> est trÃ¨s puissant en termes de reprÃ©sentations graphiques, notamment grÃ¢ce Ã  des extensions dÃ©diÃ©es. Pour lâ€™heure contentons-nous dâ€™un premier essai Ã  lâ€™aide de la fonction gÃ©nÃ©rique <code data-pkg="graphics">plot</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(d$sexe)</code></pre></div>
<img src="graphs/premier-travail-avec-les-donnees/unnamed-chunk-20-1.png" title="" alt="" width="1050"/>
<figcaption>
Nombre dâ€™observations par sexe
</figcaption>
</figure>
<p>Essayons avec deux variablesÂ :</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(d$hard.rock, d$age)</code></pre></div>
<img src="graphs/premier-travail-avec-les-donnees/unnamed-chunk-21-1.png" title="" alt="" width="1050"/>
<figcaption>
Ã‚ge des enquÃªtÃ©s selon quâ€™ils Ã©coutent ou non du hard rock
</figcaption>
</figure>
<p>Il semblerait bien que les amateurs de hard rock soient plus jeunes.</p>
</div>
<div id="premier-travail-avec-les-donnees_et-ensuite" class="section level2">
<h2>Et ensuiteÂ ?</h2>
<p>Nous nâ€™avons quâ€™entrâ€™aperÃ§u les possibilitÃ©s de <strong>R</strong>. Avant de pouvoir nous lancer dans des analyses statisques, il est prÃ©fÃ©rable de revenir un peu aux fondamentaux de <strong>R</strong> (les types dâ€™objets, la syntaxe, le recodage de variablesâ€¦) mais aussi comment installer des extensions, importer des donnÃ©es, etc. Nous vous conseillons donc de poursuivre la lecture de la section <em>Prise en main</em> puis de vous lancer Ã  lâ€™assault de la section <em>Statistique introductive</em>.</p>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="premier-travail-avec-les-donnees_fn1"><p>Sous <strong>Mac OS X</strong>, on utilise les touches <kbd>Pomme</kbd> et <kbd>EntrÃ©e</kbd>.<a href="#premier-travail-avec-les-donnees_fnref1">â†©</a></p></li>
</ol>
</div>

</article>
<article id="extensions">

<div class="fluid-row" id="extensions_header">


<h1 class="title">Extensions</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#extensions_presentation">PrÃ©sentation</a></li>
<li><a href="#extensions_le-hadleyverse">Le <q>Hadleyverse</q></a></li>
<li><a href="#extensions_installation-depuis-cran">Installation depuis CRAN</a></li>
<li><a href="#extensions_installation-depuis-github">Installation depuis GitHub</a></li>
<li><a href="#extensions_mise-a-jour-des-extensions">Mise Ã  jour des extensions</a></li>
</ul>
</div>

<div id="extensions_presentation" class="section level2">
<h2>PrÃ©sentation</h2>
<p>Lâ€™installation par dÃ©faut du logiciel <strong>R</strong> contient le cÅ“ur du programme ainsi quâ€™un ensemble de fonctions de base fournissant un grand nombre dâ€™outils de traitement de donnÃ©es et dâ€™analyse statistiques.</p>
<p><strong>R</strong> Ã©tant un logiciel libre, il bÃ©nÃ©ficie dâ€™une forte communautÃ© dâ€™utilisateurs qui peuvent librement contribuer au dÃ©veloppement du logiciel en lui ajoutant des fonctionnalitÃ©s supplÃ©mentaires. Ces contributions prennent la forme dâ€™<dfn data-index="extension">extensions</dfn> (<dfn data-index="package" lang="en">packages</dfn>) pouvant Ãªtre installÃ©es par lâ€™utilisateur et fournissant alors diverses fonctionnalitÃ©s supplÃ©mentaires.</p>
<p>Il existe un trÃ¨s grand nombre dâ€™extensions (plus de 6500 Ã  ce jour), qui sont diffusÃ©es par un rÃ©seau baptisÃ© <strong>CRAN</strong> (<dfn lang="en">Comprehensive R Archive Network</dfn><dfn data-index="CRAN"/>).</p>
<p>La liste de toutes les extensions disponibles sur <strong>CRAN</strong> est disponible iciÂ : <a href="http://cran.r-project.org/web/packages/" class="uri">http://cran.r-project.org/web/packages/</a>.</p>
<p>Pour faciliter un peu le repÃ©rage des extensions, il existe un ensemble de regroupements thÃ©matiques (Ã©conomÃ©trie, finance, gÃ©nÃ©tique, donnÃ©es spatialesâ€¦) baptisÃ©s <dfn data-index="task view" lang="en">Task views</dfn>Â : <a href="http://cran.r-project.org/web/views/" class="uri">http://cran.r-project.org/web/views/</a>.</p>
<p>On y trouve notamment une <em>Task view</em> dÃ©diÃ©e aux sciences sociales, listant de nombreuses extensions potentiellement utiles pour les analyses statistiques dans ce champ disciplinaireÂ : <a href="http://cran.r-project.org/web/views/SocialSciences.html" class="uri">http://cran.r-project.org/web/views/SocialSciences.html</a>.</p>
</div>
<div id="extensions_le-hadleyverse" class="section level2">
<h2>Le <q>Hadleyverse</q></h2>
<p>Hadley Wickham est professeur associÃ© Ã  lâ€™universitÃ© de Rice et scientifique en chef Ã  <strong>Rstudio</strong>. Il a dÃ©veloppÃ© de nombreux extensions pour <strong>R</strong> (plus dâ€™une cinquantaine Ã  ce jours) qui, pour la plupart, fonctionne de maniÃ¨re harmonisÃ©e entre elles. Par ailleurs, la plupart sâ€™intÃ¨gre parfaitement avec <strong>RStudio</strong>. On nomme un peu familiÃ¨rement <q>Hadleyverse</q> lâ€™ensemble constituÃ© par les diffÃ©rentes extensions crÃ©es par Hadley Wickham.</p>
<p>Pour certaines tÃ¢ches, il peut exister plusieurs solutions / extensions diffÃ©rentes pour les rÃ©aliser. Dans la mesure oÃ¹ il nâ€™est pas possible dâ€™Ãªtre exhaustif, nous avons fait le choix dans le cadre dâ€™<strong>analyse-R</strong> de choisir en prioritÃ©, lorsque cela est possible, les extensions proposÃ©es par Hadley Wickham, en particulier <code class="pkg">haven</code>, <code class="pkg">readr</code> et <code class="pkg">readxl</code> pour lâ€™import de donnÃ©es, <code class="pkg">dplyr</code>, <code class="pkg">tidyr</code> ou <code class="pkg">reshape2</code> pour la manipulation de donnÃ©es, <code class="pkg">ggplot2</code> pour les graphiques, <code class="pkg">lubridate</code> pour la gestion des dates ou encore <code class="pkg">stringr</code> pour la manipulation de chaÃ®nes de caractÃ¨res.</p>
</div>
<div id="extensions_installation-depuis-cran" class="section level2">
<h2>Installation depuis CRAN</h2>
<p>Lâ€™installation dâ€™une extension se fait par la fonction <code>install.packages</code>{utils}, Ã  qui on fournit le nom de lâ€™extension. Par exemple, si on souhaite installer lâ€™extension <strong>ade4</strong>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"ade4"</span>, <span class="dt">dep =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>Lâ€™option <code>dep=TRUE</code> indique Ã  <strong>R</strong> de tÃ©lÃ©charger et dâ€™installer Ã©galement toutes les extensions dont lâ€™extension choisie dÃ©pend pour son fonctionnement.</p>
<p>Sous <strong>RStudio</strong>, on pourra Ã©galement cliquer sur <em>Install</em> dans lâ€™onglet <em>Packages</em> du quadrant infÃ©rieur droit.</p>
<p>Une fois lâ€™extension installÃ©e, elle peut Ãªtre appelÃ©e depuis la console ou un fichier script avec la fonction <code data-pkg="base">library</code> ou la fonction <code data-pkg="base" data-rdoc="library">require</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ade4)</code></pre></div>
<p>Ã€ partir de lÃ , on peut utiliser les fonctions de lâ€™extension, consulter leur page dâ€™aide en ligne, accÃ©der aux jeux de donnÃ©es quâ€™elle contient, etc.</p>
<p>Pour mettre Ã  jour lâ€™ensemble des extensions installÃ©es, &lt;dfndata-index=â€œmise Ã  jour, extensionsâ€&gt; la fonction <code data-pkg="utils">update.packages</code> suffitÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">update.packages</span>()</code></pre></div>
<p>Sous <strong>RStudio</strong>, on pourra alternativement cliquer sur <em>Update</em> dans lâ€™onglet <em>Packages</em> du quadrant infÃ©rieur droit.</p>
<p>Si on souhaite dÃ©sinstaller une extension prÃ©cÃ©demment installÃ©e, on peut utiliser la fonction <code data-pkg="utils">remove.packages</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">remove.packages</span>(<span class="st">"ade4"</span>)</code></pre></div>
<div class="important">
<p>Il est important de bien comprendre la diffÃ©rence entre <code data-pkg="utils">install.packages</code> et <code data-pkg="base">library</code>. La premiÃ¨re va chercher les extensions sur internet et les installe en local sur le disque dur de lâ€™ordinateur. On nâ€™a besoin dâ€™effectuer cette opÃ©ration quâ€™une seule fois. La seconde lit les informations de lâ€™extension sur le disque dur et les met Ã  disposition de <strong>R</strong>. On a besoin de lâ€™exÃ©cuter Ã  chaque dÃ©but de session ou de script.</p>
</div>
</div>
<div id="extensions_installation-depuis-github" class="section level2">
<h2>Installation depuis GitHub</h2>
<p>Certains packages sont dÃ©veloppÃ©s sur <a href="https://github.com/"><strong>GitHub</strong></a>. DÃ¨s lors, la version de dÃ©veloppement sur <strong>GitHub</strong> peut contenir des fonctions qui ne sont pas encore disponibles dans la version stable disponible sur <strong>CRAN</strong>. Ils arrivent aussi parfois que certains packages ne soient disponibles que sur <strong>GitHub</strong>.</p>
<p>Lâ€™installation dâ€™un package depuis <strong>GitHub</strong> est trÃ¨s facile grÃ¢ce Ã  la fonction <code data-pkg="devtools">install_github</code> de lâ€™extension <code class="pkg">devtools</code> (que lâ€™on aura prÃ©alablement installÃ©e depuis <strong>CRAN</strong> ;-) ).</p>
</div>
<div id="extensions_mise-a-jour-des-extensions" class="section level2">
<h2>Mise Ã  jour des extensions</h2>
<p>Il est facile de mettre Ã  jour lâ€™ensemble des extensions installÃ©es, soit avec la fonction, <code data-pkg="utils">update.packages</code> soit en cliquant sur <em>Update</em> dans lâ€™onglet <em>Packages</em> du quadrant infÃ©rieur droit.</p>
</div>

</article>
<article id="vecteurs-indexation-et-assignation">

<div class="fluid-row" id="vecteurs-indexation-et-assignation_header">


<h1 class="title">Vecteurs, indexation et assignation</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#vecteurs-indexation-et-assignation_presentation-des-vecteurs">PrÃ©sentation des vecteurs</a></li>
<li><a href="#vecteurs-indexation-et-assignation_les-principaux-types-de-vecteurs">Les principaux types de vecteurs</a></li>
<li><a href="#vecteurs-indexation-et-assignation_creation">CrÃ©ation</a><ul>
<li><a href="#vecteurs-indexation-et-assignation_la-fonction-c">La fonction c</a></li>
<li><a href="#vecteurs-indexation-et-assignation_la-fonction-rep">La fonction rep</a></li>
<li><a href="#vecteurs-indexation-et-assignation_la-fonction-seq">La fonction seq</a></li>
<li><a href="#vecteurs-indexation-et-assignation_loperateur">Lâ€™opÃ©rateur :</a></li>
</ul></li>
<li><a href="#vecteurs-indexation-et-assignation_longueur-dun-vecteur">Longueur dâ€™un vecteur</a></li>
<li><a href="#vecteurs-indexation-et-assignation_quelques-vecteurs-remarquables">Quelques vecteurs remarquables</a></li>
<li><a href="#vecteurs-indexation-et-assignation_combiner-des-vecteurs">Combiner des vecteurs</a></li>
<li><a href="#vecteurs-indexation-et-assignation_valeurs-manquantes">Valeurs manquantes</a></li>
<li><a href="#vecteurs-indexation-et-assignation_indexation-par-position">Indexation par position</a></li>
<li><a href="#vecteurs-indexation-et-assignation_des-vecteurs-nommes">Des vecteurs nommÃ©s</a></li>
<li><a href="#vecteurs-indexation-et-assignation_indexation-par-nom">Indexation par nom</a></li>
<li><a href="#vecteurs-indexation-et-assignation_indexation-par-condition">Indexation par condition</a></li>
<li><a href="#vecteurs-indexation-et-assignation_assignation-par-indexation">Assignation par indexation</a></li>
<li><a href="#vecteurs-indexation-et-assignation_en-resume">En rÃ©sumÃ©</a></li>
</ul>
</div>

<p>Nous allons reprendre plusieurs Ã©lÃ©ments de base du langage <strong>R</strong> que nous avons dÃ©jÃ  abordÃ© mais de maniÃ¨re plus formelle. Une bonne comprÃ©hension des bases du langage, bien quâ€™un peu ardue de prime abord, permets de comprendre le sens des commandes que lâ€™on utilise et de pleinement exploiter la puissance que <strong>R</strong> offre en matiÃ¨re de manipulation de donnÃ©es.</p>
<p>Dans ce chapitre, nous reviendrons sur les vecteurs, tandis que les listes et les tableaux de donnÃ©es seront abordÃ©s dans un <a href="#listes-et-tableaux-de-donnes">chapitre dÃ©diÃ©</a>.</p>
<div id="vecteurs-indexation-et-assignation_presentation-des-vecteurs" class="section level2">
<h2>PrÃ©sentation des vecteurs</h2>
<p>Les <dfn data-index="vecteur">vecteurs</dfn> sont lâ€™un des objets de bases de <strong>R</strong> et correspondent Ã  une <q>liste de valeurs</q>. Leurs propriÃ©tÃ©s fondamentales sontÂ :</p>
<ul>
<li>les vecteurs sont unidimensionnels (i.e.Â câ€™est un objet Ã  une seule dimension, Ã  la diffÃ©rence dâ€™une matrice par exemple)Â ;</li>
<li>toutes les valeurs dâ€™un vecteur sont dâ€™un seul et mÃªme typeÂ ;</li>
<li>les vecteurs ont une longueur qui correspond au nombre de valeurs contenues dans le vecteur.</li>
</ul>
</div>
<div id="vecteurs-indexation-et-assignation_les-principaux-types-de-vecteurs" class="section level2">
<h2>Les principaux types de vecteurs</h2>
<p>Dans <strong>R</strong>, il existe quatre types fondamentaux de vecteursÂ :</p>
<ul>
<li>les <dfn data-index="nombre rÃ©el">nombres rÃ©els</dfn><dfn data-index="rÃ©el, nombre"/> (câ€™est-Ã -dire les nombres dÃ©cimaux que nous utilisons au quotidien),</li>
<li>les <dfn data-index="nombre entier">nombres entiers</dfn><dfn data-index="entier, nombre"/>,</li>
<li>les <dfn data-index="chaÃ®ne de caractÃ¨res">chaÃ®nes de caratÃ¨res</dfn><dfn data-index="caractÃ¨res, chaÃ®ne"/> (qui correspondent Ã  du <dfn>texte</dfn>) et</li>
<li>les <dfn data-index="valeur logique">valeurs logiques</dfn><dfn data-index="logique, valeur"/> ou <dfn data-index="valeur boolÃ©enne">valeurs boolÃ©ennes</dfn><dfn data-index="boolÃ©enne, valeur"/>, Ã  savoir <q>vrai</q> ou <q>faux</q>.</li>
</ul>
<p>Pour connaÃ®tre la nature dâ€™un objet, le plus simple est dâ€™utiliser la fonction <code data-pkg="base">class</code>. Par exempleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="fl">12.5</span>)</code></pre></div>
<pre><code>[1] "numeric"</code></pre>
<p>La rÃ©ponse <code>"numeric"</code> nous indique quâ€™il sâ€™agit dâ€™un nombre rÃ©el. Parfois, vous pourrez rencontrer le terme <code>"double"</code> qui dÃ©signe Ã©galement les nombres rÃ©els. Notez que <strong>R</strong> Ã©tant anglophone, la dÃ©cimale est indiquÃ©e avec un point (<code>.</code>) et non avec une virgule comme câ€™est lâ€™usage en franÃ§ais.</p>
<p>Essayons avec un nombre entierÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="dv">3</span>)</code></pre></div>
<pre><code>[1] "numeric"</code></pre>
<p>Sous <strong>R</strong>, lorsquâ€™on lâ€™on tape un nombre sans autre prÃ©cision, il est considÃ©rÃ© par dÃ©faut comme un nombre rÃ©el. Pour indiquer spÃ©cifiquement que lâ€™on veut un nombre entier, il faut rajouter le suffixe <code>L</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(3L)</code></pre></div>
<pre><code>[1] "integer"</code></pre>
<p>Au quotidien, il arrive rarement dâ€™avoir Ã  utiliser ce suffixe, mais il est tonjour bon de le connaÃ®tre au cas oÃ¹ vous le rencontriez dans des manuels ou des exemples de code.</p>
<p>Pour saisir une chaÃ®ne de caractÃ¨res, on aura recours aux doubles guillemets droits (<code>"</code>)Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="st">"abc"</span>)</code></pre></div>
<pre><code>[1] "character"</code></pre>
<p>Il est Ã©galement possible dâ€™utiliser des guillemets simples (<code>'</code>), dÃ¨s lors que lâ€™on utilise bien le mÃªme type de guillemets pour indiquer le dÃ©but et la fin de la chaÃ®ne de caractÃ¨res (par exemple <code>'abc'</code>).</p>
<p>Enfin, les valeurs logiques sâ€™indiquent avec <code>TRUE</code> pour vrai et <code>FALSE</code> pour faux. Il est aussi possible dâ€™utiliser les raccourcis <code>T</code> et <code>F</code>. Attention Ã  bien utiliser les majuscules, <strong>R</strong> Ã©tant sensible Ã  la casse.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] "logical"</code></pre>
<p>En rÃ©sumÃ©, les classes <strong>R</strong> des quatre types fondamentaux de vecteur sontÂ :</p>
<table>
<thead>
<tr class="header">
<th align="left">Exemple</th>
<th align="left">Classe R</th>
<th align="left">Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>5L</code></td>
<td align="left"><dfn lang="en">integer</dfn></td>
<td align="left">nombre entier</td>
</tr>
<tr class="even">
<td align="left"><code>3.14</code></td>
<td align="left"><dfn lang="en">numeric</dfn></td>
<td align="left">nombre rÃ©el</td>
</tr>
<tr class="odd">
<td align="left"><code>"abcd"</code></td>
<td align="left"><dfn lang="en">character</dfn></td>
<td align="left">chaÃ®ne de caractÃ¨res</td>
</tr>
<tr class="even">
<td align="left"><code>TRUE</code></td>
<td align="left"><dfn lang="en">logical</dfn></td>
<td align="left">boolÃ©enne</td>
</tr>
</tbody>
</table>
<p>En plus des types de base, il existe de nombreuses autres classes de vecteurs dans <strong>R</strong> que nous aborderons ultÃ©rieurement dans dâ€™autres chapitres. Les plus courantes sontÂ :</p>
<table style="width:28%;">
<colgroup>
<col width="11%"/>
<col width="16%"/>
</colgroup>
<thead>
<tr class="header">
<th align="left">Classe R</th>
<th align="left">Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">factor</td>
<td align="left"><a href="#facteurs-et-vecteurs-labellises_facteurs">facteur</a></td>
</tr>
<tr class="even">
<td align="left">labelled</td>
<td align="left"><a href="#facteurs-et-vecteurs-labellises_labelled">vecteur labellisÃ©</a></td>
</tr>
<tr class="odd">
<td align="left">Date</td>
<td align="left"><a href="#gestion-des-dates">date</a></td>
</tr>
<tr class="even">
<td align="left">POSIXct</td>
<td align="left"><a href="#gestion-des-dates">date et heure</a></td>
</tr>
</tbody>
</table>
</div>
<div id="vecteurs-indexation-et-assignation_creation" class="section level2">
<h2>CrÃ©ation</h2>
<div id="vecteurs-indexation-et-assignation_la-fonction-c" class="section level3">
<h3>La fonction c</h3>
<p>Pour crÃ©er un vecteur, on utilisera la fonction <code data-pkg="base">c</code>, la lettre <q>c</q> Ã©tant un raccourci du mot anglais <i lang="en">combine</i> puisque cette fonction permet de combiner des valeurs individuelles dans un vecteur unique. Il suffit de lui passer la liste des valeurs Ã  combinerÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">1.88</span>, <span class="fl">1.65</span>, <span class="fl">1.92</span>, <span class="fl">1.76</span>)
taille</code></pre></div>
<pre><code>[1] 1.88 1.65 1.92 1.76</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(taille)</code></pre></div>
<pre><code>[1] "numeric"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"h"</span>, <span class="st">"f"</span>, <span class="st">"h"</span>, <span class="st">"f"</span>)
sexe</code></pre></div>
<pre><code>[1] "h" "f" "h" "f"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(sexe)</code></pre></div>
<pre><code>[1] "character"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">urbain &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>)
urbain</code></pre></div>
<pre><code>[1]  TRUE  TRUE FALSE FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(urbain)</code></pre></div>
<pre><code>[1] "logical"</code></pre>
<p>Nous lâ€™avons vu, toutes les valeurs dâ€™un vecteur doivent obligatoirement du mÃªme type. DÃ¨s lors, si lâ€™on essaie de combiner des valeurs de diffÃ©rents types, <strong>R</strong> essaiera de les convertir au mieux. Par exempleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(2L, <span class="fl">3.14</span>, <span class="st">"a"</span>)
x</code></pre></div>
<pre><code>[1] "2"    "3.14" "a"   </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(x)</code></pre></div>
<pre><code>[1] "character"</code></pre>
<p>Dans le cas prÃ©sent, toutes les valeurs ont Ã©tÃ© converties en chaÃ®nes de caractÃ¨res.</p>
</div>
<div id="vecteurs-indexation-et-assignation_la-fonction-rep" class="section level3">
<h3>La fonction rep</h3>
<p>Dans certaines situations, on peut avoir besoin de crÃ©er un vecteur dâ€™une certaines longeurs mais dont toutes les valeurs sont identiques. Cela se rÃ©alise facilement avec <code data-pkg="base">rep</code> Ã  qui lâ€™on indiquera la valeur Ã  rÃ©pÃ©ter puis le nombre de rÃ©pÃ©titionsÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="dv">2</span>, <span class="dv">10</span>)</code></pre></div>
<pre><code> [1] 2 2 2 2 2 2 2 2 2 2</code></pre>
<p>On peut aussi lui indiquer plusieurs valeurs qui seront alors rÃ©pÃ©tÃ©es en boucleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>), <span class="dv">3</span>)</code></pre></div>
<pre><code>[1] "a" "b" "a" "b" "a" "b"</code></pre>
</div>
<div id="vecteurs-indexation-et-assignation_la-fonction-seq" class="section level3">
<h3>La fonction seq</h3>
<p>Dans dâ€™autres situations, on peut avoir besoin de crÃ©er un vecteur contenant une suite de valeurs, ce qui se rÃ©alise aisÃ©ment avec <code>seq</code>{data-pkg} Ã  qui lâ€™on prÃ©cisera les arguments <code>from</code> (point de dÃ©part), <code>to</code> (point dâ€™arrivÃ©e) et <code>by</code> (pas). Quelques exemples valent mieux quâ€™un long discoursÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>)</code></pre></div>
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dv">5</span>, <span class="dv">17</span>, <span class="dt">by =</span> <span class="dv">2</span>)</code></pre></div>
<pre><code>[1]  5  7  9 11 13 15 17</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dv">10</span>, <span class="dv">0</span>)</code></pre></div>
<pre><code> [1] 10  9  8  7  6  5  4  3  2  1  0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dv">100</span>, <span class="dv">10</span>, <span class="dt">by =</span> -<span class="dv">10</span>)</code></pre></div>
<pre><code> [1] 100  90  80  70  60  50  40  30  20  10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="fl">1.23</span>, <span class="fl">5.67</span>, <span class="dt">by =</span> <span class="fl">0.33</span>)</code></pre></div>
<pre><code> [1] 1.23 1.56 1.89 2.22 2.55 2.88 3.21 3.54 3.87
[10] 4.20 4.53 4.86 5.19 5.52</code></pre>
</div>
<div id="vecteurs-indexation-et-assignation_loperateur" class="section level3">
<h3>Lâ€™opÃ©rateur :</h3>
<p>Lâ€™opÃ©rateur <code>:</code> est un raccourci de la fonction <code>seq</code> pour crÃ©er une suite de nombres entiers. Il sâ€™utilise ainsiÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span>:<span class="dv">5</span></code></pre></div>
<pre><code>[1] 1 2 3 4 5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">24</span>:<span class="dv">32</span></code></pre></div>
<pre><code>[1] 24 25 26 27 28 29 30 31 32</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">55</span>:<span class="dv">43</span></code></pre></div>
<pre><code> [1] 55 54 53 52 51 50 49 48 47 46 45 44 43</code></pre>
<p>Nous verrons un peu plus loin que ce raccourci est fort pratique.</p>
</div>
</div>
<div id="vecteurs-indexation-et-assignation_longueur-dun-vecteur" class="section level2">
<h2>Longueur dâ€™un vecteur</h2>
<p>Un vecteur dispose donc dâ€™une <dfn data-index="longueur, vecteur">longueur</dfn> qui correspond aux nombres de valeurs qui le compose. Elle sâ€™obtient avec <code data-pkg="base">length</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(taille)</code></pre></div>
<pre><code>[1] 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(<span class="kw">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>))</code></pre></div>
<pre><code>[1] 2</code></pre>
<p>Il est possible de faire un vecteur de longeur nulle avec <code>c()</code>. Bien Ã©videmment sa longueur est zÃ©ro.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(<span class="kw">c</span>())</code></pre></div>
<pre><code>[1] 0</code></pre>
</div>
<div id="vecteurs-indexation-et-assignation_quelques-vecteurs-remarquables" class="section level2">
<h2>Quelques vecteurs remarquables</h2>
<p><strong>R</strong> fournit quelques vecteurs particuliers qui sont directement accessiblesÂ :</p>
<ul>
<li><code data-pkg="base" data-rdoc="Constants">LETTERS</code>Â : les 26 lettres de lâ€™alphabet en majuscules</li>
<li><code data-pkg="base" data-rdoc="Constants">letters</code>Â : les 26 lettres de lâ€™alphabet en minuscules</li>
<li><code data-pkg="base" data-rdoc="Constants">month.name</code>Â : les noms des 12 mois de lâ€™annÃ©e en anglais</li>
<li><code data-pkg="base" data-rdoc="Constants">month.abb</code>Â : la version abrÃ©gÃ©e des 12 mois en anglais</li>
<li><code data-pkg="base" data-rdoc="Constants">pi</code>Â : la constante mathÃ©matique Ï€</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">LETTERS</code></pre></div>
<pre><code> [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K"
[12] "L" "M" "N" "O" "P" "Q" "R" "S" "T" "U" "V"
[23] "W" "X" "Y" "Z"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">letters</code></pre></div>
<pre><code> [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k"
[12] "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v"
[23] "w" "x" "y" "z"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(letters)</code></pre></div>
<pre><code>[1] 26</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">month.name</code></pre></div>
<pre><code> [1] "January"   "February"  "March"    
 [4] "April"     "May"       "June"     
 [7] "July"      "August"    "September"
[10] "October"   "November"  "December" </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">month.abb</code></pre></div>
<pre><code> [1] "Jan" "Feb" "Mar" "Apr" "May" "Jun" "Jul"
 [8] "Aug" "Sep" "Oct" "Nov" "Dec"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(month.abb)</code></pre></div>
<pre><code>[1] 12</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pi</code></pre></div>
<pre><code>[1] 3.141593</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(pi)</code></pre></div>
<pre><code>[1] 1</code></pre>
</div>
<div id="vecteurs-indexation-et-assignation_combiner-des-vecteurs" class="section level2">
<h2>Combiner des vecteurs</h2>
<p>Pour combiner des vecteurs, rien de plus simple. Il suffit dâ€™utiliser <code data-pkd="base">c</code>Â ! Les valeurs des diffÃ©rents vecteurs seront mises bout Ã  bout pour crÃ©er un unique vecteur.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>)
<span class="kw">length</span>(x)</code></pre></div>
<pre><code>[1] 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">9</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">6</span>, <span class="dv">3</span>, <span class="dv">0</span>)
<span class="kw">length</span>(y)</code></pre></div>
<pre><code>[1] 6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z &lt;-<span class="st"> </span><span class="kw">c</span>(x, y)
z</code></pre></div>
<pre><code> [1] 2 1 3 4 9 1 2 6 3 0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(z)</code></pre></div>
<pre><code>[1] 10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">min_maj &lt;-<span class="st"> </span><span class="kw">c</span>(letters, LETTERS)
min_maj</code></pre></div>
<pre><code> [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k"
[12] "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v"
[23] "w" "x" "y" "z" "A" "B" "C" "D" "E" "F" "G"
[34] "H" "I" "J" "K" "L" "M" "N" "O" "P" "Q" "R"
[45] "S" "T" "U" "V" "W" "X" "Y" "Z"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(min_maj)</code></pre></div>
<pre><code>[1] 52</code></pre>
</div>
<div id="vecteurs-indexation-et-assignation_valeurs-manquantes" class="section level2">
<h2>Valeurs manquantes</h2>
<p>Lorsque lâ€™on travaille avec des donnÃ©es dâ€™enquÃªtes, il est frÃ©quent que certaines donnÃ©es soient manquantes, en raison dâ€™un refus du participant de rÃ©pondre Ã  une question donnÃ©e ou dâ€™un oubli ou dâ€™un dystonctionnement du matÃ©riel de mesure, etc.</p>
<p>Une <dfn>valeur manquante</dfn><dfn data-index="manquante, valeur"> sâ€™indique sous <strong>R</strong> avec <code>NA</code> (pour <em>not available</em>). Cette valeur peut sâ€™appliquer Ã  nâ€™importe quel type de vecteur, quâ€™il soit numÃ©rique, textuel ou logique.</dfn></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">1.88</span>, <span class="ot">NA</span>, <span class="fl">1.65</span>, <span class="fl">1.92</span>, <span class="fl">1.76</span>, <span class="ot">NA</span>)
sexe &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"h"</span>, <span class="st">"f"</span>, <span class="ot">NA</span>, <span class="st">"h"</span>, <span class="ot">NA</span>, <span class="st">"f"</span>)</code></pre></div>
<p>Les valeurs manquantes sont prises en compte dans le calcul de la longeur du vecteur.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(taille)</code></pre></div>
<pre><code>[1] 6</code></pre>
<p>Il ne faut pas confondre <code data-pkg="base">NA</code> avec un autre objet que lâ€™on rencontre sous <strong>R</strong> et appelÃ© <code data-pkg="base">NULL</code> qui reprÃ©sente lâ€™<q>objet vide</q>. <code>NULL</code> ne contient absolument rien du tout. La diffÃ©rence ce comprends mieux lorsque que lâ€™on essaie de combiner ces objetsÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="ot">NULL</span>, <span class="ot">NULL</span>, <span class="ot">NULL</span>)</code></pre></div>
<pre><code>NULL</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(<span class="kw">c</span>(<span class="ot">NULL</span>, <span class="ot">NULL</span>, <span class="ot">NULL</span>))</code></pre></div>
<pre><code>[1] 0</code></pre>
<p>On peut combiner <code>NULL</code> avec <code>NULL</code>, du vide plus du vide renverra toujours du vide dont la dimension est Ã©gale Ã  zÃ©ro.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>)</code></pre></div>
<pre><code>[1] NA NA NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(<span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>))</code></pre></div>
<pre><code>[1] 3</code></pre>
<p>Par contre, un vecteur composÃ© de trois valeurs manquantes a une longueur de 3, mÃªme si toutes ses valeurs sont manquantes.</p>
</div>
<div id="vecteurs-indexation-et-assignation_indexation-par-position" class="section level2">
<h2>Indexation par position</h2>
<p>Lâ€™<dfn>indexation</dfn> est lâ€™une des fonctionnalitÃ©s les plus puissantes mais aussi les plus difficiles Ã  maÃ®triser de<strong>R</strong>. Il sâ€™agit dâ€™opÃ©rations permettant de sÃ©lectionner des sous-ensembles de valeurs en fonction de diffÃ©rents critÃ¨res. Il existe trois types dâ€™indexationÂ : (i) lâ€™indexation par position, (ii) lâ€™indexation par nom et (iii) lâ€™indexation par condition. Le principe est toujours le mÃªmeÂ : on indique entre crochets (<code>[]</code>) ce que lâ€™on souhaite garder ou non.</p>
<p>Pour rappel, les crochets sâ€™obtiennent sur un clavier franÃ§ais de type PC en appuyant sur la touche <kbd>AltÂ Gr</kbd> et la touche <kbd>(</kbd> ou <kbd>)</kbd>.</p>
<p>CommenÃ§ons par lâ€™<dfn>indexation par position</dfn><dfn data-index="position, indexation"/> encore appelÃ©e <dfn>indexation directe</dfn>. Ce mode le plus simple dâ€™indexation consiste Ã  indiquer la position des Ã©lÃ©ments Ã  conserver.</p>
<p>Reprenons notre vecteur <code>taille</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille</code></pre></div>
<pre><code>[1] 1.88   NA 1.65 1.92 1.76   NA</code></pre>
<p>Si on souhaite le premier Ã©lÃ©ment du vecteur, on peut faireÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille[<span class="dv">1</span>]</code></pre></div>
<pre><code>[1] 1.88</code></pre>
<p>Si on souhaite les trois premiers Ã©lÃ©ments ou les Ã©lÃ©ments 2, 5 et 6Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille[<span class="dv">1</span>:<span class="dv">3</span>]</code></pre></div>
<pre><code>[1] 1.88   NA 1.65</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille[<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>)]</code></pre></div>
<pre><code>[1]   NA 1.76   NA</code></pre>
<p>Si on veut le dernier Ã©lÃ©mentÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille[<span class="kw">length</span>(taille)]</code></pre></div>
<pre><code>[1] NA</code></pre>
<p>Il est tout Ã  fait possible de sÃ©lectionner les valeurs dans le dÃ©sordreÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille[<span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>)]</code></pre></div>
<pre><code>[1] 1.76 1.88 1.92 1.65</code></pre>
<p>Dans le cadre de lâ€™indexation par position, il est Ã©galement possible de spÃ©cfier des nombres nÃ©gatifs. Auquel cas, cela signifiera <q>toutes les valeurs sauf celles-lÃ </q>. Par exempleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille[<span class="kw">c</span>(-<span class="dv">1</span>, -<span class="dv">5</span>)]</code></pre></div>
<pre><code>[1]   NA 1.65 1.92   NA</code></pre>
<p>Ã€ noter, si lâ€™on indique une position au-delÃ  de la longueur du vecteur, <strong>R</strong> renverra <code>NA</code>. Par exempleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille[<span class="dv">23</span>:<span class="dv">25</span>]</code></pre></div>
<pre><code>[1] NA NA NA</code></pre>
</div>
<div id="vecteurs-indexation-et-assignation_des-vecteurs-nommes" class="section level2">
<h2>Des vecteurs nommÃ©s</h2>
<p>Les diffÃ©rentes valeurs dâ€™un vecteur peuvent Ãªtre nommÃ©s. Une premiÃ¨re maniÃ¨re de nommer les Ã©lÃ©ments dâ€™un vecteur est de le faire Ã  sa crÃ©ationÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">Michel =</span> <span class="st">"h"</span>, <span class="dt">Anne =</span> <span class="st">"f"</span>, <span class="dt">Dominique =</span> <span class="ot">NA</span>, 
  <span class="dt">Jean =</span> <span class="st">"h"</span>, <span class="dt">Claude =</span> <span class="ot">NA</span>, <span class="dt">Marie =</span> <span class="st">"f"</span>)</code></pre></div>
<p>Lorsque lâ€™on affiche le vecteur, la prÃ©sentation change quelque peu.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe</code></pre></div>
<pre><code>   Michel      Anne Dominique      Jean    Claude 
      "h"       "f"        NA       "h"        NA 
    Marie 
      "f" </code></pre>
<p>La liste des noms sâ€™obient avec <code data-pkg="base">names</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(sexe)</code></pre></div>
<pre><code>[1] "Michel"    "Anne"      "Dominique"
[4] "Jean"      "Claude"    "Marie"    </code></pre>
<p>Pour ajouter ou modifier les noms dâ€™un vecteur, on doit attribuer un nouveau vecteur de nomsÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(sexe) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Michael"</span>, <span class="st">"Anna"</span>, <span class="st">"Dom"</span>, <span class="st">"John"</span>, 
  <span class="st">"Alex"</span>, <span class="st">"Mary"</span>)
sexe</code></pre></div>
<pre><code>Michael    Anna     Dom    John    Alex    Mary 
    "h"     "f"      NA     "h"      NA     "f" </code></pre>
<p>Pour supprimer tout les noms, il y a la fonction <code data-pkg="base">unname</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">anonyme &lt;-<span class="st"> </span><span class="kw">unname</span>(sexe)
anonyme</code></pre></div>
<pre><code>[1] "h" "f" NA  "h" NA  "f"</code></pre>
</div>
<div id="vecteurs-indexation-et-assignation_indexation-par-nom" class="section level2">
<h2>Indexation par nom</h2>
<p>Lorsquâ€™un vecteur est nommÃ©, il est dÃ¨s lors possible dâ€™accÃ©der Ã  ses valeurs Ã  partir de leur nom. Il sâ€™agit de lâ€™<dfn>indexation par nom</dfn><dfn data-index="nom, indexation"/>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe[<span class="st">"Anna"</span>]</code></pre></div>
<pre><code>Anna 
 "f" </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe[<span class="kw">c</span>(<span class="st">"Mary"</span>, <span class="st">"Michael"</span>, <span class="st">"John"</span>)]</code></pre></div>
<pre><code>   Mary Michael    John 
    "f"     "h"     "h" </code></pre>
<p>Par contre il nâ€™est pas possible dâ€™utiliser lâ€™opÃ©rateur <code>-</code> comme pour lâ€™indexation directe. Pour exclure un Ã©lÃ©ment en fonction de son nom, on doit utiliser une autre forme dâ€™indexation, lâ€™indexation par condition, expliquÃ©e dans la section suivante. On peut ainsi faireâ€¦</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe[<span class="kw">names</span>(sexe) !=<span class="st"> "Dom"</span>]</code></pre></div>
<p>â€¦ pour sÃ©lectionner tous les Ã©lÃ©ments sauf celui qui sâ€™appelle <q>Dom</q>.</p>
</div>
<div id="vecteurs-indexation-et-assignation_indexation-par-condition" class="section level2">
<h2>Indexation par condition</h2>
<p>Lâ€™<dfn>indexation par condition<dfn><dfn data-index="condition, indexation"> consiste Ã  fournir un vecteur logique indiquant si chaque Ã©lÃ©ment doit Ãªtre inclu (si <code>TRUE</code>) ou exclu (si <code>FALSE</code>). Par exempleÂ :</dfn></dfn></dfn></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe</code></pre></div>
<pre><code>Michael    Anna     Dom    John    Alex    Mary 
    "h"     "f"      NA     "h"      NA     "f" </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe[<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>)]</code></pre></div>
<pre><code>Michael    John 
    "h"     "h" </code></pre>
<p>Ã‰crire manuellement une telle condition nâ€™est pas trÃ¨s pratique Ã  lâ€™usage. Mais supposons que nous ayons Ã©galement Ã  notre disposition les deux vecteurs suivants, Ã©galement de longueur 6.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">urbain &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>)
poids &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">80</span>, <span class="dv">63</span>, <span class="dv">75</span>, <span class="dv">87</span>, <span class="dv">82</span>, <span class="dv">67</span>)</code></pre></div>
<p>Le vecteur <code>urbain</code> est un vecteur logique. On peut directement lâ€™utiliser pour avoir le sexe des enquÃªtÃ©s habitant en milieu urbainÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe[urbain]</code></pre></div>
<pre><code>Michael    Alex    Mary 
    "h"      NA     "f" </code></pre>
<p>Supposons que lâ€™on souhaite maintenant avoir la taille des individus pesant 80 kilogrammes ou plus. Nous pouvons effectuer une comparaison Ã  lâ€™aide des <dfn data-index="opÃ©rateur de comparaison">opÃ©rateurs de comparaison</dfn><dfn data-index="comparaison, opÃ©rateur"> suivantsÂ :</dfn></p>
<table>
<thead>
<tr class="header">
<th align="left">OpÃ©rateur de comparaison</th>
<th align="left">Signification</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>==</code></td>
<td align="left">Ã©gal Ã </td>
</tr>
<tr class="even">
<td align="left"><code>!=</code></td>
<td align="left">diffÃ©rent de</td>
</tr>
<tr class="odd">
<td align="left"><code>&gt;</code></td>
<td align="left">strictement supÃ©rieur Ã </td>
</tr>
<tr class="even">
<td align="left"><code>&lt;</code></td>
<td align="left">strictement infÃ©rieur Ã </td>
</tr>
<tr class="odd">
<td align="left"><code>&gt;=</code></td>
<td align="left">supÃ©rieur ou Ã©gal Ã </td>
</tr>
<tr class="even">
<td align="left"><code>&lt;=</code></td>
<td align="left">infÃ©rieur ou Ã©gal Ã </td>
</tr>
</tbody>
</table>
<p>Voyons tout de suite un exempleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">poids &gt;=<span class="st"> </span><span class="dv">80</span></code></pre></div>
<pre><code>[1]  TRUE FALSE FALSE  TRUE  TRUE FALSE</code></pre>
<p>Que sâ€™est-il passÃ©Â ? Nous avons fourni Ã  <strong>R</strong> une condition et il nous a renvoyÃ© un vecteur logique avec autant dâ€™Ã©lÃ©ments quâ€™il yâ€™a dâ€™observations et dont la valeur est <code>TRUE</code> si la condition est remplie et <code>FALSE</code> dans les autres cas. Nous pouvons alors utiliser ce vecteur logique pour obtenir la taille des participants pesant 80 kilogrammes ou plusÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille[poids &gt;=<span class="st"> </span><span class="dv">80</span>]</code></pre></div>
<pre><code>[1] 1.88 1.92 1.76</code></pre>
<p>On peut combiner ou modifier des conditions Ã  lâ€™aide des <dfn data-index="opÃ©rateur logique">opÃ©rateurs logiques</dfn><dfn data-index="logique, opÃ©rateur"/> habituelsÂ :</p>
<table>
<thead>
<tr class="header">
<th align="left">OpÃ©rateur logique</th>
<th align="left">Signification</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>&amp;</code></td>
<td align="left">et logique</td>
</tr>
<tr class="even">
<td align="left"><code>|</code></td>
<td align="left">ou logique</td>
</tr>
<tr class="odd">
<td align="left"><code>!</code></td>
<td align="left">nÃ©gation logique</td>
</tr>
</tbody>
</table>
<p>Comment les utilise-t-onÂ ? Voyons tout de suite un exemple. Supposons que je veuille identifier les personnes pesant 80 kilogrammes ou plus <strong>et</strong> vivant en milieu urbainÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">poids &gt;=<span class="st"> </span><span class="dv">80</span> &amp;<span class="st"> </span>urbain</code></pre></div>
<p>Les rÃ©sultats sont trÃ¨s diffÃ©rents si je souhaite isoler les personnes pesant 80 kilogrammes ou plus <em>ou</em> vivant milieu urbainÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">poids &gt;=<span class="st"> </span><span class="dv">80</span> &amp;<span class="st"> </span>urbain</code></pre></div>
<p>Une remarque importanteÂ : quand lâ€™un des termes dâ€™une condition comporte une <dfn>valeur manquante</dfn><dfn data-index="manquante, valeur"/> (<code>NA</code>), le rÃ©sultat de cette condition nâ€™est pas toujours <code>TRUE</code> ou <code>FALSE</code>, il peut aussi Ãªtre Ã  son tour une valeur manquante.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille</code></pre></div>
<pre><code>[1] 1.88   NA 1.65 1.92 1.76   NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille &gt;<span class="st"> </span><span class="fl">1.8</span></code></pre></div>
<pre><code>[1]  TRUE    NA FALSE  TRUE FALSE    NA</code></pre>
<p>On voit que le test <code>NA &gt; 1.8</code> ne renvoie ni vrai ni faux, mais <code>NA</code>.</p>
<p>Une autre consÃ©quence importante de ce comportement est quâ€™on ne peut pas utiliser lâ€™opÃ©rateur lâ€™expression <code>== NA</code> pour tester la prÃ©sence de valeurs manquantes. On utilisera Ã  la place la fonction <em>ad hoc</em> <code data-pkg="base" data-rdoc="NA">is.na</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.na</span>(taille &gt;<span class="st"> </span><span class="fl">1.8</span>)</code></pre></div>
<pre><code>[1] FALSE  TRUE FALSE FALSE FALSE  TRUE</code></pre>
<p>Pour compliquer encore un peu le tout, lorsquâ€™on utilise une condition pour lâ€™indexation, si la condition renvoie <code>NA</code>, <strong>R</strong> ne sÃ©lectionne pas lâ€™Ã©lÃ©ment mais retourne quand mÃªme la valeur <code>NA</code>. Ceci a donc des consÃ©quences sur le rÃ©sultat dâ€™une indexation par comparaison.</p>
<p>Par exemple si je cherche Ã  connaÃ®tre le poids des personnes mesurant 1,80 mÃ¨tre ou plusÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille</code></pre></div>
<pre><code>[1] 1.88   NA 1.65 1.92 1.76   NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">poids</code></pre></div>
<pre><code>[1] 80 63 75 87 82 67</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">poids[taille &gt;<span class="st"> </span><span class="fl">1.8</span>]</code></pre></div>
<pre><code>[1] 80 NA 87 NA</code></pre>
<p>Les Ã©lÃ©ments pour lesquels la taille nâ€™est pas connue ont Ã©tÃ© transformÃ©s en <code>NA</code>, ce qui nâ€™influera pas le calcul dâ€™une moyenne. Par contre, lorsquâ€™on utilisera assignation et indexation ensemble, cela peut crÃ©er des problÃ¨mes. Il est donc prÃ©fÃ©rable lorsque lâ€™on a des valeurs manquantes de les exclure ainsiÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">poids[taille &gt;<span class="st"> </span><span class="fl">1.8</span> &amp;<span class="st"> </span>!<span class="kw">is.na</span>(taille)]</code></pre></div>
<pre><code>[1] 80 87</code></pre>
<p>Pour plus de dÃ©tails sur les conditions et le calcul logique dans <strong>R</strong>, on pourra se rÃ©fÃ©rer au <a href="conditions-et-comparaisons.html">chapitre dÃ©diÃ©</a>.</p>
</div>
<div id="vecteurs-indexation-et-assignation_assignation-par-indexation" class="section level2">
<h2>Assignation par indexation</h2>
<p>Dans tous les exemples prÃ©cÃ©dents, on a utilisÃ© lâ€™indexation pour extraire une partie dâ€™un vecteur, en plaÃ§ant lâ€™opÃ©ration dâ€™indexation Ã  droite de lâ€™opÃ©rateur <code>&lt;-</code>.</p>
<p>Mais lâ€™indexation peut Ã©galement Ãªtre placÃ©e Ã  gauche de cet opÃ©rateur dâ€™<dfn>assignation</dfn>. Dans ce cas, les Ã©lÃ©ments sÃ©lectionnÃ©s par lâ€™indexation sont alors remplacÃ©s par les valeurs indiquÃ©es Ã  droite de lâ€™opÃ©rateur <code>&lt;-</code>.</p>
<p>Prenons donc un exemple simpleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="dv">1</span>:<span class="dv">5</span>
v</code></pre></div>
<pre><code>[1] 1 2 3 4 5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="dv">3</span>
v</code></pre></div>
<pre><code>[1] 3 2 3 4 5</code></pre>
<p>Cette fois, au lieu dâ€™utiliser quelque chose comme <code>x &lt;- v[1]</code>, qui aurait placÃ© la valeur du premier Ã©lÃ©ment de <code>v</code> dans <code>x</code>, on a utilisÃ© <code>v[1] &lt;- 3</code>, ce qui a mis Ã  jour le premier Ã©lÃ©ment de <code>v</code> avec la valeur 3. Ceci fonctionne Ã©galement pour les tableaux de donnÃ©es et pour les diffÃ©rents types dâ€™indexation Ã©voquÃ©s prÃ©cÃ©demmentÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe[<span class="st">"Alex"</span>] &lt;-<span class="st"> "f"</span></code></pre></div>
<p>Enfin on peut modifier plusieurs Ã©lÃ©ments dâ€™un seul coup soit en fournissant un vecteur, soit en profitant du mÃ©canisme de <dfn>recyclage</dfn>. Les deux commandes suivantes sont ainsi rigoureusement Ã©quivalentesÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>)] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Homme"</span>, <span class="st">"Homme"</span>, <span class="st">"Homme"</span>)
sexe[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>)] &lt;-<span class="st"> "Homme"</span></code></pre></div>
<p>Lâ€™assignation par indexation peut aussi Ãªtre utilisÃ©e pour ajouter une ou plusieurs valeurs Ã  un vecteurÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(sexe)</code></pre></div>
<pre><code>[1] 6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe[<span class="dv">7</span>] &lt;-<span class="st"> "f"</span>
sexe</code></pre></div>
<pre><code>Michael    Anna     Dom    John    Alex    Mary 
"Homme"     "f" "Homme" "Homme"     "f"     "f" 
        
    "f" </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(sexe)</code></pre></div>
<pre><code>[1] 7</code></pre>
<p>On commence Ã  voir comment lâ€™utilisation de lâ€™indexation par conditions et de lâ€™assignation va nous permettre de faire des recodages (que nous aborderons plus en dÃ©tail dans un <a href="#recodage">chapitre dÃ©diÃ©</a>).</p>
</div>
<div id="vecteurs-indexation-et-assignation_en-resume" class="section level2">
<h2>En rÃ©sumÃ©</h2>
<ul>
<li>Un vecteur est un objet unidimensionnel contenant une liste de valeurs qui sont toutes du mÃªme type (entiÃ¨res, numÃ©riques, textuelles ou logiques).</li>
<li>La fonction <code data-pkg="base">class</code> permets de connaÃ®tre le type de vecteur et la fonction <code data-pkg="base">length</code> sa longueur, câ€™est-Ã -dire le nombre dâ€™Ã©lÃ©ments du vecteur.</li>
<li>La fonction <code data-pkg="base">c</code> sert Ã  crÃ©er et Ã  combiner des vecteurs.</li>
<li>Les valeurs manquantes sont reprÃ©sentÃ©es avec <code>NA</code>. Un vecteur peut Ãªtre nommÃ©, câ€™est-Ã -dire quâ€™un nom textuel a Ã©tÃ© associÃ© Ã  chaque Ã©lÃ©ment. Cela peut se faire lors da sa crÃ©ation ou avec la fonction <code data-pkg="base">names</code>.</li>
<li>Lâ€™indexation consiste Ã  extraire certains Ã©lÃ©ments dâ€™un vecteur. Pour cela, on indique ce que lâ€™on souhaite extraire entre crochets (<code>[]</code>) juste aprÃ¨s le nom du vecteur. Le type dâ€™indexation dÃ©pend du type dâ€™information transmise.</li>
<li>Sâ€™il sâ€™agit de nombres entiers, câ€™est lâ€™indexation par positionÂ : les nombres reprÃ©sent la position dans le vecteur des Ã©lÃ©ments que lâ€™on souhaite extraire. Un nombre nÃ©gatif sâ€™interprÃ¨te comme <q>tous les Ã©lÃ©ments sauf celui-lÃ </q>.</li>
<li>Si lâ€™on indique des chaÃ®nes de caractÃ¨res, câ€™est lâ€™indexation par nomÂ : on indique le nom des Ã©lÃ©ments que lâ€™on souhaite extraire. Cette forme dâ€™indexation ne fonctionne que si le vecteur est nommÃ©.</li>
<li>Si lâ€™on transmets des valeurs logiques, le plus souvent sous la forme dâ€™une condition, câ€™est lâ€™indexation par conditionÂ : <code>TRUE</code> indique les Ã©lÃ©ments Ã  extraire et <code>FALSE</code> les Ã©lÃ©ments Ã  exclure. Il faut Ãªtre vigilant aux valeurs manquantes (<code>NA</code>) dans ce cas prÃ©cis.</li>
<li>Enfin, il est possible de modifier que certains Ã©lÃ©ments dâ€™un vecteur en ayant recours Ã  la fois Ã  lâ€™indexation (<code>[]</code>) et Ã  lâ€™assignation (<code>&lt;-</code>).</li>
</ul>
</div>

</article>
<article id="listes-et-tableaux-de-donnes">

<div class="fluid-row" id="listes-et-tableaux-de-donnes_header">


<h1 class="title">Listes et Tableaux de donnÃ©es</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#listes-et-tableaux-de-donnes_listes">Listes</a><ul>
<li><a href="#listes-et-tableaux-de-donnes_proprietes-et-creation">PropriÃ©tÃ©s et crÃ©ation</a></li>
<li><a href="#listes-et-tableaux-de-donnes_indexation">Indexation</a></li>
</ul></li>
<li><a href="#listes-et-tableaux-de-donnes_tableaux-de-donnees">Tableaux de donnÃ©es</a><ul>
<li><a href="#listes-et-tableaux-de-donnes_proprietes-et-creation-1">PropriÃ©tÃ©s et crÃ©ation</a></li>
<li><a href="#listes-et-tableaux-de-donnes_indexation-1">Indexation</a></li>
<li><a href="#listes-et-tableaux-de-donnes_afficher-les-donnees">Afficher les donnÃ©es</a></li>
</ul></li>
<li><a href="#listes-et-tableaux-de-donnes_en-resume">En rÃ©sumÃ©</a></li>
</ul>
</div>

<div class="note">
<p>Il est prÃ©fÃ©rable dâ€™avoir dÃ©jÃ  lu le chapitre <a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a> avant dâ€™aborder celui-ci.</p>
</div>
<div id="listes-et-tableaux-de-donnes_listes" class="section level2">
<h2>Listes</h2>
<p>Par nature, les vecteurs ne peuvent contenir que des valeurs de mÃªme type (numÃ©riques, textuels ou logique). Or, on peut avoir besoin de reprÃ©senter des objets plus complexes composÃ©s dâ€™Ã©lÃ©ments disparates. Câ€™est ce que permettent les <dfn data-index="liste">listes</dfn>.</p>
<div id="listes-et-tableaux-de-donnes_proprietes-et-creation" class="section level3">
<h3>PropriÃ©tÃ©s et crÃ©ation</h3>
<p>Une liste se crÃ©Ã©e tout simplement avec la fonction <code data-pkg="base">list</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l1 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>:<span class="dv">5</span>, <span class="st">"abc"</span>)
l1</code></pre></div>
<pre><code>[[1]]
[1] 1 2 3 4 5

[[2]]
[1] "abc"</code></pre>
<p>Une liste est un ensemble dâ€™objets, quels quâ€™ils soient, chaque Ã©lÃ©ment dâ€™une liste pouvant avoir ses propres dimensions. Dans notre exemple prÃ©cÃ©dent, nous avons crÃ©Ã©e une liste <code>l1</code> composÃ©e de deux Ã©lementsÂ : un vecteur dâ€™entiers de longeur 5 et un vecteur textuel de longueur 1. La longueur dâ€™une liste correspond aux nombres dâ€™Ã©lÃ©ments quâ€™elle contient et sâ€™obtient avec <code data-pkg="base">length</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(l1)</code></pre></div>
<pre><code>[1] 2</code></pre>
<p>Comme les vecteurs, une liste peut Ãªtre nommÃ©es et les noms des Ã©lÃ©ments dâ€™une liste accessibles avec <code data-pkg="base">names</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l2 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">minuscules =</span> letters, <span class="dt">majuscules =</span> LETTERS, 
  <span class="dt">mois =</span> month.name)
l2</code></pre></div>
<pre><code>$minuscules
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k"
[12] "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v"
[23] "w" "x" "y" "z"

$majuscules
 [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K"
[12] "L" "M" "N" "O" "P" "Q" "R" "S" "T" "U" "V"
[23] "W" "X" "Y" "Z"

$mois
 [1] "January"   "February"  "March"    
 [4] "April"     "May"       "June"     
 [7] "July"      "August"    "September"
[10] "October"   "November"  "December" </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(l2)</code></pre></div>
<pre><code>[1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(l2)</code></pre></div>
<pre><code>[1] "minuscules" "majuscules" "mois"      </code></pre>
<p>Que se passe-t-il maintenant si lâ€™on effectue la commande suivanteÂ ?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l &lt;-<span class="st"> </span><span class="kw">list</span>(l1, l2)</code></pre></div>
<p>Ã€ votre avis, quelle est la longueur de cette nouvelle liste <code>l</code>Â ? 5Â ?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(l)</code></pre></div>
<pre><code>[1] 2</code></pre>
<p>Et bien nonÂ ! Elle est de longeur 2, car nous avons crÃ©Ã© une liste composÃ©e de deux Ã©lÃ©ments qui sont eux-mÃªmes des listes. Cela est plus lisible si lâ€™on fait appel Ã  la fonction <code data-pkg="utils">str</code> qui permet de visualiser la structure dâ€™un objet.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(l)</code></pre></div>
<pre><code>List of 2
 $ :List of 2
  ..$ : int [1:5] 1 2 3 4 5
  ..$ : chr "abc"
 $ :List of 3
  ..$ minuscules: chr [1:26] "a" "b" "c" "d" ...
  ..$ majuscules: chr [1:26] "A" "B" "C" "D" ...
  ..$ mois      : chr [1:12] "January" "February" "March" "April" ...</code></pre>
<p>Une liste peut contenir tout type dâ€™objets, y compris dâ€™autres listes. Pour combiner les Ã©lÃ©ments dâ€™une liste, il fait utiliser la fonction <code data-pkg="base">append</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l &lt;-<span class="st"> </span><span class="kw">append</span>(l1, l2)
<span class="kw">length</span>(l)</code></pre></div>
<pre><code>[1] 5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(l)</code></pre></div>
<pre><code>List of 5
 $           : int [1:5] 1 2 3 4 5
 $           : chr "abc"
 $ minuscules: chr [1:26] "a" "b" "c" "d" ...
 $ majuscules: chr [1:26] "A" "B" "C" "D" ...
 $ mois      : chr [1:12] "January" "February" "March" "April" ...</code></pre>
<p>On peut noter en passant quâ€™une liste peut tout Ã  fait nâ€™Ãªtre que partiellement nommÃ©e.</p>
</div>
<div id="listes-et-tableaux-de-donnes_indexation" class="section level3">
<h3>Indexation</h3>
<p>Les crochets simples (<code>[]</code>) fonctionnent comme pour les vecteurs. On peut utiliser Ã  la fois lâ€™<dfn>indexation par position<dfn><dfn data-index="position, indexation"/>, lâ€™<dfn>indexation par nom</dfn><dfn data-index="nom, indexation"/> et lâ€™<dfn>indexation par condition</dfn><dfn data-index="condition, indexation"/>.</dfn></dfn></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l</code></pre></div>
<pre><code>[[1]]
[1] 1 2 3 4 5

[[2]]
[1] "abc"

$minuscules
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k"
[12] "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v"
[23] "w" "x" "y" "z"

$majuscules
 [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K"
[12] "L" "M" "N" "O" "P" "Q" "R" "S" "T" "U" "V"
[23] "W" "X" "Y" "Z"

$mois
 [1] "January"   "February"  "March"    
 [4] "April"     "May"       "June"     
 [7] "July"      "August"    "September"
[10] "October"   "November"  "December" </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>)]</code></pre></div>
<pre><code>[[1]]
[1] 1 2 3 4 5

$minuscules
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k"
[12] "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v"
[23] "w" "x" "y" "z"

$majuscules
 [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K"
[12] "L" "M" "N" "O" "P" "Q" "R" "S" "T" "U" "V"
[23] "W" "X" "Y" "Z"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l[<span class="kw">c</span>(<span class="st">"majuscules"</span>, <span class="st">"minuscules"</span>)]</code></pre></div>
<pre><code>$majuscules
 [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K"
[12] "L" "M" "N" "O" "P" "Q" "R" "S" "T" "U" "V"
[23] "W" "X" "Y" "Z"

$minuscules
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k"
[12] "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v"
[23] "w" "x" "y" "z"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l[<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>)]</code></pre></div>
<pre><code>[[1]]
[1] 1 2 3 4 5

[[2]]
[1] "abc"

$mois
 [1] "January"   "February"  "March"    
 [4] "April"     "May"       "June"     
 [7] "July"      "August"    "September"
[10] "October"   "November"  "December" </code></pre>
<p>MÃªme si lâ€™on extrait un seul Ã©lÃ©ment, lâ€™extraction obtenue avec les crochets simples renvoie toujours une liste, ici composÃ©e dâ€™un seul Ã©lÃ©mentÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(l[<span class="dv">1</span>])</code></pre></div>
<pre><code>List of 1
 $ : int [1:5] 1 2 3 4 5</code></pre>
<p>Supposons que je souhaite calculer la moyenne des valeurs du premier Ã©lÃ©ment de ma liste. Essayons la commande suivanteÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(l[<span class="dv">1</span>])</code></pre></div>
<pre><code>Warning in mean.default(l[1]): argument is not
numeric or logical: returning NA</code></pre>
<pre><code>[1] NA</code></pre>
<p>Nous obtenons un message dâ€™erreur. En effet, <strong>R</strong> ne sait pas calculer une moyenne Ã  partir dâ€™une liste. Ce quâ€™il lui faut, câ€™est un vecteur de valeurs numÃ©riques. Autrement dit, ce que nous cherchons Ã  obtenir câ€™est le contenu mÃªme du premier Ã©lÃ©ment de notre liste et non une liste Ã  un seul Ã©lÃ©ment.</p>
<p>Câ€™est ici que les doubles crochets (<code>[[]]</code>) vont rentrer en jeu. Pour ces derniers, nous pourrons utiliser lâ€™indexation par position ou lâ€™indexation par nom, mais pas lâ€™indexation par condition. De plus, le critÃ¨re que lâ€™on indiquera doit indiquer un et un seul Ã©lÃ©ment de notre liste. Au lieu de renvoyer une liste Ã  un Ã©lÃ©ment, les doubles crochets vont renvoyer lâ€™Ã©lÃ©ment dÃ©signÃ©. Vite, un exempleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(l[<span class="dv">1</span>])</code></pre></div>
<pre><code>List of 1
 $ : int [1:5] 1 2 3 4 5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(l[[<span class="dv">1</span>]])</code></pre></div>
<pre><code> int [1:5] 1 2 3 4 5</code></pre>
<p>Maintenant, nous pouvons calculer notre moyenneÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(l[[<span class="dv">1</span>]])</code></pre></div>
<pre><code>[1] 3</code></pre>
<p>Nous pouvons aussi tester lâ€™indexation par nom,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l[[<span class="st">"mois"</span>]]</code></pre></div>
<pre><code> [1] "January"   "February"  "March"    
 [4] "April"     "May"       "June"     
 [7] "July"      "August"    "September"
[10] "October"   "November"  "December" </code></pre>
<p>mais il faut avouer que cette Ã©criture avec doubles crochets et guillemets est un peu lourde. Heuresement, un nouvel acteur entre en scÃ¨neÂ : le symbole dollar (<code>$</code>). Câ€™est un raccourci des doubles crochets pour lâ€™indexation par nom. Que lâ€™on utilise ainsiÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l$mois</code></pre></div>
<pre><code> [1] "January"   "February"  "March"    
 [4] "April"     "May"       "June"     
 [7] "July"      "August"    "September"
[10] "October"   "November"  "December" </code></pre>
<p>Les Ã©critures <code>l$mois</code> et <code>l[["mois"]]</code> sont Ã©quivalentes. AttentionÂ ! Cela ne fonctionne que pour lâ€™indexation par nom.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l$<span class="dv">1</span></code></pre></div>
<pre><code>Error: unexpected numeric constant in "l$1"</code></pre>
<p>Lâ€™<dfn>assignation par indexation</dfn><dfn data-index="indexation, assignation"/> fonctionne Ã©galement avec les doubles crochets ou le signe dollarÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l[[<span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">"un"</span>, <span class="st">"vecteur"</span>, <span class="st">"textuel"</span>))
l$mois &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Janvier"</span>, <span class="st">"FÃ©vrier"</span>, <span class="st">"Mars"</span>)
l</code></pre></div>
<pre><code>[[1]]
[1] 1 2 3 4 5

[[2]]
[[2]][[1]]
[1] "un"      "vecteur" "textuel"


$minuscules
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k"
[12] "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v"
[23] "w" "x" "y" "z"

$majuscules
 [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K"
[12] "L" "M" "N" "O" "P" "Q" "R" "S" "T" "U" "V"
[23] "W" "X" "Y" "Z"

$mois
[1] "Janvier" "FÃ©vrier" "Mars"   </code></pre>
</div>
</div>
<div id="listes-et-tableaux-de-donnes_tableaux-de-donnees" class="section level2">
<h2>Tableaux de donnÃ©es</h2>
<p>Il y a un type dâ€™objets que nous avons dÃ©jÃ  abordÃ© dans le chapitre <a href="#premier-travail-avec-les-donnees">Premier travail avec les donnÃ©es</a>, il sâ€™agit du <dfn>tableau de donnÃ©es</dfn><dfn data-index="donnÃ©es, tableau"> ou <dfn lang="en">data frame</dfn> en anglais.</dfn></p>
<div id="listes-et-tableaux-de-donnes_proprietes-et-creation-1" class="section level3">
<h3>PropriÃ©tÃ©s et crÃ©ation</h3>
<p>Dans <strong>R</strong>, les tableaux de donnÃ©es sont tout simplement des listes avec quelques propriÃ©tÃ©s spÃ©ficiquesÂ :</p>
<ul>
<li>les tableaux de donnÃ©es ne peuvent contenir que des vecteursÂ ;</li>
<li>tous les vecteurs dâ€™un tableau de donnÃ©es ont la mÃªme longueurÂ ;</li>
<li>tous les Ã©lÃ©ments dâ€™un tableau de donnÃ©es sont nommÃ©s et ont chacun un nom unique.</li>
</ul>
<p>DÃ¨s lors, un tableau de donnÃ©es correspond aux fichiers de donnÃ©es que lâ€™on a lâ€™habitude de manipuler dans dâ€™autres logiciels de statistiques comme <strong>SPSS</strong> ou <strong>Stata</strong>. Les variables sont organisÃ©es en colonnes et les observations en lignes.</p>
<p>On peut un tableau de donnÃ©es avec la fonction <code data-pkg="base">data.frame</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">sexe =</span> <span class="kw">c</span>(<span class="st">"f"</span>, <span class="st">"f"</span>, <span class="st">"h"</span>, <span class="st">"h"</span>), <span class="dt">age =</span> <span class="kw">c</span>(<span class="dv">52</span>, 
  <span class="dv">31</span>, <span class="dv">29</span>, <span class="dv">35</span>), <span class="dt">blond =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>))
df</code></pre></div>
<pre><code>  sexe age blond
1    f  52 FALSE
2    f  31  TRUE
3    h  29  TRUE
4    h  35 FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(df)</code></pre></div>
<pre><code>'data.frame':   4 obs. of  3 variables:
 $ sexe : Factor w/ 2 levels "f","h": 1 1 2 2
 $ age  : num  52 31 29 35
 $ blond: logi  FALSE TRUE TRUE FALSE</code></pre>
<p>La fonction <code data-pkg="base">data.frame</code> a un gros dÃ©fautÂ : si on ne dÃ©sactive pas lâ€™option <code>stringsAsFactors = FALSE</code> elle transforme les chaÃ®nes de caractÃ¨res, ici la variable <var>sexe</var> en facteurs (un type de vecteur que nous aborderons plus en dÃ©tail dans un <a href="#facteurs-et-vecteurs-labellises">prochain chapitre</a>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">sexe =</span> <span class="kw">c</span>(<span class="st">"f"</span>, <span class="st">"f"</span>, <span class="st">"h"</span>, <span class="st">"h"</span>), <span class="dt">age =</span> <span class="kw">c</span>(<span class="dv">52</span>, 
  <span class="dv">31</span>, <span class="dv">29</span>, <span class="dv">35</span>), <span class="dt">blond =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>), 
  <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)
df</code></pre></div>
<pre><code>  sexe age blond
1    f  52 FALSE
2    f  31  TRUE
3    h  29  TRUE
4    h  35 FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(df)</code></pre></div>
<pre><code>'data.frame':   4 obs. of  3 variables:
 $ sexe : chr  "f" "f" "h" "h"
 $ age  : num  52 31 29 35
 $ blond: logi  FALSE TRUE TRUE FALSE</code></pre>
<p>Un tableau de donnÃ©es Ã©tant une liste, la fonction <code data-pkg="base">length</code> renverra le nombre dâ€™Ã©lÃ©ments de la liste, donc dans le cas prÃ©sent le nombre de variables et <code>names</code> leurs nomsÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(df)</code></pre></div>
<pre><code>[1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(df)</code></pre></div>
<pre><code>[1] "sexe"  "age"   "blond"</code></pre>
<p>Comme tous les Ã©lÃ©ments dâ€™un tableau dâ€™un tableau de donnÃ©es ont la mÃªme longeur, cet objet peut Ãªtre vu comme bidimensionnel. Les fonctions <code data-pkg="base">nrow</code>, <code data-pkg="base" data-rdoc="nrow">ncol</code> et <code data-pkg="base">dim</code> donnent respectivement le nombre de lignes, le nombre de colonnes et les dimensions de notre tableau.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nrow</span>(df)</code></pre></div>
<pre><code>[1] 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ncol</span>(df)</code></pre></div>
<pre><code>[1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(df)</code></pre></div>
<pre><code>[1] 4 3</code></pre>
<p>De plus, tout comme les colonnes ont un nom, il est aussi possible de nommer les lignes avec <code data-pkg="base">row.names</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">row.names</span>(df) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Anna"</span>, <span class="st">"Mary-Ann"</span>, <span class="st">"Michael"</span>, <span class="st">"John"</span>)
df</code></pre></div>
<pre><code>         sexe age blond
Anna        f  52 FALSE
Mary-Ann    f  31  TRUE
Michael     h  29  TRUE
John        h  35 FALSE</code></pre>
</div>
<div id="listes-et-tableaux-de-donnes_indexation-1" class="section level3">
<h3>Indexation</h3>
<p>Les tableaux de donnÃ©es Ã©tant des listes, nous pouvons donc utiliser les crochets simples (<code>[]</code>), les crochets (<code>[[]]</code>) et le symbole dollar (<code>$</code>) pour extraire des parties de notre tableau, de la mÃªme maniÃ¨re que pour nâ€™importe quelle liste.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[<span class="dv">1</span>]</code></pre></div>
<pre><code>         sexe
Anna        f
Mary-Ann    f
Michael     h
John        h</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[[<span class="dv">1</span>]]</code></pre></div>
<pre><code>[1] "f" "f" "h" "h"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df$sexe</code></pre></div>
<pre><code>[1] "f" "f" "h" "h"</code></pre>
<p>Cependant, un tableau de donnÃ©es Ã©tant un objet bidimensionnel, il est Ã©galement possible dâ€™extraire des donnÃ©es sur deux dimensions, Ã  savoir un premier critÃ¨re portant sur les lignes et un second portant sur les colonnes. Pour cela, nous utiliserons les crochets simples (<code>[]</code>) en sÃ©parant nos deux critÃ¨res par une virgule (<code>,</code>).</p>
<p>Un premier exempleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df</code></pre></div>
<pre><code>         sexe age blond
Anna        f  52 FALSE
Mary-Ann    f  31  TRUE
Michael     h  29  TRUE
John        h  35 FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[<span class="dv">3</span>, <span class="dv">2</span>]</code></pre></div>
<pre><code>[1] 29</code></pre>
<p>Cette premiÃ¨re commande indique que nous souhaitons la troisiÃ¨me observation et la seconde valeur, autrement dit lâ€™Ã¢ge de Michael. Le mÃªme rÃ©sultat peut Ãªtre obtenu avec lâ€™indexation par nom, lâ€™indexation par condition, ou un mÃ©lange de tout Ã§a.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[<span class="st">"Michael"</span>, <span class="st">"age"</span>]</code></pre></div>
<pre><code>[1] 29</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[<span class="kw">c</span>(F, F, T, F), <span class="kw">c</span>(<span class="kw">c</span>(F, T, F))]</code></pre></div>
<pre><code>[1] 29</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[<span class="dv">3</span>, <span class="st">"age"</span>]</code></pre></div>
<pre><code>[1] 29</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[<span class="st">"Michael"</span>, <span class="dv">2</span>]</code></pre></div>
<pre><code>[1] 29</code></pre>
<p>Il est Ã©galement possible de ne prÃ©ciser quâ€™un seul critÃ¨re. Par exemple, si je souhaite les deux premiÃ¨res observations, ou les variables <var>sexe</var> et <var>blond</var>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[<span class="dv">1</span>:<span class="dv">2</span>, ]</code></pre></div>
<pre><code>         sexe age blond
Anna        f  52 FALSE
Mary-Ann    f  31  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[, <span class="kw">c</span>(<span class="st">"sexe"</span>, <span class="st">"blond"</span>)]</code></pre></div>
<pre><code>         sexe blond
Anna        f FALSE
Mary-Ann    f  TRUE
Michael     h  TRUE
John        h FALSE</code></pre>
<p>Il a suffit de laisser un espace vide avant ou aprÃ¨s la virgule. ATTENTIONÂ ! Il est cependant impÃ©ratif de laisser la virgule pour indiquer Ã  <strong>R</strong> que lâ€™on souhaite effectuer une indexation Ã  deux dimensions. Si lâ€™on oublie la virgule, cela nous ramÃ¨ne au mode de fonctionnement des listes. Et le rÃ©sultat nâ€™est pas forcÃ©ment le mÃªmeÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[<span class="dv">2</span>, ]</code></pre></div>
<pre><code>         sexe age blond
Mary-Ann    f  31  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[, <span class="dv">2</span>]</code></pre></div>
<pre><code>[1] 52 31 29 35</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[<span class="dv">2</span>]</code></pre></div>
<pre><code>         age
Anna      52
Mary-Ann  31
Michael   29
John      35</code></pre>
<div class="note">
<p>Au passage, on pourra noter quelques subtilitÃ©s sur le rÃ©sultat renvoyÃ©.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(df[<span class="dv">2</span>, ])</code></pre></div>
<pre><code>'data.frame':   1 obs. of  3 variables:
 $ sexe : chr "f"
 $ age  : num 31
 $ blond: logi TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(df[, <span class="dv">2</span>])</code></pre></div>
<pre><code> num [1:4] 52 31 29 35</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(df[<span class="dv">2</span>])</code></pre></div>
<pre><code>'data.frame':   4 obs. of  1 variable:
 $ age: num  52 31 29 35</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(df[[<span class="dv">2</span>]])</code></pre></div>
<pre><code> num [1:4] 52 31 29 35</code></pre>
<p><code>df[2, ]</code> signifie que lâ€™on veut toutes les variables pour le second individu. Le rÃ©sultat est un tableau de donnÃ©es Ã  une ligne et trois colonnes. <code>df[2]</code> correspond au mode dâ€™extraction des listes et renvoie donc une liste Ã  un Ã©lÃ©ment, en lâ€™occurence un tableau de donnÃ©es Ã  quatre observations et une variable. <code>df[[2]]</code> quant Ã  lui renvoie le contenu de cette variable, soit un vecteur numÃ©rique de longeur quatre. Reste <code>df[, 2]</code> qui signifie renvoie toutes les observations pour la seconde colonne. Or lâ€™<dfn>indexation bidimensionnelle</dfn> a un fonctionnement un peu particulierÂ : par dÃ©faut cela renvoie un tableau de donnÃ©es mais sâ€™il nâ€™y a quâ€™une seule variable dans lâ€™extraction, câ€™est un vecteur qui est renvoyÃ©. Pour plus de dÃ©tails, on pourra consulter lâ€™entrÃ©e dâ€™aide de <code data-pkg="base" data-rdoc="Extract.data.frame">[.data.frame</code>.</p>
</div>
</div>
<div id="listes-et-tableaux-de-donnes_afficher-les-donnees" class="section level3">
<h3>Afficher les donnÃ©es</h3>
<p>Prenons un tableau de donnÃ©es un peu plus consÃ©quent, en lâ€™occurence un jeu de donnÃ©es disponible dans lâ€™extension <code class="pkg">questionr</code> et correspondant Ã  un extrait de lâ€™enquÃªte <em>Histoire de vie</em> rÃ©alisÃ©e par lâ€™INSEE en 2003. Il contient 2000 individus et 20 variables.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<p>Si lâ€™on demande Ã  afficher lâ€™objet <code>d</code> dans la console (rÃ©sultat non reproduit ici), <strong>R</strong> va afficher lâ€™ensemble du contenu de <code>d</code> Ã  lâ€™Ã©cran ce qui, sur un tableau de cette taille, ne sera pas trÃ¨s lisible. Pour une exploration visuelle, le plus simple est souvent dâ€™utiliser la <dfn>visonneuse</dfn> intÃ©grÃ©e Ã  <strong>RStudio</strong> que lâ€™on peut appeller avec la fonction <code data-pkg="utils">View</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">View</span>(d)</code></pre></div>
<p>Les fonctions <code data-pkg="utils">head</code> et <code data-pkg="utils" data-rdoc="head">tail</code>, qui marchent Ã©galement sur les vecteurs, permettent dâ€™afficher seulement les premiÃ¨res (respectivement les derniÃ¨res) lignes dâ€™un tableau de donnÃ©esÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(d)</code></pre></div>
<pre><code>  id age  sexe
1  1  28 Femme
2  2  23 Femme
3  3  59 Homme
4  4  34 Homme
5  5  71 Femme
6  6  35 Femme
                                               nivetud
1 Enseignement superieur y compris technique superieur
2                                                 &lt;NA&gt;
3                    Derniere annee d'etudes primaires
4 Enseignement superieur y compris technique superieur
5                    Derniere annee d'etudes primaires
6        Enseignement technique ou professionnel court
     poids                 occup     qualif
1 2634.398 Exerce une profession    Employe
2 9738.396       Etudiant, eleve       &lt;NA&gt;
3 3994.102 Exerce une profession Technicien
4 5731.662 Exerce une profession Technicien
5 4329.094              Retraite    Employe
6 8674.699 Exerce une profession    Employe
  freres.soeurs clso                       relig
1             8  Oui Ni croyance ni appartenance
2             2  Oui Ni croyance ni appartenance
3             2  Non Ni croyance ni appartenance
4             1  Non  Appartenance sans pratique
5             0  Oui         Pratiquant regulier
6             5  Non Ni croyance ni appartenance
                      trav.imp    trav.satisf
1                Peu important Insatisfaction
2                         &lt;NA&gt;           &lt;NA&gt;
3 Aussi important que le reste      Equilibre
4 Moins important que le reste   Satisfaction
5                         &lt;NA&gt;           &lt;NA&gt;
6            Le plus important      Equilibre
  hard.rock lecture.bd peche.chasse cuisine
1       Non        Non          Non     Oui
2       Non        Non          Non     Non
3       Non        Non          Non     Non
4       Non        Non          Non     Oui
5       Non        Non          Non     Non
6       Non        Non          Non     Non
  bricol cinema sport heures.tv
1    Non    Non   Non         0
2    Non    Oui   Oui         1
3    Non    Non   Oui         0
4    Oui    Oui   Oui         2
5    Non    Non   Non         3
6    Non    Oui   Oui         2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tail</span>(d, <span class="dv">2</span>)</code></pre></div>
<pre><code>       id age  sexe
1999 1999  24 Femme
2000 2000  66 Femme
                                           nivetud
1999 Enseignement technique ou professionnel court
2000  Enseignement technique ou professionnel long
         poids                 occup  qualif
1999 13740.810 Exerce une profession Employe
2000  7709.513              Au foyer Employe
     freres.soeurs clso
1999             2  Non
2000             3  Non
                          relig
1999 Appartenance sans pratique
2000 Appartenance sans pratique
                         trav.imp trav.satisf
1999 Moins important que le reste   Equilibre
2000                         &lt;NA&gt;        &lt;NA&gt;
     hard.rock lecture.bd peche.chasse cuisine
1999       Non        Non          Non     Non
2000       Non        Oui          Non     Oui
     bricol cinema sport heures.tv
1999    Non    Oui   Non       0.3
2000    Non    Non   Non       0.0</code></pre>
<p>Lâ€™extension <code class="pkg">dplyr</code>, que nous nâ€™aborderons en dÃ©tails que <a href="#introduction-a-dplyr">plus tard</a>, propose une fonction <code data-pkg="dplyr">glimpse</code> (ce qui signifie <q>aperÃ§u</q> en anglais) qui permet de visualiser rapidement et de maniÃ¨re condensÃ©e le contenu dâ€™un tableau de donnÃ©es.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="kw">glimpse</span>(d)</code></pre></div>
<pre><code>Observations: 2000
Variables:
$ id            (int) 1, 2, 3, 4, 5, 6, 7, 8,...
$ age           (int) 28, 23, 59, 34, 71, 35,...
$ sexe          (fctr) Femme, Femme, Homme, H...
$ nivetud       (fctr) Enseignement superieur...
$ poids         (dbl) 2634.3982, 9738.3958, 3...
$ occup         (fctr) Exerce une profession,...
$ qualif        (fctr) Employe, NA, Technicie...
$ freres.soeurs (int) 8, 2, 2, 1, 0, 5, 1, 5,...
$ clso          (fctr) Oui, Oui, Non, Non, Ou...
$ relig         (fctr) Ni croyance ni apparte...
$ trav.imp      (fctr) Peu important, NA, Aus...
$ trav.satisf   (fctr) Insatisfaction, NA, Eq...
$ hard.rock     (fctr) Non, Non, Non, Non, No...
$ lecture.bd    (fctr) Non, Non, Non, Non, No...
$ peche.chasse  (fctr) Non, Non, Non, Non, No...
$ cuisine       (fctr) Oui, Non, Non, Oui, No...
$ bricol        (fctr) Non, Non, Non, Oui, No...
$ cinema        (fctr) Non, Oui, Non, Oui, No...
$ sport         (fctr) Non, Oui, Oui, Oui, No...
$ heures.tv     (dbl) 0.0, 1.0, 0.0, 2.0, 3.0...</code></pre>
<p>Lâ€™extension <code class="pkg">questionr</code> propose une fonction <code data-pkg="questionr">lookfor</code> qui permet de lister les diffÃ©rentes variables dâ€™un fichier de donnÃ©esÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lookfor</span>(d)</code></pre></div>
<pre><code>        variable
1             id
2            age
3           sexe
4        nivetud
5          poids
6          occup
7         qualif
8  freres.soeurs
9           clso
10         relig
11      trav.imp
12   trav.satisf
13     hard.rock
14    lecture.bd
15  peche.chasse
16       cuisine
17        bricol
18        cinema
19         sport
20     heures.tv</code></pre>
<p>Lorsque lâ€™on a un gros tableau de donnÃ©es avec de nombreuses variables, il peut Ãªtre difficile de retrouver la ou les variables dâ€™intÃ©rÃªt. Il est possible dâ€™indiquer Ã  <code data-pkg="questionr">lookfor</code> un mot-clÃ© pour limiter la recherche. Par exempleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lookfor</span>(d, <span class="st">"trav"</span>)</code></pre></div>
<pre><code>      variable
11    trav.imp
12 trav.satisf</code></pre>
<p>Il est Ã  noter que si la recherche nâ€™est pas sensible Ã  la casse (i.e.Â aux majuscules et aux minuscules), elle est sensible aux accents.</p>
<p>La mÃ©thode <code data-pkg="base">summary</code> qui fonctionne sur tout type dâ€™objet permet dâ€™avoir quelques statistiques de base sur les diffÃ©rentes variables de notre tableau, les statistiques affichÃ©es dÃ©pendant du type de variable.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d)</code></pre></div>
<pre><code>       id              age           sexe     
 Min.   :   1.0   Min.   :18.00   Homme: 899  
 1st Qu.: 500.8   1st Qu.:35.00   Femme:1101  
 Median :1000.5   Median :48.00               
 Mean   :1000.5   Mean   :48.16               
 3rd Qu.:1500.2   3rd Qu.:60.00               
 Max.   :2000.0   Max.   :97.00               
                                              
                                                 nivetud   
 Enseignement technique ou professionnel court       :463  
 Enseignement superieur y compris technique superieur:441  
 Derniere annee d'etudes primaires                   :341  
 1er cycle                                           :204  
 2eme cycle                                          :183  
 (Other)                                             :256  
 NA's                                                :112  
     poids                            occup     
 Min.   :   78.08   Exerce une profession:1049  
 1st Qu.: 2221.82   Chomeur              : 134  
 Median : 4631.19   Etudiant, eleve      :  94  
 Mean   : 5535.61   Retraite             : 392  
 3rd Qu.: 7626.53   Retire des affaires  :  77  
 Max.   :31092.14   Au foyer             : 171  
                    Autre inactif        :  83  
                      qualif    freres.soeurs   
 Employe                 :594   Min.   : 0.000  
 Ouvrier qualifie        :292   1st Qu.: 1.000  
 Cadre                   :260   Median : 2.000  
 Ouvrier specialise      :203   Mean   : 3.283  
 Profession intermediaire:160   3rd Qu.: 5.000  
 (Other)                 :144   Max.   :22.000  
 NA's                    :347                   
          clso     
 Oui        : 936  
 Non        :1037  
 Ne sait pas:  27  
                   
                   
                   
                   
                         relig    
 Pratiquant regulier        :266  
 Pratiquant occasionnel     :442  
 Appartenance sans pratique :760  
 Ni croyance ni appartenance:399  
 Rejet                      : 93  
 NSP ou NVPR                : 40  
                                  
                         trav.imp  
 Le plus important           : 29  
 Aussi important que le reste:259  
 Moins important que le reste:708  
 Peu important               : 52  
 NA's                        :952  
                                   
                                   
         trav.satisf  hard.rock  lecture.bd
 Satisfaction  :480   Non:1986   Non:1953  
 Insatisfaction:117   Oui:  14   Oui:  47  
 Equilibre     :451                        
 NA's          :952                        
                                           
                                           
                                           
 peche.chasse cuisine    bricol     cinema    
 Non:1776     Non:1119   Non:1147   Non:1174  
 Oui: 224     Oui: 881   Oui: 853   Oui: 826  
                                              
                                              
                                              
                                              
                                              
 sport        heures.tv     
 Non:1277   Min.   : 0.000  
 Oui: 723   1st Qu.: 1.000  
            Median : 2.000  
            Mean   : 2.247  
            3rd Qu.: 3.000  
            Max.   :12.000  
            NA's   :5       </code></pre>
<p>On peut Ã©galement appliquer <code data-pkg="base">summary</code> Ã  une variable particuliÃ¨re.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d$sexe)</code></pre></div>
<pre><code>Homme Femme 
  899  1101 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d$age)</code></pre></div>
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  18.00   35.00   48.00   48.16   60.00   97.00 </code></pre>
<p>Lâ€™extension <code class="pkg">questionr</code> fournit Ã©galement une fonction bien pratique pour dÃ©crire les diffÃ©rentes variables dâ€™un tableau de donnÃ©es. Il sâ€™agit de <code data-pkg="questionr">describe</code>. Faisons de suite un essaiÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">describe</span>(d)</code></pre></div>
<pre><code>[2000 obs. x 20 variables] data.frame

$id: 
integer: 1 2 3 4 5 ...
min: 1 - max: 2000 - NAs: 0 (0%) - 2000 unique values

$age: 
integer: 28 23 59 34 71 ...
min: 18 - max: 97 - NAs: 0 (0%) - 78 unique values

$sexe: 
nominal factor: "Femme" "Femme" "Homme" "Homme" "Femme" ...
2 levels: Homme | Femme
NAs: 0 (0%)

$nivetud: 
nominal factor: "Enseignement superieur y compris technique superieur" NA "Derniere annee d'etudes primaires" "Enseignement superieur y compris technique superieur" "Derniere annee d'etudes primaires" ...
8 levels: N'a jamais fait d'etudes | A arrete ses etudes, avant la derniere annee d'etudes primaires | Derniere annee d'etudes primaires | 1er cycle | 2eme cycle | Enseignement technique ou professionnel court | Enseignement technique ou professionnel long | Enseignement superieur y compris technique superieur
NAs: 112 (0.1%)

$poids: 
numeric: 2634.3982157 9738.3957759 3994.1024587 5731.6615081 4329.0940022 ...
min: 78.0783403 - max: 31092.14132 - NAs: 0 (0%) - 1877 unique values

$occup: 
nominal factor: "Exerce une profession" "Etudiant, eleve" "Exerce une profession" "Exerce une profession" "Retraite" ...
7 levels: Exerce une profession | Chomeur | Etudiant, eleve | Retraite | Retire des affaires | Au foyer | Autre inactif
NAs: 0 (0%)

$qualif: 
nominal factor: "Employe" NA "Technicien" "Technicien" "Employe" ...
7 levels: Ouvrier specialise | Ouvrier qualifie | Technicien | Profession intermediaire | Cadre | Employe | Autre
NAs: 347 (0.2%)

$freres.soeurs: 
integer: 8 2 2 1 0 ...
min: 0 - max: 22 - NAs: 0 (0%) - 19 unique values

$clso: 
nominal factor: "Oui" "Oui" "Non" "Non" "Oui" ...
3 levels: Oui | Non | Ne sait pas
NAs: 0 (0%)

$relig: 
nominal factor: "Ni croyance ni appartenance" "Ni croyance ni appartenance" "Ni croyance ni appartenance" "Appartenance sans pratique" "Pratiquant regulier" ...
6 levels: Pratiquant regulier | Pratiquant occasionnel | Appartenance sans pratique | Ni croyance ni appartenance | Rejet | NSP ou NVPR
NAs: 0 (0%)

$trav.imp: 
nominal factor: "Peu important" NA "Aussi important que le reste" "Moins important que le reste" NA ...
4 levels: Le plus important | Aussi important que le reste | Moins important que le reste | Peu important
NAs: 952 (0.5%)

$trav.satisf: 
nominal factor: "Insatisfaction" NA "Equilibre" "Satisfaction" NA ...
3 levels: Satisfaction | Insatisfaction | Equilibre
NAs: 952 (0.5%)

$hard.rock: 
nominal factor: "Non" "Non" "Non" "Non" "Non" ...
2 levels: Non | Oui
NAs: 0 (0%)

$lecture.bd: 
nominal factor: "Non" "Non" "Non" "Non" "Non" ...
2 levels: Non | Oui
NAs: 0 (0%)

$peche.chasse: 
nominal factor: "Non" "Non" "Non" "Non" "Non" ...
2 levels: Non | Oui
NAs: 0 (0%)

$cuisine: 
nominal factor: "Oui" "Non" "Non" "Oui" "Non" ...
2 levels: Non | Oui
NAs: 0 (0%)

$bricol: 
nominal factor: "Non" "Non" "Non" "Oui" "Non" ...
2 levels: Non | Oui
NAs: 0 (0%)

$cinema: 
nominal factor: "Non" "Oui" "Non" "Oui" "Non" ...
2 levels: Non | Oui
NAs: 0 (0%)

$sport: 
nominal factor: "Non" "Oui" "Oui" "Oui" "Non" ...
2 levels: Non | Oui
NAs: 0 (0%)

$heures.tv: 
numeric: 0 1 0 2 3 ...
min: 0 - max: 12 - NAs: 5 (0%) - 30 unique values</code></pre>
<p>Comme on le voit sur cet exemple, <code data-pkg="questionr">describe</code> nous affiche le type des variables, les premiÃ¨res valeurs de chacune, le nombre de valeurs manquantes, le nombre de valeurs diffÃ©rentes (uniques) ainsi que quelques autres informations suivant le type de variables.</p>
<p>Il est possible de restreindre lâ€™affichage Ã  seulement quelques variables en indiquant le nom de ces derniÃ¨res.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">describe</span>(d, <span class="st">"age"</span>, <span class="st">"trav.satisf"</span>)</code></pre></div>
<pre><code>[2000 obs. x 20 variables] data.frame

$age: 
integer: 28 23 59 34 71 ...
min: 18 - max: 97 - NAs: 0 (0%) - 78 unique values

$trav.satisf: 
nominal factor: "Insatisfaction" NA "Equilibre" "Satisfaction" NA ...
3 levels: Satisfaction | Insatisfaction | Equilibre
NAs: 952 (0.5%)</code></pre>
<p>On peut Ã©galement transmettre juste une variableÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">describe</span>(d$sexe)</code></pre></div>
<pre><code>[2000 obs.] 
nominal factor: "Femme" "Femme" "Homme" "Homme" "Femme" ...
2 levels: Homme | Femme
NAs: 0 (0%)</code></pre>
</div>
</div>
<div id="listes-et-tableaux-de-donnes_en-resume" class="section level2">
<h2>En rÃ©sumÃ©</h2>
<p><strong>Les Listes</strong></p>
<ul>
<li>Les listes sont des objets unidimensionnels peuvant contenir tout type dâ€™objets, y compris dâ€™autres listes.</li>
<li>Elles ont une longueur que lâ€™obtient avec <code data-pkg="base">length</code>.</li>
<li>On crÃ©Ã© une liste avec <code data-pkg="base">list</code> et on peut fusionner des listes avec <code data-pkg="base">append</code>.</li>
<li>Tout comme les vecteurs, les listes peuvent Ãªtre nommÃ©es et les noms des Ã©lÃ©ments sâ€™obtiennent avec <code data-pkg="base">names</code>.</li>
<li>Les crochets simples (<code>[]</code>) permettent de sÃ©lectionner les Ã©lÃ©ments dâ€™une liste, en utilisant lâ€™indexation par position, lâ€™indexation par nom ou lâ€™indexation par condition. Cela renvoie toujours une autre liste.</li>
<li>Les doubles crochets (<code>[[]]</code>) renvoient directement le contenu dâ€™un Ã©lÃ©ment de la liste que lâ€™on aura sÃ©lectionnÃ© par position ou par nom.</li>
<li>Le symbole <code>$</code> est un raccourci pour facilement sÃ©lectionner un Ã©lÃ©ment par son nom, <code>liste$nom</code> Ã©tant Ã©quivalent Ã  <code>liste[["nom"]]</code>.</li>
</ul>
<p><strong>Les Tableaux de donnÃ©es</strong></p>
<ul>
<li>Les tableaux de donnÃ©es sont des listes avec des propriÃ©tÃ©s particuliÃ¨resÂ :
<ol style="list-style-type: lower-roman">
<li>tous les Ã©lÃ©ments sont des vecteursÂ ;</li>
<li>tous les vecteurs ont la mÃªme longueurÂ ;</li>
<li>tous les vecteurs ont un nom et ce nom est unique.</li>
</ol></li>
<li>On peut crÃ©er un tableau de donnÃ©es avec <code data-pkg="base">data.frame</code>.</li>
<li>Les tableaux de donnÃ©es correspondent aux fichiers de donnÃ©es que lâ€™on utilise usuellement dans dâ€™autres logiciels de statistiquesÂ : les variables sont reprÃ©sentÃ©es en colonnes et les observations en ligne.</li>
<li>Ce sont des objets bidimensionnelsÂ : <code data-pkg="base" data-rdoc="nrow">ncol</code> renvoit le nombre de colonnes et <code data-pkg="base">nrow</code> le nombre de lignes.</li>
<li>Les doubles crochets (<code>[[]]</code>) et le symbole dollar (<code>$</code>) fonctionnent comme pour les listes et permettent dâ€™accÃ©der aux variables.</li>
<li>Il est possible dâ€™utiliser des coordonnÃ©es bidimensionnelles avec les crochets simples (<code>[]</code>) en indiquant un critÃ¨re sur les lignes puis un critÃ¨re sur les colonnes, sÃ©parÃ©s par une virgule (<code>,</code>).</li>
</ul>
</div>

</article>
<article id="facteurs-et-vecteurs-labellises">

<div class="fluid-row" id="facteurs-et-vecteurs-labellises_header">


<h1 class="title">Facteurs et vecteurs labellisÃ©s</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#facteurs-et-vecteurs-labellises_facteurs">Facteurs</a></li>
<li><a href="#facteurs-et-vecteurs-labellises_labelled">Vecteurs labellisÃ©s</a><ul>
<li><a href="#facteurs-et-vecteurs-labellises_les-etiquettes-de-variables">Les Ã©tiquettes de variables</a></li>
<li><a href="#facteurs-et-vecteurs-labellises_les-etiquettes-de-valeur">Les Ã©tiquettes de valeur</a></li>
<li><a href="#facteurs-et-vecteurs-labellises_assignation-et-condition">Assignation et condition</a></li>
<li><a href="#facteurs-et-vecteurs-labellises_definir-des-valeurs-manquantes">DÃ©finir des valeurs manquantes</a></li>
<li><a href="#facteurs-et-vecteurs-labellises_quelques-fonctions-supplementaires">Quelques fonctions supplÃ©mentaires</a></li>
</ul></li>
</ul>
</div>

<p>Dans le chapire sur les <a href="#vecteurs-indexation-et-assignation">vecteurs</a>, nous avons abordÃ© les types fondementaux de vecteurs (numÃ©riques, textuels, logiques). Mais il existe de nombreux autres classes de vecteurs afin de reprÃ©senter des donnÃ©es diverses (comme les dates). Dans ce chapitre, nous nous intÃ©ressons plus particuliÃ¨rement aux <dfn data-index="variable catÃ©gorielle">variables catÃ©gorielles</dfn><dfn data-index="catÃ©gorielle, variable"/>.</p>
<p>Les <dfn data-index="facteur">facteurs</dfn> (ou <dfn data-index="factor" lang="en">factors</dfn> an anglais) sont un type de vecteur gÃ©rÃ© nativement par <strong>R</strong> et utilisÃ©s dans de nombreux domaines (modÃ¨les statistiques, reprÃ©sentations graphiques, â€¦).</p>
<p>Les facteurs sont souvent mis en regard des <dfn data-index="donnÃ©e labelissÃ©e">donnÃ©es labellisÃ©es</dfn><dfn data-index="labellisÃ©e, donnÃ©e"/><dfn data-index="labelled data"/> telles quâ€™elles sont utilisÃ©es dans dâ€™autres logiciels comme <strong>SPSS</strong> ou <strong>Stata</strong>. Or, les limites propres aux facteurs font quâ€™ils ne sont pas adpatÃ©s pour rendre compte des diffÃ©rents usages qui sont fait des donnÃ©es labellisÃ©es. Plusieurs extensions (telles que <code class="pkg">memisc</code> ou <code class="pkg">Hmisc</code>) ont proposÃ© leur propre solution qui, bien quâ€™elles apportaient un plus pour la gestion des donnÃ©es labellisÃ©es, ne permettaient que celles-ci soient utilisÃ©es en dehors de ces extensions ou des extensions compatibles. Nous aborderons ici une nouvelle classe de vecteurs, la classe <code data-pkg="labelled">labelled</code>, introduite par lâ€™extension <code class="pkg">haven</code> (que nous aborderons dans le cadre de lâ€™<a href="#import-de-donnees">import de donnÃ©es</a>) et qui peut Ãªtre manipulÃ©e avec lâ€™extension homonyme <code class="pkg">labelled</code>.</p>
<div id="facteurs-et-vecteurs-labellises_facteurs" class="section level2">
<h2>Facteurs</h2>
<p>Dans ce qui suit on travaillera sur le jeu de donnÃ©es tirÃ© de lâ€™enquÃªte <em>Histoire de vie</em>, fourni avec lâ€™extension <code class="pkg">questionr</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<p>Jetons un Å“il Ã  la liste des variables de <code>d</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(d)</code></pre></div>
<pre><code>'data.frame':   2000 obs. of  20 variables:
 $ id           : int  1 2 3 4 5 6 7 8 9 10 ...
 $ age          : int  28 23 59 34 71 35 60 47 20 28 ...
 $ sexe         : Factor w/ 2 levels "Homme","Femme": 2 2 1 1 2 2 2 1 2 1 ...
 $ nivetud      : Factor w/ 8 levels "N'a jamais fait d'etudes",..: 8 NA 3 8 3 6 3 6 NA 7 ...
 $ poids        : num  2634 9738 3994 5732 4329 ...
 $ occup        : Factor w/ 7 levels "Exerce une profession",..: 1 3 1 1 4 1 6 1 3 1 ...
 $ qualif       : Factor w/ 7 levels "Ouvrier specialise",..: 6 NA 3 3 6 6 2 2 NA 7 ...
 $ freres.soeurs: int  8 2 2 1 0 5 1 5 4 2 ...
 $ clso         : Factor w/ 3 levels "Oui","Non","Ne sait pas": 1 1 2 2 1 2 1 2 1 2 ...
 $ relig        : Factor w/ 6 levels "Pratiquant regulier",..: 4 4 4 3 1 4 3 4 3 2 ...
 $ trav.imp     : Factor w/ 4 levels "Le plus important",..: 4 NA 2 3 NA 1 NA 4 NA 3 ...
 $ trav.satisf  : Factor w/ 3 levels "Satisfaction",..: 2 NA 3 1 NA 3 NA 2 NA 1 ...
 $ hard.rock    : Factor w/ 2 levels "Non","Oui": 1 1 1 1 1 1 1 1 1 1 ...
 $ lecture.bd   : Factor w/ 2 levels "Non","Oui": 1 1 1 1 1 1 1 1 1 1 ...
 $ peche.chasse : Factor w/ 2 levels "Non","Oui": 1 1 1 1 1 1 2 2 1 1 ...
 $ cuisine      : Factor w/ 2 levels "Non","Oui": 2 1 1 2 1 1 2 2 1 1 ...
 $ bricol       : Factor w/ 2 levels "Non","Oui": 1 1 1 2 1 1 1 2 1 1 ...
 $ cinema       : Factor w/ 2 levels "Non","Oui": 1 2 1 2 1 2 1 1 2 2 ...
 $ sport        : Factor w/ 2 levels "Non","Oui": 1 2 2 2 1 2 1 1 1 2 ...
 $ heures.tv    : num  0 1 0 2 3 2 2.9 1 2 2 ...</code></pre>
<p>Nous voyons que de nombreuses variables de ce tableau de donnÃ©es, telles que <var>sexe</var> ou <var>nivetud</var>, sont du type facteur.</p>
<p>Les facteurs prennent leurs valeurs dans un ensemble de modalitÃ©s prÃ©dÃ©finies et ne peuvent en prendre dâ€™autres. La liste des valeurs possibles est donnÃ©e par la fonction <code data-pkg="base">levels</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">levels</span>(d$sexe)</code></pre></div>
<pre><code>[1] "Homme" "Femme"</code></pre>
<p>Si on veut modifier la valeur du sexe du premier individu de notre tableau de donnÃ©es avec une valeur non autorisÃ©e, on obient un message dâ€™erreur et une valeur manquante est utilisÃ©e Ã  la placeÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$sexe[<span class="dv">1</span>] &lt;-<span class="st"> "Chihuahua"</span></code></pre></div>
<pre><code>Warning in `[&lt;-.factor`(`*tmp*`, 1, value =
structure(c(NA, 2L, 1L, 1L, : invalid factor
level, NA generated</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$sexe[<span class="dv">1</span>]</code></pre></div>
<pre><code>[1] &lt;NA&gt;
Levels: Homme Femme</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$sexe[<span class="dv">1</span>] &lt;-<span class="st"> "Homme"</span>
d$sexe[<span class="dv">1</span>]</code></pre></div>
<pre><code>[1] Homme
Levels: Homme Femme</code></pre>
<p>On peut trÃ¨s facilement crÃ©er un facteur Ã  partir dâ€™une variable textuelle avec la fonction <code data-pkg="base">factor</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">"H"</span>, <span class="st">"H"</span>, <span class="st">"F"</span>, <span class="st">"H"</span>))
v</code></pre></div>
<pre><code>[1] H H F H
Levels: F H</code></pre>
<p>Par dÃ©faut, les niveaux dâ€™un facteur nouvellement crÃ©Ã©s sont lâ€™ensemble des valeurs de la variable textuelle, ordonnÃ©es par ordre alphabÃ©tique. Cette ordre des niveaux est utilisÃ© Ã  chaque fois quâ€™on utilise des fonctions comme <code data-pkg="base">table</code>, par exempleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(v)</code></pre></div>
<pre><code>v
F H 
1 3 </code></pre>
<p>On peut modifier cet ordre au moment de la crÃ©ation du facteur en utilisant lâ€™option <code>levels</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">"H"</span>, <span class="st">"H"</span>, <span class="st">"F"</span>, <span class="st">"H"</span>), <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">"H"</span>, 
  <span class="st">"F"</span>))
<span class="kw">table</span>(v)</code></pre></div>
<pre><code>v
H F 
3 1 </code></pre>
<p>On peut aussi modifier lâ€™ordre des niveaux dâ€™une variable dÃ©jÃ  existanteÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$qualif &lt;-<span class="st"> </span><span class="kw">factor</span>(d$qualif, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">"Ouvrier specialise"</span>, 
  <span class="st">"Ouvrier qualifie"</span>, <span class="st">"Employe"</span>, <span class="st">"Technicien"</span>, <span class="st">"Profession intermediaire"</span>, 
  <span class="st">"Cadre"</span>, <span class="st">"Autre"</span>))
<span class="kw">table</span>(d$qualif)</code></pre></div>
<pre><code>
      Ouvrier specialise         Ouvrier qualifie 
                     203                      292 
                 Employe               Technicien 
                     594                       86 
Profession intermediaire                    Cadre 
                     160                      260 
                   Autre 
                      58 </code></pre>
<div class="note">
<p>Lâ€™extension <code class="pkg">questionr</code> propose une <em>interface interactive</em> pour le rÃ©ordonnancement des niveaux dâ€™un facteur. Cette fonction, nommÃ©e <code data-pkg="questionr">iorder</code>, vous permet de rÃ©ordonner les modalitÃ©s de maniÃ¨re graphique et de gÃ©nÃ©rer le code <strong>R</strong> correspondant.</p>
<p>Dans lâ€™exemple prÃ©cÃ©dant, si vous exÃ©cutezÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">iorder</span>(d, <span class="st">"qualif"</span>)</code></pre></div>
<p><strong>RStudio</strong> devrait ouvrir une fenÃªtre semblable Ã  celle de la figure ci-dessous.</p>
<p><img src="images/capture_iorder.png" alt="Interface de la commande iorder"/></p>
<p>Vous pouvez alors dÃ©placer les modalitÃ©s par glisser-dÃ©poser, vÃ©rifier le rÃ©sultat dans lâ€™onglet <em>VÃ©rification</em> et, une fois le rÃ©sultat satisfaisant, rÃ©cupÃ©rer le code gÃ©nÃ©rÃ© pour lâ€™inclure dans votre script.</p>
</div>
<p>On peut Ã©galement modifier les niveaux eux-mÃªmes. Imaginons que lâ€™on souhaite crÃ©er une nouvelle variable <em>qualif.abr</em> contenant les noms abrÃ©gÃ©s des catÃ©gories socioprofessionnelles de <em>qualif</em>. On peut alors procÃ©der comme suitÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$qualif.abr &lt;-<span class="st"> </span><span class="kw">factor</span>(d$qualif, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">"Ouvrier specialise"</span>, 
  <span class="st">"Ouvrier qualifie"</span>, <span class="st">"Employe"</span>, <span class="st">"Technicien"</span>, <span class="st">"Profession intermediaire"</span>, 
  <span class="st">"Cadre"</span>, <span class="st">"Autre"</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">"OS"</span>, <span class="st">"OQ"</span>, <span class="st">"Empl"</span>, 
  <span class="st">"Tech"</span>, <span class="st">"Interm"</span>, <span class="st">"Cadre"</span>, <span class="st">"Autre"</span>))
<span class="kw">table</span>(d$qualif.abr)</code></pre></div>
<pre><code>
    OS     OQ   Empl   Tech Interm  Cadre  Autre 
   203    292    594     86    160    260     58 </code></pre>
<p>Dans ce qui prÃ©cÃ¨de, le paramÃ¨tre <code>levels</code> de <code data-pkg="base">factor</code> permet de spÃ©cifier quels sont les niveaux retenus dans le facteur rÃ©sultat, ainsi que leur ordre. Le paramÃ¨tre <code>labels</code>, lui, permet de modifier les noms de ces niveaux dans le facteur rÃ©sultat. Il est donc capital dâ€™indiquer les noms de <code>labels</code> exactement dans le mÃªme ordre que les niveaux de <code>levels</code>. Pour sâ€™assurer de ne pas avoir commis dâ€™erreur, il est recommandÃ© dâ€™effectuer un tableau croisÃ© entre lâ€™ancien et le nouveau facteurÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$qualif, d$qualif.abr)</code></pre></div>
<pre><code>                          
                            OS  OQ Empl Tech
  Ouvrier specialise       203   0    0    0
  Ouvrier qualifie           0 292    0    0
  Employe                    0   0  594    0
  Technicien                 0   0    0   86
  Profession intermediaire   0   0    0    0
  Cadre                      0   0    0    0
  Autre                      0   0    0    0
                          
                           Interm Cadre Autre
  Ouvrier specialise            0     0     0
  Ouvrier qualifie              0     0     0
  Employe                       0     0     0
  Technicien                    0     0     0
  Profession intermediaire    160     0     0
  Cadre                         0   260     0
  Autre                         0     0    58</code></pre>
<p>On a donc ici un premier moyen dâ€™effectuer un recodage des modalitÃ©s dâ€™une variable de type facteur. Dâ€™autres mÃ©thodes existent, que nous aborderons dans le chapitre <a href="#recodage">Recodage</a>.</p>
<p>Ã€ noter que par dÃ©faut, les valeurs manquantes ne sont pas considÃ©rÃ©es comme un niveau de facteur. On peut cependant les transformer en niveau en utilisant la fonction <code data-pkg="base" data-rdoc="factor">addNA</code>. Ceci signifie cependant quâ€™elle ne seront plus considÃ©rÃ©es comme manquantes par <strong>R</strong> mais comme une modalitÃ© Ã  part entiÃ¨reÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d$trav.satisf)</code></pre></div>
<pre><code>  Satisfaction Insatisfaction      Equilibre 
           480            117            451 
          NA's 
           952 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(<span class="kw">addNA</span>(d$trav.satisf))</code></pre></div>
<pre><code>  Satisfaction Insatisfaction      Equilibre 
           480            117            451 
          &lt;NA&gt; 
           952 </code></pre>
<p>La fonction <code data-pkg="questionr">addNAstr</code> de lâ€™extension <code class="pkg">questionr</code> fait la mÃªme chose mais permet de spÃ©cifier lâ€™Ã©tiquette de la modalitÃ© des valeurs manquantes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">summary</span>(<span class="kw">addNAstr</span>(d$trav.satisf, <span class="st">"Manquant"</span>))</code></pre></div>
<pre><code>  Satisfaction Insatisfaction      Equilibre 
           480            117            451 
      Manquant 
           952 </code></pre>
</div>
<div id="facteurs-et-vecteurs-labellises_labelled" class="section level2">
<h2>Vecteurs labellisÃ©s</h2>
<p>Nous abordons ici une nouvelle classe de vecteurs, la classe <code data-pkg="labelled">labelled</code>, introduite rÃ©cemment par lâ€™extension <code class="pkg">haven</code> (que nous aborderons dans le cadre de lâ€™<a href="#import-de-donnees">import de donnÃ©es</a>) et qui peut Ãªtre manipulÃ©e avec lâ€™extension homonyme <code class="pkg">labelled</code>.</p>
<p>Pour cette section, nous allons utiliser dâ€™autres donnÃ©es dâ€™exemple, Ã©galement disponibles dans lâ€™extension <code class="pkg">questionr</code>. Il sâ€™agit dâ€™un ensemble de trois tableaux de donnÃ©es (<code>menages</code>, <code>femmes</code> et <code>enfants</code>) contenant les donnÃ©es dâ€™une enquÃªte de fÃ©conditÃ©. CommenÃ§ons par les charger en mÃ©moireÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(fecondite)</code></pre></div>
<p>Pour ailleurs, nous allons avoir besoin de lâ€™extension <code class="pkg">labelled</code> qui permet de manipuler ces donnÃ©es labellisÃ©es.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(labelled)</code></pre></div>
<div id="facteurs-et-vecteurs-labellises_les-etiquettes-de-variables" class="section level3">
<h3>Les Ã©tiquettes de variables</h3>
<p>Les <dfn data-index="Ã©tiquette de variable">Ã©tiquettes de variables</dfn><dfn data-index="variable, Ã©tiquette"/> permettent de donner un nom long, plus explicite, aux diffÃ©rentes colonnes dâ€™un tableau de donnÃ©es (ou encore directement Ã  un vecteur autonome).</p>
<p>La visonneuse de donnÃ©es de <strong>RStudio</strong> sait reconnaÃ®tre et afficher ces Ã©tiquettes de variables lorsquâ€™elles existent. Essayez par exemple la commande suivanteÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">View</span>(femmes)</code></pre></div>
<p>Les fonctions <code data-pkg="questionr">lookfor</code> et <code data-pkg="questionr">describe</code> de lâ€™extension <code class="pkg">questionr</code> affichent Ã©galement les Ã©tiquettes de variables lorsquâ€™elles existent.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lookfor</span>(femmes)</code></pre></div>
<pre><code>         variable
1        id_femme
2       id_menage
3           poids
4  date_entretien
5  date_naissance
6             age
7          milieu
8          region
9            educ
10        travail
11          matri
12       religion
13        journal
14          radio
15             tv
16   nb_enf_ideal
17           test
                                                            label
1                                       Identifiant de l'enquÃªtÃ©e
2                                           Identifiant du mÃ©nage
3                                               Poids statistique
4                              Date de passation du questionnaire
5                                               Date de naissance
6  Ã‚ge rÃ©volu (en annÃ©es) Ã  la date de passation du questionnaire
7                                             Milieu de rÃ©sidence
8                                             RÃ©gion de rÃ©sidence
9                                              Niveau d'Ã©ducation
10                                                  A un emploi ?
11                                             Statut matrimonial
12                                                       Religion
13                                                Lit la presse ?
14                                              Ecoute la radio ?
15                                        Regarde la tÃ©lÃ©vision ?
16                                         Nombre idÃ©al d'enfants
17                      A dÃ©jÃ  fait un test de dÃ©pistage du VIH ?</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">describe</span>(femmes$id_femme)</code></pre></div>
<pre><code>[2000 obs.] Identifiant de l'enquÃªtÃ©e
integer: 391 1643 85 881 1981 ...
min: 1 - max: 2000 - NAs: 0 (0%) - 2000 unique values</code></pre>
<p>Pour manipuler les Ã©tiquettes de variable, il suffit dâ€™utiliser la fonction <code data-pkg="labelled">var_label</code> de lâ€™extension <code class="pkg">labelled</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">var_label</span>(femmes)</code></pre></div>
<pre><code>$id_femme
[1] "Identifiant de l'enquÃªtÃ©e"

$id_menage
[1] "Identifiant du mÃ©nage"

$poids
[1] "Poids statistique"

$date_entretien
[1] "Date de passation du questionnaire"

$date_naissance
[1] "Date de naissance"

$age
[1] "Ã‚ge rÃ©volu (en annÃ©es) Ã  la date de passation du questionnaire"

$milieu
[1] "Milieu de rÃ©sidence"

$region
[1] "RÃ©gion de rÃ©sidence"

$educ
[1] "Niveau d'Ã©ducation"

$travail
[1] "A un emploi ?"

$matri
[1] "Statut matrimonial"

$religion
[1] "Religion"

$journal
[1] "Lit la presse ?"

$radio
[1] "Ecoute la radio ?"

$tv
[1] "Regarde la tÃ©lÃ©vision ?"

$nb_enf_ideal
[1] "Nombre idÃ©al d'enfants"

$test
[1] "A dÃ©jÃ  fait un test de dÃ©pistage du VIH ?"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">var_label</span>(femmes$id_menage)</code></pre></div>
<pre><code>[1] "Identifiant du mÃ©nage"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">var_label</span>(femmes$id_menage) &lt;-<span class="st"> "ID du mÃ©nage Ã  laquelle est appartient"</span>
<span class="kw">var_label</span>(femmes$id_menage)</code></pre></div>
<pre><code>[1] "ID du mÃ©nage Ã  laquelle est appartient"</code></pre>
<p>On utilisera la valeur <code>NULL</code> pour supprimer une Ã©tiquetteÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">1</span>)
<span class="kw">var_label</span>(v)</code></pre></div>
<pre><code>NULL</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">var_label</span>(v) &lt;-<span class="st"> "Ma variable"</span>
<span class="kw">var_label</span>(v)</code></pre></div>
<pre><code>[1] "Ma variable"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">var_label</span>(v) &lt;-<span class="st"> </span><span class="ot">NULL</span>
<span class="kw">var_label</span>(v)</code></pre></div>
<pre><code>NULL</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">var_label</span>(v) &lt;-<span class="st"> "Une autre Ã©tiquette"</span>
<span class="kw">var_label</span>(v)</code></pre></div>
<pre><code>[1] "Une autre Ã©tiquette"</code></pre>
<p>Le fait dâ€™ajouter une Ã©tiquette Ã  un vecteur ne modifie en rien son type. Regardons la structure de notre objet <code>v</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(v)</code></pre></div>
<pre><code> atomic [1:5] 1 5 2 4 1
 - attr(*, "label")= chr "Une autre Ã©tiquette"</code></pre>
<p>Que voit-onÂ ? Notre vecteur possÃ¨de maintenant ce quâ€™on appelle un <dfn>attribut</dfn>, câ€™est-Ã -dire une information supplÃ©mentaire qui lui est attachÃ©e. Un objet peut avoir plusieurs attributs. Ici, notre Ã©tiquette de variable est strockÃ© dans un attribut nommÃ© <code>"label"</code>. Cela ne modifie en rien sa nature. Il ne sâ€™agit que dâ€™information en plus. Toutes les fonctions ne tiennent pas compte des Ã©tiquettes de variable. Peu importeÂ ! La prÃ©sence dâ€™un attribut ne les empÃªchera de fonctionner. De mÃªme, mÃªme si lâ€™extension <code class="pkg">labelled</code> nâ€™est pas installÃ©e sur votre machine, vous pourrez toujours manipuler vos donnÃ©es comme si de rien nâ€™Ã©tait.</p>
<p>On peut associer une Ã©tiquette Ã  nâ€™importe quel type de variable, quâ€™elle soit numÃ©rique, textuelle, un facteur ou encore des dates.</p>
</div>
<div id="facteurs-et-vecteurs-labellises_les-etiquettes-de-valeur" class="section level3">
<h3>Les Ã©tiquettes de valeur</h3>
<p>Les <dfn data-index="Ã©tiquette de valeur">Ã©tiquettes de valeur</dfn><dfn data-index="valeur, Ã©tiquette"/> consistent Ã  attribuer une Ã©tiquette textuelle Ã  certaines valeurs dâ€™un vecteur. Elles ne peuvent sâ€™appliquer quâ€™aux vecteurs numÃ©riques ou textuels.</p>
<p>Lorsquâ€™un vecteur possÃ¨de des Ã©tiquettes de valeur, sa classe change et devient <code data-pkg="labelled">labelled</code>. Regardons dÃ©jÃ  quelques exemples. Tout dâ€™abord, jetons un apercu contenu de lâ€™objet <code>femmes</code> grace Ã  la fonction <code data-pkg="dplyr">glimpse</code> de lâ€™extension <code class="pkg">dplyr</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="kw">glimpse</span>(femmes)</code></pre></div>
<pre><code>Observations: 2,000
Variables: 17
$ id_femme       (int) 391, 1643, 85, 881, 19...
$ id_menage      (int) 381, 1515, 85, 844, 17...
$ poids          (dbl) 1.803150, 1.803150, 1....
$ date_entretien (date) 2012-05-05, 2012-01-2...
$ date_naissance (date) 1997-03-07, 1982-01-0...
$ age            (dbl) 15, 30, 33, 43, 25, 18...
$ milieu         (lbll) 2, 2, 2, 2, 2, 2, 2, ...
$ region         (lbll) 4, 4, 4, 4, 4, 3, 3, ...
$ educ           (lbll) 0, 0, 0, 0, 1, 0, 0, ...
$ travail        (lbll) 1, 1, 0, 1, 1, 0, 1, ...
$ matri          (lbll) 0, 2, 2, 2, 1, 0, 1, ...
$ religion       (lbll) 1, 3, 2, 3, 2, 2, 3, ...
$ journal        (lbll) 0, 0, 0, 0, 0, 0, 0, ...
$ radio          (lbll) 0, 1, 1, 0, 0, 1, 1, ...
$ tv             (lbll) 0, 0, 0, 0, 0, 1, 0, ...
$ nb_enf_ideal   (lbll) 4, 4, 4, 4, 4, 5, 10,...
$ test           (lbll) 0, 9, 0, 0, 1, 0, 0, ...</code></pre>
<p>Il apparaÃ®t que la variable <var>region est de type <code data-pkg="labelled">labelled</code>. On peut le confirmer avec <code data-pkg="base">class</code>.</var></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(femmes$region)</code></pre></div>
<pre><code>[1] "labelled"</code></pre>
<p>Regardons les premiÃ¨res valeurs prises par cette variable.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(femmes$region)</code></pre></div>
<pre><code>&lt;Labelled double&gt; 
[1] 4 4 4 4 4 3

Labels:
 value label is_na
     1  Nord FALSE
     2   Est FALSE
     3   Sud FALSE
     4 Ouest FALSE</code></pre>
<p>Nous voyons que quatre Ã©tiquettes de valeurs ont Ã©tÃ© associÃ©es Ã  notre variable. Le code 1 correspond ainsi Ã  la rÃ©gion <q>Nord</q>, le code 2 Ã  la rÃ©gion <q>Est</q>, etc. Laissons de cÃ´tÃ© pour le moment la colonne <code>is_na</code> que nous aborderons dans une prochaine section.</p>
<p>La liste des Ã©tiquettes est Ã©galement renvoyÃ©e par la fonction <code data-pkg="questionr">describe</code> de <code class="pkg">questionr</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">describe</span>(femmes$region)</code></pre></div>
<pre><code>[2000 obs.] RÃ©gion de rÃ©sidence
labelled numeric: 4 4 4 4 4 ...
min: 1 - max: 4 - NAs: 0 (0%) - 4 unique values
4 value labels: [1] Nord [2] Est [3] Sud [4] Ouest</code></pre>
<p>Lâ€™extension <code class="pkg">labelled</code> fournit la fonction <code data-pkg="labelled">val_labels</code> qui renvoie la liste des Ã©tiquettes de valeurs dâ€™une variable sous la forme dâ€™un vecteur nommÃ© et la fonction <code data-pkg="labelled" data-rdoc="val_labels">val_label</code> (notez lâ€™absence de â€˜sâ€™) qui renvoie lâ€™Ã©tiquette associÃ©e Ã  une valeur particuliÃ¨re. Sâ€™il nâ€™y a pas dâ€™Ã©tiquette de valeur, ces fonctions renvoient <code>NULL</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">val_labels</span>(femmes$region)</code></pre></div>
<pre><code> Nord   Est   Sud Ouest 
    1     2     3     4 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">val_label</span>(femmes$region, <span class="dv">2</span>)</code></pre></div>
<pre><code>[1] "Est"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">val_label</span>(femmes$region, <span class="dv">6</span>)</code></pre></div>
<pre><code>NULL</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">val_labels</span>(femmes$age)</code></pre></div>
<pre><code>NULL</code></pre>
<p>Re-regardons dâ€™un peu plus prÃ¨s les premiÃ¨res valeurs de notre variable <var>region</var>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(femmes$region)</code></pre></div>
<pre><code>&lt;Labelled double&gt; 
[1] 4 4 4 4 4 3

Labels:
 value label is_na
     1  Nord FALSE
     2   Est FALSE
     3   Sud FALSE
     4 Ouest FALSE</code></pre>
<p>On sâ€™aperÃ§oit quâ€™il sâ€™agit de valeurs numÃ©riques. Et lâ€™affichage indique que notre variable est plus prÃ©cisÃ©ment du type <code>labelled double</code>. Pour rappel, <code>double</code> est synonyme de <code>numeric</code>. Autrement dit, la classe <code data-pkg="labelled">labelled</code> ne modifie pas le type sous-jacent dâ€™un vecteur, que lâ€™on peut toujours obtenir avec la fonction <code data-pkg="base">typeof</code>. Nous pouvons Ã©galement tester si notre variable est numÃ©rique avec la fonction <code data-pkg="base" data-rdoc="numeric">is.numeric</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(femmes$region)</code></pre></div>
<pre><code>[1] "double"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.numeric</span>(femmes$region)</code></pre></div>
<pre><code>[1] TRUE</code></pre>
<p>Ã€ la diffÃ©rence des facteurs, le type original dâ€™une variable labellisÃ©e nâ€™est pas modifiÃ© par la prÃ©sence dâ€™Ã©tiquettes de valeur. Ainsi, il reste possible de calculer une moyenne Ã  partir de notre variable <var>region</var> (mÃªme si cela nâ€™est pas pertinent ici dâ€™un point de vue sÃ©mantique).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(femmes$region)</code></pre></div>
<pre><code>[1] 2.412</code></pre>
<p>Avec un vecteur, nous aurions eu un bon message dâ€™erreur.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(d$nivetud)</code></pre></div>
<pre><code>Warning in mean.default(d$nivetud): argument is
not numeric or logical: returning NA</code></pre>
<pre><code>[1] NA</code></pre>
<p>Nous allons voir quâ€™il est aussi possible dâ€™associer des Ã©tiquettes de valeurs Ã  des vecteurs textuels. CrÃ©ons tout dâ€™abord un vecteur textuel qui nous servira dâ€™exemple.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"f"</span>, <span class="st">"f"</span>, <span class="st">"h"</span>, <span class="st">"f"</span>, <span class="st">"h"</span>)
v</code></pre></div>
<pre><code>[1] "f" "f" "h" "f" "h"</code></pre>
<p>Le plus facile pour lui associer des Ã©tiquettes de valeur est dâ€™utiliser <code data-pkg="labelled" data-rdoc="val_labels">val_label</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">val_label</span>(v, <span class="st">"f"</span>) &lt;-<span class="st"> "femmes"</span>
<span class="kw">val_label</span>(v, <span class="st">"h"</span>) &lt;-<span class="st"> "hommes"</span>
v</code></pre></div>
<pre><code>&lt;Labelled character&gt; 
[1] "f" "f" "h" "f" "h"

Labels:
 value  label is_na
     f femmes FALSE
     h hommes FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(v)</code></pre></div>
<pre><code>[1] "character"</code></pre>
<p>Notre vecteur <code>v</code> a automatiquement transformÃ© en un vecteur de la classe <code>labelled</code>. Mais son type sous-jacent est restÃ© <code>"character"</code>. Par ailleurs, les donnÃ©es elle-mÃªme nâ€™ont pas Ã©tÃ© modifiÃ©es et ont conservÃ© leurs valeurs originales.</p>
<p>Il est Ã©galement possible de dÃ©finir/modifier/supprimer lâ€™ensemble des Ã©tiquettes de valeur dâ€™une variable avec <code data-pkg="labelled">val_labels</code> en lui assignant un vecteur nommÃ©.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">val_labels</span>(v) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">Homme =</span> <span class="st">"h"</span>, <span class="dt">Femme =</span> <span class="st">"f"</span>, <span class="st">`</span><span class="dt">Valeur indÃ©terminÃ©e</span><span class="st">`</span> =<span class="st"> "i"</span>)
v</code></pre></div>
<pre><code>&lt;Labelled character&gt; 
[1] "f" "f" "h" "f" "h"

Labels:
 value               label is_na
     h               Homme FALSE
     f               Femme FALSE
     i Valeur indÃ©terminÃ©e FALSE</code></pre>
<p>Comme prÃ©cÃ©demment, on utilisera <code>NULL</code> pour supprimer une ou toutes les Ã©tiquettes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">val_label</span>(v, <span class="st">"i"</span>) &lt;-<span class="st"> </span><span class="ot">NULL</span>
v</code></pre></div>
<pre><code>&lt;Labelled character&gt; 
[1] "f" "f" "h" "f" "h"

Labels:
 value label is_na
     h Homme FALSE
     f Femme FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">val_labels</span>(v) &lt;-<span class="st"> </span><span class="ot">NULL</span>
v</code></pre></div>
<pre><code>[1] "f" "f" "h" "f" "h"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(v)</code></pre></div>
<pre><code>[1] "character"</code></pre>
<p>Si lâ€™on supprime toutes les Ã©tiquettes de valeur, alors notre vecteur retrouve sa classe initiale.</p>
<p>Les Ã©tiquettes de valeur sont plus souples que les facteurs, en ce sens quâ€™il nâ€™est pas obligatoire dâ€™indiquer une Ã©tiquette pour chaque valeur prise par une variable. Alors quâ€™il nâ€™est pas possible avec un facteur dâ€™assigner une valeur qui nâ€™a pas Ã©tÃ© prÃ©alablement dÃ©finie comme une des modalitÃ©s possibles du facteur, nous nâ€™avons pas cette limite avec les vecteurs labellisÃ©s.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">femmes$milieu[<span class="dv">3</span>] &lt;-<span class="st"> </span><span class="dv">5</span></code></pre></div>
<p>ImportantÂ : quand on assigne une valeur Ã  un facteur, on doit transmettre le texte correspondant Ã  la modalitÃ©, alors que pour un vecteur labellisÃ© on transmettra le code sous-jacent (pour rappel, les Ã©tiquettes de valeur ne sont quâ€™une information additionnelle).</p>
<p>De plus, nous avons vu que les donnÃ©es initiales nâ€™Ã©taient pas modifiÃ©es par lâ€™ajout ou la suppression dâ€™Ã©tiquettes de valeur, alors que pour les facteurs ce nâ€™est pas vrai. Pour mieux comprendre, essayons la commande suivanteÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unclass</span>(<span class="kw">factor</span>(v))</code></pre></div>
<pre><code>[1] 1 1 2 1 2
attr(,"levels")
[1] "f" "h"</code></pre>
<p>Un facteur stocke de maniÃ¨re interne les valeurs sous la forme dâ€™une suite dâ€™entiers, dÃ©marrant toujours par 1 et forcÃ©ments consÃ©cutifs, et dont les valeurs dÃ©pendent de lâ€™ordre des facteurs. Pour sâ€™en rendre compteÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unclass</span>(<span class="kw">factor</span>(v, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">"h"</span>, <span class="st">"f"</span>)))</code></pre></div>
<pre><code>[1] 2 2 1 2 1
attr(,"levels")
[1] "h" "f"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unclass</span>(<span class="kw">factor</span>(v, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">"f"</span>, <span class="st">"h"</span>)))</code></pre></div>
<pre><code>[1] 1 1 2 1 2
attr(,"levels")
[1] "f" "h"</code></pre>
</div>
<div id="facteurs-et-vecteurs-labellises_assignation-et-condition" class="section level3">
<h3>Assignation et condition</h3>
<p>Les Ã©tiquettes de valeur sont plus souples que les facteurs, en ce sens quâ€™il nâ€™est pas obligatoire dâ€™indiquer une Ã©tiquette pour chaque valeur prise par une variable. Alors quâ€™il nâ€™est pas possible avec un facteur dâ€™assigner une valeur qui nâ€™a pas Ã©tÃ© prÃ©alablement dÃ©finie comme une des modalitÃ©s possibles du facteur, nous nâ€™avons pas cette limite avec les vecteurs labellisÃ©s.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">femmes$region[<span class="dv">3</span>] &lt;-<span class="st"> </span><span class="dv">5</span></code></pre></div>
<p>ImportantÂ : quand on assigne une valeur Ã  un facteur, on doit transmettre le texte correspondant Ã  la modalitÃ©, alors que pour un vecteur labellisÃ© on transmettra le code sous-jacent (pour rappel, les Ã©tiquettes de valeur ne sont quâ€™une information additionnelle).</p>
<p>De plus, nous avons vu que les donnÃ©es initiales nâ€™Ã©taient pas modifiÃ©es par lâ€™ajout ou la suppression dâ€™Ã©tiquettes de valeur, alors que pour les facteurs ce nâ€™est pas vrai. Pour mieux comprendre, essayons la commande suivanteÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unclass</span>(<span class="kw">factor</span>(v))</code></pre></div>
<pre><code>[1] 1 1 2 1 2
attr(,"levels")
[1] "f" "h"</code></pre>
<p>Un facteur stocke de maniÃ¨re interne les valeurs sous la forme dâ€™une suite dâ€™entiers, dÃ©marrant toujours par 1 et forcÃ©ments consÃ©cutifs, et dont les valeurs dÃ©pendent de lâ€™ordre des facteurs. Pour sâ€™en rendre compteÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unclass</span>(<span class="kw">factor</span>(v, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">"h"</span>, <span class="st">"f"</span>)))</code></pre></div>
<pre><code>[1] 2 2 1 2 1
attr(,"levels")
[1] "h" "f"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unclass</span>(<span class="kw">factor</span>(v, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">"f"</span>, <span class="st">"h"</span>)))</code></pre></div>
<pre><code>[1] 1 1 2 1 2
attr(,"levels")
[1] "f" "h"</code></pre>
<p>Ce qui importe pour un facteur ce sont les modalitÃ©s de ce dernier tandis que pour un vecteur labellisÃ© ce sont les valeurs du vecteur elles-mÃªmes. Cela reste vrai pour lâ€™Ã©criture de conditions.</p>
<p>Prenons un premier exemple avec un facteurÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">describe</span>(d$sexe)</code></pre></div>
<pre><code>[2000 obs.] 
nominal factor: "Homme" "Femme" "Homme" "Homme" "Femme" ...
2 levels: Homme | Femme
NAs: 0 (0%)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$sexe ==<span class="st"> "Homme"</span>)</code></pre></div>
<pre><code>
FALSE  TRUE 
 1100   900 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$sexe ==<span class="st"> </span><span class="dv">1</span>)</code></pre></div>
<pre><code>
FALSE 
 2000 </code></pre>
<p>La condition valide est celle utilisant <code>"Homme"</code> qui est la valeur de la modalitÃ© du facteur.</p>
<p>Et avec un vecteur labellisÃ©Â ?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">describe</span>(femmes$milieu)</code></pre></div>
<pre><code>[2000 obs.] Milieu de rÃ©sidence
labelled numeric: 2 2 5 2 2 ...
min: 1 - max: 5 - NAs: 0 (0%) - 3 unique values
2 value labels: [1] urbain [2] rural</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(femmes$milieu ==<span class="st"> "urbain"</span>)</code></pre></div>
<pre><code>
FALSE 
 2000 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(femmes$milieu ==<span class="st"> </span><span class="dv">1</span>)</code></pre></div>
<pre><code>
FALSE  TRUE 
 1088   912 </code></pre>
<p>Ici, pour Ãªtre valide, la condition doit porter sur les valeurs de la variable elle-mÃªme et non sur les Ã©tiquette.</p>
</div>
<div id="facteurs-et-vecteurs-labellises_definir-des-valeurs-manquantes" class="section level3">
<h3>DÃ©finir des valeurs manquantes</h3>
<p>Nous avons que sous <strong>R</strong> nous pouvions indiquer des valeurs manquantes avec <code>NA</code>. Or, dans le domaine des enquÃªtes, il arrive frÃ©quemment que lâ€™on ait besoin de pouvoir spÃ©cifier plusieurs types de valeurs manquantes. En effet, le fait que lâ€™enquÃªtÃ© ne sache pas quoi rÃ©pondre Ã  une question nâ€™est pas la mÃªme chose quâ€™un refus de rÃ©pondre ou encore quâ€™un oubli de rÃ©pondre (i.e.Â aucune case nâ€™a Ã©tÃ© cochÃ©e sur le questionnaire papier). Il est alors frÃ©quent dans ces enquÃªtes dâ€™utiliser diffÃ©rents codes pour indiquer ces cas de figure. Les habituÃ©s de <strong>SPSS</strong> savent quâ€™il est possible dans ce logiciel dâ€™indiquer quelles valeurs spÃ©cifiques doivent Ãªtre considÃ©rÃ©es comme manquantes.</p>
<p>La fonction <code data-pkg="labelled">missing_val</code> de lâ€™extension <code class="pkg">labelled</code> permet de spÃ©cifier quelles valeurs doivent Ãªtre considÃ©rÃ©es comme manquantes. Prenons un exempleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">8</span>, <span class="dv">3</span>, <span class="dv">9</span>)
<span class="kw">val_labels</span>(v) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">oui =</span> <span class="dv">1</span>, <span class="st">`</span><span class="dt">peut-Ãªtre</span><span class="st">`</span> =<span class="st"> </span><span class="dv">2</span>, <span class="dt">non =</span> <span class="dv">3</span>, 
  <span class="st">`</span><span class="dt">ne sait pas</span><span class="st">`</span> =<span class="st"> </span><span class="dv">8</span>, <span class="dt">refus =</span> <span class="dv">9</span>)
v</code></pre></div>
<pre><code>&lt;Labelled double&gt; 
[1] 1 2 1 8 3 9

Labels:
 value       label is_na
     1         oui FALSE
     2   peut-Ãªtre FALSE
     3         non FALSE
     8 ne sait pas FALSE
     9       refus FALSE</code></pre>
<p>Ã€ ce stade, aucune valeur manquante nâ€™a encore Ã©tÃ© dÃ©finie. Ce que lâ€™on peut voir dans la colonne <code>is_na</code> qui ne contient que <code>FALSE</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">missing_val</span>(v) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">8</span>, <span class="dv">9</span>)
v</code></pre></div>
<pre><code>&lt;Labelled double&gt; 
[1] 1 2 1 8 3 9

Labels:
 value       label is_na
     1         oui FALSE
     2   peut-Ãªtre FALSE
     3         non FALSE
     8 ne sait pas  TRUE
     9       refus  TRUE</code></pre>
<p>Nous avons maintenant indiquÃ© que 8 et 9 doivent Ãªtre considÃ©rÃ©es comme manquantes. La classe <code data-pkg="labelled">labelled</code> impose quâ€™une valeur manquante ait une Ã©tiquette de valeur. Si lâ€™on essaie dâ€™attribuer une valeur manquante qui nâ€™a pas dâ€™Ã©tiquette, on obtient un message dâ€™erreur.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">missing_val</span>(v) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>)</code></pre></div>
<pre><code>Error: no value label found for 7, please specify `force`</code></pre>
<p>On peut indiquer avec lâ€™argument <code>force</code> ce que lâ€™on souhaite faire dans ces cas-lÃ Â : <code>FALSE</code> si lâ€™on souhaite ne pas tenir compte des valeurs manquantes qui nâ€™ont pas dâ€™Ã©tiquette (et ne seront donc pas considÃ©rÃ©es comme maquantes) ou <code>TRUE</code> pour crÃ©er automatiquement une Ã©tiquette Ã  ces valeurs qui nâ€™en ont pas encore une.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">missing_val</span>(v, <span class="dt">force =</span> <span class="ot">FALSE</span>) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>)
v</code></pre></div>
<pre><code>&lt;Labelled double&gt; 
[1] 1 2 1 8 3 9

Labels:
 value       label is_na
     1         oui FALSE
     2   peut-Ãªtre FALSE
     3         non FALSE
     8 ne sait pas  TRUE
     9       refus  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">missing_val</span>(v, <span class="dt">force =</span> <span class="ot">TRUE</span>) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>)
v</code></pre></div>
<pre><code>&lt;Labelled double&gt; 
[1] 1 2 1 8 3 9

Labels:
 value       label is_na
     1         oui FALSE
     2   peut-Ãªtre FALSE
     3         non FALSE
     8 ne sait pas  TRUE
     9       refus  TRUE
     7           7  TRUE</code></pre>
<p>Ã€ cette Ã©tape, nous nâ€™avons fait quâ€™indiquer que ces valeurs devraient Ãªtre considÃ©rÃ©es comme manquantes. Pour autant, elles sont toujours prÃ©sentes dans notre vecteur et considÃ©rÃ©es comme des valeurs valides par les fonctions statistiques de <strong>R</strong>.</p>
<p>Prenons un nouvel exempleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">notes &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">12</span>, <span class="dv">16</span>, <span class="dv">99</span>, <span class="dv">14</span>, <span class="dv">17</span>)
<span class="kw">val_label</span>(notes, <span class="dv">99</span>) &lt;-<span class="st"> "absent le jour de l'examen"</span>
<span class="kw">missing_val</span>(notes) &lt;-<span class="st"> </span><span class="dv">99</span>
notes</code></pre></div>
<pre><code>&lt;Labelled double&gt; 
[1] 12 16 99 14 17

Labels:
 value                      label is_na
    99 absent le jour de l'examen  TRUE</code></pre>
<p>Calculons la moyenne de la classeÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(notes)</code></pre></div>
<pre><code>Warning in mean.labelled(notes): x has self-
defined missing values and missing_to_na is not
specified</code></pre>
<pre><code>[1] 31.6</code></pre>
<p>HmmmÂ ! Ce rÃ©sultat nâ€™est certainement pas le bon. Cela vient de notre valeur 99. Elle a Ã©tÃ© prise en compte lors du calcul de notre moyenne. Lorsque lâ€™on travaille avec des vecteurs labellisÃ©s, mÃªme si lâ€™on a spÃ©cifiÃ© des valeurs manquantes, câ€™est Ã  lâ€™utilisateur de de dire explicitement si pour une analyse donnÃ©e ces valeurs spÃ©cifiÃ©es comme manquantes doivent Ãªtre transformÃ©es en <code>NA</code>. Cela se fait Ã  lâ€™aide de la fonction <code data-pkg="labelled">missing_to_na</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(<span class="kw">missing_to_na</span>(notes), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 14.75</code></pre>
<p>La mÃ©thode <code data-pkg="labelled" data-rdoc="mean.labelled">mean</code> ayant Ã©tÃ© dÃ©finie pour les vecturs labellisÃ©es dans lâ€™extension <strong class="pkg">labelled</strong>, il est Ã©galement possible de faire directementÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(notes, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>, <span class="dt">missing_to_na =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 14.75</code></pre>
<p>Cette fois-ci, notre valeur 99 a bien Ã©tÃ© exclue du calcul de la moyenne de la classe.</p>
</div>
<div id="facteurs-et-vecteurs-labellises_quelques-fonctions-supplementaires" class="section level3">
<h3>Quelques fonctions supplÃ©mentaires</h3>
<p>Lâ€™extension <code class="pkg">labelled</code> fournit quelques fonctions supplÃ©mentaires qui peuvent sâ€™avÃ©rer utilesÂ :</p>
<ul>
<li><code data-pkg="labelled">labelled</code> pour crÃ©er directement des vecteurs labellisÃ©sÂ ;</li>
<li><code data-pkg="labelled">nolabel_to_na</code> pour convertir les valeurs nâ€™ayant pas dâ€™Ã©tiquette en <code>NA</code>Â ;</li>
<li><code data-pkg="labelled">val_labels_to_na</code> qui, Ã  lâ€™inverse, converti les valeurs avec Ã©tiquette en <code>NA</code>Â ;</li>
<li><code data-pkg="labelled">sort_val_labels</code> pour trier lâ€™ordre des Ã©tiquettes de valeurs.</li>
</ul>
<p>On pourra se rÃ©ferrer Ã  lâ€™aide de chacune de ces fonctions.</p>
<p>Lâ€™<a href="#import-de-donnees">import de donnÃ©es labellisÃ©es</a> et le <a href="#recodage">recodage de variables</a> (dont la conversion dâ€™un vecteur labellisÃ© en facteur) seront quant Ã  eux abordÃ©s dans de prochains chapitres.</p>
</div>
</div>

</article>
<article id="organiser-ses-fichiers">

<div class="fluid-row" id="organiser-ses-fichiers_header">


<h1 class="title">Organiser ses fichiers</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#organiser-ses-fichiers_le-repertoire-de-travail">Le rÃ©pertoire de travail</a></li>
<li><a href="#organiser-ses-fichiers_les-projets-dans-rstudio">Les projets dans RStudio</a><ul>
<li><a href="#organiser-ses-fichiers_creer-un-nouveau-projet">CrÃ©er un nouveau projet</a></li>
<li><a href="#organiser-ses-fichiers_fonctionnement-par-defaut-des-projets">Fonctionnement par dÃ©faut des projets</a></li>
<li><a href="#organiser-ses-fichiers_options-des-projets">Options des projets</a></li>
<li><a href="#organiser-ses-fichiers_naviguer-dun-projet-a-un-autre">Naviguer dâ€™un projet Ã  un autre</a></li>
<li><a href="#organiser-ses-fichiers_voir-aussi">Voir aussi</a></li>
</ul></li>
<li><a href="#organiser-ses-fichiers_appeler-un-script-depuis-un-autre-script">Appeler un script depuis un autre script</a></li>
</ul>
</div>

<div id="organiser-ses-fichiers_le-repertoire-de-travail" class="section level2">
<h2>Le rÃ©pertoire de travail</h2>
<p>Ã€ chaque fois que lâ€™on demandera Ã  <strong>R</strong> de charger ou dâ€™enregistrer un fichier (en particulier lorsque lâ€™on cherchera Ã  importer des donnÃ©es, voir le <a href="#import-de-donnees">chapitre dÃ©diÃ©</a>), <strong>R</strong> Ã©valuera le nom du fichier quâ€™on lui a transmis par rapport au <dfn>rÃ©pertoire de travail</dfn> actuellement dÃ©fini, qui correspond au rÃ©pertoire dans lequel <strong>R</strong> est actuellement en train de sâ€™exÃ©cuter.</p>
<p>Pour connaÃ®tre de le rÃ©pertoire de travail actuel, on pourra utiliser la fonction <code data-pkg="base">getwd</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getwd</span>()</code></pre></div>
<p>Lorsque lâ€™on travaille sous <strong>RStudio</strong>, le rÃ©pertoire de travail est Ã©galement affichÃ© dans le quadrant infÃ©rieur droit, en gris, Ã  la droite du mot <em>Console</em> (voir la capture dâ€™Ã©cran ci-aprÃ¨s).</p>
<figure>
<img src="images/capture_RStudio_workingdir.png" alt="Affichage du rÃ©pertoire de travail sous RStudio"/>
<figcaption>
Affichage du rÃ©pertoire de travail sous RStudio
</figcaption>
</figure>
<p>Le symbole <code>~</code> correspond dans ce cas-lÃ  au rÃ©pertoire utilisateur systÃ¨me, dont lâ€™emplacement dÃ©pend du systÃ¨me dâ€™exploitation. Sous <strong>Windows</strong>, il sâ€™agit du rÃ©pertoire <em>Mes documents</em> ou <em>Documents</em> (le nom varie suivant la version de <strong>Windows</strong>).</p>
<p>Le rÃ©pertoire de travail peut Ãªtre modifiÃ© avec la fonction <code data-pkg="base" data-rdoc="getwd">setwd</code> ou, sous <strong>RStudio</strong>, via le menu <em>Session &gt; Set Working Directory</em>. Cependant, nous allons voir que nous nâ€™aurons en pratique presque jamais besoin de le faire si lâ€™on travaille avec <strong>RStudio</strong>.</p>
</div>
<div id="organiser-ses-fichiers_les-projets-dans-rstudio" class="section level2">
<h2>Les projets dans RStudio</h2>
<p><strong>RStudio</strong> dispose dâ€™une fonctionnalitÃ© trÃ¨s pratique pour organiser son travail en diffÃ©rents <dfn date-inedx="projet, RStudio">projets</dfn>.</p>
<p>Lâ€™idÃ©e principale est de rÃ©unir tous les fichiers / documents relatifs Ã  un mÃªme projet (que ce soit les donnÃ©es, les scripts, les rapports automatisÃ©sâ€¦) dans un rÃ©pertoire dÃ©diÃ©<a href="#organiser-ses-fichiers_fn1" class="footnoteRef" id="organiser-ses-fichiers_fnref1"><sup>1</sup></a>.</p>
<p>Le menu <em>Projects</em> est accessible via une icÃ´ne dÃ©diÃ©e situÃ©e tout en haut Ã  droite (voir la capture dâ€™Ã©cran ci-aprÃ¨s).</p>
<figure>
<img src="images/capture_RStudio_icone_projet.png" alt="AccÃ¨s au menu Projects sous RStudio"/>
<figcaption>
AccÃ¨s au menu Projects sous RStudio
</figcaption>
</figure>
<div id="organiser-ses-fichiers_creer-un-nouveau-projet" class="section level3">
<h3>CrÃ©er un nouveau projet</h3>
<p>Dans le menu <em>Projects</em> on sÃ©lectionnera lâ€™option <em>New project</em>. <strong>RStudio</strong> nous demandera dans un premier temps si lâ€™on souhaite crÃ©er un projet (i) dans un nouveau rÃ©pertoire, (ii) dans un rÃ©pertoire dÃ©jÃ  existant ou bien (iii) Ã  partir dâ€™un <dfn>gestionnaire de versions</dfn> (<strong>Git</strong> ou <strong>SVN</strong>).</p>
<figure>
<img src="images/capture_RStudio_nouveau_projet.png" alt="Options de crÃ©ation de projet sous RStudio"/>
<figcaption>
Options de crÃ©ation de projet sous RStudio
</figcaption>
</figure>
<p>Si vous dÃ©butez avec <strong>R</strong>, laissez de cÃ´tÃ© pour le moment les gestionnaires de versions qui sont destinÃ©s aux utilisateurs avancÃ©s (et prÃ©sentÃ©s dans le chapitre <a href="#git">Git</a>). Dans le cadre dâ€™un usage courant, on aura recours Ã  <em>New Directory</em>.</p>
<p><strong>RStudio</strong> nous demande alors le type de projet que lâ€™on souhaite crÃ©erÂ : (i) un projet vide, (ii) une extension <strong>R</strong> ou (iii) une application <strong>Shiny</strong>.</p>
<figure>
<img src="images/capture_RStudio_types_projet.png" alt="Les diffÃ©rents types de projet sous RStudio"/>
<figcaption>
Les diffÃ©rents types de projet sous RStudio
</figcaption>
</figure>
<p>Il est encore un peu tÃ´t pour se lancer dans la crÃ©ation de sa propre extension pour <strong>R</strong> (voir le chapitre <a href="#developper-un-package">DÃ©velopper un package</a>). Les applications <strong>Shiny</strong> (voir le <a href="#shiny-les-interfaces-interactives">chapitre dÃ©diÃ©</a>) sont des applications webs interactives. LÃ  encore, on attendra une meilleure maÃ®trise de <strong>R</strong> pour se lancer dans ce type de projets. Dans un contexte dâ€™analyse dâ€™enquÃªtes, on choisira dÃ¨s lors <em>Empty project</em>.</p>
<figure>
<img src="images/capture_RStudio_create_new_project.png" alt="CrÃ©ation dâ€™un projet dans un nouveau rÃ©pertoire avec RStudio"/>
<figcaption>
CrÃ©ation dâ€™un projet dans un nouveau rÃ©pertoire avec RStudio
</figcaption>
</figure>
<p>En premier lieu, on indiquera le nom de notre projet, qui sera Ã©galement le nom du rÃ©pertoire qui sera crÃ©Ã© pour stocker les donnÃ©es du projet. Puis, on indiquera le rÃ©pertoire parent, câ€™est-Ã -dire le rÃ©pertoire dans lequel le rÃ©pertoire de notre projet sera crÃ©Ã©.</p>
<p>Les deux options suivantes concernent que les utilisateurs avancÃ©s. <strong>RStudio</strong> nous demande sâ€™il on veut activer <strong>Git</strong> sur ce projet (<strong>Git</strong> Ã©tant un gestionnaire de versions, lâ€™option nâ€™Ã©tant affichÃ©e que si <strong>Git</strong> est installÃ© sur votre PC) et sâ€™il on souhaite utiliser lâ€™extension <code class="pkg">packrat</code> sur ce projet. <code class="pkg">packrat</code> permet une gestion des extensions utilisÃ©es, projet par projet, ce qui nâ€™est vraiment utile que dans le cadre dâ€™analyses bien spÃ©cifiques.</p>
<p>Il ne nous reste plus quâ€™Ã  cliquer sur <em>Create Project</em>.</p>
</div>
<div id="organiser-ses-fichiers_fonctionnement-par-defaut-des-projets" class="section level3">
<h3>Fonctionnement par dÃ©faut des projets</h3>
<p>Lorsque lâ€™on ouvre un projet, <strong>RStudio</strong> effectue diffÃ©rentes actionsÂ :</p>
<ul>
<li>le nom du projet est affichÃ© en haut Ã  droite Ã  cÃ´tÃ© de lâ€™icÃ´ne projetsÂ ;</li>
<li>une nouvelle session <strong>R</strong> est exÃ©cutÃ©e (ainsi sâ€™il on passe dâ€™un projet Ã  un autre, les objets du projet quâ€™on vient de fermer ne sont plus en mÃ©moire)Â ;</li>
<li>le rÃ©pertoire de travail de <strong>R</strong> est dÃ©fini comme Ã©tant le rÃ©pertoire du projet (dâ€™oÃ¹ le fait que lâ€™on nâ€™a pas Ã  se prÃ©occuper de dÃ©finir le rÃ©pertoire de travail lorsque lâ€™on travaille avec des projets <strong>RStudio</strong>)Â ;</li>
<li>les objets crÃ©Ã©s (et sauvegardÃ©s dans le fichier <code>.Rdata</code>) lors dâ€™une prÃ©cÃ©dente sÃ©ance de travail sont chargÃ©s en mÃ©moireÂ ;</li>
<li>lâ€™historique des commandes saisies lors de nos prÃ©cÃ©dentes sÃ©ances de travail sont chargÃ©es dans lâ€™onglet <em>History</em>Â ;</li>
<li>les scripts ouverts lors dâ€™une prÃ©cÃ©dente sÃ©ance de travail sont automatiquement ouvertsÂ ;</li>
<li>divers paramÃ¨tres de <strong>RStudio</strong> sont restaurÃ©s dans lâ€™Ã©tat dans lequel ils Ã©taient la derniÃ¨re fois que lâ€™on a travaillÃ© sur ce projet.</li>
</ul>
<p>Autrement dit, lorsque lâ€™on ouvre un projet <strong>RStudio</strong>, on revient Ã  lâ€™Ã©tat de notre projet tel quâ€™il Ã©tait la derniÃ¨re fois que lâ€™on a travaillÃ© dessus. Pratique, nonÂ ?</p>
<p>Petite prÃ©cision toutefois, les extensions que lâ€™on avait chargÃ©es en mÃ©moire avec la fonction <code data-pkg="base">library</code> ne sont pas systÃ©matiquement rechargÃ©es en mÃ©moire. Il faudra donc les appeler Ã  nouveau lors de notre sÃ©ance de travail.</p>
</div>
<div id="organiser-ses-fichiers_options-des-projets" class="section level3">
<h3>Options des projets</h3>
<p>Via le menu <em>Projects &gt; Projects options</em> (accessible via lâ€™icÃ´ne projets en haut Ã  droite), il est possible de personnaliser plusieurs options spÃ©cifiquement pour ce projet.</p>
<p>On retiendra surtout les 3 options principales de lâ€™onglet <em>General</em>Â :</p>
<ul>
<li>Ã  lâ€™ouverture du projet, doit-on charger en mÃ©moire les objets sauvegardÃ©s lors dâ€™une prÃ©cÃ©dente sÃ©ance de travailÂ ?</li>
<li>Ã  la fermeture du projet, doit-son sauvegarder (dans le fichier <code>.Rdata</code>) les diffÃ©rents objets en mÃ©moireÂ ? Si lâ€™on choisit lâ€™option <em>Ask</em>, alors une fenÃªtre vous demandera sâ€™il faut faire cette sauvegarde chaque fois que vous fermerez le projet.</li>
<li>Ã  la fermeture du projet, faut-il sauver lâ€™historique des commandesÂ ?</li>
</ul>
</div>
<div id="organiser-ses-fichiers_naviguer-dun-projet-a-un-autre" class="section level3">
<h3>Naviguer dâ€™un projet Ã  un autre</h3>
<p><strong>RStudio</strong> se souvient des derniers projets sur lesquels vous avez travaillÃ©. Lorsque vous cliquez sur le menu projets, vous verrez une liste de ces diffÃ©rents projets. Il suffit de cliquer sur le nom du projet dÃ©sirÃ© pour fermer automatiquement le projet en cours et ouvrir le projet dÃ©sirÃ©.</p>
<p>Votre projet nâ€™apparait pas dans la listeÂ ? Pas de panique. Il suffit de sÃ©lectionner <em>Open project</em> puis de parcourir vos rÃ©pertoires pour indiquer Ã  <strong>RStudio</strong> le projet Ã  ouvrir.</p>
<p>Vous pouvez noter au passage une option <em>Open project in new window</em> qui permet dâ€™ouvrir un projet dans une nouvelle fenÃªtre. En effet, il est tout Ã  fait possible dâ€™avoir plusieurs projets ouverts en mÃªme temps. Dans ce cas lÃ , chaque projet aura sa propre session <strong>R</strong>. Les objets chargÃ©s en mÃ©moire pour le projet A ne seront pas accessibles dans le cadre du projet B et inversement.</p>
</div>
<div id="organiser-ses-fichiers_voir-aussi" class="section level3">
<h3>Voir aussi</h3>
<p>On pourra se rÃ©fÃ©rer Ã  la documentation officielle de <strong>RStudio</strong>Â : <a href="https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects" class="uri">https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects</a>.</p>
</div>
</div>
<div id="organiser-ses-fichiers_appeler-un-script-depuis-un-autre-script" class="section level2">
<h2>Appeler un script depuis un autre script</h2>
<p>Au sein dâ€™un mÃªme projet, on peut avoir plusieurs <dfn data-index="script">scripts <strong>R</strong></dfn>. Cela permet de mieux organiser son code. Par exemple, on pourra avoir un premier script chargÃ© dâ€™importer les donnÃ©es, un second dÃ©diÃ© Ã  la crÃ©ation de nouvelles variables et un troisiÃ¨me dÃ©diÃ© aux analyses statistiques.</p>
<p>Il est possible dâ€™appeler un script au sein dâ€™un autre script Ã  lâ€™aide de la fonction <code data-pkg="base">source</code> Ã  laquelle on prÃ©cisera le nom de fichier du script en question.</p>
<p>Supposons par exemple que lâ€™on ait prÃ©parÃ© un script <code>preparation.R</code> chargÃ© dâ€™importer les donnÃ©es et de les mettre en forme. Au debut de notre script <code>analyses.R</code>, on pourra indiquerÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">source</span>(<span class="st">"preparation.R"</span>)</code></pre></div>
<p>Si lâ€™on exÃ©cute notre script <code>analyses.R</code>, au moment de lâ€™appel Ã  <code>source("preparation.R")</code>, le fichier <code>preparation.R</code> sera chargÃ© en mÃ©moire et exÃ©cutÃ©, puis le programme continuera avec les commandes suivant du fichier <code>analyses.R</code>.</p>
<p>Ici, on a indiquÃ© Ã  <code data-pkg="base">source</code> le fichier <code>preparation.R</code> sans mention de rÃ©pertoire. DÃ¨s lors, <strong>R</strong> va aller chercher ce fichier dans le rÃ©pertoire de travail. Sur un gros projet, on peut Ãªtre amenÃ© Ã  organiser ses fichiers en plusieurs sous-rÃ©pertoires pour une meilleure lisibilitÃ©. DÃ¨s lors, il faudra indiquer le <dfn>chemin relatif</dfn> pour accÃ©der Ã  un fichier, câ€™est-Ã -dire le chemin Ã  partir du rÃ©pertoire de travail. Supposons que notre fichier <code>preparation.R</code> est enregistrÃ© dans un sous-rÃ©pertoire <code>import</code>. Dans ce cas-lÃ , on appelera notre fichier ainsiÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">source</span>(<span class="st">"import/preparation.R"</span>)</code></pre></div>
<div class="note">
<p>On remarquera quâ€™on a utilisÃ© une barre oblique ou <em>slash</em> (<code>/</code>) entre le nom du rÃ©pertoire et le nom du fichier, ce qui est lâ€™usage courant sous <strong>Linux</strong> et <strong>Mac OS X</strong>, tandis que sous <strong>Windows</strong> on utilise dâ€™ordinaire une barre oblique inversÃ©e ou <em>antislash</em> (<code>\</code>). Sous <strong>R</strong>, on utilisera toujours la barre oblique simple (<code>/</code>), <strong>R</strong> sachant Â«Â retrouver ses petitsÂ Â» selon le systÃ¨me dâ€™exploitation.</p>
<p>Par ailleurs, lâ€™<dfn>autocomplÃ©tion</dfn> de <strong>RStudio</strong> fonctionne aussi pour les noms de fichiers. Essayez par exemple dâ€™appuyer sur la touche <kbd>Tab</kbd> aprÃ¨s avoir taper les premiÃ¨res lettres du nom de votre fichier.</p>
</div>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="organiser-ses-fichiers_fn1"><p>Dans lequel il sera possible de crÃ©er des sous-rÃ©pertoires.<a href="#organiser-ses-fichiers_fnref1">â†©</a></p></li>
</ol>
</div>

</article>
<article id="import-de-donnees">

<div class="fluid-row" id="import-de-donnees_header">


<h1 class="title">Import de donnÃ©es</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#import-de-donnees_importer-des-fichiers-texte">Importer des fichiers texte</a><ul>
<li><a href="#import-de-donnees_structure-dun-fichier-texte">Structure dâ€™un fichier texte</a></li>
<li><a href="#import-de-donnees_read_table">La fonction read.table</a></li>
<li><a href="#import-de-donnees_interface-graphique-avec-rstudio">Interface graphique avec RStudio</a></li>
</ul></li>
<li><a href="#import-de-donnees_importer-depuis-des-logiciels-de-statistique">Importer depuis des logiciels de statistique</a><ul>
<li><a href="#import-de-donnees_spss">SPSS</a></li>
<li><a href="#import-de-donnees_sas">SAS</a></li>
<li><a href="#import-de-donnees_stata">Stata</a></li>
<li><a href="#import-de-donnees_excel">Excel</a></li>
<li><a href="#import-de-donnees_dbase">dBase</a></li>
</ul></li>
<li><a href="#import-de-donnees_donnees-spatiales">DonnÃ©es spatiales</a><ul>
<li><a href="#import-de-donnees_shapefile">Shapefile</a></li>
<li><a href="#import-de-donnees_rasters">Rasters</a></li>
</ul></li>
<li><a href="#import-de-donnees_autres-sources">Autres sources</a></li>
<li><a href="#import-de-donnees_sauver-ses-donnees">Sauver ses donnÃ©es</a></li>
</ul>
</div>

<p><dfn data-index="donnÃ©es, exporter"/><dfn data-index="exporter des donnÃ©es"/></p>
<div class="important">
<p>Importer des donnÃ©es est souvent lâ€™une des premiÃ¨re opÃ©rations que lâ€™on effectue lorsque lâ€™on dÃ©bute sous <strong>R</strong>, et ce nâ€™est pas la moins compliquÃ©e. En cas de problÃ¨me il ne faut donc pas hÃ©siter Ã  demander de lâ€™aide par les diffÃ©rents moyens disponibles (voir le chapitre <a href="#ou-trouver-de-l-aide">OÃ¹ trouver de lâ€™aideÂ ?</a>) avant de se dÃ©courager.</p>
<p>Nâ€™hÃ©sitez donc pas Ã  relire rÃ©guliÃ¨rement ce chapitre en fonction de vos besoins.</p>
<p>Avant toute chose, il est impÃ©ratif de bien organiser ses diffÃ©rents fichiers (voir le <a href="#organiser-ses-fichiers">chapitre dÃ©diÃ©</a>). Concernant les donnÃ©es sources que lâ€™on utilisera pour ses analyses, je vous recommande de les placer dans un sous-rÃ©pertoire dÃ©diÃ© de votre projet.</p>
<p>Lorsque lâ€™on importe des donnÃ©es, il est Ã©galement impÃ©ratif de vÃ©rifier que lâ€™import sâ€™est correctement dÃ©roulÃ© (voir la section <a href="#premier-travail-avec-les-donnees_inspecter">Inspecter les donnÃ©es</a> du chapitre <em>Premier travail avec les donnÃ©es</em>).</p>
</div>
<div id="import-de-donnees_importer-des-fichiers-texte" class="section level2">
<h2>Importer des fichiers texte</h2>
<p>Les <dfn data-index="fichier texte">fichiers texte</dfn><dfn data-index="texte, fichier"/> constituent un des formats les plus largement supportÃ©s par la majoritÃ© des logiciels statistiques. Presque tous permettent dâ€™exporter des donnÃ©es dans un format texte, y compris les tableurs comme <strong>Libre Office</strong>, <strong>Open Office</strong> ou <strong>Excel</strong>.</p>
<p>Cependant, il existe une grande variÃ©tÃ©s de format texte, qui peuvent prendre diffÃ©rents noms selon les outils, tels que <dfn data-index="texte tabulÃ©, fichier">texte tabulÃ©</dfn> ou <em>texte (sÃ©parateurÂ : tabulation)</em>, <strong>CSV</strong> <dfn data-index="CSV, fichier"/> (pour <em>comma-separated value</em>, sachant que suivant les logiciels le sÃ©parateur peut Ãªtre une virgule ou un point-virgule).</p>
<div id="import-de-donnees_structure-dun-fichier-texte" class="section level3">
<h3>Structure dâ€™un fichier texte</h3>
<p>DÃ¨s lors, avant dâ€™importer un fichier texte dans <strong>R</strong>, il est indispensable de regarder comment ce dernier est structurÃ©. Pour cela, il faut tout dâ€™abord lâ€™ouvrir avec un Ã©diteur de texte pour voir comment les donnÃ©es se prÃ©sentent.</p>
<p>Pour lâ€™exemple, tÃ©lÃ©chargez le fichier <a href="http://larmarange.github.io/analyse-R/data/exemple_texte_tabule.txt" class="uri">http://larmarange.github.io/analyse-R/data/exemple_texte_tabule.txt</a> et copiez-le dans un sous-rÃ©pertoire <code>data</code> de votre projet. Nous pouvons directement ouvrir ce fichier avec <strong>RStudio</strong>, soit via le menu <em>File &gt; Open file</em>, soit en cliquant sur ce fichier dans lâ€™onglet <em>Files</em> du quadrant infÃ©rieur droit.</p>
<p>Le fichier apparaÃ®t dÃ¨s lors dans un onglet dÃ©diÃ© du quadrant supÃ©rieur gauche. Cependant, par dÃ©faut, on peut pas voir la diffÃ©rence entre un espace, une tabulation ou un retour Ã  la ligne, câ€™est-Ã -dire entre les caractÃ¨res qui sont invisibles Ã  lâ€™Ã©cran. Pour les afficher, il faut se rendre dans le menu <em>Tools &gt; Global options &gt; Code &gt; Display</em> et activer lâ€™option <em>Show whitespaces characters</em>. DÃ¨s lors, les espaces sont indiquÃ©s par un petit point gris, les tabulations par une petite flÃ¨che et les retours Ã  la ligne par une sorte de Â«Â tiret pliÃ© Ã  droite vers le basÂ Â».</p>
<figure>
<img src="images/capture_RStudio_visualisation_fichier_texte.png" alt="Visualisation dâ€™un fichier texte sous RStudio"/>
<figcaption>
Visualisation dâ€™un fichier texte sous RStudio
</figcaption>
</figure>
<p>Il importe de prendre note des Ã©lÃ©ments suivantsÂ :</p>
<ul>
<li>La premiÃ¨re ligne contient-elle le nom des variablesÂ ? Ici câ€™est le cas.</li>
<li>Quel est le caractÃ¨re sÃ©parateur entre les diffÃ©rentes variables (encore appelÃ© <dfn>sÃ©parateur de champs</dfn>)Â ? Ici, <strong>RStudio</strong> affiche une petite flÃ¨che. Il sâ€™agit donc dâ€™une tabulation. Dans le cadre dâ€™un fichier <strong>CSV</strong>, il aurait pu sâ€™agir dâ€™une virgule ou dâ€™un point-virgule.</li>
<li>Quel est le caractÃ¨re utilisÃ© pour indiquer les dÃ©cimales (le <dfn>sÃ©parateur dÃ©cimal</dfn>)Â ? Il sâ€™agit en gÃ©nÃ©ral dâ€™un point (Ã  lâ€™anglo-saxonne) ou dâ€™une virgule (Ã  la franÃ§aise). Ici, câ€™est la virgule qui est utilisÃ©e.</li>
<li>Les valeurs textuelles sont-elles encadrÃ©es par des guillemets et, si oui, sâ€™agit-il de guillements simple (<code>'</code>) ou de guillemets doubles (<code>"</code>)Â ? Ici, il sâ€™agit de guillemets simples.</li>
<li>Pour les variables textuelles, y a-t-il des <dfn data-index="valeur manquante">valeurs manquantes</dfn> <dfn data-index="manquante, valeur"/>et si oui comment sont-elles indiquÃ©esÂ ? Par exemple, le texte <code>NA</code> est parfois utilisÃ©. Dans notre exemple, il sâ€™agit de la chaÃ®ne de caractÃ¨res vide (que lâ€™on note <code>""</code> sous <strong>R</strong>) qui est utilisÃ©e pour indiquer une valeur manquante.</li>
</ul>
</div>
<div id="import-de-donnees_read_table" class="section level3">
<h3>La fonction read.table</h3>
<p>La fonction de base permettant dâ€™importer un fichier texte est la fonction <code data-pkg="utils">read.table</code>. Elle accepte de trÃ¨s nombreuses options. Pour toutes les afficher, on aura recours Ã  <code>?read.table</code>. Les plus importantes sontÂ :</p>
<table style="width:28%;">
<colgroup>
<col width="15%"/>
<col width="12%"/>
</colgroup>
<thead>
<tr class="header">
<th align="left">Argument</th>
<th align="left">DÃ©tail</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>header</code></td>
<td align="left"><code>TRUE</code> ou <code>FALSE</code>Â : indique si la premiÃ¨re ligne du fichier contient le nom des variables</td>
</tr>
<tr class="even">
<td align="left"><code>sep</code></td>
<td align="left">le sÃ©parateur de champsÂ : sâ€™il sâ€™agit dâ€™une virgule on indiquera <code>","</code>, pour une tabulation on entrera <code>"\t"</code></td>
</tr>
<tr class="odd">
<td align="left"><code>quote</code></td>
<td align="left">les guillemets utilisÃ©s autour des variables textes (si câ€™est le cas)Â : on saisira <code>""</code> si pas de guillemets, <code>"'"</code> pour des guillemets simples et <code>"\""</code> pour des guillemets doubles</td>
</tr>
<tr class="even">
<td align="left"><code>dec</code></td>
<td align="left">le sÃ©parateur dÃ©cimal, usuellement <code>"."</code> ou <code>","</code></td>
</tr>
<tr class="odd">
<td align="left"><code>na.strings</code></td>
<td align="left">les valeurs textuelles qui doivent Ãªtre interprÃ©tÃ©es comme manquantes</td>
</tr>
<tr class="even">
<td align="left"><code>stringsAsFactors</code></td>
<td align="left"><code>TRUE</code> ou <code>FALSE</code>Â : les variables textuelles doivent-elles Ãªtre converties en facteursÂ ?</td>
</tr>
</tbody>
</table>
<div class="note">
<p>Certains caractÃ¨res sont parfois prÃ©cÃ©dÃ©s dâ€™une barre oblique inversÃ©e ou <em>antislash</em> (<code>\</code>). Cela correspond Ã  des caractÃ¨res spÃ©ciaux. En effet, <code>"</code> est utilisÃ© pour dÃ©limiter dans le code le dÃ©but et la fin dâ€™une chaÃ®ne de caractÃ¨res. Comment indiquer Ã  <strong>R</strong> le caractÃ¨re <code>"</code> proprement dit. Et bien avec <code>\"</code>. De mÃªme, <code>\t</code> sera interprÃ©tÃ© comme une tabulation et non comme la lettre <code>t</code>.</p>
<p>Pour une liste complÃ¨te des caractÃ¨res spÃ©ciaux, voir <code>?Quotes</code>.</p>
</div>
<p>Pour en revenir Ã  notre exemple, on lâ€™importera donc ainsiÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">"data/exemple_texte_tabule.txt"</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, 
  <span class="dt">sep =</span> <span class="st">"</span><span class="ch">\t</span><span class="st">"</span>, <span class="dt">quote =</span> <span class="st">"'"</span>, <span class="dt">dec =</span> <span class="st">","</span>, <span class="dt">na.strings =</span> <span class="st">""</span>)
d</code></pre></div>
<pre><code>  Sexe Age Taille     Etudes
1    F  45   1.67   primaire
2    H  32   1.83       &lt;NA&gt;
3    H  24   1.72 supÃƒÂ©rieur
4    F  36   1.64 secondaire
5    F  23   1.54 supÃƒÂ©rieur
6    H  18   1.62   primaire
7    F  34   1.68 secondaire</code></pre>
<p>AÃ¯eÂ ! Que sâ€™est-il passÃ©Â ? Au lieu dâ€™afficher <code>supÃ©rieur</code>, <strong>R</strong> affiche <code>supÃƒÂ©rieur</code>. Câ€™est un problÃ¨me classique dâ€™<dfn>encodage</dfn> quand il y a des accents dans nos donnÃ©es. En effet, il y a de nombreuses maniÃ¨res diffÃ©rentes en informatique de coder les diffÃ©rents caractÃ¨res<a href="#import-de-donnees_fn1" class="footnoteRef" id="import-de-donnees_fnref1"><sup>1</sup></a>. La premiÃ¨re chose Ã  faire est donc de vÃ©rifier la documentation associÃ©e Ã  votre source de donnÃ©es. Il est possible que soit prÃ©cisÃ© lâ€™encodage des caractÃ¨res.</p>
<p>Si ce nâ€™est pas le cas, il est fort probable que vos donnÃ©es aient Ã©tÃ© encodÃ©es soit en <strong>latin1</strong> (langues europÃ©ennes occidentales), soit en <strong>UTF-8</strong> (unicode). On pourra donc essayer ces deux encodages et regarder le rÃ©sultat obtenu. Lâ€™encodage peut Ãªtre prÃ©cisÃ© avec lâ€™argument <code>encoding</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">"data/exemple_texte_tabule.txt"</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, 
  <span class="dt">sep =</span> <span class="st">"</span><span class="ch">\t</span><span class="st">"</span>, <span class="dt">quote =</span> <span class="st">"'"</span>, <span class="dt">dec =</span> <span class="st">","</span>, <span class="dt">na.strings =</span> <span class="st">""</span>, 
  <span class="dt">encoding =</span> <span class="st">"latin1"</span>)
d</code></pre></div>
<pre><code>  Sexe Age Taille     Etudes
1    F  45   1.67   primaire
2    H  32   1.83       &lt;NA&gt;
3    H  24   1.72 supÃƒÂ©rieur
4    F  36   1.64 secondaire
5    F  23   1.54 supÃƒÂ©rieur
6    H  18   1.62   primaire
7    F  34   1.68 secondaire</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">"data/exemple_texte_tabule.txt"</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, 
  <span class="dt">sep =</span> <span class="st">"</span><span class="ch">\t</span><span class="st">"</span>, <span class="dt">quote =</span> <span class="st">"'"</span>, <span class="dt">dec =</span> <span class="st">","</span>, <span class="dt">na.strings =</span> <span class="st">""</span>, 
  <span class="dt">encoding =</span> <span class="st">"UTF-8"</span>)
d</code></pre></div>
<pre><code>  Sexe Age Taille     Etudes
1    F  45   1.67   primaire
2    H  32   1.83       &lt;NA&gt;
3    H  24   1.72  supÃ©rieur
4    F  36   1.64 secondaire
5    F  23   1.54  supÃ©rieur
6    H  18   1.62   primaire
7    F  34   1.68 secondaire</code></pre>
<p>Notre fichier Ã©tait encodÃ© en <strong>UTF-8</strong>. ProblÃ¨me rÃ©soluÂ !</p>
<p><strong>R</strong> propose quelques fonctions qui sont des raccourcis de <code data-pkg="utils">read.table</code> correspondant aux situations les plus courantesÂ :</p>
<table style="width:28%;">
<colgroup>
<col width="6%"/>
<col width="6%"/>
<col width="6%"/>
<col width="6%"/>
</colgroup>
<thead>
<tr class="header">
<th align="left">Fonction</th>
<th align="center">SÃ©parateur de champs</th>
<th align="center">SÃ©parateur de dÃ©cimale</th>
<th align="center">Guillemets</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code data-pkg="utils" data-rdoc="read.table">read.csv</code></td>
<td align="center">virgule</td>
<td align="center">point</td>
<td align="center">doubles</td>
</tr>
<tr class="even">
<td align="left"><code data-pkg="utils" data-rdoc="read.table">read.csv2</code></td>
<td align="center">point-virgule</td>
<td align="center">point</td>
<td align="center">doubles</td>
</tr>
<tr class="odd">
<td align="left"><code data-pkg="utils" data-rdoc="read.table">read.delim</code></td>
<td align="center">tabulation</td>
<td align="center">point</td>
<td align="center">doubles</td>
</tr>
<tr class="even">
<td align="left"><code data-pkg="utils" data-rdoc="read.table">read.delim2</code></td>
<td align="center">tabulation</td>
<td align="center">virgule</td>
<td align="center">doubles</td>
</tr>
</tbody>
</table>
<div class="note">
<p>Une extension dÃ©diÃ©e Ã  lâ€™import de fichiers texte est en cours de dÃ©velopemmentÂ : <code class="pkg">readr</code>. Elle permet notamment de spÃ©cifier les colonnes correspondant des <dfn data-index="date, variable">variables date</dfn> afin quâ€™elles soient converties dans un format appropriÃ© Ã  lâ€™import.</p>
</div>
</div>
<div id="import-de-donnees_interface-graphique-avec-rstudio" class="section level3">
<h3>Interface graphique avec RStudio</h3>
<p><strong>RStudio</strong> fournit une interface graphique pour faciliter lâ€™import dâ€™un fichier texte. Pour cela, il suffit dâ€™aller dans le menu <em>Tools &gt; Import Dataset</em> et de choisir lâ€™option <em>From Text File</em> si le fichier est prÃ©sent sur votre disque dur ou <em>From Web URL</em> si le fichier source est disponible sur Internet.</p>
<figure>
<img src="images/capture_RStudio_import_dataset.png" alt="Importer un fichier texte avec RStudio"/>
<figcaption>
Importer un fichier texte avec RStudio
</figcaption>
</figure>
<p>Lâ€™interface de <strong>RStudio</strong> vous prÃ©sente sous <em>Input File</em> les donnÃ©es telles quâ€™elles sont stockÃ©es dans le fichier. Dans la colonne de gauche, vous pouvez specifier le nom de lâ€™objet Ã  crÃ©er et diffÃ©rentes options dâ€™import. En temps rÃ©el, vous pouvez prÃ©visualiser le rÃ©sulat sous <em>Data Frame</em>.</p>
<p>Une fois que vous avez cliquÃ© sur <em>Import</em>, le code nÃ©cessaire Ã  lâ€™import sera automatiquement copiÃ© dans la console et <strong>RStudio</strong> ouvrira le visualiseur de donnÃ©es afin que vous puissiez contrÃ´ler le rÃ©sultat obtenu.</p>
</div>
</div>
<div id="import-de-donnees_importer-depuis-des-logiciels-de-statistique" class="section level2">
<h2>Importer depuis des logiciels de statistique</h2>
<p>Plusieurs extensions existent pour importer des fichiers de donnÃ©es issus dâ€™autres logiciels de statistiques. En premier lieu, il y a <code class="pkg">foreign</code>, installÃ©e par dÃ©faut avec <strong>R</strong> et dÃ©crite en dÃ©tails dans le manuel <cite>R Data Import/Export</cite> disponible sur <a href="http://cran.r-project.org/manuals.html" class="uri">http://cran.r-project.org/manuals.html</a>. Un des soucis majeurs de cette extension rÃ©side dans la maniÃ¨re dont elle traite les <dfn data-index="mÃ©tadonnÃ©e">mÃ©tadonnÃ©es</dfn> utilisÃ©es en particulier dans les fichiers <strong>SAS</strong>, <strong>SPSS</strong> et <strong>Stata</strong>, Ã  savoir les <dfn data-index="Ã©tiquette de variable">Ã©tiquettes de variable</dfn><dfn data-index="variable, Ã©tiquette"/>, les <dfn data-index="Ã©tiquette de valeur">Ã©tiquettes de valeur</dfn><dfn data-index="valeur, Ã©tiquette"/> et les <dfn data-index="valeur manquante dÃ©clarÃ©e">valeurs manquantes dÃ©clarÃ©es</dfn><dfn data-index="manquante, valeur"/>. En effet, chaque fonction va importer ces mÃ©tadonnÃ©es sous la forme dâ€™<dfn data-index="attribut">attributs</dfn> dont le nom diffÃ¨re dâ€™une fonction Ã  lâ€™autre. Par ailleurs, selon les options retenues, les <dfn data-index="variable labellisÃ©e">variables labellisÃ©es</dfn><dfn data-index="labellisÃ©e, variable"/> seront parfois transformÃ©es ou non en <dfn data-index="facteur">facteurs</dfn>. Enfin, <code class="pkg">foreign</code> ne sait pas toujours importer les diffÃ©rents types de variables reprÃ©sentant des dates et des heures.</p>
<p>Lâ€™extension <code class="pkg">haven</code> (qui fait partie du <q lang="en">Hadleyverse</q>) tente de remÃ©dier Ã  plusieurs des limitations rencontrÃ©es avec <code class="pkg">foreign</code>Â :</p>
<ul>
<li>le format des mÃ©tadonnÃ©es importÃ© est uniforme, quel que soit le type de fichier source (<strong>SAS</strong>, <strong>SPSS</strong> ou <strong>Stata</strong>)Â ;</li>
<li>les variables labellisÃ©es ne sont pas transformÃ©es en facteurs, mais hÃ©ritent dâ€™une nouvelle classe <code data-pkg="haven">labelled</code>, la valeur initiale restant inchangÃ©eÂ ;</li>
<li>les diffÃ©rents formats de date sont convertis dans des classes <strong>R</strong> appropriÃ©es, utilisables en particulier avec <code class="pkg">lubridate</code>Â ;</li>
<li><code class="pkg">haven</code> peut lire les fichiers <strong>SAS natifs</strong> (extension <code>.sas7bdat</code>) ce que ne peut pas faire <code class="pkg">foreign</code>Â ;</li>
<li><code class="pkg">haven</code> peut lire les fichiers <strong>Stata</strong> 13 et 14, alors que <code class="pkg">foreign</code> ne sait lire ces fichiers que jusquâ€™Ã  la version 12Â ;</li>
<li>les tableaux de donnÃ©es produits ont directement la classe <code data-pkg="dplyr">tbl_df</code> ce qui permets dâ€™utiliser directement les fonctionnalitÃ©s de lâ€™extension <code class="pkg">dplyr</code>.</li>
</ul>
<p>Cependant, <code class="pkg">haven</code> est encore une extension rÃ©cente. Plusieurs bugs ont Ã©tÃ© identifiÃ©s dans la version 0.2.0 disponible sur <strong>CRAN</strong> (en particulier concernant lâ€™importation des dates). Il est donc prÃ©fÃ©rable dâ€™utiliser la version de dÃ©veloppement disponible sur <strong>GitHub</strong> (qui gÃ¨re correctement les dates).</p>
<p>Pour cela, vous pouvez utiliser le code ci-dessousÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">if (!<span class="kw">require</span>(devtools)) <span class="kw">install.packages</span>(<span class="st">"devtools"</span>)
devtools::<span class="kw">install_github</span>(<span class="st">"hadley\haven"</span>)</code></pre></div>
<div id="import-de-donnees_spss" class="section level3">
<h3>SPSS</h3>
<p>Les fichiers gÃ©nÃ©rÃ©s par <strong>SPSS</strong><dfn data-index="SPSS, fichier"/> sont de deux typesÂ : les fichiers <strong>SPSS natifs</strong> natifs (extension <code>.sav</code>) et les fichiers au format <strong>SPSS export</strong> (extension <code>.por</code>).</p>
<p>Dans les deux cas, on aura recours Ã  la fonction <code data-pkg="haven">read_spss</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(haven)
donnees &lt;-<span class="st"> </span><span class="kw">read_spss</span>(<span class="st">"data/fichier.sav"</span>)</code></pre></div>
<div class="note">
<p>Si vous prÃ©fÃ©rez utiliser lâ€™extension <code class="pkg">foreign</code>, la fonction correspondante est <code data-kg="foreign">read.spss</code>. On indiquera Ã  la fonction de renvoyer un tableau de donnÃ©es avec lâ€™argument <code>to.data.frame = TRUE</code>.</p>
<p>Par dÃ©faut, les variables numÃ©riques pour lesquelles des <dfn data-inndex="Ã©tiquette de valeur">Ã©tiquettes de valeurs</dfn><dfn data-index="valeur, Ã©tiquette"/> ont Ã©tÃ© dÃ©finies sont transformÃ©es en variables de type <dfn>facteur</dfn>, les Ã©tiquettes dÃ©finies dans <strong>SPSS</strong> Ã©tant utilisÃ©es comme <em>labels</em> du facteur. De mÃªme, si des <dfn data-index="valeur manquante">valeurs manquantes</dfn> ont Ã©tÃ© dÃ©finies dans <strong>SPSS</strong>, ces derniÃ¨res seront toutes transformÃ©es en <code>NA</code> (<strong>R</strong> ne permettant pas de gÃ©rer plusieurs types de valeurs manquantes). Ce comportement peut Ãªtre modifiÃ© avec <code>use.value.labels</code> et <code>use.missings</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(foreign)
donnees &lt;-<span class="st"> </span><span class="kw">read.spss</span>(<span class="st">"data/fichier.sav"</span>, <span class="dt">to.data.frame =</span> <span class="ot">TRUE</span>, 
  <span class="dt">use.value.labels =</span> <span class="ot">FALSE</span>, <span class="dt">use.missings =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>Il est important de noter que <code data-pkg="foreign">read.spss</code> de lâ€™extension <code class="pkg">foreign</code> ne sait pas importer les dates. Ces derniÃ¨res sont donc automatiquement transformÃ©es en valeurs numÃ©riques.</p>
<p><strong>SPSS</strong> stocke les dates sous la forme du nombre de secondes depuis le dÃ©but du calendrier grÃ©gorien, Ã  savoir le 14 octobre 1582. DÃ¨s lors, si lâ€™on des dates dans un fichier <strong>SPSS</strong> et que ces derniÃ¨res ont Ã©tÃ© converties en valeurs numÃ©riques, on pourra essayer la commande suivanteÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">donnees$date &lt;-<span class="st"> </span><span class="kw">as.POSIXlt</span>(donnees$date, <span class="dt">origin =</span> <span class="st">"1582-10-14"</span>)</code></pre></div>
</div>
</div>
<div id="import-de-donnees_sas" class="section level3">
<h3>SAS</h3>
<p>Les <dfn data-index="SAS, fichier">fichiers <strong>SAS</strong></dfn> se prÃ©sentent en gÃ©nÃ©ral sous deux formatÂ : format <strong>SAS export</strong> (extension <code>.xport</code> ou <code>.xpt</code>) ou format <strong>SAS natif</strong> (extension <code>.sas7bdat</code>).</p>
<p>Les fichiers <strong>SAS natifs</strong> peuvent Ãªtre importÃ©es directement avec <code data-pkg="haven">read_sas</code> de lâ€™extension <code class="pkg">haven</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(haven)
donnees &lt;-<span class="st"> </span><span class="kw">read_sas</span>(<span class="st">"data/fichier.sas7bdat"</span>)</code></pre></div>
<p>Au besoin, on pourra prÃ©ciser en deuxiÃ¨me argument le nom dâ€™un fichier <strong>SAS catalogue</strong> (extension <code>.sas7bcat</code>) contenant les mÃ©tadonnÃ©es du fichier de donnÃ©es.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(haven)
donnees &lt;-<span class="st"> </span><span class="kw">read_sas</span>(<span class="st">"data/fichier.sas7bdat"</span>, <span class="st">"data/fichier.sas7bcat"</span>)</code></pre></div>
<p>Les fichiers au format <strong>SAS export</strong> peuvent Ãªtre importÃ©s via la fonction <code data-pkg="foreign">read.xport</code> de lâ€™extension <code class="pkg">foreign</code>. Celle-ci sâ€™utilise trÃ¨s simplement, en lui passant le nom du fichier en argumentÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(foreign)
donnees &lt;-<span class="st"> </span><span class="kw">read.xport</span>(<span class="st">"data/fichier.xpt"</span>)</code></pre></div>
</div>
<div id="import-de-donnees_stata" class="section level3">
<h3>Stata</h3>
<p>Pour les <dfn data-index="Stata, fichier">fichiers <strong>Stata</strong></dfn> (extension <code>.dta</code>), on aura recours aux fonctions <code data-pkg="haven">read_dta</code> et <code data-pkg="haven" data-rdoc="read_dta">read_stata</code> de lâ€™extension <code class="pkg">haven</code>. Ces deux fonctions sont identiques.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(haven)
donnees &lt;-<span class="st"> </span><span class="kw">read_dta</span>(<span class="st">"data/fichier.dta"</span>)</code></pre></div>
<div class="note">
<p>Si lâ€™on prÃ©fÃ¨re utiliser lâ€™extension <code class="pkg">foreign</code>, on aura recours Ã  la fonction <code data-pkg="foreign">read.dta</code>.</p>
<p>Lâ€™option <code>convert.factors</code> indique si les variables labellisÃ©es doit Ãªtre converties automatiquement en facteurs. Pour un rÃ©sultat similaire Ã  celui de <code class="pkg">haven</code>, on choisira doncÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(foreign)
donnees &lt;-<span class="st"> </span><span class="kw">read.dta</span>(, <span class="dt">convert.factors =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>Lâ€™option <code>convert.dates</code> permet de convertir les dates du format <strong>Stata</strong> dans un format de dates gÃ©rÃ© par <strong>R</strong>. Cependant, cela ne marche pas toujours. Dans ces cas lÃ , lâ€™opÃ©ration suivante peut fonctionner. Sans garantie nÃ©anmoins, il est toujours vivement conseillÃ© de vÃ©rifier le rÃ©sultat obtenuÂ !</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">donnees$date &lt;-<span class="st"> </span><span class="kw">as.Date</span>(donnees$Date, <span class="dt">origin =</span> <span class="st">"1960-01-01"</span>)</code></pre></div>
</div>
</div>
<div id="import-de-donnees_excel" class="section level3">
<h3>Excel</h3>
<p>Une premiÃ¨re approche pour importer des donnÃ©es <strong>Excel</strong> dans <strong>R</strong> consiste Ã  les exporter depuis <strong>Excel</strong> dans un fichier texte (texte tabulÃ© ou <strong>CSV</strong>) puis de suivre la procÃ©dure dâ€™importation dâ€™un fichier texte.</p>
<p>Une feuille <strong>Excel</strong> peut Ã©galement Ãªtre importÃ©e directement avec lâ€™extension <code class="pkg">readxl</code> qui appartient Ã  la mÃªme famille que <code class="pkg">haven</code> et <code class="pkg">readr</code>.</p>
<p>La fonction <code data-pkg="readxl">read_excel</code> permet dâ€™importer Ã  la fois des fichiers <code>.xls</code> (<strong>Excel</strong> 2003 et prÃ©cÃ©dents) et <code>.xlsx</code> (<strong>Excel</strong> 2007 et suivants).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(readxl)
donnees &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">"data/fichier.xlsx"</span>)</code></pre></div>
<p>Une seule feuille de calculs peut Ãªtre importÃ©e Ã  la fois. On pourra prÃ©ciser la feuille dÃ©sirÃ©e avec <code>sheet</code> en indiquant soit le nom de la feuille, soit sa position (premiÃ¨re, seconde, â€¦).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">donnees &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">"data/fichier.xlsx"</span>, <span class="dt">sheet =</span> <span class="dv">3</span>)
donnees &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">"data/fichier.xlsx"</span>, <span class="dt">sheet =</span> <span class="st">"mes_donnees"</span>)</code></pre></div>
<p>On pourra prÃ©ciser avec <code>col_names</code> si la premiÃ¨re ligne contient le nom des variables.</p>
<p>Par dÃ©faut, <code data-pkg="readxl">read_excel</code> va essayer de deviner le type (numÃ©rique, textuelle, date) de chaque colonne. Au besoin, on pourra indiquer le type souhaitÃ© de chaque colonne avec <code>col_types</code>.</p>
<div class="note">
<p>Une alternative est lâ€™extension <code class="pkg">xlsx</code> qui propose deux fonctions diffÃ©rentes pour importer des fichiers <strong>Excel</strong>Â : <code data-pkg="xlsx">read.xlsx</code> et <code data-pkg="xlsx" data-rdoc="read.xlsx">read.xlsx2</code>. La finalitÃ© est la mÃªme mais leur fonctionnement interne est diffÃ©rent. En cas de difficultÃ©s dâ€™import, on pourra tester lâ€™autre pour voir si le rÃ©sultat est diffÃ©rent. Il est impÃ©ratif de spÃ©cifier la position de la feuille de calculs que lâ€™on souhaite importer.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(xlsx)
donnees &lt;-<span class="st"> </span><span class="kw">read.xlsx</span>(<span class="st">"data/fichier.xlsx"</span>, <span class="dv">1</span>)</code></pre></div>
</div>
</div>
<div id="import-de-donnees_dbase" class="section level3">
<h3>dBase</h3>
<p>Lâ€™Insee diffuse ses fichiers depuis son site Web au format <strong>dBase</strong> (extension <code>.dbf</code>). Ceux-ci sont directement lisibles dans <strong>R</strong> avec la fonction <code data-pkg="foreign">read.dbf</code> de lâ€™extension <code class="pkg">foreign</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(foreign)
donnees &lt;-<span class="st"> </span><span class="kw">read.dbf</span>(<span class="st">"data/fichier.dbf"</span>)</code></pre></div>
<p>La principale limitation des <dfn data-index="dBase, fichier">fichiers <strong>dBase</strong></dfn> est de ne pas gÃ©rer plus de 256 colonnes. Les tables des enquÃªtes de lâ€™Insee sont donc parfois dÃ©coupÃ©es en plusieurs fichiers <code>.dbf</code> quâ€™il convient de fusionner avec la fonction <code data-pkg="base">merge</code>. Lâ€™utilisation de cette fonction est dÃ©taillÃ©e dans le chapitre sur la <a href="pem_manipulation.html#fusion_tables">manipulation de donnÃ©es</a>.</p>
</div>
</div>
<div id="import-de-donnees_donnees-spatiales" class="section level2">
<h2>DonnÃ©es spatiales</h2>
<div id="import-de-donnees_shapefile" class="section level3">
<h3>Shapefile</h3>
<p>Les <dfn date-index="shapefile, fichier">fichiers <strong>Shapefile</strong></dfn> sont couramment utilisÃ©s pour Ã©changer des donnÃ©es gÃ©orÃ©fÃ©rencÃ©es. La majoritÃ© des logiciels de <strong>SIG</strong> (systÃ¨mes dâ€™informations gÃ©ographiques) sont en capacitÃ© dâ€™importer et dâ€™exporter des donnÃ©es dans ce format.</p>
<p>Un <strong>shapefile</strong> contient toute lâ€™information liÃ©e Ã  la gÃ©omÃ©trie des objets dÃ©crits, qui peuvent ÃªtreÂ :</p>
<ul>
<li>des points</li>
<li>des lignes</li>
<li>des polygones</li>
</ul>
<p>Son extension est classiquement <code>.shp</code> et il est toujours accompagnÃ© de deux autres fichiers de mÃªme nom et dâ€™extensionsÂ :</p>
<ul>
<li>un fichier <code>.dbf</code>, qui contient les donnÃ©es attributaires relatives aux objets contenus dans le <strong>shapefile</strong></li>
<li>un fichier <code>.shx</code>, qui stocke lâ€™index de la gÃ©omÃ©trie</li>
</ul>
<p>Dâ€™autres fichiers peuvent Ãªtre Ã©galement fournisÂ :</p>
<ul>
<li><code>.sbn</code> et <code>.sbx</code> - index spatial des formes.</li>
<li><code>.fbn</code> et <code>.fbx</code> - index spatial des formes pour les shapefile en lecture seule</li>
<li><code>.ain</code> et <code>.aih</code> - index des attributs des champs actifs dans une table ou dans une table dâ€™attributs du thÃ¨me</li>
<li><code>.prj</code> - information sur le systÃ¨me de coordonnÃ©es</li>
<li><code>.shp.xml</code> - mÃ©tadonnÃ©es du shapefile.</li>
<li><code>.atx</code> - fichier dâ€™index des attributs pour le fichier <code>.dbf</code></li>
<li><code>.qix</code></li>
</ul>
<p>En premier lieu, il importe que tous les fichiers qui compose un mÃªme <strong>shapefile</strong> soit situÃ©s dans le mÃªme rÃ©pertoire et aient le mÃªme nom (seule lâ€™extension Ã©tant diffÃ©rente).</p>
<p>Lâ€™extension <code class="pkg">maptools</code> fournit les fonctions permettant dâ€™importer un <strong>shapefile</strong> dans <strong>R</strong>. Le rÃ©sultat obtenu utilisera lâ€™une des diffÃ©rentes classes spatiales fournies par lâ€™extension <code class="pkg">sp</code>.</p>
<p>La fonction gÃ©nÃ©rique dâ€™import est <code data-pkg="maptools">readShapeSpatial</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(maptools)
donnees_spatiales &lt;-<span class="st"> </span><span class="kw">readShapeSpatial</span>(<span class="st">"data/fichier.shp"</span>)</code></pre></div>
<p>Si lâ€™on connait dÃ©jÃ  le type de donnÃ©es du <strong>shapefile</strong> (points, lignes ou polygones), on pourra utiliser directement <code data-pkg="maptools">readShapePoints</code>, <code data-pkg="maptools">readShapeLines</code> ou <code data-pkg="maptools">readShapePoly</code>.</p>
</div>
<div id="import-de-donnees_rasters" class="section level3">
<h3>Rasters</h3>
<p>Il existe de multiples formats pour stocker des donnÃ©es matricielles spatiales. Lâ€™un des plus communs est le format <strong>ASCII grid</strong> aussi connu sous le nom de <strong>Arc/Info ASCII grid</strong> ou <strong>ESRI grid</strong>. Lâ€™extension de ce format nâ€™est pas toujours uniforme. On trouve parfois <code>.asc</code> ou encore <code>.ag</code> voir mÃªme <code>.txt</code>.</p>
<p>Pour importer ce type de fichier, on pourra avoir recours Ã  la fonction <code data-pkg="maptools">readAsciiGrid</code> de lâ€™extension <code class="pkg">maptools</code>. Le rÃ©sultat sera, par dÃ©faut, au format <code data-pkg="sp" data-rdoc="SpatialGridDataFrame-class">SpatialGridDataFrame</code> de lâ€™extension <code class="pkg">sp</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(maptools)
donnees_spatiales &lt;-<span class="st"> </span><span class="kw">readAsciiGrid</span>(<span class="st">"data/fichier.asc"</span>)</code></pre></div>
<p>Lâ€™extension <code class="pkg">raster</code> permet dâ€™effectuer de multiples manipulations sur les donnÃ©es du type <dfn data-index="raster, fichier">raster</dfn>. Elle est en capacitÃ© dâ€™importer des donnÃ©es depuis diffÃ©rents formats (plus prÃ©cisÃ©ment les formats pris en charge par la librairie <strong>GDAL</strong>).</p>
<p>De plus, les fichiers raster pouvant Ãªtre particuliÃ¨rement volumineux (jusquâ€™Ã  plusieurs Go de donnÃ©es), lâ€™extension <code class="pkg">raster</code> est capable de travailler sur un fichier raster sans avoir Ã  le charger intÃ©gralement en mÃ©moire.</p>
<p>Pour plus dâ€™informations, voir les fonctions <code data-pkg="raster">raster</code> et <code data-pkg="raster">getValues</code>.</p>
</div>
</div>
<div id="import-de-donnees_autres-sources" class="section level2">
<h2>Autres sources</h2>
<p><strong>R</strong> offre de trÃ¨s nombreuses autres possibilitÃ©s pour accÃ©der aux donnÃ©es. Il est ainsi possible dâ€™importer des donnÃ©es depuis dâ€™autres applications qui nâ€™ont pas Ã©tÃ© Ã©voquÃ©es (<strong>Epi Info</strong>, <strong>S-Plus</strong>, etc.), de se connecter Ã  un systÃ¨me de base de donnÃ©es relationelle type <strong>MySQL</strong>, de lire des donnÃ©es via <strong>ODBC</strong> ou des connexions rÃ©seau, etc.</p>
<p>Pour plus dâ€™informations on consultera le manuel <em>R Data Import/Export</em>Â :<br/> <a href="http://cran.r-project.org/manuals.html" class="uri">http://cran.r-project.org/manuals.html</a>.</p>
</div>
<div id="import-de-donnees_sauver-ses-donnees" class="section level2">
<h2>Sauver ses donnÃ©es</h2>
<p><strong>R</strong> dispose Ã©galement de son propre format pour sauvegarder et Ã©changer des donnÃ©es. On peut sauver nâ€™importe quel objet crÃ©Ã© avec <strong>R</strong> et il est possible de sauver plusieurs objets dans un mÃªme fichier. Lâ€™usage est dâ€™utiliser lâ€™extension <code>.RData</code> pour les fichiers de donnÃ©es <strong>R</strong>. La fonction Ã  utiliser sâ€™appelle tout simplement <code data-pkg="base">save</code>.</p>
<p>Par exemple, si lâ€™on souhaite sauvegarder son tableau de donnÃ©es <code>d</code> ainsi que les objets <code>tailles</code> et <code>poids</code> dans un fichier <code>export.RData</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">save</span>(d, tailles, poids, <span class="dt">file =</span> <span class="st">"export.RData"</span>)</code></pre></div>
<p>Ã€ tout moment, il sera toujours possible de recharger ces donnÃ©es en mÃ©moire Ã  lâ€™aide de la fonction <code data-pkg="base">load</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">load</span>(<span class="st">"export.RData"</span>)</code></pre></div>
<div class="important">
<p>Si entre temps vous aviez modifiÃ© votre tableau <code>d</code>, vos modifications seront perdues. En effet, si lors du chargement de donnÃ©es, un objet du mÃªme nom existe en mÃ©moire, ce dernier sera remplacÃ© par lâ€™objet importÃ©.</p>
</div>
<p>La fonction <code data-pkg="base" data-rdoc="save">save.image</code> est un raccourci pour sauvergarder tous les objets de la session de travail dans le fichier <code>.RData</code> (un fichier un peu Ã©trange car il nâ€™a pas de nom mais juste une extension). Lors de la fermeture de <strong>RStudio</strong>, il vous sera demandÃ© si vous souhaitez enregistrer votre session. Si vous rÃ©pondez <em>Oui</em>, câ€™est cette fonction <code data-pkg="base" data-rdoc="save">save.image</code> qui sera appliquÃ©e.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">save.image</span>()</code></pre></div>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="import-de-donnees_fn1"><p>Pour plus de dÃ©tails, ne pas hÃ©siter Ã  aller lire la page <strong>Wikipedia</strong> <a href="http://fr.wikipedia.org/wiki/Codage_des_caract%C3%A8res">Codage des caractÃ¨res</a>. Historiquement, les premiers systÃ¨mes dâ€™encodage de caractÃ¨res ne permettaient pas de coder les lettres non accentuÃ©s, ce qui convient trÃ¨s bien en anglais, mais pose tout un tas de problÃ¨mes pour les autres langues. DÃ¨s lors, de nombreux systÃ¨mes ont Ã©tÃ© dÃ©veloppÃ©s, plus ou moins diffÃ©rents pour chaque langue. Depuis les annÃ©es 1990, un projet appelÃ© <em>Unicode</em> vise Ã  dÃ©finir une norme universelle permettant de rendre compte de lâ€™ensemble des langues humaines. Le format <strong>UTF-8</strong> issu du projet <em>Unicode</em> est aujourdâ€™hui le format le plus employÃ© sur Internet.<a href="#import-de-donnees_fnref1">â†©</a></p></li>
</ol>
</div>

</article>
<article id="recodage">

<div class="fluid-row" id="recodage_header">


<h1 class="title">Recodage</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#recodage_renommer-des-variables">Renommer des variables</a></li>
<li><a href="#recodage_convertir-une-variable">Convertir une variable</a></li>
<li><a href="#recodage_decouper_en_classes">DÃ©couper une variable numÃ©rique en classes</a></li>
<li><a href="#recodage_regrouper_modalites">Regrouper les modalitÃ©s dâ€™une variable</a></li>
<li><a href="#recodage_variables-calculees">Variables calculÃ©es</a></li>
<li><a href="#recodage_combiner-plusieurs-variables">Combiner plusieurs variables</a></li>
<li><a href="#recodage_variables-scores">Variables scores</a></li>
<li><a href="#recodage_verification-des-recodages">VÃ©rification des recodages</a></li>
</ul>
</div>

<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>
<div class="note">
<p>La version originale de ce chapitre a Ã©tÃ© Ã©crite par Julien Barnier dans le cadre du support de cours <a href="https://github.com/juba/intro-r">Introduction Ã  R</a>.</p>
</div>
<p>Le <dfn>recodage de variables</dfn><dfn data-index="variable, recodage"/> est une opÃ©ration extrÃªmement frÃ©quente lors du traitement dâ€™enquÃªte. Celui-ci utilise soit lâ€™une des formes dâ€™indexation dÃ©crites prÃ©cÃ©demment, soit des fonctions <em>ad hoc</em> de <strong>R</strong>.</p>
<p>On passe ici en revue diffÃ©rents types de recodage parmi les plus courants. Les exemples sâ€™appuient, comme prÃ©cÃ©demment, sur lâ€™extrait de lâ€™enquÃªte <em>Histoire de vie</em>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<div id="recodage_renommer-des-variables" class="section level2">
<h2>Renommer des variables</h2>
<p>Une opÃ©ration courante lorsquâ€™on a importÃ© des variables depuis une source de donnÃ©es externe consiste Ã  renommer les variables importÃ©es. Sous <strong>R</strong> les noms de variables doivent Ãªtre Ã  la fois courts et explicites.</p>
<div class="important">
<p>Les noms de variables peuvent contenir des lettres, des chiffres (mais ils ne peuvent pas commencer par un chiffre), les symboles <code>.</code> et <code>_</code> et doivent commencer par une lettre. <strong>R</strong> fait la diffÃ©rence entre les majuscules et les minuscules, ce qui signifie que <em>x</em> et <em>X</em> sont deux noms de variable diffÃ©rents. On Ã©vitera Ã©galement dâ€™utiliser des caractÃ¨res accentuÃ©s dans les noms de variable. Comme les espaces ne sont pas autorisÃ©s, on pourra les remplacer par un point ou un tiret bas.</p>
</div>
<p>On peut lister les noms des variables dâ€™un tableau de donnÃ©es (<em>data.frame</em>) Ã  lâ€™aide de la fonction <code data-pkg="base">names</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(d)</code></pre></div>
<pre><code> [1] "id"            "age"          
 [3] "sexe"          "nivetud"      
 [5] "poids"         "occup"        
 [7] "qualif"        "freres.soeurs"
 [9] "clso"          "relig"        
[11] "trav.imp"      "trav.satisf"  
[13] "hard.rock"     "lecture.bd"   
[15] "peche.chasse"  "cuisine"      
[17] "bricol"        "cinema"       
[19] "sport"         "heures.tv"    </code></pre>
<p>Cette fonction peut Ã©galement Ãªtre utilisÃ©e pour renommer lâ€™ensemble des variables. Si par exemple on souhaitait passer les noms de toutes les variables en majuscules, on pourrait faireÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.maj &lt;-<span class="st"> </span>d
<span class="kw">names</span>(d.maj) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"ID"</span>, <span class="st">"AGE"</span>, <span class="st">"SEXE"</span>, <span class="st">"NIVETUD"</span>, <span class="st">"POIDS"</span>, 
  <span class="st">"OCCUP"</span>, <span class="st">"QUALIF"</span>, <span class="st">"FRERES.SOEURS"</span>, <span class="st">"CLSO"</span>, <span class="st">"RELIG"</span>, 
  <span class="st">"TRAV.IMP"</span>, <span class="st">"TRAV.SATISF"</span>, <span class="st">"HARD.ROCK"</span>, <span class="st">"LECTURE.BD"</span>, 
  <span class="st">"PECHE.CHASSE"</span>, <span class="st">"CUISINE"</span>, <span class="st">"BRICOL"</span>, <span class="st">"CINEMA"</span>, 
  <span class="st">"SPORT"</span>, <span class="st">"HEURES.TV"</span>)
<span class="kw">summary</span>(d.maj$SEXE)</code></pre></div>
<pre><code>Homme Femme 
  899  1101 </code></pre>
<p>Ce type de renommage peut Ãªtre utile lorsquâ€™on souhaite passer en revue tous les noms de variables dâ€™un fichier importÃ© pour les corriger le cas Ã©chÃ©ant. Pour faciliter un peu ce travail pas forcÃ©ment passionant, on peut utiliser la fonction <code data-pkg="base">dput</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dput</span>(<span class="kw">names</span>(d))</code></pre></div>
<pre><code>c("id", "age", "sexe", "nivetud", "poids", "occup", "qualif", 
"freres.soeurs", "clso", "relig", "trav.imp", "trav.satisf", 
"hard.rock", "lecture.bd", "peche.chasse", "cuisine", "bricol", 
"cinema", "sport", "heures.tv")</code></pre>
<p>On obtient en rÃ©sultat la liste des variables sous forme de vecteur dÃ©clarÃ©. On nâ€™a plus alors quâ€™Ã  copier/coller cette chaÃ®ne, rajouter <code>names(d) &lt;-</code> devant et modifier un Ã  un les noms des variables.</p>
<p>Si on souhaite seulement modifier le nom dâ€™une variable, on peut utiliser la fonction <code data-pkg="questionr">rename.variable</code> de lâ€™extension <code class="pkg">questionr</code>. Celle-ci prend en argument le tableau de donnÃ©es, le nom actuel de la variable et le nouveau nom. Par exemple, si on veut renommer la variable <em>bricol</em> du tableau de donnÃ©es <code>d</code> en <em>bricolage</em>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d &lt;-<span class="st"> </span><span class="kw">rename.variable</span>(d, <span class="st">"bricol"</span>, <span class="st">"bricolage"</span>)
<span class="kw">table</span>(d$bricolage)</code></pre></div>
<pre><code>
 Non  Oui 
1147  853 </code></pre>
</div>
<div id="recodage_convertir-une-variable" class="section level2">
<h2>Convertir une variable</h2>
<p>Il peut arriver quâ€™on veuille transformer une variable dâ€™un type dans un autre.</p>
<p>Par exemple, on peut considÃ©rer que la variable numÃ©rique <em>freres.soeurs</em> est une Â«Â fausseÂ Â» variable numÃ©rique et quâ€™une reprÃ©sentation sous forme de facteur serait plus adÃ©quate. Dans ce cas il suffit de faire appel Ã  la fonction <code data-pkg="base">factor</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$fs.fac &lt;-<span class="st"> </span><span class="kw">factor</span>(d$freres.soeurs)
<span class="kw">levels</span>(d$fs.fac)</code></pre></div>
<pre><code> [1] "0"  "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8" 
[10] "9"  "10" "11" "12" "13" "14" "15" "16" "18"
[19] "22"</code></pre>
<p>La conversion dâ€™une variable caractÃ¨res en facteur se fait de la mÃªme maniÃ¨re.</p>
<p>La conversion dâ€™un facteur ou dâ€™une variable numÃ©rique en variable caractÃ¨res peut se faire Ã  lâ€™aide de la fonction <code data-pkg="base" data-rdoc="character">as.character</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$fs.char &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$freres.soeurs)
d$qualif.char &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$qualif)</code></pre></div>
<p>La conversion dâ€™un facteur en caractÃ¨res est frÃ©quemment utilisÃ© lors des recodages du fait quâ€™il est impossible dâ€™ajouter de nouvelles modalitÃ©s Ã  un facteur de cette maniÃ¨re. Par exemple, la premiÃ¨re des commandes suivantes gÃ©nÃ¨re un message dâ€™avertissement, tandis que les deux autres fonctionnentÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.temp &lt;-<span class="st"> </span>d
d.temp$qualif[d.temp$qualif ==<span class="st"> "Ouvrier specialise"</span>] &lt;-<span class="st"> "Ouvrier"</span></code></pre></div>
<pre><code>Warning in `[&lt;-.factor`(`*tmp*`, d.temp$qualif ==
"Ouvrier specialise", : invalid factor level, NA
generated</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$qualif.char &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$qualif)
d$qualif.char[d$qualif.char ==<span class="st"> "Ouvrier specialise"</span>] &lt;-<span class="st"> "Ouvrier"</span></code></pre></div>
<p>Dans le premier cas, le message dâ€™avertissement indique que toutes les modalitÃ©s Â«Â Ouvrier specialiseÂ Â» de notre variable <em>qualif</em> ont Ã©tÃ© remplacÃ©es par des valeurs manquantes <code>NA</code>.</p>
<p>Enfin, une variable de type caractÃ¨res dont les valeurs seraient des nombres peut Ãªtre convertie en variable numÃ©rique avec la fonction <code data-pkg="base" data-rdoc="numeric">as.numeric</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"1"</span>, <span class="st">"3.1415"</span>, <span class="st">"4"</span>, <span class="st">"5.6"</span>, <span class="st">"1"</span>, <span class="st">"4"</span>)
v</code></pre></div>
<pre><code>[1] "1"      "3.1415" "4"      "5.6"    "1"     
[6] "4"     </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.numeric</span>(v)</code></pre></div>
<pre><code>[1] 1.0000 3.1415 4.0000 5.6000 1.0000 4.0000</code></pre>
<div class="important">
<p>Lorsque lâ€™on convertit un facteur avec <code data-pkg="base" data-rdoc="numeric">as.numeric</code>, on obtient le numÃ©ro de chaque facteur (premiÃ¨re modalitÃ©, seconde modalitÃ©, etc.). Si la valeur numÃ©rique qui nous intÃ©resse est en fait contenu dans le nom des modalitÃ©s, il faut connvertir au prÃ©alable notre facteur en variable textuelle.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vf &lt;-<span class="st"> </span><span class="kw">factor</span>(v)
vf</code></pre></div>
<pre><code>[1] 1      3.1415 4      5.6    1      4     
Levels: 1 3.1415 4 5.6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.numeric</span>(vf)</code></pre></div>
<pre><code>[1] 1 2 3 4 1 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.numeric</span>(<span class="kw">as.character</span>(vf))</code></pre></div>
<pre><code>[1] 1.0000 3.1415 4.0000 5.6000 1.0000 4.0000</code></pre>
</div>
</div>
<div id="recodage_decouper_en_classes" class="section level2">
<h2>DÃ©couper une variable numÃ©rique en classes</h2>
<p>Le premier type de recodage consiste Ã  dÃ©couper une variable de type numÃ©rique en un certain nombre de classes. On utilise pour cela la fonction <code data-pkg="base">cut</code>.</p>
<p>Celle-ci prend, outre la variable Ã  dÃ©couper, un certain nombre dâ€™argumentsÂ :</p>
<ul>
<li><code>breaks</code> indique soit le nombre de classes souhaitÃ©, soit, si on lui fournit un vecteur, les limites des classesÂ ;</li>
<li><code>labels</code> permet de modifier les noms de modalitÃ©s attribuÃ©s aux classesÂ ;</li>
<li><code>include.lowest</code> et <code>right</code> influent sur la maniÃ¨re dont les valeurs situÃ©es Ã  la frontiÃ¨re des classes seront inclues ou excluesÂ ;</li>
<li><code>dig.lab</code> indique le nombre de chiffres aprÃ¨s la virgule Ã  conserver dans les noms de modalitÃ©s.</li>
</ul>
<p>Prenons tout de suite un exemple et tentons de dÃ©couper notre variable <em>age</em> en cinq classes et de placer le rÃ©sultat dans une nouvelle variable nommÃ©e <em>age5cl</em>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$age5cl &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="dv">5</span>)
<span class="kw">table</span>(d$age5cl)</code></pre></div>
<pre><code>
(17.9,33.8] (33.8,49.6] (49.6,65.4] (65.4,81.2] 
        454         628         556         319 
(81.2,97.1] 
         43 </code></pre>
<p>Par dÃ©faut <strong>R</strong> nous a bien crÃ©Ã© cinq classes dâ€™amplitudes Ã©gales. La premiÃ¨re classe va de 16,9 Ã  32,2 ans (en fait de 17 Ã  32), etc.</p>
<p>Les frontiÃ¨res de classe seraient plus prÃ©sentables si elles utilisaient des nombres ronds. On va donc spÃ©cifier manuellement le dÃ©coupage souhaitÃ©, par tranches de 20 ansÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$age20 &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">100</span>))
<span class="kw">table</span>(d$age20)</code></pre></div>
<pre><code>
  (0,20]  (20,40]  (40,60]  (60,80] (80,100] 
      72      660      780      436       52 </code></pre>
<p>On aurait pu tenir compte des Ã¢ges extrÃªmes pour la premiÃ¨re et la derniÃ¨re valeurÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">range</span>(d$age)</code></pre></div>
<pre><code>[1] 18 97</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$age20 &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">18</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">97</span>))
<span class="kw">table</span>(d$age20)</code></pre></div>
<pre><code>
(18,20] (20,40] (40,60] (60,80] (80,97] 
     55     660     780     436      52 </code></pre>
<p>Les symboles dans les noms attribuÃ©s aux classes ont leur importanceÂ : <code>(</code> signifie que la frontiÃ¨re de la classe est exclue, tandis que <code>[</code> signifie quâ€™elle est incluse. Ainsi, <code>(20,40]</code> signifie Â«Â strictement supÃ©rieur Ã  20 et infÃ©rieur ou Ã©gal Ã  40Â Â».</p>
<p>On remarque que du coup, dans notre exemple prÃ©cÃ©dent, la valeur minimale, 18, est exclue de notre premiÃ¨re classe, et quâ€™une observation est donc absente de ce dÃ©coupage. Pour rÃ©soudre ce problÃ¨me on peut soit faire commencer la premiÃ¨re classe Ã  17, soit utiliser lâ€™option <code>include.lowest=TRUE</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$age20 &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">17</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">97</span>))
<span class="kw">table</span>(d$age20)</code></pre></div>
<pre><code>
(17,20] (20,40] (40,60] (60,80] (80,97] 
     72     660     780     436      52 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$age20 &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">18</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">97</span>), <span class="dt">include.lowest =</span> <span class="ot">TRUE</span>)
<span class="kw">table</span>(d$age20)</code></pre></div>
<pre><code>
[18,20] (20,40] (40,60] (60,80] (80,97] 
     72     660     780     436      52 </code></pre>
<p>On peut Ã©galement modifier le sens des intervalles avec lâ€™option <code>right=FALSE</code>, et indiquer manuellement les noms des modalitÃ©s avec <code>labels</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$age20 &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">18</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">97</span>), <span class="dt">right =</span> <span class="ot">FALSE</span>, 
  <span class="dt">include.lowest =</span> <span class="ot">TRUE</span>)
<span class="kw">table</span>(d$age20)</code></pre></div>
<pre><code>
[18,20) [20,40) [40,60) [60,80) [80,97] 
     48     643     793     454      62 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$age20 &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">18</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">97</span>), <span class="dt">include.lowest =</span> <span class="ot">TRUE</span>, 
  <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">"&lt;20ans"</span>, <span class="st">"21-40 ans"</span>, <span class="st">"41-60ans"</span>, <span class="st">"61-80ans"</span>, 
    <span class="st">"&gt;80ans"</span>))
<span class="kw">table</span>(d$age20)</code></pre></div>
<pre><code>
   &lt;20ans 21-40 ans  41-60ans  61-80ans    &gt;80ans 
       72       660       780       436        52 </code></pre>
<div class="note">
<p>Lâ€™extension <code class="pkg">questionr</code> propose une interface interactive Ã  la fonction <code data-pkg="base">cut</code>, nommÃ©e <code data-pkg="questionr">icut</code>. Elle sâ€™utilise de la maniÃ¨re suivanteÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">icut</span>(d, age)</code></pre></div>
<p><strong>RStudio</strong> devrait ouvrir une fenÃªtre semblable Ã  lâ€™image ci-dessous.</p>
<p><img src="images/capture_icut.png" alt="Capture dâ€™Ã©cran dâ€™icut"/></p>
<p>Vous pouvez alors indiquer les limites de vos classes ainsi que quelques options complÃ©mentaires. Ces limites sont reprÃ©sentÃ©es graphiquement sur lâ€™histogramme de la variable dâ€™origine.</p>
<p>Lâ€™onglet <em>VÃ©rification</em> affiche un tri Ã  plat et un graphique en barres de la nouvelle variable. Une fois le rÃ©sultat satisfaisant, vous pouvez rÃ©cupÃ©rer le code gÃ©nÃ©rÃ© pour lâ€™inclure dans votre script.</p>
<p>Lâ€™extension <code class="pkg">questionr</code> propose aussi une fonction <code data-pkg="questionr">quant.cut</code> permettant de dÃ©couper une variable numÃ©rique en un nombre de classes donnÃ© ayant des efffectifs semblables. Il suffit de lui passer le nombre de classes en argumentÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$age6cl &lt;-<span class="st"> </span><span class="kw">quant.cut</span>(d$age, <span class="dv">6</span>)
<span class="kw">table</span>(d$age6cl)</code></pre></div>
<pre><code>
    [18,30)     [30,39)     [39,48) [48,55.667) 
        302         337         350         344 
[55.667,66)     [66,97] 
        305         362 </code></pre>
<p><code data-pkg="questionr">quant.cut</code> admet les mÃªmes autres options que <code data-pkg="base">cut</code> (<code>include.lowest</code>, <code>right</code>, <code>labels</code>â€¦ ).</p>
</div>
</div>
<div id="recodage_regrouper_modalites" class="section level2">
<h2>Regrouper les modalitÃ©s dâ€™une variable</h2>
<p>Pour regrouper les modalitÃ©s dâ€™une variable qualitative (dâ€™un facteur le plus souvent), on peut utiliser directement lâ€™indexation.</p>
<p>Ainsi, si on veut recoder la variable <em>qualif</em> dans une variable <em>qualif.reg</em> plus Â« compacte Â», on peut utiliserÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$qualif)</code></pre></div>
<pre><code>
      Ouvrier specialise         Ouvrier qualifie 
                     203                      292 
              Technicien Profession intermediaire 
                      86                      160 
                   Cadre                  Employe 
                     260                      594 
                   Autre 
                      58 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$qualif.reg[d$qualif ==<span class="st"> "Ouvrier specialise"</span>] &lt;-<span class="st"> "Ouvrier"</span>
d$qualif.reg[d$qualif ==<span class="st"> "Ouvrier qualifie"</span>] &lt;-<span class="st"> "Ouvrier"</span>
d$qualif.reg[d$qualif ==<span class="st"> "Employe"</span>] &lt;-<span class="st"> "Employe"</span>
d$qualif.reg[d$qualif ==<span class="st"> "Profession intermediaire"</span>] &lt;-<span class="st"> "Intermediaire"</span>
d$qualif.reg[d$qualif ==<span class="st"> "Technicien"</span>] &lt;-<span class="st"> "Intermediaire"</span>
d$qualif.reg[d$qualif ==<span class="st"> "Cadre"</span>] &lt;-<span class="st"> "Cadre"</span>
d$qualif.reg[d$qualif ==<span class="st"> "Autre"</span>] &lt;-<span class="st"> "Autre"</span>
<span class="kw">table</span>(d$qualif.reg)</code></pre></div>
<pre><code>
        Autre         Cadre       Employe 
           58           260           594 
Intermediaire       Ouvrier 
          246           495 </code></pre>
<p>On aurait pu reprÃ©senter ce recodage de maniÃ¨re plus compacte, notamment en commenÃ§ant par copier le contenu de <em>qualif</em> dans <em>qualif.reg</em>, ce qui permet de ne pas sâ€™occuper de ce qui ne change pas.</p>
<p>Il est cependant nÃ©cessaire de ne pas copier <em>qualif</em> sous forme de facteur, sinon on ne pourrait ajouter de nouvelles modalitÃ©s. On copie donc la version caractÃ¨res de <em>qualif</em> grÃ¢ce Ã  la fonction <code data-pkg="base" data-rdoc="character">as.character</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$qualif.reg &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$qualif)
d$qualif.reg[d$qualif ==<span class="st"> "Ouvrier specialise"</span>] &lt;-<span class="st"> "Ouvrier"</span>
d$qualif.reg[d$qualif ==<span class="st"> "Ouvrier qualifie"</span>] &lt;-<span class="st"> "Ouvrier"</span>
d$qualif.reg[d$qualif ==<span class="st"> "Profession intermediaire"</span>] &lt;-<span class="st"> "Intermediaire"</span>
d$qualif.reg[d$qualif ==<span class="st"> "Technicien"</span>] &lt;-<span class="st"> "Intermediaire"</span>
<span class="kw">table</span>(d$qualif.reg)</code></pre></div>
<pre><code>
        Autre         Cadre       Employe 
           58           260           594 
Intermediaire       Ouvrier 
          246           495 </code></pre>
<p>On peut faire une version encore plus compacte en utilisant lâ€™opÃ©rateur logique <em>ou</em> (<code>|</code>)Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$qualif.reg &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$qualif)
d$qualif.reg[d$qualif ==<span class="st"> "Ouvrier specialise"</span> |<span class="st"> </span>d$qualif ==<span class="st"> </span>
<span class="st">  "Ouvrier qualifie"</span>] &lt;-<span class="st"> "Ouvrier"</span>
d$qualif.reg[d$qualif ==<span class="st"> "Profession intermediaire"</span> |<span class="st"> </span>
<span class="st">  </span>d$qualif ==<span class="st"> "Technicien"</span>] &lt;-<span class="st"> "Intermediaire"</span>
<span class="kw">table</span>(d$qualif.reg)</code></pre></div>
<pre><code>
        Autre         Cadre       Employe 
           58           260           594 
Intermediaire       Ouvrier 
          246           495 </code></pre>
<p>Enfin, pour terminer ce petit tour dâ€™horizon, on peut Ã©galement remplacer lâ€™opÃ©rateur <code>|</code> par <code>%in%</code>, qui peut parfois Ãªtre plus lisibleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$qualif.reg &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$qualif)
d$qualif.reg[d$qualif %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">"Ouvrier specialise"</span>, 
  <span class="st">"Ouvrier qualifie"</span>)] &lt;-<span class="st"> "Ouvrier"</span>
d$qualif.reg[d$qualif %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">"Profession intermediaire"</span>, 
  <span class="st">"Technicien"</span>)] &lt;-<span class="st"> "Intermediaire"</span>
<span class="kw">table</span>(d$qualif.reg)</code></pre></div>
<pre><code>
        Autre         Cadre       Employe 
           58           260           594 
Intermediaire       Ouvrier 
          246           495 </code></pre>
<p>Dans tous les cas le rÃ©sultat obtenu est une variable de type caractÃ¨re. On pourra la convertir en facteur par un simpleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$qualif.reg &lt;-<span class="st"> </span><span class="kw">factor</span>(d$qualif.reg)</code></pre></div>
<p>Si on souhaite recoder les valeurs manquantes, il suffit de faire appel Ã  la fonction <code data-pkg="base" data-rdoc="NA">is.na</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$trav.satisf)</code></pre></div>
<pre><code>
  Satisfaction Insatisfaction      Equilibre 
           480            117            451 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$trav.satisf.reg &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$trav.satisf)
d$trav.satisf.reg[<span class="kw">is.na</span>(d$trav.satisf)] &lt;-<span class="st"> "Manquant"</span>
<span class="kw">table</span>(d$trav.satisf.reg)</code></pre></div>
<pre><code>
     Equilibre Insatisfaction       Manquant 
           451            117            952 
  Satisfaction 
           480 </code></pre>
<div class="note">
<p><code class="pkg">questionr</code> propose une interface interactive pour le recodage dâ€™une variable qualitative (renommage et regroupement de modalitÃ©s). Cette fonction, nommÃ©e <code data-pkg="questionr">irec</code>, sâ€™utilise de la maniÃ¨re suivanteÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">irec</span>(d, qualif)</code></pre></div>
<p><strong>RStudio</strong> va alors ouvrir une fenÃªtre semblable Ã  lâ€™image ci-dessousÂ :</p>
<p><img src="images/capture_irec.png" alt="Capture de irec"/></p>
<p>Vous pouvez alors sÃ©lectionner diffÃ©rentes options, et pour chaque ancienne modalitÃ©, indiquer la nouvelle valeur correspondante. Pour regrouper des modalitÃ©s, il suffit de leur assigner des nouvelles valeurs identiques. Dans tous les cas nâ€™hÃ©sitez pas Ã  expÃ©rimenter, lâ€™interface se contente de gÃ©nÃ©rer du code <strong>R</strong> Ã  copier/coller dans votre script mais ne lâ€™exÃ©cute pas, et ne modifie donc jamais vos donnÃ©esÂ !</p>
<p>Lâ€™onglet <em>VÃ©rification</em> affiche un tri croisÃ© de lâ€™ancienne et de la nouvelle variable pour vÃ©rifier que le recodage est correct. Une fois le rÃ©sultat satisfaisant, vous pouvez rÃ©cupÃ©rer le code gÃ©nÃ©rÃ© dans lâ€™onglet <em>Code</em> pour lâ€™inclure dans votre script.</p>
</div>
</div>
<div id="recodage_variables-calculees" class="section level2">
<h2>Variables calculÃ©es</h2>
<p>La crÃ©ation dâ€™une variable numÃ©rique Ã  partir de calculs sur une ou plusieurs autres variables numÃ©riques se fait trÃ¨s simplement.</p>
<p>Supposons que lâ€™on souhaite calculer une variable indiquant lâ€™Ã©cart entre le nombre dâ€™heures passÃ©es Ã  regarder la tÃ©lÃ©vision et la moyenne globale de cette variable. On pourrait alors faireÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">range</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1]  0 12</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 2.246566</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$ecart.heures.tv &lt;-<span class="st"> </span>d$heures.tv -<span class="st"> </span><span class="kw">mean</span>(d$heures.tv, 
  <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)
<span class="kw">range</span>(d$ecart.heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] -2.246566  9.753434</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(d$ecart.heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 4.714578e-17</code></pre>
<p>Autre exemple tirÃ© du jeu de donnÃ©es <code>rp99</code>Â : si on souhaite calculer le pourcentage dâ€™actifs dans chaque commune, on peut diviser la population active <em>pop.act</em> par la population totale <em>pop.tot</em>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">"rp99"</span>)
rp99$part.actifs &lt;-<span class="st"> </span>rp99$pop.act/rp99$pop.tot *<span class="st"> </span><span class="dv">100</span></code></pre></div>
</div>
<div id="recodage_combiner-plusieurs-variables" class="section level2">
<h2>Combiner plusieurs variables</h2>
<p>La combinaison de plusieurs variables se fait Ã  lâ€™aide des techniques dâ€™indexation dÃ©jÃ  dÃ©crites prÃ©cÃ©demment. Le plus compliquÃ© est dâ€™arriver Ã  formuler des conditions parfois complexes de maniÃ¨re rigoureuse.</p>
<p>On peut ainsi vouloir combiner plusieurs variables qualitatives en une seuleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$act.manuelles &lt;-<span class="st"> </span><span class="ot">NA</span>
d$act.manuelles[d$cuisine ==<span class="st"> "Oui"</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> "Oui"</span>] &lt;-<span class="st"> "Cuisine et Bricolage"</span>
d$act.manuelles[d$cuisine ==<span class="st"> "Oui"</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> "Non"</span>] &lt;-<span class="st"> "Cuisine seulement"</span>
d$act.manuelles[d$cuisine ==<span class="st"> "Non"</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> "Oui"</span>] &lt;-<span class="st"> "Bricolage seulement"</span>
d$act.manuelles[d$cuisine ==<span class="st"> "Non"</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> "Non"</span>] &lt;-<span class="st"> "Ni cuisine ni bricolage"</span>
<span class="kw">table</span>(d$act.manuelles)</code></pre></div>
<pre><code>
    Bricolage seulement    Cuisine et Bricolage 
                    437                     416 
      Cuisine seulement Ni cuisine ni bricolage 
                    465                     682 </code></pre>
<p>On peut Ã©galement combiner variables qualitatives et variables quantitativesÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$age.sexe &lt;-<span class="st"> </span><span class="ot">NA</span>
d$age.sexe[d$sexe ==<span class="st"> "Homme"</span> &amp;<span class="st"> </span>d$age &lt;<span class="st"> </span><span class="dv">40</span>] &lt;-<span class="st"> "Homme moins de 40 ans"</span>
d$age.sexe[d$sexe ==<span class="st"> "Homme"</span> &amp;<span class="st"> </span>d$age &gt;=<span class="st"> </span><span class="dv">40</span>] &lt;-<span class="st"> "Homme plus de 40 ans"</span>
d$age.sexe[d$sexe ==<span class="st"> "Femme"</span> &amp;<span class="st"> </span>d$age &lt;<span class="st"> </span><span class="dv">40</span>] &lt;-<span class="st"> "Femme moins de 40 ans"</span>
d$age.sexe[d$sexe ==<span class="st"> "Femme"</span> &amp;<span class="st"> </span>d$age &gt;=<span class="st"> </span><span class="dv">40</span>] &lt;-<span class="st"> "Femme plus de 40 ans"</span>
<span class="kw">table</span>(d$age.sexe)</code></pre></div>
<pre><code>
Femme moins de 40 ans  Femme plus de 40 ans 
                  376                   725 
Homme moins de 40 ans  Homme plus de 40 ans 
                  315                   584 </code></pre>
<p>Les combinaisons de variables un peu complexes nÃ©cessitent parfois un petit travail de rÃ©flexion. En particulier, lâ€™ordre des commandes de recodage a parfois une influence dans le rÃ©sultat final.</p>
</div>
<div id="recodage_variables-scores" class="section level2">
<h2>Variables scores</h2>
<p>Une variable score est une variable calculÃ©e en additionnant des poids accordÃ©s aux modalitÃ©s dâ€™une sÃ©rie de variables qualitatives.</p>
<p>Pour prendre un exemple tout Ã  fait arbitraire, imaginons que nous souhaitons calculer un score dâ€™activitÃ©s extÃ©rieures. Dans ce score on considÃ¨re que le fait dâ€™aller au cinÃ©ma Â«Â pÃ¨seÂ Â» 10, celui de pÃªcher ou chasser vaut 30 et celui de faire du sport vaut 20. On pourrait alors calculer notre score de la maniÃ¨re suivanteÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$score.ext &lt;-<span class="st"> </span><span class="dv">0</span>
d$score.ext[d$cinema ==<span class="st"> "Oui"</span>] &lt;-<span class="st"> </span>d$score.ext[d$cinema ==<span class="st"> </span>
<span class="st">  "Oui"</span>] +<span class="st"> </span><span class="dv">10</span>
d$score.ext[d$peche.chasse ==<span class="st"> "Oui"</span>] &lt;-<span class="st"> </span>d$score.ext[d$peche.chasse ==<span class="st"> </span>
<span class="st">  "Oui"</span>] +<span class="st"> </span><span class="dv">30</span>
d$score.ext[d$sport ==<span class="st"> "Oui"</span>] &lt;-<span class="st"> </span>d$score.ext[d$sport ==<span class="st"> </span>
<span class="st">  "Oui"</span>] +<span class="st"> </span><span class="dv">20</span>
<span class="kw">table</span>(d$score.ext)</code></pre></div>
<pre><code>
  0  10  20  30  40  50  60 
800 342 229 509  31  41  48 </code></pre>
<p>Cette notation Ã©tant un peu lourde, on peut lâ€™allÃ©ger un peu en utilisant la fonction <code data-pkg="base">ifelse</code>. Celle-ci prend en argument une condition et deux valeurs. Si la condition est vraie elle retourne la premiÃ¨re valeur, sinon elle retourne la seconde.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$score.ext &lt;-<span class="st"> </span><span class="dv">0</span>
d$score.ext &lt;-<span class="st"> </span><span class="kw">ifelse</span>(d$cinema ==<span class="st"> "Oui"</span>, <span class="dv">10</span>, <span class="dv">0</span>) +<span class="st"> </span><span class="kw">ifelse</span>(d$peche.chasse ==<span class="st"> </span>
<span class="st">  "Oui"</span>, <span class="dv">30</span>, <span class="dv">0</span>) +<span class="st"> </span><span class="kw">ifelse</span>(d$sport ==<span class="st"> "Oui"</span>, <span class="dv">20</span>, <span class="dv">0</span>)
<span class="kw">table</span>(d$score.ext)</code></pre></div>
<pre><code>
  0  10  20  30  40  50  60 
800 342 229 509  31  41  48 </code></pre>
</div>
<div id="recodage_verification-des-recodages" class="section level2">
<h2>VÃ©rification des recodages</h2>
<p>Il est trÃ¨s important de vÃ©rifier, notamment aprÃ¨s les recodages les plus complexes, quâ€™on a bien obtenu le rÃ©sultat escomptÃ©. Les deux points les plus sensibles Ã©tant les valeurs manquantes et les erreurs dans les conditions.</p>
<p>Pour vÃ©rifier tout cela, le plus simple est sans doute de faire des tableaux croisÃ©s entre la variable recodÃ©e et celles ayant servi au recodage, Ã  lâ€™aide des fonctions <code data-pkg="base">table</code> ou <code data-pkg="stats">xtabs</code>, et de vÃ©rifier le nombre de valeurs manquantes dans la variable recodÃ©e avec <code data-pkg="base">summary</code>, <code data-pkg="questionr">freq</code> ou <code data-pkg="base">table</code>.</p>
<p>Par exempleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$act.manuelles &lt;-<span class="st"> </span><span class="ot">NA</span>
d$act.manuelles[d$cuisine ==<span class="st"> "Oui"</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> "Oui"</span>] &lt;-<span class="st"> "Cuisine et Bricolage"</span>
d$act.manuelles[d$cuisine ==<span class="st"> "Oui"</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> "Non"</span>] &lt;-<span class="st"> "Cuisine seulement"</span>
d$act.manuelles[d$cuisine ==<span class="st"> "Non"</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> "Oui"</span>] &lt;-<span class="st"> "Bricolage seulement"</span>
d$act.manuelles[d$cuisine ==<span class="st"> "Non"</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> "Non"</span>] &lt;-<span class="st"> "Ni cuisine ni bricolage"</span>
<span class="kw">table</span>(d$act.manuelles, d$cuisine)</code></pre></div>
<pre><code>                         
                          Non Oui
  Bricolage seulement     437   0
  Cuisine et Bricolage      0 416
  Cuisine seulement         0 465
  Ni cuisine ni bricolage 682   0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$act.manuelles, d$bricol)</code></pre></div>
<pre><code>                         
                          Non Oui
  Bricolage seulement       0 437
  Cuisine et Bricolage      0 416
  Cuisine seulement       465   0
  Ni cuisine ni bricolage 682   0</code></pre>
</div>

</article>
<article id="ou-trouver-de-l-aide">

<div class="fluid-row" id="ou-trouver-de-l-aide_header">


<h1 class="title">OÃ¹ trouver de lâ€™aideÂ ?</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#ou-trouver-de-l-aide_aide-en-ligne">Aide en ligne</a><ul>
<li><a href="#ou-trouver-de-l-aide_aide-sur-une-fonction">Aide sur une fonction</a></li>
<li><a href="#ou-trouver-de-l-aide_naviguer-dans-laide">Naviguer dans lâ€™aide</a></li>
</ul></li>
<li><a href="#ou-trouver-de-l-aide_ressources-sur-le-web">Ressources sur le Web</a><ul>
<li><a href="#ou-trouver-de-l-aide_moteur-de-recherche">Moteur de recherche</a></li>
<li><a href="#ou-trouver-de-l-aide_aide-en-ligne-1">Aide en ligne</a></li>
<li><a href="#ou-trouver-de-l-aide_ressources-officielles">Ressources officielles</a></li>
<li><a href="#ou-trouver-de-l-aide_revue">Revue</a></li>
<li><a href="#ou-trouver-de-l-aide_ressources-francophones">Ressources francophones</a></li>
<li><a href="#ou-trouver-de-l-aide_rstudio">RStudio</a></li>
<li><a href="#ou-trouver-de-l-aide_antiseches-cheatsheet">AntisÃ¨ches (cheatsheet)</a></li>
</ul></li>
<li><a href="#ou-trouver-de-l-aide_ou-poser-des-questions">OÃ¹ poser des questionsÂ ?</a><ul>
<li><a href="#ou-trouver-de-l-aide_les-forums-danalyse-r">Les forums dâ€™analyse-R</a></li>
<li><a href="#ou-trouver-de-l-aide_liste-r-soc">Liste R-soc</a></li>
<li><a href="#ou-trouver-de-l-aide_stackoverflow">StackOverflow</a></li>
<li><a href="#ou-trouver-de-l-aide_forum-web-en-francais">Forum Web en franÃ§ais</a></li>
<li><a href="#ou-trouver-de-l-aide_canaux-irc-chat">Canaux IRC (chat)</a></li>
<li><a href="#ou-trouver-de-l-aide_listes-de-discussion-officielles">Listes de discussion officielles</a></li>
</ul></li>
</ul>
</div>

<div class="note">
<p>La version originale de ce chapitre a Ã©tÃ© Ã©crite par Julien Barnier dans le cadre du support de cours <a href="https://github.com/juba/intro-r">Introduction Ã  R</a>.</p>
</div>
<div id="ou-trouver-de-l-aide_aide-en-ligne" class="section level2">
<h2>Aide en ligne</h2>
<p><strong>R</strong> dispose dâ€™une <dfn>aide en ligne</dfn> trÃ¨s complÃ¨te, mais dont lâ€™usage nâ€™est pas forcÃ©ment trÃ¨s simple. Dâ€™une part car elle est intÃ©gralement en anglais, dâ€™autre part car son organisation prend un certain temps Ã  Ãªtre maÃ®trisÃ©e.</p>
<div id="ou-trouver-de-l-aide_aide-sur-une-fonction" class="section level3">
<h3>Aide sur une fonction</h3>
<p>La fonction la plus utile est sans doute <code data-pkg="utils">help</code> (ou son Ã©quivalent <code data-pkg="utils" data-rdoc="Question">?</code>) qui permet dâ€™afficher la page dâ€™aide liÃ©e Ã  une ou plusieurs fonctions. Celle-ci permet de lister les arguments de la fonction, dâ€™avoir des informations dÃ©taillÃ©es sur son fonctionnement, les rÃ©sultats quâ€™elle retourne, etc.</p>
<p>Pour accÃ©der Ã  lâ€™aide de la fonction <code data-pkg="base">mean</code>, par exemple, il vous suffit de saisir directementÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?mean</code></pre></div>
<p>ou bien</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">help</span>(<span class="st">"mean"</span>)</code></pre></div>
<p>Sous <strong>RStudio</strong>, la page dâ€™aide correspondante sâ€™affichera sous lâ€™onglet <em>Help</em> dans le quadrant infÃ©rieur droit.</p>
<p>Chaque page dâ€™aide comprend plusieurs sections, en particulierÂ :</p>
<table style="width:14%;">
<colgroup>
<col width="6%"/>
<col width="6%"/>
</colgroup>
<thead>
<tr class="header">
<th align="left">Section</th>
<th align="left">Contenu</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><em>Description</em></td>
<td align="left">donne un rÃ©sumÃ© en une phrase de ce que fait la fonction</td>
</tr>
<tr class="even">
<td align="left"><em>Usage</em></td>
<td align="left">indique la ou les maniÃ¨res de lâ€™utiliser</td>
</tr>
<tr class="odd">
<td align="left"><em>Arguments</em></td>
<td align="left">dÃ©taille tous les arguments possibles et leur signification</td>
</tr>
<tr class="even">
<td align="left"><em>Value</em></td>
<td align="left">indique la forme du rÃ©sultat renvoyÃ© par la fonction</td>
</tr>
<tr class="odd">
<td align="left"><em>Details</em></td>
<td align="left">apporte des prÃ©cisions sur le fonctionnement de la fonction</td>
</tr>
<tr class="even">
<td align="left"><em>Note</em></td>
<td align="left">pour des remarques Ã©ventuelles</td>
</tr>
<tr class="odd">
<td align="left"><em>References</em></td>
<td align="left">pour des rÃ©fÃ©rences bibliographiques ou des URL associÃ©es</td>
</tr>
<tr class="even">
<td align="left"><em>See Also</em></td>
<td align="left">trÃ¨s utile, renvoie vers dâ€™autres fonctions semblables ou liÃ©es, ce qui peut Ãªtre trÃ¨s utile pour dÃ©couvrir ou retrouver une fonction dont on a oubliÃ© le nom</td>
</tr>
<tr class="odd">
<td align="left"><em>Examples</em></td>
<td align="left">sÃ©rie dâ€™exemples dâ€™utilisation</td>
</tr>
</tbody>
</table>
<p>Les exemples peuvent Ãªtre directement exÃ©cutÃ©s en utilisant la fonction <code data-pkg="utils">example</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">example</span>(mean)</code></pre></div>
<pre><code>
mean&gt; x &lt;- c(0:10, 50)

mean&gt; xm &lt;- mean(x)

mean&gt; c(xm, mean(x, trim = 0.10))
[1] 8.75 5.50</code></pre>
</div>
<div id="ou-trouver-de-l-aide_naviguer-dans-laide" class="section level3">
<h3>Naviguer dans lâ€™aide</h3>
<p>La fonction <code data-pkg="utils">help.start</code> permet dâ€™afficher le sommaire de lâ€™aide en ligne. Saisissez simplementÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">help.start</span>()</code></pre></div>
<p>Si vous souhaitez rechercher quelque chose dans le contenu de lâ€™aide, vous pouvez utiliser la fonction <code data-pkg="utils">help.search</code> (ou <code data-pkg="utils" data-rdoc="help.search">??</code> qui est Ã©quivalente) qui renvoie une liste des pages dâ€™aide contenant les termes recherchÃ©s.</p>
<p>Par exempleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">help.search</span>(<span class="st">"logistic"</span>)</code></pre></div>
<p>ou</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">??logistic</code></pre></div>
<p>pour rechercher les pages de lâ€™aide qui contiennent le terme <em>logistic</em>.</p>
</div>
</div>
<div id="ou-trouver-de-l-aide_ressources-sur-le-web" class="section level2">
<h2>Ressources sur le Web</h2>
<p>De nombreuses ressources existent en ligne, mais la plupart sont en anglais.</p>
<div id="ou-trouver-de-l-aide_moteur-de-recherche" class="section level3">
<h3>Moteur de recherche</h3>
<p>Le fait que le logiciel sâ€™appelle <strong>R</strong> ne facilite malheureusement pas les recherches sur le Webâ€¦ La solution Ã  ce problÃ¨me a Ã©tÃ© trouvÃ©e grÃ¢ce Ã  la constitution dâ€™un moteur de recherche <em>ad hoc</em> Ã  partir de <strong>Google</strong>, nommÃ© <strong>Rseek</strong>Â :<br/><a href="http://www.rseek.org/" class="uri">http://www.rseek.org/</a>.</p>
<p>Les requÃªtes saisies dans <strong>Rseek</strong> sont exÃ©cutÃ©es dans des corpus prÃ©dÃ©finis liÃ©s Ã  <strong>R</strong>, notamment les documents et manuels, les listes de discussion ou le code source du programme.</p>
<p>Les requÃªtes devront cependant Ãªtre formulÃ©es en anglais.</p>
</div>
<div id="ou-trouver-de-l-aide_aide-en-ligne-1" class="section level3">
<h3>Aide en ligne</h3>
<p>Le site <strong>R documentation</strong> propose un accÃ¨s clair et rapide Ã  la documentation de <strong>R</strong> et des extensions hÃ©bergÃ©es sur le <strong>CRAN</strong> (ainsi que certaines extensions hÃ©bergÃ©es sur <strong>GitHub</strong>). Il permet notamment de rechercher et naviguer facilement entre les pages des diffÃ©rentes fonctionsÂ :<br/> <a href="http://www.rdocumentation.org/" class="uri">http://www.rdocumentation.org/</a>.</p>
</div>
<div id="ou-trouver-de-l-aide_ressources-officielles" class="section level3">
<h3>Ressources officielles</h3>
<p>La documentation officielle de <strong>R</strong> est accessible en ligne depuis le site du projetÂ :<br/> <a href="http://www.r-project.org/" class="uri">http://www.r-project.org/</a>.</p>
<p>Les liens de lâ€™entrÃ©e <em>Documentation</em> du menu de gauche vous permettent dâ€™accÃ©der Ã  diffÃ©rentes ressources.</p>
<div id="ou-trouver-de-l-aide_manuels" class="section level4">
<h4>Manuels</h4>
<p>Les <em>manuels</em> sont des documents complets de prÃ©sentation de certains aspects de <strong>R</strong>. Ils sont accessibles en ligne, ou tÃ©lÃ©chargeables au format <strong>PDF</strong>Â :<br/><a href="http://cran.r-project.org/manuals.html" class="uri">http://cran.r-project.org/manuals.html</a>.</p>
<p>On notera plus particuliÃ¨rement <em>An introduction to R</em>, normalement destinÃ© aux dÃ©butants, mais qui nÃ©cessite quand mÃªme un minimum dâ€™aisance en informatique et en statistiquesÂ :<br/> <a href="http://cran.r-project.org/doc/manuals/R-intro.html" class="uri">http://cran.r-project.org/doc/manuals/R-intro.html</a>.</p>
<p><em>R Data Import/Export</em> explique notamment comment importer des donnÃ©es depuis dâ€™autres logicielsÂ :<br/> <a href="http://cran.r-project.org/doc/manuals/R-data.html" class="uri">http://cran.r-project.org/doc/manuals/R-data.html</a>.</p>
</div>
<div id="ou-trouver-de-l-aide_faq" class="section level4">
<h4>FAQ</h4>
<p>Les <em>FAQ</em> (<em>frequently asked questions</em>) regroupent des questions frÃ©quemment posÃ©es et leurs rÃ©ponses. Ã€ lire donc ou, au moins, Ã  parcourir avant toute choseÂ :<br/><a href="http://cran.r-project.org/faqs.html" class="uri">http://cran.r-project.org/faqs.html</a>.</p>
<p>La FAQ la plus utile est la FAQ gÃ©nÃ©raliste sur <strong>R</strong>Â :<br/> <a href="http://cran.r-project.org/doc/FAQ/R-FAQ.html" class="uri">http://cran.r-project.org/doc/FAQ/R-FAQ.html</a>.</p>
<p>Mais il existe Ã©galement une FAQ dÃ©diÃ©e aux questions liÃ©es Ã  <strong>Windows</strong> et une autre Ã  la plateforme <strong>Mac OS X</strong>.</p>
<div class="note">
<p>Les manuels et les FAQ sont accessibles mÃªme si vous nâ€™avez pas dâ€™accÃ¨s Ã  Internet en utilisant la fonction <code data-pkg="utils">help.start</code> dÃ©crite prÃ©cÃ©demment.</p>
</div>
</div>
<div id="ou-trouver-de-l-aide_r-announce" class="section level4">
<h4>R-announce</h4>
<p><strong>R-announce</strong> est la liste de diffusion Ã©lectronique officielle du projet. Elle ne comporte quâ€™un nombre rÃ©duit de messages (quelques-uns par mois tout au plus) et diffuse les annonces concernant de nouvelles versions de R ou dâ€™autres informations particuliÃ¨rement importantes. On peut sâ€™y abonner Ã  lâ€™adresse suivanteÂ :<br/><a href="https://stat.ethz.ch/mailman/listinfo/r-announce" class="uri">https://stat.ethz.ch/mailman/listinfo/r-announce</a></p>
</div>
<div id="ou-trouver-de-l-aide_r-journal" class="section level4">
<h4>R Journal</h4>
<p><strong>R Journal</strong> est la Â«Â revueÂ Â» officielle du projet <strong>R</strong>, qui a succÃ©dÃ© dÃ©but 2009 Ã  la lettre de nouvelles <strong>R News</strong>. Elle paraÃ®t entre deux et cinq fois par an et contient des informations sur les nouvelles versions du logiciel, des articles prÃ©sentant des extensions, des exemples dâ€™analyseâ€¦ Les parutions sont annoncÃ©es sur la liste de diffusion <strong>R-announce</strong> et les numÃ©ros sont tÃ©lÃ©chargeables Ã  lâ€™adresse suivanteÂ :<br/> <a href="http://journal.r-project.org/" class="uri">http://journal.r-project.org/</a>.</p>
</div>
<div id="ou-trouver-de-l-aide_autres-documents" class="section level4">
<h4>Autres documents</h4>
<p>On trouvera de nombreux documents dans diffÃ©rentes langues, en gÃ©nÃ©ral au format <strong>PDF</strong>, dans le rÃ©pertoire suivantÂ :<br/><a href="http://cran.r-project.org/doc/contrib/" class="uri">http://cran.r-project.org/doc/contrib/</a>.</p>
<p>Parmi ceux-ci, les cartes de rÃ©fÃ©rence peuvent Ãªtre trÃ¨s utiles, ce sont des aides-mÃ©moire recensant les fonctions les plus courantesÂ :<br/><a href="http://cran.r-project.org/doc/contrib/Short-refcard.pdf" class="uri">http://cran.r-project.org/doc/contrib/Short-refcard.pdf</a></p>
<p>On notera Ã©galement un document dâ€™introduction en anglais progressif et sâ€™appuyant sur des mÃ©thodes statistiques relativement simplesÂ :<br/><a href="http://cran.r-project.org/doc/contrib/Verzani-SimpleR.pdf" class="uri">http://cran.r-project.org/doc/contrib/Verzani-SimpleR.pdf</a></p>
<p>Pour les utilisateurs dÃ©jÃ  habituÃ©s Ã  <strong>SAS</strong> ou <strong>SPSS</strong>, le livre <em>R for SAS and SPSS Users</em> et le document gratuit qui en est tirÃ© peuvent Ãªtre de bonnes ressources, tout comme le site web <strong>Quick-R</strong>Â :<br/> <a href="http://rforsasandspssusers.com/" class="uri">http://rforsasandspssusers.com/</a> et <a href="http://www.statmethods.net/" class="uri">http://www.statmethods.net/</a>.</p>
</div>
</div>
<div id="ou-trouver-de-l-aide_revue" class="section level3">
<h3>Revue</h3>
<p>La revue <em>Journal of Statistical Software</em> est une revue Ã©lectronique anglophone, dont les articles sont en accÃ¨s libre, et qui traite de lâ€™utilisation de logiciels dâ€™analyse de donnÃ©es dans un grand nombre de domaines. De nombreux articles (la majoritÃ©) sont consacrÃ©s Ã  <strong>R</strong> et Ã  la prÃ©sentation dâ€™extensions plus ou moins spÃ©cialisÃ©es.</p>
<p>Les articles qui y sont publiÃ©s prennent souvent la forme de tutoriels plus ou moins accessibles mais qui fournissent souvent une bonne introduction et une ressource riche en informations et en liens.</p>
<p>Adresse de la revueÂ :<br/><a href="http://www.jstatsoft.org/" class="uri">http://www.jstatsoft.org/</a></p>
</div>
<div id="ou-trouver-de-l-aide_ressources-francophones" class="section level3">
<h3>Ressources francophones</h3>
<p>Il existe des ressources en franÃ§ais sur lâ€™utilisation de <strong>R</strong>, mais peu sont rÃ©ellement destinÃ©es aux dÃ©butants, elles nÃ©cessitent en gÃ©nÃ©ral des bases Ã  la fois en informatique et en statistique.</p>
<p>Le document le plus abordable et le plus complet est sans doute <em>R pour les dÃ©butants</em>, dâ€™Emmanuel Paradis, accessible au format <strong>PDF</strong>Â :<br/><a href="http://cran.r-project.org/doc/contrib/Paradis-rdebuts_fr.pdf" class="uri">http://cran.r-project.org/doc/contrib/Paradis-rdebuts_fr.pdf</a>.</p>
<p>La somme de documentation en franÃ§ais la plus importante liÃ©e Ã  <strong>R</strong> est sans nulle doute celle mise Ã  disposition par le PÃ´le bioinformatique lyonnais. Leur site propose des cours complets de statistique utilisant <strong>R</strong>Â :<br/><a href="http://pbil.univ-lyon1.fr/R/enseignement.html" class="uri">http://pbil.univ-lyon1.fr/R/enseignement.html</a>.</p>
<p>La plupart des documents sont assez pointus niveau mathÃ©matique et plutÃ´t orientÃ©s biostatistique, mais on trouvera des documents plus introductifs iciÂ :<br/><a href="http://pbil.univ-lyon1.fr/R/html/cours1" class="uri">http://pbil.univ-lyon1.fr/R/html/cours1</a>.</p>
<p>Dans tous les cas la somme de travail et de connaissances mise Ã  disposition librement est impressionnanteâ€¦ Enfin, le site de Vincent Zoonekynd (<a href="http://zoonek2.free.fr/UNIX/48_R_2004/all.html" class="uri">http://zoonek2.free.fr/UNIX/48_R_2004/all.html</a>) comprend de nombreuses notes prises au cours de sa dÃ©couverte du logiciel. On notera cependant que lâ€™auteur est normalien et docteur en mathÃ©matiquesâ€¦</p>
</div>
<div id="ou-trouver-de-l-aide_rstudio" class="section level3">
<h3>RStudio</h3>
<p>La documentation officielle de <strong>RStudio</strong> est disponible sur <a href="https://support.rstudio.com" class="uri">https://support.rstudio.com</a> (catÃ©gorie <em>Documentation</em> disponible en milieu de page).</p>
</div>
<div id="ou-trouver-de-l-aide_antiseches-cheatsheet" class="section level3">
<h3>AntisÃ¨ches (cheatsheet)</h3>
<p>On peut trouver un peu partout sur internet des antisÃ¨ches (<em>cheatsheets</em> en anglais) qui sont en gÃ©nÃ©ral un fichier <strong>PDF</strong> rÃ©sumant les principales fonctions dâ€™une extension ou dâ€™une problÃ©matique donnÃ©e. Ces antisÃ¨ches peuvent Ãªtre imprimÃ©es afin de les avoir facilement Ã  porter de main.</p>
<p>Pour les trouver, il suffit dâ€™effectuer une recherche <strong>Google</strong> avec les mots-clÃ©s <code>R cheatsheet</code> ou <code>&lt;pkg&gt; cheatsheet</code> en remplacant <code>&lt;pkg&gt;</code> par le nom du package qui nous intÃ©resse.</p>
</div>
</div>
<div id="ou-trouver-de-l-aide_ou-poser-des-questions" class="section level2">
<h2>OÃ¹ poser des questionsÂ ?</h2>
<p>La communautÃ© des utilisateurs de <strong>R</strong> est trÃ¨s active et en gÃ©nÃ©ral trÃ¨s contente de pouvoir rÃ©pondre aux questions (nombreuses) des dÃ©butants et Ã  celles (tout aussi nombreuses) des utilisateurs plus expÃ©rimentÃ©s. Dans tous les cas, les rÃ¨gles de base Ã  respecter avant de poser une question sont toujours les mÃªmesÂ : avoir cherchÃ© soi-mÃªme la rÃ©ponse auparavant, notamment dans les FAQ et dans lâ€™aide en ligne, et poser sa question de la maniÃ¨re la plus claire possible, de prÃ©fÃ©rence avec un exemple de code posant problÃ¨me.</p>
<div id="ou-trouver-de-l-aide_les-forums-danalyse-r" class="section level3">
<h3>Les forums dâ€™analyse-R</h3>
<p>En premier lieu (autopromotion oblige), chaque chapitre du site dâ€™<strong>analyse-R</strong> (<a href="http://larmarange.github.io/analyse-R/" class="uri">http://larmarange.github.io/analyse-R/</a>) comporte en bas de page une fonctionnalitÃ© permettant de laisser des commentaires. On peut donc y poser une question en lien avec le chapitre concernÃ©.</p>
</div>
<div id="ou-trouver-de-l-aide_liste-r-soc" class="section level3">
<h3>Liste R-soc</h3>
<p>Une liste de discussion a Ã©tÃ© crÃ©Ã©e spÃ©cialement pour permettre aide et Ã©changes autour de lâ€™utilisation de <strong>R</strong> en sciences sociales. Elle est hÃ©bergÃ©e par le CRU et on peut sâ€™y abonner Ã  lâ€™adresse suivanteÂ : <br/><a href="https://listes.cru.fr/sympa/subscribe/r-soc" class="uri">https://listes.cru.fr/sympa/subscribe/r-soc</a>.</p>
<p>GrÃ¢ce aux services offerts par le site <strong>gmane.org</strong>, la liste est Ã©galement disponible sous dâ€™autres formes (forum Web, blog, <strong>NNTP</strong>, flux <strong>RSS</strong>) permettant de lire et de poster sans avoir Ã  sâ€™inscrire et Ã  recevoir les messages sous forme de courrier Ã©lectronique. Pour plus dâ€™informationsÂ :<br/> <a href="http://dir.gmane.org/gmane.comp.lang.r.user.french" class="uri">http://dir.gmane.org/gmane.comp.lang.r.user.french</a>.</p>
</div>
<div id="ou-trouver-de-l-aide_stackoverflow" class="section level3">
<h3>StackOverflow</h3>
<p>Le site <strong>StackOverflow</strong> (qui fait partie de la famille des sites <strong>StackExchange</strong>) comprend une section (anglophone) dÃ©diÃ©e Ã  <strong>R</strong> qui permet de poser des questions et en gÃ©nÃ©ral dâ€™obtenir des rÃ©ponses assez rapidementÂ :<br/><a href="http://stackoverflow.com/questions/tagged/r" class="uri">http://stackoverflow.com/questions/tagged/r</a>.</p>
<p>La premiÃ¨re chose Ã  faire, Ã©videmment, est de vÃ©rifier que sa question nâ€™a pas dÃ©jÃ  Ã©tÃ© posÃ©e.</p>
</div>
<div id="ou-trouver-de-l-aide_forum-web-en-francais" class="section level3">
<h3>Forum Web en franÃ§ais</h3>
<p>Le Cirad a mis en ligne un forum dÃ©diÃ© aux utilisateurs de <strong>R</strong>, trÃ¨s actifÂ :<br/> <a href="http://forums.cirad.fr/logiciel-R/index.php" class="uri">http://forums.cirad.fr/logiciel-R/index.php</a>.</p>
<p>Les questions diverses et variÃ©es peuvent Ãªtre posÃ©es dans la rubrique <em>Questions en cours</em>Â :<br/> <a href="http://forums.cirad.fr/logiciel-R/viewforum.php?f=3" class="uri">http://forums.cirad.fr/logiciel-R/viewforum.php?f=3</a>.</p>
<p>Il est tout de mÃªme conseillÃ© de faire une recherche rapide sur le forum avant de poser une question, pour voir si la rÃ©ponse ne sâ€™y trouverait pas dÃ©jÃ .</p>
</div>
<div id="ou-trouver-de-l-aide_canaux-irc-chat" class="section level3">
<h3>Canaux IRC (chat)</h3>
<p>Lâ€™<strong>IRC</strong>, ou <em>Internet Relay Chat</em> est le vÃ©nÃ©rable ancÃªtre toujours trÃ¨s actif des messageries instantanÃ©es actuelles. Un canal (en anglais) est notamment dÃ©diÃ© aux Ã©changes autour de <strong>R</strong> (<code>#R</code>).</p>
<p>Si vous avez dÃ©jÃ  lâ€™habitude dâ€™utiliser <strong>IRC</strong>, il vous suffit de pointer votre client prÃ©fÃ©rÃ© sur <strong>Freenode</strong> (<code>irc.freenode.net</code>) puis de rejoindre lâ€™un des canaux en question.</p>
<p>Sinon, le plus simple est certainement dâ€™utiliser lâ€™interface web de <strong>Mibbit</strong>, accessible Ã  lâ€™adresse <a href="http://www.mibbit.com/" class="uri">http://www.mibbit.com/</a>.</p>
<p>Dans le champ <em>Connect to IRC</em>, sÃ©lectionnez <em>Freenode.net</em>, puis saisissez un pseudonyme dans le champ <em>Nick</em> et <code>#R</code> dans le champ <em>Channel</em>. Vous pourrez alors discuter directement avec les personnes prÃ©sentes.</p>
<p>Le canal #R est normalement peuplÃ© de personnes qui seront trÃ¨s heureuses de rÃ©pondre Ã  toutes les questions, et en gÃ©nÃ©ral lâ€™ambiance y est trÃ¨s bonne. Une fois votre question posÃ©e, nâ€™hÃ©sitez pas Ã  Ãªtre patient et Ã  attendre quelques minutes, voire quelques heures, le temps quâ€™un des habituÃ©s vienne y faire un tour.</p>
</div>
<div id="ou-trouver-de-l-aide_listes-de-discussion-officielles" class="section level3">
<h3>Listes de discussion officielles</h3>
<p>La liste de discussion dâ€™entraide (par courrier Ã©lectronique) officielle du logiciel <strong>R</strong> sâ€™appelle <strong>R-help</strong>. On peut sâ€™y abonner Ã  lâ€™adresse suivante, mais il sâ€™agit dâ€™une liste avec de nombreux messagesÂ :<br/> <a href="https://stat.ethz.ch/mailman/listinfo/r-help" class="uri">https://stat.ethz.ch/mailman/listinfo/r-help</a>.</p>
<p>Pour une consultation ou un envoi ponctuels, le mieux est sans doute dâ€™utiliser les interfaces Web fournies par <strong>gmane.org</strong>Â :<br/><a href="http://blog.gmane.org/gmane.comp.lang.r.general" class="uri">http://blog.gmane.org/gmane.comp.lang.r.general</a>.</p>
<p><strong>R-help</strong> est une liste avec de nombreux messages, suivie par des spÃ©cialistes de <strong>R</strong>, dont certains des dÃ©veloppeurs principaux. Elle est cependant Ã  rÃ©server aux questions particuliÃ¨rement techniques qui nâ€™ont pas trouvÃ© de rÃ©ponses par dâ€™autres biais.</p>
<p>Dans tous les cas, il est nÃ©cessaire avant de poster sur cette liste de bien avoir pris connaissance du <em>posting guide</em> correspondantÂ :<br/><a href="http://www.r-project.org/posting-guide.html" class="uri">http://www.r-project.org/posting-guide.html</a>.</p>
<p>Plusieurs autres listes plus spÃ©cialisÃ©es existent Ã©galement, elles sont listÃ©es Ã  lâ€™adresse suivanteÂ : <br/><a href="http://www.r-project.org/mail.html" class="uri">http://www.r-project.org/mail.html</a>.</p>
</div>
</div>

</article>
<article id="introduction-a-dplyr">

<div class="fluid-row" id="introduction-a-dplyr_header">


<h1 class="title">Introduction Ã  dplyr</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="introduction-a-data-table">

<div class="fluid-row" id="introduction-a-data-table_header">


<h1 class="title">Introduction Ã  data.table</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="doublons">

<div class="fluid-row" id="doublons_header">


<h1 class="title">Doublons</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="tris">

<div class="fluid-row" id="tris_header">


<h1 class="title">Tris</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#tris_fonctions-r-de-base">Fonctions R de base</a></li>
<li><a href="#tris_extension-dplyr">Extension dplyr</a></li>
<li><a href="#tris_extension-data.table">Extension data.table</a></li>
</ul>
</div>

<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>
<p>Dans ce qui suit on travaillera sur le jeu de donnÃ©es tirÃ© de lâ€™enquÃªte <em>Histoire de vie</em>, fourni avec lâ€™extension <code class="pkg">questionr</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<div id="tris_fonctions-r-de-base" class="section level2">
<h2>Fonctions R de base</h2>
<p>La fonction <code data-pkg="base">sort</code> permet de <dfn data-index="tri de tables">trier</dfn><dfn data-index="tableau de donnÃ©es, tri"/> les Ã©lÃ©ments dâ€™un vecteur.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sort</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">1</span>, <span class="dv">8</span>))</code></pre></div>
<pre><code>[1] 1 2 5 6 8</code></pre>
<p>On peut appliquer cette fonction Ã  une variable, mais celle-ci ne permet que dâ€™ordonner les valeurs de cette variable, et pas lâ€™ensemble du tableau de donnÃ©es dont elle fait partie. Pour cela nous avons besoin dâ€™une autre fonction, nommÃ©e <code data-pkg="base">order</code>. Celle-ci ne renvoie pas les valeurs du vecteur triÃ©es, mais les emplacements de ces valeurs.</p>
<p>Un exemple pour comprendreÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">order</span>(<span class="kw">c</span>(<span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">10</span>))</code></pre></div>
<pre><code>[1] 3 1 2</code></pre>
<p>Le rÃ©sultat renvoyÃ© signifie que la plus petite valeur est la valeur situÃ©e en 3<sup>e</sup> position, suivie de celle en 1<sup>Ã¨re</sup> position et de celle en 2<sup>e</sup> position. Tout cela ne paraÃ®t pas passionnant Ã  premiÃ¨re vue, mais si on mÃ©lange ce rÃ©sultat avec un peu dâ€™indexation directe, Ã§a devient intÃ©ressantâ€¦</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(<span class="kw">order</span>(d$age))</code></pre></div>
<pre><code>[1] 162 215 346 377 511 646</code></pre>
<p>Ce que cette fonction renvoie, câ€™est lâ€™ordre dans lequel on doit placer les Ã©lÃ©ments de <em>age</em>, et donc par extension les lignes de <code>d</code>, pour que la variable soit triÃ©e par ordre croissant. Par consÃ©quent, si on faitÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.tri &lt;-<span class="st"> </span>d[<span class="kw">order</span>(d$age), ]</code></pre></div>
<p>Alors on a triÃ© les lignes de d par ordre dâ€™Ã¢ge croissantÂ ! Et si on fait un petitÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(d.tri, <span class="dv">3</span>)</code></pre></div>
<pre><code>     id age  sexe nivetud    poids
162 162  18 Homme    &lt;NA&gt; 4982.964
215 215  18 Homme    &lt;NA&gt; 4631.188
346 346  18 Femme    &lt;NA&gt; 1725.410
              occup qualif freres.soeurs clso
162 Etudiant, eleve   &lt;NA&gt;             2  Non
215 Etudiant, eleve   &lt;NA&gt;             2  Oui
346 Etudiant, eleve   &lt;NA&gt;             9  Non
                          relig trav.imp
162  Appartenance sans pratique     &lt;NA&gt;
215 Ni croyance ni appartenance     &lt;NA&gt;
346         Pratiquant regulier     &lt;NA&gt;
    trav.satisf hard.rock lecture.bd peche.chasse
162        &lt;NA&gt;       Non        Non          Non
215        &lt;NA&gt;       Non        Non          Non
346        &lt;NA&gt;       Non        Non          Non
    cuisine bricol cinema sport heures.tv
162     Non    Non    Non   Oui         3
215     Oui    Non    Oui   Oui         2
346     Non    Non    Oui   Non         2</code></pre>
<p>On a les caractÃ©ristiques des trois enquÃªtÃ©s les plus jeunes.</p>
<p>On peut Ã©videmment trier par ordre dÃ©croissant en utilisant lâ€™option <code>decreasing=TRUE</code>. On peut donc afficher les caractÃ©ristiques des trois individus les plus Ã¢gÃ©s avecÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(d[<span class="kw">order</span>(d$age, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>), ], <span class="dv">3</span>)</code></pre></div>
<pre><code>       id age  sexe
1916 1916  97 Femme
270   270  96 Femme
1542 1542  93 Femme
                               nivetud    poids
1916 Derniere annee d'etudes primaires 2162.835
270  Derniere annee d'etudes primaires 9993.020
1542 Derniere annee d'etudes primaires 7107.841
                   occup qualif freres.soeurs
1916       Autre inactif  Autre             5
270             Retraite   &lt;NA&gt;             1
1542 Retire des affaires   &lt;NA&gt;             7
     clso                       relig trav.imp
1916  Non      Pratiquant occasionnel     &lt;NA&gt;
270   Oui Ni croyance ni appartenance     &lt;NA&gt;
1542  Non      Pratiquant occasionnel     &lt;NA&gt;
     trav.satisf hard.rock lecture.bd
1916        &lt;NA&gt;       Non        Non
270         &lt;NA&gt;       Non        Non
1542        &lt;NA&gt;       Non        Non
     peche.chasse cuisine bricol cinema sport
1916          Non     Non    Non    Non   Non
270           Non     Non    Non    Non   Non
1542          Non     Non    Non    Oui   Non
     heures.tv
1916         3
270          6
1542         3</code></pre>
<p>On peut Ã©galement trier selon plusieurs variables. Ainsi, si lâ€™on souhaite trier le tableau par <em>sexe</em> puis, au sein de chaque sexe, par <em>age</em>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.tri &lt;-<span class="st"> </span>d[<span class="kw">order</span>(d$sexe, d$age), ]</code></pre></div>
<div class="note">
<p>Si lâ€™on transmets une variable textuelle, le tri sera rÃ©alisÃ© de maniÃ¨re alphabÃ©tique alors que si lâ€™on transmets un facteur, le tri sera effectuÃ© selon lâ€™ordre des facteurs (que lâ€™on peut visualiser avec <code data-pkg="base">levels</code>).</p>
</div>
</div>
<div id="tris_extension-dplyr" class="section level2">
<h2>Extension dplyr</h2>
</div>
<div id="tris_extension-data.table" class="section level2">
<h2>Extension data.table</h2>
</div>

</article>
<article id="sous-ensembles">

<div class="fluid-row" id="sous-ensembles_header">


<h1 class="title">Sous-ensembles</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#sous-ensembles_par-indexation">Par indexation</a></li>
<li><a href="#sous-ensembles_subset">Fonction subset</a></li>
<li><a href="#sous-ensembles_tapply">Fonction tapply</a></li>
<li><a href="#sous-ensembles_extension-dplyr">Extension dplyr</a></li>
<li><a href="#sous-ensembles_extension-data.table">Extension data.table</a></li>
</ul>
</div>

<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>
<p>Dans ce qui suit on travaillera sur le jeu de donnÃ©es tirÃ© de lâ€™enquÃªte <em>Histoire de vie</em>, fourni avec lâ€™extension <code class="pkg">questionr</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<div id="sous-ensembles_par-indexation" class="section level2">
<h2>Par indexation</h2>
<p>La premiÃ¨re maniÃ¨re de construire des sous-populations est dâ€™utiliser lâ€™indexation par conditions. On peut ainsi facilement sÃ©lectionner une partie des observations suivant un ou plusieurs critÃ¨res et placer le rÃ©sultat dans un nouveau tableau de donnÃ©es.</p>
<p>Par exemple si lâ€™on souhaite isoler les hommes et les femmesÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dh &lt;-<span class="st"> </span>d[d$sexe ==<span class="st"> "Homme"</span>, ]
df &lt;-<span class="st"> </span>d[d$sexe ==<span class="st"> "Femme"</span>, ]
<span class="kw">table</span>(d$sexe)</code></pre></div>
<pre><code>
Homme Femme 
  899  1101 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(dh)</code></pre></div>
<pre><code>[1] 899  20</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(df)</code></pre></div>
<pre><code>[1] 1101   20</code></pre>
<p>On a Ã  partir de lÃ  trois tableaux de donnÃ©es, <code>d</code> comportant la population totale, <code>dh</code> seulement les hommes et <code>df</code> seulement les femmes.</p>
<p>On peut Ã©videmment combiner plusieurs critÃ¨resÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dh<span class="fl">.25</span> &lt;-<span class="st"> </span>d[d$sexe ==<span class="st"> "Homme"</span> &amp;<span class="st"> </span>d$age &lt;=<span class="st"> </span><span class="dv">25</span>, ]
<span class="kw">dim</span>(dh<span class="fl">.25</span>)</code></pre></div>
<pre><code>[1] 86 20</code></pre>
<p>Si on utilise directement lâ€™indexation, il convient cependant dâ€™Ãªtre extrÃªmement prudent avec les valeurs manquantes. Comme indiquÃ© prÃ©cÃ©demment, la prÃ©sence dâ€™une valeur manquante dans une condition fait que celle-ci est Ã©valuÃ©e en <code>NA</code> et quâ€™au final la ligne correspondante est conservÃ©e par lâ€™indexationÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d$trav.satisf)</code></pre></div>
<pre><code>  Satisfaction Insatisfaction      Equilibre 
           480            117            451 
          NA's 
           952 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.satisf &lt;-<span class="st"> </span>d[d$trav.satisf ==<span class="st"> "Satisfaction"</span>, ]
<span class="kw">dim</span>(d.satisf)</code></pre></div>
<pre><code>[1] 1432   20</code></pre>
<p>Comme on le voit, ici <code>d.satisf</code> contient les individus ayant la modalitÃ© <em>Satisfaction</em> mais aussi ceux ayant une valeur manquante <code>NA</code>. Câ€™est pourquoi il faut toujours soit vÃ©rifier au prÃ©alable quâ€™on nâ€™a pas de valeurs manquantes dans les variables de la condition, soit exclure explicitement les <code>NA</code> de la maniÃ¨re suivanteÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.satisf &lt;-<span class="st"> </span>d[d$trav.satisf ==<span class="st"> "Satisfaction"</span> &amp;<span class="st"> </span>!<span class="kw">is.na</span>(d$trav.satisf), 
  ]
<span class="kw">dim</span>(d.satisf)</code></pre></div>
<pre><code>[1] 480  20</code></pre>
<p>Câ€™est notamment pour cette raison quâ€™on prÃ©fÃ¨rera le plus souvent utiliser la fonction <code data-pkg="base">subset</code>.</p>
</div>
<div id="sous-ensembles_subset" class="section level2">
<h2>Fonction subset</h2>
<p>La fonction <code data-pkg="base">subset</code> permet dâ€™extraire des sous-populations de maniÃ¨re plus simple et un peu plus intuitive que lâ€™indexation directe.</p>
<p>Celle-ci prend trois arguments principauxÂ :</p>
<ul>
<li>le nom de lâ€™objet de dÃ©partÂ ;</li>
<li>une condition sur les observations (<code>subset</code>)Â ;</li>
<li>Ã©ventuellement une condition sur les colonnes (<code>select</code>).</li>
</ul>
<p>Reprenons tout de suite un exemple dÃ©jÃ  vuÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dh &lt;-<span class="st"> </span><span class="kw">subset</span>(d, sexe ==<span class="st"> "Homme"</span>)
df &lt;-<span class="st"> </span><span class="kw">subset</span>(d, sexe ==<span class="st"> "Femme"</span>)</code></pre></div>
<p>Lâ€™utilisation de <code data-pkg="base">subset</code> prÃ©sente plusieurs avantages. Le premier est dâ€™Ã©conomiser quelques touches. On nâ€™est en effet pas obligÃ© de saisir le nom du tableau de donnÃ©es dans la condition sur les lignes. Ainsi les deux commandes suivantes sont Ã©quivalentesÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dh &lt;-<span class="st"> </span><span class="kw">subset</span>(d, d$sexe ==<span class="st"> "Homme"</span>)
dh &lt;-<span class="st"> </span><span class="kw">subset</span>(d, sexe ==<span class="st"> "Homme"</span>)</code></pre></div>
<p>Le second avantage est que <code data-pkg="base">subset</code> sâ€™occupe du problÃ¨me des valeurs manquantes Ã©voquÃ©es prÃ©cÃ©demment et les exclut de lui-mÃªme, contrairement au comportement par dÃ©fautÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d$trav.satisf)</code></pre></div>
<pre><code>  Satisfaction Insatisfaction      Equilibre 
           480            117            451 
          NA's 
           952 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.satisf &lt;-<span class="st"> </span>d[d$trav.satisf ==<span class="st"> "Satisfaction"</span>, ]
<span class="kw">dim</span>(d.satisf)</code></pre></div>
<pre><code>[1] 1432   20</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.satisf &lt;-<span class="st"> </span><span class="kw">subset</span>(d, trav.satisf ==<span class="st"> "Satisfaction"</span>)
<span class="kw">dim</span>(d.satisf)</code></pre></div>
<pre><code>[1] 480  20</code></pre>
<p>Dans le cas prÃ©sent, lâ€™extraction obtenue avec <code data-pkg="base">subset</code> est Ã©quivalente Ã Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.satisf &lt;-<span class="st"> </span>d[d$trav.satisf ==<span class="st"> "Satisfaction"</span> &amp;<span class="st"> </span>!<span class="kw">is.na</span>(d$trav.satisf), 
  ]
<span class="kw">dim</span>(d.satisf)</code></pre></div>
<pre><code>[1] 480  20</code></pre>
<p>Enfin, lâ€™utilisation de lâ€™argument <code>select</code> est simplifiÃ© pour lâ€™expression de condition sur les colonnes. On peut ainsi spÃ©cifier les noms de variable sans guillemets et leur appliquer directement lâ€™opÃ©rateur dâ€™exclusion <code>-</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d2 &lt;-<span class="st"> </span><span class="kw">subset</span>(d, <span class="dt">select =</span> <span class="kw">c</span>(sexe, sport))
d2 &lt;-<span class="st"> </span><span class="kw">subset</span>(d, age &gt;<span class="st"> </span><span class="dv">25</span>, <span class="dt">select =</span> -<span class="kw">c</span>(id, age, cinema))</code></pre></div>
</div>
<div id="sous-ensembles_tapply" class="section level2">
<h2>Fonction tapply</h2>
<div class="note">
<p>Cette section documente une fonction qui peut Ãªtre trÃ¨s utile, mais pas forcÃ©ment indispensable au dÃ©part.</p>
</div>
<p>La fonction <code data-pkg="base">tapply</code> nâ€™est quâ€™indirectement liÃ©e Ã  la notion de sous-population, mais peut permettre dâ€™Ã©viter dâ€™avoir Ã  crÃ©er ces sous-populations dans certains cas.</p>
<p>Son fonctionnement est assez simple, mais pas forcÃ©ment intuitif. La fonction prend trois argumentsÂ : un vecteur, un facteur et une fonction. Elle applique ensuite la fonction aux Ã©lÃ©ments du vecteur correspondant Ã  un mÃªme niveau du facteur. Vite, un exempleÂ !</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tapply</span>(d$age, d$sexe, mean)</code></pre></div>
<pre><code>   Homme    Femme 
48.16129 48.15350 </code></pre>
<p>Quâ€™est-ce que Ã§a signifieÂ ? Ici <code data-pkg="base">tapply</code> a sÃ©lectionnÃ© toutes les observations correspondant Ã  Â«Â HommeÂ Â», puis appliquÃ© la fonction <code data-pkg="base">mean</code> aux valeurs de <em>age</em> correspondantes. Puis elle a fait de mÃªme pour les observations correspondant Ã  Â«Â FemmeÂ Â». On a donc ici la moyenne dâ€™Ã¢ge chez les hommes et chez les femmes.</p>
<p>On peut fournir Ã  peu prÃ¨s nâ€™importe quelle fonction Ã  <code data-pkg="base">tapply</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tapply</span>(d$bricol, d$sexe, freq)</code></pre></div>
<pre><code>$Homme
      n    % val%
Non 384 42.7 42.7
Oui 515 57.3 57.3
NA    0  0.0   NA

$Femme
      n    % val%
Non 763 69.3 69.3
Oui 338 30.7 30.7
NA    0  0.0   NA</code></pre>
<p>Les arguments supplÃ©mentaires fournis Ã  <code data-pkg="base">tapply</code> sont en fait fournis directement Ã  la fonction appelÃ©e.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tapply</span>(d$bricol, d$sexe, freq, <span class="dt">total =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>$Homme
        n     %  val%
Non   384  42.7  42.7
Oui   515  57.3  57.3
NA      0   0.0    NA
Total 899 100.0 100.0

$Femme
         n     %  val%
Non    763  69.3  69.3
Oui    338  30.7  30.7
NA       0   0.0    NA
Total 1101 100.0 100.0</code></pre>
<div class="note">
<p>La fonction <code data-pkg="base">by</code> est un Ã©quivalent (pour les tableaux de donnÃ©es) de <code data-pkg="base">tapply</code>. La prÃ©sentation des rÃ©sultats diffÃ¨re lÃ©gÃ¨rement.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tapply</span>(d$age, d$sexe, mean)</code></pre></div>
<pre><code>   Homme    Femme 
48.16129 48.15350 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">by</span>(d$age, d$sexe, mean)</code></pre></div>
<pre><code>d$sexe: Homme
[1] 48.16129
------------------------------------- 
d$sexe: Femme
[1] 48.1535</code></pre>
</div>
</div>
<div id="sous-ensembles_extension-dplyr" class="section level2">
<h2>Extension dplyr</h2>
</div>
<div id="sous-ensembles_extension-data.table" class="section level2">
<h2>Extension data.table</h2>
</div>

</article>
<article id="fusion-de-tables">

<div class="fluid-row" id="fusion-de-tables_header">


<h1 class="title">Fusion de tables</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#fusion-de-tables_un-premier-exemple-les-enquetes-insee">Un premier exemple : les enquÃªtes INSEE</a></li>
<li><a href="#fusion-de-tables_un-second-exemple-une-enquete-menage">Un second exemple : une enquÃªte mÃ©nage</a></li>
<li><a href="#fusion-de-tables_extension-dplyr">Extension dplyr</a></li>
<li><a href="#fusion-de-tables_extension-data.table">Extension data.table</a></li>
</ul>
</div>

<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>
<div id="fusion-de-tables_un-premier-exemple-les-enquetes-insee" class="section level2">
<h2>Un premier exemple : les enquÃªtes INSEE</h2>
<p>Lorsquâ€™on traite de grosses enquÃªtes, notamment les enquÃªtes de lâ€™INSEE, on a souvent Ã  gÃ©rer des donnÃ©es rÃ©parties dans plusieurs tables, soit du fait de la construction du questionnaire, soit du fait de contraintes techniques (fichiers <strong>dbf</strong> ou <strong>Excel</strong> limitÃ©s Ã  256 colonnes, par exemple).</p>
<p>Une opÃ©ration relativement courante consiste Ã  <dfn data-index="fusion de tables">fusionner</dfn><dfn data-index="tableau de donnÃ©es, fusion"/> plusieurs tables pour regrouper tout ou partie des donnÃ©es dans un unique tableau.</p>
<p>Nous allons simuler artificiellement une telle situation en crÃ©ant deux tables Ã  partir de lâ€™extrait de lâ€™enquÃªte <em>Histoire de vie</em>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003
<span class="kw">dim</span>(d)</code></pre></div>
<pre><code>[1] 2000   20</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d1 &lt;-<span class="st"> </span><span class="kw">subset</span>(d, <span class="dt">select =</span> <span class="kw">c</span>(<span class="st">"id"</span>, <span class="st">"age"</span>, <span class="st">"sexe"</span>))
<span class="kw">dim</span>(d1)</code></pre></div>
<pre><code>[1] 2000    3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d2 &lt;-<span class="st"> </span><span class="kw">subset</span>(d, <span class="dt">select =</span> <span class="kw">c</span>(<span class="st">"id"</span>, <span class="st">"clso"</span>))
<span class="kw">dim</span>(d2)</code></pre></div>
<pre><code>[1] 2000    2</code></pre>
<p>On a donc deux tableaux de donnÃ©es, <code>d1</code> et <code>d2</code>, comportant chacun 2000 lignes et respectivement 3 et 2 colonnes. Comment les rassembler pour nâ€™en former quâ€™unÂ ?</p>
<p>Intuitivement, cela paraÃ®t simple. Il suffit de Â«Â collerÂ Â» <code>d2</code> Ã  la droite de <code>d1</code>, comme dans lâ€™exemple suivant.</p>
<style type="text/css"><![CDATA[
table.exemple_df td, 
table.exemple_df th {
  text-align: center;
  padding: 3px 10px;
}
table.exemple_df th {
  border-bottom: solid 1px #999;
}

table.exemple_df td + td,
table.exemple_df th + th {
  border-left: solid 1px #999;
}

table.exemple_operateur td {
  font-size: 3em;
  padding: 20px;
}
]]></style>
<table style="margin: 11px auto;">
<tr>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
<td>
12
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
<td>
17
</td>
</tr>
<tr>
<td>
3
</td>
<td>
F
</td>
<td>
41
</td>
</tr>
<tr>
<td>
4
</td>
<td>
F
</td>
<td>
9
</td>
</tr>
<tr>
<td>
â€¦
</td>
<td>
â€¦
</td>
<td>
â€¦
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
+
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v3
</th>
</tr>
<tr>
<td>
1
</td>
<td>
rouge
</td>
</tr>
<tr>
<td>
2
</td>
<td>
bleu
</td>
</tr>
<tr>
<td>
3
</td>
<td>
bleu
</td>
</tr>
<tr>
<td>
4
</td>
<td>
rouge
</td>
</tr>
<tr>
<td>
â€¦
</td>
<td>
â€¦
</td>
<td>
â€¦
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
=
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
<th>
v2
</th>
<th>
v3
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
<td>
12
</td>
<td>
rouge
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
<td>
17
</td>
<td>
bleu
</td>
</tr>
<tr>
<td>
3
</td>
<td>
F
</td>
<td>
41
</td>
<td>
bleu
</td>
</tr>
<tr>
<td>
4
</td>
<td>
F
</td>
<td>
9
</td>
<td>
rouge
</td>
</tr>
<tr>
<td>
â€¦
</td>
<td>
â€¦
</td>
<td>
â€¦
</td>
<td>
â€¦
</td>
</tr>
</table>
</td>
</tr>
</table>
<p>Cela semble fonctionner. La fonction qui permet dâ€™effectuer cette opÃ©ration sous <strong>R</strong> sâ€™appelle <code data-pkg="base">cbind</code>, elle Â«Â colleÂ Â» des tableaux cÃ´te Ã  cÃ´te en regroupant leurs colonnes<a href="#fusion-de-tables_fn1" class="footnoteRef" id="fusion-de-tables_fnref1"><sup>1</sup></a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(<span class="kw">cbind</span>(d1, d2))</code></pre></div>
<pre><code>  id age  sexe id clso
1  1  28 Femme  1  Oui
2  2  23 Femme  2  Oui
3  3  59 Homme  3  Non
4  4  34 Homme  4  Non
5  5  71 Femme  5  Oui
6  6  35 Femme  6  Non</code></pre>
<p>Ã€ part le fait quâ€™on a une colonne <em>id</em> en double, le rÃ©sultat semble satisfaisant. Ã€ premiÃ¨re vue seulement. Imaginons maintenant que nous avons travaillÃ© sur <code>d1</code> et <code>d2</code>, et que nous avons ordonnÃ© les lignes de <code>d1</code> selon lâ€™Ã¢ge des enquÃªtÃ©sÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d1 &lt;-<span class="st"> </span>d1[<span class="kw">order</span>(d1$age), ]</code></pre></div>
<p>RÃ©pÃ©tons lâ€™opÃ©ration de collageÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(<span class="kw">cbind</span>(d1, d2))</code></pre></div>
<pre><code>     id age  sexe id clso
162 162  18 Homme  1  Oui
215 215  18 Homme  2  Oui
346 346  18 Femme  3  Non
377 377  18 Homme  4  Non
511 511  18 Homme  5  Oui
646 646  18 Homme  6  Non</code></pre>
<p>Que constate-t-onÂ ? La prÃ©sence de la variable <em>id</em> en double nous permet de voir que les identifiants ne coÃ¯ncident plusÂ ! En regroupant nos colonnes nous avons donc attribuÃ© Ã  des individus les rÃ©ponses dâ€™autres individus.</p>
<p>La commande <code data-pkg="base">cbind</code> ne peut en effet fonctionner que si les deux tableaux ont exactement le mÃªme nombre de lignes, et dans le mÃªme ordre, ce qui nâ€™est pas le cas ici.</p>
<p>On va donc Ãªtre obligÃ© de pocÃ©der Ã  une <dfn>fusion</dfn> des deux tableaux, qui va permettre de rendre Ã  chaque ligne ce qui lui appartient. Pour cela nous avons besoin dâ€™un identifiant qui permet dâ€™identifier chaque ligne de maniÃ¨re unique et qui doit Ãªtre prÃ©sent dans tous les tableaux. Dans notre cas, câ€™est plutÃ´t rapide, il sâ€™agit de la variable <em>id</em>.</p>
<p>Une fois lâ€™identifiant identifiÃ©<a href="#fusion-de-tables_fn2" class="footnoteRef" id="fusion-de-tables_fnref2"><sup>2</sup></a>, on peut utiliser la commande <code data-pkg="base">merge</code>. Celle-ci va fusionner les deux tableaux en supprimant les colonnes en double et en regroupant les lignes selon leurs identifiantsÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.complet &lt;-<span class="st"> </span><span class="kw">merge</span>(d1, d2, <span class="dt">by =</span> <span class="st">"id"</span>)
<span class="kw">head</span>(d.complet)</code></pre></div>
<pre><code>  id age  sexe clso
1  1  28 Femme  Oui
2  2  23 Femme  Oui
3  3  59 Homme  Non
4  4  34 Homme  Non
5  5  71 Femme  Oui
6  6  35 Femme  Non</code></pre>
<p>Ici lâ€™utilisation de la fonction <code data-pkg="base">merge</code> est plutÃ´t simple car nous sommes dans le cas de figure idÃ©alÂ : les lignes correspondent parfaitement et lâ€™identifiant est clairement identifiÃ©. Parfois les choses peuvent Ãªtre un peu plus compliquÃ©esÂ :</p>
<ul>
<li>parfois les identifiants nâ€™ont pas le mÃªme nom dans les deux tableaux. On peut alors les spÃ©cifier par les options <code>by.x</code> et <code>by.y</code>Â ;</li>
<li>parfois les deux tableaux comportent des colonnes (hors identifiants) ayant le mÃªme nom. <code data-pkg="base">merge</code> conserve dans ce cas ces deux colonnes mais les renomme en les suffixant par <em>.x</em> pour celles provenant du premier tableau et <em>.y</em> pour celles du secondÂ ;</li>
<li>parfois on nâ€™a pas dâ€™identifiant unique prÃ©Ã©tabli, mais on en construit un Ã  partir de plusieurs variables. On peut alors donner un vecteur en paramÃ¨tres de lâ€™option <code>by</code>, par exemple <code>by=c("nom","prenom","date.naissance")</code>.</li>
</ul>
<p>Une subtilitÃ© supplÃ©mentaire intervient lorsque les deux tableaux fusionnÃ©s nâ€™ont pas exactement les mÃªmes lignes. Par dÃ©faut, <code data-pkg="base">merge</code> ne conserve que les lignes prÃ©sentes dans les deux tableauxÂ :</p>
<table style="margin: 11px auto;">
<tr>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
</tr>
<tr>
<td>
3
</td>
<td>
F
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
+
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
10
</td>
</tr>
<tr>
<td>
2
</td>
<td>
15
</td>
</tr>
<tr>
<td>
5
</td>
<td>
31
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
=
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
<td>
10
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
<td>
15
</td>
</tr>
</table>
</td>
</tr>
</table>
<p>On peut cependant modifier ce comportement avec les options <code>all.x</code> et <code>all.y</code>.</p>
<p>Ainsi, <code>all.x=TRUE</code> indique de conserver toutes les lignes du premier tableau. Dans ce cas <code data-pkg="base">merge</code> donne une valeur <code>NA</code> pour ces lignes aux colonnes provenant du second tableau. Ce qui donneraitÂ :</p>
<table style="margin: 11px auto;">
<tr>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
</tr>
<tr>
<td>
3
</td>
<td>
F
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
+
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
10
</td>
</tr>
<tr>
<td>
2
</td>
<td>
15
</td>
</tr>
<tr>
<td>
5
</td>
<td>
31
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
=
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
<td>
10
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
<td>
15
</td>
</tr>
<tr>
<td>
3
</td>
<td>
F
</td>
<td>
<code>NA</code>
</td>
</tr>
</table>
</td>
</tr>
</table>
<p>Lâ€™option <code>all.y=TRUE</code> fait la mÃªme chose en conservant toutes les lignes du second tableau.</p>
<table style="margin: 11px auto;">
<tr>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
</tr>
<tr>
<td>
3
</td>
<td>
F
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
+
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
10
</td>
</tr>
<tr>
<td>
2
</td>
<td>
15
</td>
</tr>
<tr>
<td>
5
</td>
<td>
31
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
=
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
<td>
10
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
<td>
15
</td>
</tr>
<tr>
<td>
5
</td>
<td>
<code>NA</code>
</td>
<td>
31
</td>
</tr>
</table>
</td>
</tr>
</table>
<p>Enfin, on peut dÃ©cider de conserver toutes les lignes des deux tableaux en utilisant Ã  la fois <code>all.x=TRUE</code> et <code>all.y=TRUE</code>, ce qui donneÂ :</p>
<table style="margin: 11px auto;">
<tr>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
</tr>
<tr>
<td>
3
</td>
<td>
F
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
+
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
10
</td>
</tr>
<tr>
<td>
2
</td>
<td>
15
</td>
</tr>
<tr>
<td>
5
</td>
<td>
31
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
=
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
<td>
10
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
<td>
15
</td>
</tr>
<tr>
<td>
3
</td>
<td>
F
</td>
<td>
<code>NA</code>
</td>
</tr>
<tr>
<td>
5
</td>
<td>
<code>NA</code>
</td>
<td>
31
</td>
</tr>
</table>
</td>
</tr>
</table>
<p>Parfois, lâ€™un des identifiants est prÃ©sent Ã  plusieurs reprises dans lâ€™un des tableaux (par exemple lorsque lâ€™une des tables est un ensemble de mÃ©nages et que lâ€™autre dÃ©crit lâ€™ensemble des individus de ces mÃ©nages). Dans ce cas les lignes de lâ€™autre table sont dupliquÃ©es autant de fois que nÃ©cessairesÂ :</p>
<table style="margin: 11px auto;">
<tr>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
</tr>
<tr>
<td>
3
</td>
<td>
F
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
+
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
10
</td>
</tr>
<tr>
<td>
1
</td>
<td>
18
</td>
</tr>
<tr>
<td>
1
</td>
<td>
21
</td>
</tr>
<tr>
<td>
2
</td>
<td>
15
</td>
</tr>
<tr>
<td>
3
</td>
<td>
42
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
=
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
<td>
10
</td>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
<td>
18
</td>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
<td>
21
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
<td>
15
</td>
</tr>
<tr>
<td>
3
</td>
<td>
F
</td>
<td>
42
</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<div id="fusion-de-tables_un-second-exemple-une-enquete-menage" class="section level2">
<h2>Un second exemple : une enquÃªte mÃ©nage</h2>
</div>
<div id="fusion-de-tables_extension-dplyr" class="section level2">
<h2>Extension dplyr</h2>
<p>Voir aussi <code data-pkg="dplyr" data-rdoc="bind">combine</code> de <strong class="pkg">dplyr</strong> et <code data-pkg="plyr">rbind.fill</code> de <strong class="pkg">plyr</strong>.</p>
</div>
<div id="fusion-de-tables_extension-data.table" class="section level2">
<h2>Extension data.table</h2>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="fusion-de-tables_fn1"><p>Lâ€™Ã©quivalent de <code data-pkg="base">cbind</code> pour les lignes sâ€™appelle <code data-pkg="base" data-rdoc="cbind">rbind</code>.<a href="#fusion-de-tables_fnref1">â†©</a></p></li>
<li id="fusion-de-tables_fn2"><p>Si vous me passez lâ€™expressionâ€¦<a href="#fusion-de-tables_fnref2">â†©</a></p></li>
</ol>
</div>

</article>
<article id="gestion-des-dates">

<div class="fluid-row" id="gestion-des-dates_header">


<h1 class="title">Gestion des dates</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="aggregation">

<div class="fluid-row" id="aggregation_header">


<h1 class="title">AggrÃ©gation</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="fonctions-a-fenetre">

<div class="fluid-row" id="fonctions-a-fenetre_header">


<h1 class="title">Fonctions Ã  fenÃªtre</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="restructuration-de-donnees">

<div class="fluid-row" id="restructuration-de-donnees_header">


<h1 class="title">Restructuration de donnÃ©es</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="manipuler-du-texte">

<div class="fluid-row" id="manipuler-du-texte_header">


<h1 class="title">Manipuler du texte</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="export-de-donnees">

<div class="fluid-row" id="export-de-donnees_header">


<h1 class="title">Export de donnÃ©es</h1>

</div>


<p><dfn data-index="donnÃ©es, exporter"/><dfn data-index="exporter des donnÃ©es"/></p>
<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>
<p><strong>R</strong> propose diffÃ©rentes fonctions permettant dâ€™exporter des donnÃ©es vers des formats variÃ©s.</p>
<table style="width:21%;">
<colgroup>
<col width="6%"/>
<col width="6%"/>
<col width="6%"/>
</colgroup>
<thead>
<tr class="header">
<th align="left">Type de fichier souhaitÃ©</th>
<th align="left">Fonction</th>
<th align="left">Extension</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">texte</td>
<td align="left"><code data-pkg="utils">write.table</code></td>
<td align="left"><code class="pkg">utils</code></td>
</tr>
<tr class="even">
<td align="left">CSV</td>
<td align="left"><code data-pkg="utils" data-rdoc="write.table">write.csv</code></td>
<td align="left"><code class="pkg">utils</code></td>
</tr>
<tr class="odd">
<td align="left">CSV</td>
<td align="left"><code data-pkg="readr">write_csv</code></td>
<td align="left"><code class="pkg">readr</code></td>
</tr>
<tr class="even">
<td align="left">Excel</td>
<td align="left"><code data-pkg="xlsx">write.xlsx</code></td>
<td align="left"><code class="pkg">xlsx</code></td>
</tr>
<tr class="odd">
<td align="left">dBase</td>
<td align="left"><code data-pkg="foreign">write.dbf</code></td>
<td align="left"><code class="pkg">foreign</code></td>
</tr>
<tr class="even">
<td align="left">SPSS</td>
<td align="left"><code data-pkg="haven">write_sav</code></td>
<td align="left"><code class="pkg">haven</code></td>
</tr>
<tr class="odd">
<td align="left">SPSS</td>
<td align="left"><code data-pkg="foreign">write.foreign</code></td>
<td align="left"><code class="pkg">foreign</code></td>
</tr>
<tr class="even">
<td align="left">Stata</td>
<td align="left"><code data-pkg="foreign">write.dta</code></td>
<td align="left"><code class="pkg">foreign</code></td>
</tr>
<tr class="odd">
<td align="left">Stata</td>
<td align="left"><code data-pkg="haven">write_dta</code></td>
<td align="left"><code class="pkg">haven</code></td>
</tr>
<tr class="even">
<td align="left">SAS</td>
<td align="left"><code data-pkg="foreign">write.foreign</code></td>
<td align="left"><code class="pkg">foreign</code></td>
</tr>
<tr class="odd">
<td align="left">SPSS</td>
<td align="left"><code data-pkg="foreign">write.foreign</code></td>
<td align="left"><code class="pkg">foreign</code></td>
</tr>
<tr class="even">
<td align="left">Shapefile</td>
<td align="left"><code data-pkg="maptools" data-rdoc="readShapePoints">writePointsShape</code></td>
<td align="left"><code class="pkg">maptools</code></td>
</tr>
<tr class="odd">
<td align="left">Shapefile</td>
<td align="left"><code data-pkg="maptools" data-rdoc="readShapeLines">writeLinesShape</code></td>
<td align="left"><code class="pkg">maptools</code></td>
</tr>
<tr class="even">
<td align="left">Shapefile</td>
<td align="left"><code data-pkg="maptools" data-rdoc="readShapePoly">writePolyShape</code></td>
<td align="left"><code class="pkg">maptools</code></td>
</tr>
<tr class="odd">
<td align="left">ASCII Grid</td>
<td align="left"><code data-pkg="maptools" data-rdoc="readAsciiGrid">writeAsciiGrid</code></td>
<td align="left"><code class="pkg">maptools</code></td>
</tr>
</tbody>
</table>
<p>Ã€ nouveau, pour plus de dÃ©tails on se rÃ©fÃ©rera aux pages dâ€™aide de ces fonctions et au manuel <cite>R Data Import/Export</cite> accessible Ã  lâ€™adresse suivanteÂ : <a href="http://cran.r-project.org/manuals.html" class="uri">http://cran.r-project.org/manuals.html</a>.</p>

</article>
<article id="export-de-graphiques">

<div class="fluid-row" id="export-de-graphiques_header">


<h1 class="title">Export de graphiques</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#export-de-graphiques_via-linterface-de-rstudio">Via lâ€™interface de RStudio</a><ul>
<li><a href="#export-de-graphiques_sauvegarder-le-fichier-en-tant-quimage">Sauvegarder le fichier en tant quâ€™image</a></li>
<li><a href="#export-de-graphiques_sauvegarder-le-graphique-en-pdf">Sauvegarder le graphique en PDF</a></li>
<li><a href="#export-de-graphiques_copier-le-graphique-dans-le-presse-papier">Copier le graphique dans le presse-papier</a></li>
</ul></li>
<li><a href="#export-de-graphiques_export-avec-les-commandes-de-r">Export avec les commandes de R</a></li>
</ul>
</div>

<div id="export-de-graphiques_via-linterface-de-rstudio" class="section level2">
<h2>Via lâ€™interface de RStudio</h2>
<p>Lâ€™<dfn>export de graphiques</dfn><dfn data-index="graphique, export"/> est trÃ¨s facile avec <strong>RStudio</strong>. Lorsque lâ€™on crÃ©Ã© un graphique, ce dernier est affichÃ© sous lâ€™onglet <em>Plots</em> dans le quadrant infÃ©rieur droit. Il suffit de cliquer sur <em>Export</em> pour avoir accÃ¨s Ã  trois options diffÃ©rentesÂ :</p>
<ul>
<li><em>Save as image</em> pour sauvegarder le graphique en tant que fichier imageÂ ;</li>
<li><em>Save as PDF</em> pour sauvegarder le graphique dans un fichier <strong>PDF</strong>Â ;</li>
<li><em>Copy to Clipboard</em> pour copier le graphique dans le presse-papier (et pouvoir ainsi le coller ensuite dans un document <strong>Word</strong> par exemple).</li>
</ul>
<div id="export-de-graphiques_sauvegarder-le-fichier-en-tant-quimage" class="section level3">
<h3>Sauvegarder le fichier en tant quâ€™image</h3>
<figure>
<img src="images/capture_RStudio_save_plot_as_image.png" alt="Sauvegarder un graphique en tant quâ€™image avec RStudio"/>
<figcaption>
Sauvegarder un graphique en tant quâ€™image avec RStudio
</figcaption>
</figure>
<p>La boÃ®te de dialogue qui sâ€™ouvre propose diffÃ©rentes options dâ€™exportÂ :</p>
<ul>
<li>le type de fichier dÃ©sirÃ©Â ;</li>
<li>le nom du fichierÂ ;</li>
<li>le rÃ©pertoire oÃ¹ le fichier doit Ãªtre crÃ©Ã© (par dÃ©faut, il sâ€™agit du rÃ©pertoire de travail)Â ;</li>
<li>la taille de lâ€™image.</li>
</ul>
<p><strong>R</strong> peut exporter un graphique dans une grande variÃ©tÃ© de formats. Nous nâ€™aborderons ici que les principaux. Les formats <strong>PNG</strong>, <strong>JPEG</strong> et <strong>TIFF</strong> sont des formats de type <dfn langue="en">bitmap</dfn><dfn data-index="image bitmap"/> (on parle aussi dâ€™<dfn data-index="image matricielle">images matricielles</dfn><a href="#export-de-graphiques_fn1" class="footnoteRef" id="export-de-graphiques_fnref1"><sup>1</sup></a>). Lâ€™image est stockÃ©e sous forme de points, sa qualitÃ© dÃ©pendant de sa <dfn>rÃ©solution</dfn>, câ€™est-Ã -dire du nombre total de points qui la composent. Lâ€™intÃ©rÃªt des images matricielles est dâ€™Ãªtre toujours interprÃ©tÃ©es de maniÃ¨re identique quelque soit lâ€™outil utilisÃ©. Par contre, elles ne sont pas adaptÃ©es lorsque lâ€™on souhaite effectuer des retouches avec un logiciel de dessin.</p>
<p>Pour une utilisation sur un site web, on privilÃ©giera une rÃ©solution dâ€™image modÃ©rÃ©e (entre 400 et 800 pixels de largeur) et les formats <strong>PNG</strong> ou <strong>JPEG</strong>. Pour un document destinÃ© Ã  Ãªtre imprimÃ©, on priviligiera une rÃ©solution plus Ã©levÃ©e, pour Ã©viter un phÃ©nomÃ¨ne dit de pixellisation.</p>
<p>Les <dfn data-index="image vectorielle">images vectorielles</dfn><a href="#export-de-graphiques_fn2" class="footnoteRef" id="export-de-graphiques_fnref2"><sup>2</sup></a> ont lâ€™avantage de pouvoir Ãªtre redimensionnÃ©es Ã  volontÃ© sans perte de qualitÃ© et produisent des fichiers en gÃ©nÃ©ral de plus petite taille<a href="#export-de-graphiques_fn3" class="footnoteRef" id="export-de-graphiques_fnref3"><sup>3</sup></a>. Elles sont donc tout Ã  fait adaptÃ©es pour lâ€™impression. Si lâ€™on souhaite importer lâ€™image dans <strong>Word</strong>, on choisira le format <strong>Metafile</strong> (le seul compris par ce logiciel). Pour <strong>Libre Office</strong> ou <strong>Open Office</strong>, on choisira le format <strong>SVG</strong>.</p>
<p><strong>SVG</strong> (<em>scalable vector graphic</em><a href="#export-de-graphiques_fn4" class="footnoteRef" id="export-de-graphiques_fnref4"><sup>4</sup></a>) est un format libre permettant de dÃ©crire une image vectorielle. Les fichiers <strong>SVG</strong> peuvent Ãªtre directement lus par la majoritÃ© des navigateurs rÃ©cents (<strong>Firefox</strong>, <strong>Chrome</strong>, â€¦). De plus, le logiciel libre de dessins <strong>Inkscape</strong><a href="#export-de-graphiques_fn5" class="footnoteRef" id="export-de-graphiques_fnref5"><sup>5</sup></a> permet dâ€™Ã©diter et de modifier des fichiers <strong>SVG</strong>. Ce format est donc tout Ã  fait adaptÃ© pour les graphiques que lâ€™on souhaite retoucher avant publication. Depuis <strong>Inkscape</strong>, il sera possible de faire un export <strong>PNG</strong> en haute rÃ©solution pour intÃ©gration dans un fichier <strong>Word</strong>.</p>
<p>On pourra modifier la taille de lâ€™image avec les paramÃ¨tres <em>Height</em> (hauteur) et <em>Width</em> (largeur). En cliquant sur <em>Update Preview</em> la prÃ©visulation du rendu final sera mise Ã  jour.</p>
</div>
<div id="export-de-graphiques_sauvegarder-le-graphique-en-pdf" class="section level3">
<h3>Sauvegarder le graphique en PDF</h3>
<figure>
<img src="images/capture_RStudio_save_plot_as_pdf.png" alt="Sauvegarder un graphique en PDF avec RStudio"/>
<figcaption>
Sauvegarder un graphique en PDF avec RStudio
</figcaption>
</figure>
<p>Les options de la boÃ®te de dialogue permettent de modifier la taille du fichier <strong>PDF</strong> et, bien entendu, dâ€™indiquer le nom et le rÃ©pertoire du fichier Ã  crÃ©er.</p>
<p>En cliquant sur <em>Preview</em>, <strong>RStudio</strong> gÃ©nÃ©rera un fichier temporaire afin de visualiser le rendu final.</p>
</div>
<div id="export-de-graphiques_copier-le-graphique-dans-le-presse-papier" class="section level3">
<h3>Copier le graphique dans le presse-papier</h3>
<figure>
<img src="images/capture_RStudio_copy_plot_to_clipboard.png" alt="Copier un graphique dans le presse-papier avec RStudio"/>
<figcaption>
Copier un graphique dans le presse-papier avec RStudio
</figcaption>
</figure>
<p>Il est possible de redimensionner le graphique. De plus, on prÃ©cisera si lâ€™on souhaite copier une version matricielle (<em>bitmap</em>) ou vectorielle (<em>metafile</em>) du graphique.</p>
</div>
</div>
<div id="export-de-graphiques_export-avec-les-commandes-de-r" class="section level2">
<h2>Export avec les commandes de R</h2>
<p>On peut Ã©galement exporter les graphiques dans des fichiers de diffÃ©rents formats directement avec des commandes <strong>R</strong>. Ceci a lâ€™avantage de fonctionner sur toutes les plateformes et de faciliter la mise Ã  jour du graphique exportÃ© (on nâ€™a quâ€™Ã  relancer les commandes concernÃ©es pour que le fichier externe soit mis Ã  jour).</p>
<p>La premiÃ¨re possibilitÃ© est dâ€™exporter le contenu dâ€™une fenÃªtre dÃ©jÃ  existante Ã  lâ€™aide de la fonction <code data-pkg="grDevices" data-rdoc="dev2">dev.print</code>. On doit fournir Ã  celle-ci le format de lâ€™export (option <code>device</code>) et le nom du fichier (option <code>file</code>).</p>
<p>Par exempleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>))
<span class="kw">dev.print</span>(<span class="dt">device =</span> png, <span class="dt">file =</span> <span class="st">"export.png"</span>, <span class="dt">width =</span> <span class="dv">600</span>)</code></pre></div>
<p>Les formats de sortie possibles varient selon les plateformes, mais on retrouve partout les formats <em>bitmap</em> <code>png</code>, <code>jpeg</code>, <code>tiff</code> et les formats vectoriels <code>svg</code>, <code>postscript</code> ou <code>pdf</code>.</p>
<p>Lâ€™autre possibilitÃ© est de rediriger directement la sortie graphique dans un fichier, avant dâ€™exÃ©cuter la commande gÃ©nÃ©rant la figure. On doit pour cela faire appel Ã  lâ€™une des commandes permettant cette redirection. Les plus courantes sont <code data-pkg="grDevices">png</code>, <code data-pkg="grDevices" data-rdoc="png">jpeg</code> et <code data-pkg="grDevices" data-rdoc="png">tiff</code> pour les formats <em>bitmap</em>, <code data-pkg="grDevices" data-rdoc="cairo">svg</code>, <code data-pkg="grDevices">pdf</code>, <code data-pkg="grDevices">postscript</code> et <code data-pkg="grDevices" data-rdoc="windows">win.metafile</code> pour les formats vectoriels.</p>
<p>Ces fonctions prennent diffÃ©rentes options permettant de personnaliser la sortie graphique. Les plus courantes sont <code>width</code> et <code>height</code> qui donnent la largeur et la hauteur de lâ€™image gÃ©nÃ©rÃ©e (en pixels pour les images bitmap, en pouces pour les images vectorielles) et <code>pointsize</code> qui donne la taille de base des polices de caractÃ¨re utilisÃ©es.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">png</span>(<span class="dt">file =</span> <span class="st">"out.png"</span>, <span class="dt">width =</span> <span class="dv">800</span>, <span class="dt">height =</span> <span class="dv">700</span>)
<span class="kw">plot</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>))
<span class="kw">dev.off</span>()
<span class="kw">pdf</span>(<span class="dt">file =</span> <span class="st">"out.pdf"</span>, <span class="dt">width =</span> <span class="dv">9</span>, <span class="dt">height =</span> <span class="dv">9</span>, <span class="dt">pointsize =</span> <span class="dv">10</span>)
<span class="kw">plot</span>(<span class="kw">rnorm</span>(<span class="dv">150</span>))
<span class="kw">dev.off</span>()</code></pre></div>
<p>Il est nÃ©cessaire de faire un appel Ã  la fonction <code data-pkg="grDevices" data-rdoc="dev">dev.off</code> aprÃ¨s gÃ©nÃ©ration du graphique pour que le rÃ©sultat soit bien Ã©crit dans le fichier de sortie (dans le cas contraire on se retrouve avec un fichier vide).</p>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="export-de-graphiques_fn1"><p>Voir <a href="http://fr.wikipedia.org/wiki/Image_matricielle" class="uri">http://fr.wikipedia.org/wiki/Image_matricielle</a>.<a href="#export-de-graphiques_fnref1">â†©</a></p></li>
<li id="export-de-graphiques_fn2"><p>Voir <a href="http://fr.wikipedia.org/wiki/Image_vectorielle" class="uri">http://fr.wikipedia.org/wiki/Image_vectorielle</a>.<a href="#export-de-graphiques_fnref2">â†©</a></p></li>
<li id="export-de-graphiques_fn3"><p>Sauf dans le cas des graphiques complexes reposant sur des dÃ©gradÃ©s de couleurs, comme les cartes produites Ã  partir de rasters. Auquel cas, il sera parfois prÃ©fÃ©rable de privilÃ©gier un export dans un format <em>bitmap</em>.<a href="#export-de-graphiques_fnref3">â†©</a></p></li>
<li id="export-de-graphiques_fn4"><p>Voir <a href="https://www.wikiwand.com/fr/Scalable_Vector_Graphics" class="uri">https://www.wikiwand.com/fr/Scalable_Vector_Graphics</a>.<a href="#export-de-graphiques_fnref4">â†©</a></p></li>
<li id="export-de-graphiques_fn5"><p>tÃ©lÃ©chargeable gratuitement sur <a href="https://inkscape.org/fr/" class="uri">https://inkscape.org/fr/</a>.<a href="#export-de-graphiques_fnref5">â†©</a></p></li>
</ol>
</div>

</article>
<article id="export-de-tableaux">

<div class="fluid-row" id="export-de-tableaux_header">


<h1 class="title">Export de tableaux</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="statistique-univariee">

<div class="fluid-row" id="statistique-univariee_header">


<h1 class="title">Statistique univariÃ©e</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#statistique-univariee_variable-quantitative">Variable quantitative</a><ul>
<li><a href="#statistique-univariee_principaux-indicateurs">Principaux indicateurs</a></li>
<li><a href="#statistique-univariee_histogramme">Histogramme</a></li>
<li><a href="#statistique-univariee_boites-a-moustaches">BoÃ®tes Ã  moustaches</a></li>
</ul></li>
<li><a href="#statistique-univariee_variable-qualitative">Variable qualitative</a><ul>
<li><a href="#statistique-univariee_tris-a-plat">Tris Ã  plat</a></li>
<li><a href="#statistique-univariee_representation-graphique">ReprÃ©sentation graphique</a></li>
</ul></li>
</ul>
</div>

<div class="note">
<p>Ce chapitre est inspirÃ© de la section <em>Premier travail avec les donnÃ©es</em> du support de cours <a href="https://github.com/juba/intro-r">Introduction Ã  R</a> rÃ©alisÃ© par Julien Barnier.</p>
</div>
<p>On entend par <dfn>statistique univariÃ©e</dfn><dfn data-index="univariÃ©e, statistique"/> lâ€™Ã©tude dâ€™une seule variable, que celle-ci soit quantitative ou qualitative. La statistique univariÃ©e fait partie de la <dfn>statistique descriptive</dfn><dfn data-index="descriptive, statistique"/>.</p>
<p>Nous utiliserons dans ce chapitre les donnÃ©es de lâ€™enquÃªte <em>Histoire de vie 2003</em> fournies avec lâ€™extension <code class="pkg">questionr</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(<span class="st">"hdv2003"</span>)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<div id="statistique-univariee_variable-quantitative" class="section level2">
<h2>Variable quantitative</h2>
<div id="statistique-univariee_principaux-indicateurs" class="section level3">
<h3>Principaux indicateurs</h3>
<p>Comme la fonction <code data-pkg="utils">str</code> nous lâ€™a indiquÃ©, notre tableau <code>d</code> contient plusieurs <dfn data-index="variable numÃ©rique">variables numÃ©riques</dfn><dfn data-index="numÃ©rique, variable"/> ou <dfn data-index="variable quantitative">variables quantitatives</dfn><dfn data-index="quantitative, variable"/>, dont la variable <em>heures.tv</em> qui reprÃ©sente le nombre moyen passÃ© par les enquÃªtÃ©s Ã  regarder la tÃ©lÃ©vision quotidiennement. On peut essayer de dÃ©terminer quelques caractÃ©ristiques de cette variable, en utilisant les fonctions <code data-pkg="base">mean</code> (<dfn>moyenne</dfn>), <code data-pkg="stats">sd</code> (<dfn>Ã©cart-type</dfn>), <code data-pkg="base" data-rdoc="Extremes">min</code> (<dfn>minimum</dfn>), <code data-pkg="base" data-rdoc="Extremes">max</code> (<dfn>maximum</dfn>) et <code data-pkg="base">range</code> (<dfn>Ã©tendue</dfn>)Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(d$heures.tv)</code></pre></div>
<pre><code>[1] NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 2.246566</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sd</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 1.775853</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">min</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">max</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 12</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">range</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1]  0 12</code></pre>
<p>On peut lui ajouter la fonction <code data-pkg="stats">median</code> qui donne la valeur <dfn>mÃ©diane</dfn>, <code data-pkg="stats">quantile</code> qui calcule plus gÃ©nÃ©ralement tout type de <dfn data-index="quantile">quantiles</dfn>, et le trÃ¨s utile <code data-pkg="base">summary</code> qui donne toutes ces informations ou presque en une seule fois, avec en prime le nombre de <dfn data-index="valeur manquante">valeurs manquantes</dfn> (<code>NA</code>)Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">median</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">quantile</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>  0%  25%  50%  75% 100% 
   0    1    2    3   12 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d$heures.tv)</code></pre></div>
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  0.000   1.000   2.000   2.247   3.000  12.000 
   NA's 
      5 </code></pre>
<p>La fonction <code data-pkg="base">summary</code> est une fonction gÃ©nÃ©rique qui peut Ãªtre utilisÃ©e sur tout type dâ€™objet, y compris un tableau de donnÃ©es. Essayez donc <code>summary(d)</code>.</p>
</div>
<div id="statistique-univariee_histogramme" class="section level3">
<h3>Histogramme</h3>
<p>Tout cela est bien pratique, mais pour pouvoir observer la <dfn>distribution</dfn> des valeurs dâ€™une variable quantitative, il nâ€™y a quand mÃªme rien de mieux quâ€™un bon graphique.</p>
<p>On peut commencer par un <dfn>histogramme</dfn> de la rÃ©partition des valeurs. Celui-ci peut Ãªtre gÃ©nÃ©rÃ© trÃ¨s facilement avec la fonction <code data-pkg="graphics">hist</code>Â :</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(d$heures.tv, <span class="dt">main =</span> <span class="st">"Nombre d'heures passÃ©es devant la tÃ©lÃ© par jour"</span>, 
  <span class="dt">xlab =</span> <span class="st">"Heures"</span>, <span class="dt">ylab =</span> <span class="st">"Effectif"</span>)</code></pre></div>
<img src="graphs/statistique-univariee/unnamed-chunk-4-1.png" title="" alt="" width="1050"/>
<figcaption>
Exemple dâ€™histogramme
</figcaption>
</figure>
<p>Sous <strong>RStudio</strong>, les graphiques sâ€™affichent dans lâ€™onglet <em>Plots</em> du quadrant infÃ©rieur droit. Il est possible dâ€™afficher une version plus grande de votre graphique en cliquant sur <em>Zoom</em>.</p>
<p>Ici, les options <code>main</code>, <code>xlab</code> et <code>ylab</code> permettent de personnaliser le titre du graphique, ainsi que les Ã©tiquettes des axes. De nombreuses autres options existent pour personnaliser lâ€™histogramme, parmi celles-ci on noteraÂ :</p>
<ul>
<li><code>probability</code> si elle vaut <code>TRUE</code>, lâ€™histogramme indique la proportion des <dfn data-index="classe de valeurs">classes de valeurs</dfn> au lieu des effectifs.</li>
<li><code>breaks</code> permet de contrÃ´ler les classes de valeurs. On peut lui passer un chiffre, qui indiquera alors le nombre de classes, un vecteur, qui indique alors les limites des diffÃ©rentes classes, ou encore une chaÃ®ne de caractÃ¨re ou une fonction indiquant comment les classes doivent Ãªtre calculÃ©es.</li>
<li><code>col</code> la couleur de lâ€™histogramme<a href="#statistique-univariee_fn1" class="footnoteRef" id="statistique-univariee_fnref1"><sup>1</sup></a>.</li>
</ul>
<p>Voir la page dâ€™aide de la fonction <code data-pkg="graphics">hist</code> pour plus de dÃ©tails sur les diffÃ©rentes options. Les deux figures ci-aprÃ¨s sont deux autres exemples dâ€™histogramme.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(d$heures.tv, <span class="dt">main =</span> <span class="st">"Heures de tÃ©lÃ© en 7 classes"</span>, 
  <span class="dt">breaks =</span> <span class="dv">7</span>, <span class="dt">xlab =</span> <span class="st">"Heures"</span>, <span class="dt">ylab =</span> <span class="st">"Proportion"</span>, 
  <span class="dt">probability =</span> <span class="ot">TRUE</span>, <span class="dt">col =</span> <span class="st">"orange"</span>)</code></pre></div>
<img src="graphs/statistique-univariee/unnamed-chunk-5-1.png" title="" alt="" width="1050"/>
<figcaption>
Un autre exemple dâ€™histogramme
</figcaption>
</figure>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(d$heures.tv, <span class="dt">main =</span> <span class="st">"Heures de tÃ©lÃ© avec classes spÃ©cifiÃ©es"</span>, 
  <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">9</span>, <span class="dv">12</span>), <span class="dt">xlab =</span> <span class="st">"Heures"</span>, <span class="dt">ylab =</span> <span class="st">"Proportion"</span>, 
  <span class="dt">col =</span> <span class="st">"red"</span>)</code></pre></div>
<img src="graphs/statistique-univariee/unnamed-chunk-6-1.png" title="" alt="" width="1050"/>
<figcaption>
Encore un autre exemple dâ€™histogramme
</figcaption>
</figure>
</div>
<div id="statistique-univariee_boites-a-moustaches" class="section level3">
<h3>BoÃ®tes Ã  moustaches</h3>
<p>Les <dfn data-index="boÃ®te Ã  moustaches">boÃ®tes Ã  moustaches</dfn><dfn data-index="moustaches, boÃ®te"/>, ou <dfn data-index="boxplot" lang="en">boxplots</dfn> en anglais, sont une autre reprÃ©sentation graphique de la rÃ©partition des valeurs dâ€™une variable quantitative. Elles sont particuliÃ¨rement utiles pour comparer les distributions de plusieurs variables ou dâ€™une mÃªme variable entre diffÃ©rents groupes, mais peuvent aussi Ãªtre utilisÃ©es pour reprÃ©senter la dispersion dâ€™une unique variable. La fonction qui produit ces graphiques est la fonction <code data-pkg="graphics">boxplot</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(d$heures.tv, <span class="dt">main =</span> <span class="st">"Nombre d'heures passÃ©es devant la tÃ©lÃ© par jour"</span>, 
  <span class="dt">ylab =</span> <span class="st">"Heures"</span>)</code></pre></div>
<img src="graphs/statistique-univariee/unnamed-chunk-7-1.png" title="" alt="" width="1050"/>
<figcaption>
Exemple de boÃ®te Ã  moustaches
</figcaption>
</figure>
<p>Comment interprÃ©ter ce graphiqueÂ ? On le comprendra mieux Ã  partir de la figure ci-aprÃ¨s<a href="#statistique-univariee_fn2" class="footnoteRef" id="statistique-univariee_fnref2"><sup>2</sup></a>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(d$heures.tv, <span class="dt">col =</span> <span class="kw">grey</span>(<span class="fl">0.8</span>), <span class="dt">main =</span> <span class="st">"Nombre d'heures passÃ©es devant la tÃ©lÃ© par jour"</span>, 
  <span class="dt">ylab =</span> <span class="st">"Heures"</span>)
<span class="kw">abline</span>(<span class="dt">h =</span> <span class="kw">median</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="dt">col =</span> <span class="st">"navy"</span>, 
  <span class="dt">lty =</span> <span class="dv">2</span>)
<span class="kw">text</span>(<span class="fl">1.35</span>, <span class="kw">median</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) +<span class="st"> </span><span class="fl">0.15</span>, 
  <span class="st">"MÃ©diane"</span>, <span class="dt">col =</span> <span class="st">"navy"</span>)
Q1 &lt;-<span class="st"> </span><span class="kw">quantile</span>(d$heures.tv, <span class="dt">probs =</span> <span class="fl">0.25</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)
<span class="kw">abline</span>(<span class="dt">h =</span> Q1, <span class="dt">col =</span> <span class="st">"darkred"</span>)
<span class="kw">text</span>(<span class="fl">1.35</span>, Q1 +<span class="st"> </span><span class="fl">0.15</span>, <span class="st">"Q1 : premier quartile"</span>, <span class="dt">col =</span> <span class="st">"darkred"</span>, 
  <span class="dt">lty =</span> <span class="dv">2</span>)
Q3 &lt;-<span class="st"> </span><span class="kw">quantile</span>(d$heures.tv, <span class="dt">probs =</span> <span class="fl">0.75</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)
<span class="kw">abline</span>(<span class="dt">h =</span> Q3, <span class="dt">col =</span> <span class="st">"darkred"</span>)
<span class="kw">text</span>(<span class="fl">1.35</span>, Q3 +<span class="st"> </span><span class="fl">0.15</span>, <span class="st">"Q3 : troisiÃ¨me quartile"</span>, <span class="dt">col =</span> <span class="st">"darkred"</span>, 
  <span class="dt">lty =</span> <span class="dv">2</span>)
<span class="kw">arrows</span>(<span class="dt">x0 =</span> <span class="fl">0.7</span>, <span class="dt">y0 =</span> <span class="kw">quantile</span>(d$heures.tv, <span class="dt">probs =</span> <span class="fl">0.75</span>, 
  <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="dt">x1 =</span> <span class="fl">0.7</span>, <span class="dt">y1 =</span> <span class="kw">quantile</span>(d$heures.tv, 
  <span class="dt">probs =</span> <span class="fl">0.25</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="dt">length =</span> <span class="fl">0.1</span>, <span class="dt">code =</span> <span class="dv">3</span>)
<span class="kw">text</span>(<span class="fl">0.7</span>, Q1 +<span class="st"> </span>(Q3 -<span class="st"> </span>Q1)/<span class="dv">2</span> +<span class="st"> </span><span class="fl">0.15</span>, <span class="st">"h"</span>, <span class="dt">pos =</span> <span class="dv">2</span>)
<span class="kw">mtext</span>(<span class="st">"L'Ã©cart inter-quartile h contient 50 % des individus"</span>, 
  <span class="dt">side =</span> <span class="dv">1</span>)
<span class="kw">abline</span>(<span class="dt">h =</span> Q1 -<span class="st"> </span><span class="fl">1.5</span> *<span class="st"> </span>(Q3 -<span class="st"> </span>Q1), <span class="dt">col =</span> <span class="st">"darkgreen"</span>)
<span class="kw">text</span>(<span class="fl">1.35</span>, Q1 -<span class="st"> </span><span class="fl">1.5</span> *<span class="st"> </span>(Q3 -<span class="st"> </span>Q1) +<span class="st"> </span><span class="fl">0.15</span>, <span class="st">"Q1 -1.5 h"</span>, 
  <span class="dt">col =</span> <span class="st">"darkgreen"</span>, <span class="dt">lty =</span> <span class="dv">2</span>)
<span class="kw">abline</span>(<span class="dt">h =</span> Q3 +<span class="st"> </span><span class="fl">1.5</span> *<span class="st"> </span>(Q3 -<span class="st"> </span>Q1), <span class="dt">col =</span> <span class="st">"darkgreen"</span>)
<span class="kw">text</span>(<span class="fl">1.35</span>, Q3 +<span class="st"> </span><span class="fl">1.5</span> *<span class="st"> </span>(Q3 -<span class="st"> </span>Q1) +<span class="st"> </span><span class="fl">0.15</span>, <span class="st">"Q3 +1.5 h"</span>, 
  <span class="dt">col =</span> <span class="st">"darkgreen"</span>, <span class="dt">lty =</span> <span class="dv">2</span>)</code></pre></div>
<img src="graphs/statistique-univariee/unnamed-chunk-8-1.png" title="" alt="" width="1050"/>
<figcaption>
InterprÃ©tation dâ€™une boÃ®te Ã  moustaches
</figcaption>
</figure>
<p>Le carrÃ© au centre du graphique est dÃ©limitÃ© par les premiers et troisiÃ¨me <dfn data-index="quartile">quartiles</dfn>, avec la <dfn>mÃ©diane</dfn> reprÃ©sentÃ©e par une ligne plus sombre au milieu. Les Â«Â fourchettesÂ Â» sâ€™Ã©tendant de part et dâ€™autres vont soit jusquâ€™Ã  la valeur minimale ou maximale, soit jusquâ€™Ã  une valeur approximativement Ã©gale au quartile le plus proche plus 1,5 fois lâ€™<dfn>Ã©cart interquartile</dfn><dfn data-index="interquartilen Ã©cart"/>. Les points se situant en-dehors de cette fourchette sont reprÃ©sentÃ©s par des petits ronds et sont gÃ©nÃ©ralement considÃ©rÃ©s comme des valeurs extrÃªmes, potentiellement aberrantes.</p>
<p>On peut ajouter la reprÃ©sentation des valeurs sur le graphique pour en faciliter la lecture avec des petits traits dessinÃ©s sur lâ€™axe vertical (fonction <code data-pkg="graphics">rug</code>)Â :</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(d$heures.tv, <span class="dt">main =</span> <span class="st">"Nombre d'heures passÃ©es devant la tÃ©lÃ© par</span><span class="ch">\n</span><span class="st">jour"</span>, 
  <span class="dt">ylab =</span> <span class="st">"Heures"</span>)
<span class="kw">rug</span>(d$heures.tv, <span class="dt">side =</span> <span class="dv">2</span>)</code></pre></div>
<img src="graphs/statistique-univariee/unnamed-chunk-9-1.png" title="" alt="" width="1050"/>
<figcaption>
BoÃ®te Ã  moustaches avec reprÃ©sentation des valeurs
</figcaption>
</figure>
</div>
</div>
<div id="statistique-univariee_variable-qualitative" class="section level2">
<h2>Variable qualitative</h2>
<div id="statistique-univariee_tris-a-plat" class="section level3">
<h3>Tris Ã  plat</h3>
<p>La fonction la plus utilisÃ©e pour le traitement et lâ€™analyse des <dfn data-index="variable qualitative">variables qualitatives</dfn><dfn data-index="qualitative, variable"/> (variable prenant ses valeurs dans un ensemble de <dfn data-index="modalitÃ©">modalitÃ©s</dfn>) est sans aucun doute la fonction <code data-pkg="base">table</code>, qui donne les effectifs de chaque modalitÃ© de la variable, ce quâ€™on appelle un <dfn>tri Ã  plat</dfn> ou <dfn>tableau de frÃ©quences</dfn><dfn data-index="frÃ©quence, tableau"/>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$sexe)</code></pre></div>
<pre><code>
Homme Femme 
  899  1101 </code></pre>
<p>La tableau prÃ©cÃ©dent nous indique que parmi nos enquÃªtÃ©s on trouve 899 hommes et 1101 femmes.</p>
<p>Quand le nombre de modalitÃ©s est Ã©levÃ©, on peut ordonner le tri Ã  plat selon les effectifs Ã  lâ€™aide de la fonction <code data-pkg="base">sort</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$occup)</code></pre></div>
<pre><code>
Exerce une profession               Chomeur 
                 1049                   134 
      Etudiant, eleve              Retraite 
                   94                   392 
  Retire des affaires              Au foyer 
                   77                   171 
        Autre inactif 
                   83 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sort</span>(<span class="kw">table</span>(d$occup))</code></pre></div>
<pre><code>
  Retire des affaires         Autre inactif 
                   77                    83 
      Etudiant, eleve               Chomeur 
                   94                   134 
             Au foyer              Retraite 
                  171                   392 
Exerce une profession 
                 1049 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sort</span>(<span class="kw">table</span>(d$occup), <span class="dt">decreasing =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>
Exerce une profession              Retraite 
                 1049                   392 
             Au foyer               Chomeur 
                  171                   134 
      Etudiant, eleve         Autre inactif 
                   94                    83 
  Retire des affaires 
                   77 </code></pre>
<p>Ã€ noter que la fonction <code data-pkg="base">table</code> exclut par dÃ©faut les non-rÃ©ponses du tableau rÃ©sultat. Lâ€™argument <code>useNA</code> de cette fonction permet de modifier ce comportementÂ :</p>
<ul>
<li>avec <code>useNA="no"</code> (valeur par dÃ©faut), les valeurs manquantes ne sont jamais incluses dans le tri Ã  platÂ ;</li>
<li>avec <code>useNA="ifany"</code>, une colonne <code>NA</code> est ajoutÃ©e si des valeurs manquantes sont prÃ©sentes dans les donnÃ©esÂ ;</li>
<li>avec <code>useNA="always"</code>, une colonne <code>NA</code> est toujours ajoutÃ©e, mÃªme sâ€™il nâ€™y a pas de valeurs manquantes dans les donnÃ©es.</li>
</ul>
<p>On peut donc utiliserÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$trav.satisf, <span class="dt">useNA =</span> <span class="st">"ifany"</span>)</code></pre></div>
<pre><code>
  Satisfaction Insatisfaction      Equilibre 
           480            117            451 
          &lt;NA&gt; 
           952 </code></pre>
<p>Lâ€™utilisation de <code data-pkg="base">summary</code> permet Ã©galement lâ€™affichage du tri Ã  plat et du nombre de non-rÃ©ponsesÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d$trav.satisf)</code></pre></div>
<pre><code>  Satisfaction Insatisfaction      Equilibre 
           480            117            451 
          NA's 
           952 </code></pre>
<p>Pour obtenir un tableau avec la rÃ©partition en pourcentages, on peut utiliser la fonction <code data-pkg="questionr">freq</code> de lâ€™extension <code class="pkg">questionr</code><a href="#statistique-univariee_fn3" class="footnoteRef" id="statistique-univariee_fnref3"><sup>3</sup></a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">freq</span>(d$qualif)</code></pre></div>
<pre><code>                           n    % val%
Ouvrier specialise       203 10.2 12.3
Ouvrier qualifie         292 14.6 17.7
Technicien                86  4.3  5.2
Profession intermediaire 160  8.0  9.7
Cadre                    260 13.0 15.7
Employe                  594 29.7 35.9
Autre                     58  2.9  3.5
NA                       347 17.3   NA</code></pre>
<p>La colonne <code>n</code> donne les effectifs bruts, la colonne <code>%</code> la rÃ©partition en pourcentages et <code>val%</code> la rÃ©partition en pourcentages, donnÃ©es manquantes exclues. La fonction accepte plusieurs paramÃ¨tres permettant dâ€™afficher les totaux, les pourcentages cumulÃ©s, de trier selon les effectifs ou de contrÃ´ler lâ€™affichage. Par exempleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">freq</span>(d$qualif, <span class="dt">cum =</span> <span class="ot">TRUE</span>, <span class="dt">total =</span> <span class="ot">TRUE</span>, <span class="dt">sort =</span> <span class="st">"inc"</span>, 
  <span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">exclude =</span> <span class="ot">NA</span>)</code></pre></div>
<pre><code>                            n      %   %cum
Autre                      58   3.51   3.51
Technicien                 86   5.20   8.71
Profession intermediaire  160   9.68  18.39
Ouvrier specialise        203  12.28  30.67
Cadre                     260  15.73  46.40
Ouvrier qualifie          292  17.66  64.07
Employe                   594  35.93 100.00
Total                    1653 100.00 100.00</code></pre>
<p>La colonne <code>%cum</code> indique ici le pourcentage cumulÃ©, ce qui est ici une trÃ¨s mauvaise idÃ©e puisque pour ce type de variable cela nâ€™a aucun sens. Les lignes du tableau rÃ©sultat ont Ã©tÃ© triÃ©s par effectifs croissants, les totaux ont Ã©tÃ© ajoutÃ©s, les non-rÃ©ponses exclues et les pourcentages arrondis Ã  deux dÃ©cimales.</p>
<p>Pour plus dâ€™informations sur la fonction <code data-pkg="questionr">freq</code>, consultez sa page dâ€™aide en ligne avec <code>?freq</code> ou <code>help("freq")</code>.</p>
</div>
<div id="statistique-univariee_representation-graphique" class="section level3">
<h3>ReprÃ©sentation graphique</h3>
<p>Pour reprÃ©senter la rÃ©partition des effectifs parmi les modalitÃ©s dâ€™une variable qualitative, on a souvent tendance Ã  utiliser des <dfn data-index="diagramme en secteur">diagrammes en secteurs</dfn><dfn data-index="secteur, diagramme"/> (<dfn data-index="camembert, graphique">camemberts</dfn>). Ceci est possible sous <strong>R</strong> avec la fonction <code data-pkg="graphics">pie</code>, mais la page dâ€™aide de la dite fonction nous le dÃ©conseille assez vivementÂ : les diagrammes en secteur sont en effet une mauvaise maniÃ¨re de prÃ©senter ce type dâ€™information, car lâ€™oeil humain prÃ©fÃ¨re comparer des longueurs plutÃ´t que des surfaces<a href="#statistique-univariee_fn4" class="footnoteRef" id="statistique-univariee_fnref4"><sup>4</sup></a>.</p>
<p>On privilÃ©giera donc dâ€™autres formes de reprÃ©sentations, Ã  savoir les <dfn data-index="diagramme en bÃ¢tons">diagrammes en bÃ¢tons</dfn><dfn data-index="bÃ¢ton, diagramme"/> et les <dfn data-index="diagramme de Cleveland">diagrammes de Cleveland</dfn><dfn data-index="Cleveland, diagramme"/>.</p>
<p>Les diagrammes en bÃ¢tons sont utilisÃ©s automatiquement par <strong>R</strong> lorsquâ€™on applique la fonction gÃ©nÃ©rique <code data-pkg="graphics" data-rdoc="plot.table">plot</code> Ã  un tri Ã  plat obtenu avec <code data-pkg="base">table</code>. On privilÃ©giera cependant ce type de reprÃ©sentations pour les variables de type numÃ©rique comportant un nombre fini de valeurs. Le nombre de frÃ¨res, soeurs, demi-frÃ¨res et demi-soeurs est un bon exempleÂ :</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="kw">table</span>(d$freres.soeurs), <span class="dt">main =</span> <span class="st">"Nombre de frÃ¨res, soeurs, demi-frÃ¨res et demi-soeurs"</span>, 
  <span class="dt">ylab =</span> <span class="st">"Effectif"</span>)</code></pre></div>
<img src="graphs/statistique-univariee/unnamed-chunk-16-1.png" title="" alt="" width="1050"/>
<figcaption>
Exemple de diagramme en bÃ¢tons
</figcaption>
</figure>
<p>Pour les autres types de variables qualitatives, on privilÃ©giera les diagrammes de Cleveland, obtenus avec la fonction <code data-pkg="graphics">dotchart</code>. On doit appliquer cette fonction au tri Ã  plat de la variable, obtenu avec <code data-pkg="base">table</code><a href="#statistique-univariee_fn5" class="footnoteRef" id="statistique-univariee_fnref5"><sup>5</sup></a>Â :</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dotchart</span>(<span class="kw">as.matrix</span>(<span class="kw">table</span>(d$clso))[, <span class="dv">1</span>], <span class="dt">main =</span> <span class="st">"Sentiment d'appartenance Ã  une classe sociale"</span>, 
  <span class="dt">pch =</span> <span class="dv">19</span>)</code></pre></div>
<img src="graphs/statistique-univariee/unnamed-chunk-17-1.png" title="" alt="" width="1050"/>
<figcaption>
Exemple de diagramme de Cleveland
</figcaption>
</figure>
<div class="note">
<p>Il est possible dâ€™entrer directement la commande suivante dans la consoleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dotchart</span>(<span class="kw">table</span>(d$clso))</code></pre></div>
<p><strong>R</strong> produira bien le diagramme de Cleveland dÃ©sirÃ© mais affichera un message dâ€™avertissement (<em>Warning</em>) car pour des raisons liÃ©es au fonctionnement interne de la fonction <code data-pkg="graphics">dotchart</code>, il est attendu une matrice ou un vecteur, non un objet de type table. Pour Ã©viter cet avertissement, il est nÃ©cessaire de faire appel Ã  la fonction <code data-pkg="base" data-rdoc="matrix">as.matrix</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dotchart</span>(<span class="kw">as.matrix</span>(<span class="kw">table</span>(d$clso)))</code></pre></div>
<p><img src="graphs/statistique-univariee/unnamed-chunk-19-1.png" title="" alt="" width="1050"/></p>
<p>Dans le cas prÃ©sent, on voit apparaÃ®tre un chiffre 1 au-dessus des modalitÃ©s. En fait, <code data-pkg="graphics">dotchart</code> peut Ãªtre appliquÃ© au rÃ©sultat dâ€™un tableau croisÃ© Ã  deux entrÃ©es, auquel cas il prÃ©sentera les rÃ©sultats pour chaque colonne. Comme dans lâ€™exemple ci-aprÃ¨s.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dotchart</span>(<span class="kw">as.matrix</span>(<span class="kw">table</span>(d$clso, d$sexe)))</code></pre></div>
<p><img src="graphs/statistique-univariee/unnamed-chunk-20-1.png" title="" alt="" width="1050"/></p>
<p>Cela ne rÃ©soud pas le problÃ¨me pour notre diagramme de Cleveland issu dâ€™un tri Ã  plat simple. Pour bien comprendre, la fonction <code data-pkg="base" data-rdoc="matrix">as.matrix</code> a produit un objet Ã  deux dimensions ayant une colonne et plusieurs lignes. On indiquera Ã  <strong>R</strong> que lâ€™on ne souhaite extraire la premiÃ¨re colonne avec <code>[, 1]</code> (juste aprÃ¨s lâ€™appel Ã  <code data-pkg="base" data-rdoc="matrix">as.matrix</code>). Câ€™est ce quâ€™on appelle lâ€™<em>indexation</em> que lâ€™on abordera plus en dÃ©tails dans le chapite <a href="pem_manipulation.html#indexation">Manipulation de donnÃ©es</a>.</p>
</div>
<p>Quand la variable comprend un grand nombre de modalitÃ©s, il est prÃ©fÃ©rable dâ€™<dfn>ordonner le tri Ã  plat</dfn><dfn data-index="tri Ã  plat, ordonner"/> obtenu Ã  lâ€™aide de la fonction <code data-pkg="base">sort</code>Â :</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dotchart</span>(<span class="kw">as.matrix</span>(<span class="kw">sort</span>(<span class="kw">table</span>(d$qualif)))[, <span class="dv">1</span>], <span class="dt">main =</span> <span class="st">"Niveau de qualification"</span>)</code></pre></div>
<img src="graphs/statistique-univariee/unnamed-chunk-21-1.png" title="" alt="" width="1050"/>
<figcaption>
Exemple de diagramme de Cleveland ordonnÃ©
</figcaption>
</figure>
<div class="note">
<p>Lâ€™agument <code>pch</code>, qui est utilisÃ© par la plupart des graphiques de type points, permet de spÃ©cifier le symbole Ã  utiliser. Il peut prendre soit un nombre entier compris entre 0 et 25, soit un charactÃ¨re textuel (voir ci-dessous).</p>
<p><img src="graphs/statistique-univariee/unnamed-chunk-22-1.png" title="" alt="" width="1050"/></p>
</div>
</div>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="statistique-univariee_fn1"><p>Il existe un grand nombre de couleurs prÃ©dÃ©finies dans <strong>R</strong>. On peut rÃ©cupÃ©rer leur liste en utilisant la fonction <code data-pkg="grDevices">colors</code> en tapant simplement <code>colors()</code> dans la console, ou en consultant le document suivantÂ : <a href="http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf" class="uri">http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf</a>.<a href="#statistique-univariee_fnref1">â†©</a></p></li>
<li id="statistique-univariee_fn2"><p>Le code ayant servi Ã  gÃ©nÃ©rer cette figure est une copie quasi conforme de celui prÃ©sentÃ© dans lâ€™excellent document de Jean Lobry sur les graphiques de base avec <strong>R</strong>, tÃ©lÃ©chargeable sur le site du PÃ´le bioinformatique lyonnaisÂ : <a href="http://pbil.univ-lyon1.fr/R/pdf/lang04.pdf" class="uri">http://pbil.univ-lyon1.fr/R/pdf/lang04.pdf</a>.<a href="#statistique-univariee_fnref2">â†©</a></p></li>
<li id="statistique-univariee_fn3"><p>En lâ€™absence de lâ€™extension <code class="pkg">questionr</code>, on pourra se rabattre sur la fonction <code data-pkg="base">prop.table</code> avec la commande suivanteÂ : <code>prop.table(table(d$qualif))</code>.<a href="#statistique-univariee_fnref3">â†©</a></p></li>
<li id="statistique-univariee_fn4"><p>On trouvera des exemples illustrant cette idÃ©e dans le document de Jean Lobry citÃ© prÃ©cÃ©demment.<a href="#statistique-univariee_fnref4">â†©</a></p></li>
<li id="statistique-univariee_fn5"><p>Pour des raisons liÃ©es au fonctionnement interne de la fonction <code data-pkg="graphics">dotchart</code>, on doit transformer le tri Ã  plat en matrice, dâ€™oÃ¹ lâ€™appel Ã  la fonction <code data-pkg="base" data-rdoc="matrix">as.matrix</code>.<a href="#statistique-univariee_fnref5">â†©</a></p></li>
</ol>
</div>

</article>
<article id="graphiques-univaries">

<div class="fluid-row" id="graphiques-univaries_header">


<h1 class="title">Graphiques univariÃ©s</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#graphiques-univaries_quelques-graphiques-de-base">Quelques graphiques de base</a><ul>
<li><a href="#graphiques-univaries_visualiser-une-distribution">Visualiser une distribution</a></li>
<li><a href="#graphiques-univaries_visualiser-un-nuages-de-points">Visualiser un nuages de points</a></li>
<li><a href="#graphiques-univaries_visualiser-des-proportions">Visualiser des proportions</a></li>
</ul></li>
<li><a href="#graphiques-univaries_quelques-graphiques-plus-complexes">Quelques graphiques plus complexes</a><ul>
<li><a href="#graphiques-univaries_matrices-de-nuages-de-points">Matrices de nuages de points</a></li>
<li><a href="#graphiques-univaries_densite-dun-nuage-de-points">DensitÃ© dâ€™un nuage de points</a></li>
<li><a href="#graphiques-univaries_resultats-dun-modele-lineaire">RÃ©sultats dâ€™un modÃ¨le linÃ©aire</a></li>
</ul></li>
<li><a href="#graphiques-univaries_exporter-un-graphique-avec-rstudio">Exporter un graphique avec <strong>RStudio</strong></a><ul>
<li><a href="#graphiques-univaries_sauvegarder-le-fichier-en-tant-quimage">Sauvegarder le fichier en tant quâ€™image</a></li>
<li><a href="#graphiques-univaries_sauvegarder-le-graphique-en-pdf">Sauvegarder le graphique en PDF</a></li>
<li><a href="#graphiques-univaries_copier-le-graphique-dans-le-presse-papier">Copier le graphique dans le presse-papier</a></li>
</ul></li>
<li><a href="#graphiques-univaries_exporter-un-graphique-avec-r">Exporter un graphique avec <strong>R</strong></a></li>
</ul>
</div>

<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>
<p>Une partie de la rÃ©putation du logiciel <strong>R</strong> tient Ã  ses excellentes capacitÃ©s graphiques, qui ont fait lâ€™objet dâ€™<a href="http://www.gradaanwr.net/">ouvrages complets</a>, et qui permettent dâ€™aboutir Ã  des rÃ©sultats trÃ¨s avancÃ©s, telles que des <a href="https://dsparks.wordpress.com/2012/07/18/mapping-public-opinion-a-tutorial/">cartes isarithmiques</a>. De plus, <strong>R</strong> sâ€™articule de mieux en mieux avec dâ€™autres languages, et en particulier <a href="https://fr.wikipedia.org/wiki/JavaScript">JavaScript</a>, ce qui permet de produire des graphiques interactifs avec <strong>R</strong>.</p>
<p>Ce chapitre prÃ©sente les fonctions graphiques les plus basiques de <strong>R</strong>, de maniÃ¨re Ã  familiariser le lecteur avec la fonction <code data-pkg="graphics" data-rdoc="plot.default">plot</code>, et de maniÃ¨re Ã  montrer comment produire, en une ligne de code ou Ã  peine plus, quelques graphiques trÃ¨s frÃ©quemment utilisÃ©s au stade exploratoire dâ€™une analyse de donnÃ©es. Ces fonctions basiques ne produisent pas de graphiques particuliÃ¨rement Ã©lÃ©gants ou sophistiquÃ©s, mais suffisent largement dans un contexte exploratoire.</p>
<div id="graphiques-univaries_quelques-graphiques-de-base" class="section level2">
<h2>Quelques graphiques de base</h2>
<p>CommenÃ§ons par charger en mÃ©moire le jeu de donnÃ©es <code>rp99</code> du <em>package</em> <code class="pkg">questionr</code>, qui contient un extrait du <a href="http://www.insee.fr/fr/bases-de-donnees/default.asp?page=recensements.htm">recensement Insee 1999</a> pour 301 villes du dÃ©partement du RhÃ´ne. Ce jeu de donnÃ©es contient toute une sÃ©rie dâ€™indicateurs socio-dÃ©mographiques mesurÃ©s au niveau de chaque commune, tels que les pourcentages de chaque catÃ©gorie socio-professionnelle parmi la population, ou le taux de chÃ´mage dans cette population Ã  la date du recensementÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># chargement du package</span>
<span class="kw">library</span>(questionr)

<span class="co"># chargement du jeu de donnÃ©es</span>
<span class="kw">data</span>(rp99)

<span class="co"># inspection des variables</span>
<span class="kw">str</span>(rp99)</code></pre></div>
<pre><code>'data.frame':   301 obs. of  21 variables:
 $ nom       : Factor w/ 301 levels "AFFOUX","AIGUEPERSE",..: 1 2 3 4 5 6 7 8 9 10 ...
 $ code      : int  69001 69002 69003 69004 69005 69006 69007 69008 69009 69010 ...
 $ pop.act   : int  113 90 1153 277 213 2218 1015 228 2220 2667 ...
 $ pop.tot   : int  248 233 2680 690 427 4947 2181 474 4742 5785 ...
 $ pop15     : int  184 200 2194 572 327 4040 1784 382 3846 4542 ...
 $ nb.rp     : int  91 103 904 217 147 1965 802 179 1665 2183 ...
 $ agric     : num  7.08 22.222 0.607 0 3.756 ...
 $ artis     : num  7.08 8.89 9.54 8.66 7.51 ...
 $ cadres    : num  10.62 4.44 8.41 17.33 5.63 ...
 $ interm    : num  14.16 4.44 23.24 20.22 13.15 ...
 $ empl      : num  28.3 17.8 32.7 24.5 22.5 ...
 $ ouvr      : num  31.9 31.1 24.7 28.9 43.2 ...
 $ retr      : num  38.9 88.9 40 78 30 ...
 $ tx.chom   : num  3.54 7.78 10.41 4.69 7.04 ...
 $ etud      : num  5.98 5 11.17 7.52 6.73 ...
 $ dipl.sup  : num  5.978 4 6.837 4.895 0.917 ...
 $ dipl.aucun: num  23.9 25 25 12.1 24.2 ...
 $ proprio   : num  78 78.6 51.8 68.2 81 ...
 $ hlm       : num  4.4 0 26.88 7.83 0 ...
 $ locataire : num  9.89 9.71 17.26 14.75 16.33 ...
 $ maison    : num  98.9 94.2 51.3 86.2 95.2 ...</code></pre>
<div id="graphiques-univaries_visualiser-une-distribution" class="section level3">
<h3>Visualiser une distribution</h3>
<p>IntÃ©ressons-nous, pour commencer, au taux de chÃ´mage des communes du RhÃ´ne, qui varie de 0Â % Ã  23Â %. Un taux de chÃ´mage de 0Â % nâ€™est pas anormal quand certaines communes ont une <a href="https://fr.wikipedia.org/wiki/Population_active">population active</a> de moins de 100 habitants, comme câ€™est le cas ici. Malheureusement, un taux de chÃ´mage de 23Â % nâ€™est pas non plus anormal Ã  cette pÃ©riode.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(rp99$tx.chom)</code></pre></div>
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  0.000   5.425   6.767   7.256   8.550  23.340 </code></pre>
<p>Ces statistiques descriptives donnent une idÃ©e de la <dfn>distribution</dfn> du taux de chÃ´mage. Dâ€™un point de vue graphique, on sait, depuis le <a href="#statistique-univariee">chapitre sur la statistique univariÃ©e</a>, comment se reprÃ©senter cette distribution, en construisant son histogramme avec la fonction <code data-pkg="graphics" data-rodc="hist">hist</code>Â :</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(rp99$tx.chom)</code></pre></div>
<img src="graphs/graphiques-univaries/unnamed-chunk-3-1.png" title="" alt="" width="1050"/>
<figcaption>
Histogramme
</figcaption>
</figure>
<p>Jusquâ€™ici, rien de bien compliquÃ© : la fonction <code data-pkg="graphics" data-rodc="hist">hist</code> fait tout le travail nÃ©cessaire. Toutefois, ce nâ€™est pas la seule maniÃ¨re de procÃ©der avec <strong>R</strong>, qui possÃ¨de Ã©galement une fonction gÃ©nÃ©rique, <code data-pkg="graphics" data-rdoc="plot.default">plot</code>, qui Â«Â sâ€™adapteÂ Â» Ã  ce quâ€™on lui demande de visualiser. En voici un exempleÂ :</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="kw">density</span>(rp99$tx.chom))</code></pre></div>
<img src="graphs/graphiques-univaries/unnamed-chunk-4-1.png" title="" alt="" width="1050"/>
<figcaption>
Courbe de densitÃ©
</figcaption>
</figure>
<p>Ici, on dâ€™abord construit un objet bien particulier avec la fonction <code data-pkg="stats">density</code>, qui permet dâ€™obtenir une <dfn>estimation par noyau</dfn><dfn data-index="noyau, estimation"/><a href="#graphiques-univaries_fn1" class="footnoteRef" id="graphiques-univaries_fnref1"><sup>1</sup></a> de la distribution du taux de chÃ´mage. Le rÃ©sultat de cette estimation est ensuite reprÃ©sentÃ© graphiquement Ã  lâ€™aide de <code data-pkg="stats" data-rdoc="plot.density">plot</code>.</p>
<p>De maniÃ¨re similaire, on peut calculer la <dfn>fonction de rÃ©partition empirique</dfn><dfn data-index="rÃ©partition empirique, fonction"/> ou <dfn lang="en">empirical cumulative distribution function</dfn> en anglais avec la fonction <code class="pkg">ecdf</code>. Le rÃ©sultat obtenu peut, une fois encore, Ãªtre reprÃ©sentÃ© sur un graphique Ã  lâ€™aide de la fonction <code data-pkg="stats" data-rdoc="ecdf">plot</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="kw">ecdf</span>(rp99$tx.chom))</code></pre></div>
<img src="graphs/graphiques-univaries/unnamed-chunk-5-1.png" title="" alt="" width="1050"/>
<figcaption>
Fonction de rÃ©partition empirique cumulÃ©e
</figcaption>
</figure>
</div>
<div id="graphiques-univaries_visualiser-un-nuages-de-points" class="section level3">
<h3>Visualiser un nuages de points</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">with</span>(rp99, <span class="kw">plot</span>(dipl.aucun, tx.chom))</code></pre></div>
<p><img src="graphs/graphiques-univaries/unnamed-chunk-6-1.png" title="" alt="" width="1050"/></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># graphique principal</span>
<span class="kw">with</span>(rp99, <span class="kw">plot</span>(dipl.aucun, tx.chom, <span class="dt">cex =</span> pop.tot/<span class="dv">10</span>^<span class="dv">4</span>))

<span class="co"># lÃ©gende justifiÃ©e Ã  droite</span>
<span class="kw">text</span>(<span class="dv">40</span>, <span class="dv">0</span>, <span class="st">"taille des points proportionnelle Ã  la population"</span>, 
  <span class="dt">adj =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">0</span>))</code></pre></div>
<p><img src="graphs/graphiques-univaries/unnamed-chunk-7-1.png" title="" alt="" width="1050"/></p>
</div>
<div id="graphiques-univaries_visualiser-des-proportions" class="section level3">
<h3>Visualiser des proportions</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># recodage du taux de chÃ´mage</span>
t =<span class="st"> </span><span class="kw">cut</span>(rp99$tx.chom, <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">25</span>, <span class="dv">5</span>), <span class="dt">right =</span> <span class="ot">FALSE</span>)

<span class="co"># taille des groupes recodÃ©s</span>
<span class="kw">table</span>(t, <span class="dt">exclude =</span> <span class="ot">NULL</span>)</code></pre></div>
<pre><code>t
  [0,5)  [5,10) [10,15) [15,20) [20,25)    &lt;NA&gt; 
     60     198      35       6       2       0 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># graphique en barres</span>
<span class="kw">barplot</span>(<span class="kw">table</span>(t))</code></pre></div>
<p><img src="graphs/graphiques-univaries/unnamed-chunk-8-1.png" title="" alt="" width="1050"/></p>
</div>
</div>
<div id="graphiques-univaries_quelques-graphiques-plus-complexes" class="section level2">
<h2>Quelques graphiques plus complexes</h2>
<div id="graphiques-univaries_matrices-de-nuages-de-points" class="section level3">
<h3>Matrices de nuages de points</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">pairs</span>(rp99[, <span class="dv">18</span>:<span class="dv">21</span>])</code></pre></div>
<p><img src="graphs/graphiques-univaries/unnamed-chunk-9-1.png" title="" alt="" width="1050"/></p>
</div>
<div id="graphiques-univaries_densite-dun-nuage-de-points" class="section level3">
<h3>DensitÃ© dâ€™un nuage de points</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">smoothScatter</span>(rp99[, <span class="kw">c</span>(<span class="st">"tx.chom"</span>, <span class="st">"dipl.sup"</span>)])</code></pre></div>
<p><img src="graphs/graphiques-univaries/unnamed-chunk-10-1.png" title="" alt="" width="1050"/></p>
</div>
<div id="graphiques-univaries_resultats-dun-modele-lineaire" class="section level3">
<h3>RÃ©sultats dâ€™un modÃ¨le linÃ©aire</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># modÃ¨le linÃ©aire</span>
m =<span class="st"> </span><span class="kw">lm</span>(tx.chom ~<span class="st"> </span>dipl.aucun, <span class="dt">data =</span> rp99)

<span class="co"># rÃ©sumÃ© des rÃ©sultats</span>
<span class="kw">summary</span>(m)</code></pre></div>
<pre><code>
Call:
lm(formula = tx.chom ~ dipl.aucun, data = rp99)

Residuals:
   Min     1Q Median     3Q    Max 
-8.341 -1.689 -0.121  1.343 13.283 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)  4.38779    0.48704   9.009  &lt; 2e-16
dipl.aucun   0.18147    0.02902   6.253 1.39e-09
               
(Intercept) ***
dipl.aucun  ***
---
Signif. codes:  
0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 2.839 on 299 degrees of freedom
Multiple R-squared:  0.1156,    Adjusted R-squared:  0.1127 
F-statistic:  39.1 on 1 and 299 DF,  p-value: 1.389e-09</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(m)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="dt">y =</span> <span class="kw">resid</span>(m), <span class="dt">x =</span> <span class="kw">fitted</span>(m))</code></pre></div>
<p><img src="graphs/graphiques-univaries/unnamed-chunk-13-1.png" title="" alt="" width="1050"/></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># graphique principal, avec titres</span>
<span class="kw">plot</span>(<span class="dt">y =</span> <span class="kw">resid</span>(m), <span class="dt">x =</span> <span class="kw">fitted</span>(m), <span class="dt">col =</span> <span class="kw">densCols</span>(<span class="kw">resid</span>(m)), 
  <span class="dt">main =</span> <span class="st">"Taux de chÃ´mage ~ Proportion de non-diplÃ´mÃ©s"</span>, 
  <span class="dt">ylab =</span> <span class="st">"RÃ©sidus"</span>, <span class="dt">xlab =</span> <span class="st">"Valeurs prÃ©dites"</span>)

<span class="co"># ajout de ligne horizontale</span>
<span class="kw">abline</span>(<span class="dt">a =</span> <span class="dv">0</span>, <span class="dt">b =</span> <span class="dv">0</span>, <span class="dt">lty =</span> <span class="st">"dashed"</span>)</code></pre></div>
<p><img src="graphs/graphiques-univaries/unnamed-chunk-14-1.png" title="" alt="" width="1050"/></p>
</div>
</div>
<div id="graphiques-univaries_exporter-un-graphique-avec-rstudio" class="section level2">
<h2>Exporter un graphique avec <strong>RStudio</strong></h2>
<p>Lâ€™<dfn>export de graphiques</dfn><dfn data-index="graphique, export"/> est trÃ¨s facile avec <strong>RStudio</strong>. Lorsque lâ€™on crÃ©Ã© un graphique, ce dernier est affichÃ© sous lâ€™onglet <em>Plots</em> dans le quadrant infÃ©rieur droit. Il suffit de cliquer sur <em>Export</em> pour avoir accÃ¨s Ã  trois options diffÃ©rentesÂ :</p>
<ul>
<li><em>Save as image</em> pour sauvegarder le graphique en tant que fichier imageÂ ;</li>
<li><em>Save as PDF</em> pour sauvegarder le graphique dans un fichier <strong>PDF</strong>Â ;</li>
<li><em>Copy to Clipboard</em> pour copier le graphique dans le presse-papier (et pouvoir ainsi le coller ensuite dans un document <strong>Word</strong> par exemple).</li>
</ul>
<div id="graphiques-univaries_sauvegarder-le-fichier-en-tant-quimage" class="section level3">
<h3>Sauvegarder le fichier en tant quâ€™image</h3>
<figure>
<img src="images/capture_RStudio_save_plot_as_image.png" alt="Sauvegarder un graphique en tant quâ€™image avec RStudio"/>
<figcaption>
Sauvegarder un graphique en tant quâ€™image avec RStudio
</figcaption>
</figure>
<p>La boÃ®te de dialogue qui sâ€™ouvre propose diffÃ©rentes options dâ€™exportÂ :</p>
<ul>
<li>le type de fichier dÃ©sirÃ©Â ;</li>
<li>le nom du fichierÂ ;</li>
<li>le rÃ©pertoire oÃ¹ le fichier doit Ãªtre crÃ©Ã© (par dÃ©faut, il sâ€™agit du rÃ©pertoire de travail)Â ;</li>
<li>la taille de lâ€™image.</li>
</ul>
<p><strong>R</strong> peut exporter un graphique dans une grande variÃ©tÃ© de formats. Nous nâ€™aborderons ici que les principaux. Les formats <strong>PNG</strong>, <strong>JPEG</strong> et <strong>TIFF</strong> sont des formats de type <dfn langue="en">bitmap</dfn><dfn data-index="image bitmap"/> (on parle aussi dâ€™<dfn data-index="image matricielle">images matricielles</dfn><a href="#graphiques-univaries_fn2" class="footnoteRef" id="graphiques-univaries_fnref2"><sup>2</sup></a>). Lâ€™image est stockÃ©e sous forme de points, sa qualitÃ© dÃ©pendant de sa <dfn>rÃ©solution</dfn>, câ€™est-Ã -dire du nombre total de points qui la composent. Lâ€™intÃ©rÃªt des images matricielles est dâ€™Ãªtre toujours interprÃ©tÃ©es de maniÃ¨re identique quelque soit lâ€™outil utilisÃ©. Par contre, elles ne sont pas adaptÃ©es lorsque lâ€™on souhaite effectuer des retouches avec un logiciel de dessin.</p>
<p>Pour une utilisation sur un site web, on privilÃ©giera une rÃ©solution dâ€™image modÃ©rÃ©e (entre 400 et 800 pixels de largeur) et les formats <strong>PNG</strong> ou <strong>JPEG</strong>. Pour un document destinÃ© Ã  Ãªtre imprimÃ©, on priviligiera une rÃ©solution plus Ã©levÃ©e, pour Ã©viter un phÃ©nomÃ¨ne dit de pixellisation.</p>
<p>Les <dfn data-index="image vectorielle">images vectorielles</dfn><a href="#graphiques-univaries_fn3" class="footnoteRef" id="graphiques-univaries_fnref3"><sup>3</sup></a> ont lâ€™avantage de pouvoir Ãªtre redimensionnÃ©es Ã  volontÃ© sans perte de qualitÃ© et produisent des fichiers en gÃ©nÃ©ral de plus petite taille<a href="#graphiques-univaries_fn4" class="footnoteRef" id="graphiques-univaries_fnref4"><sup>4</sup></a>. Elles sont donc tout Ã  fait adaptÃ©es pour lâ€™impression. Si lâ€™on souhaite importer lâ€™image dans <strong>Word</strong>, on choisira le format <strong>Metafile</strong> (le seul compris par ce logiciel). Pour <strong>Libre Office</strong> ou <strong>Open Office</strong>, on choisira le format <strong>SVG</strong>.</p>
<p><strong>SVG</strong> (<em>scalable vector graphic</em><a href="#graphiques-univaries_fn5" class="footnoteRef" id="graphiques-univaries_fnref5"><sup>5</sup></a>) est un format libre permettant de dÃ©crire une image vectorielle. Les fichiers <strong>SVG</strong> peuvent Ãªtre directement lus par la majoritÃ© des navigateurs rÃ©cents (<strong>Firefox</strong>, <strong>Chrome</strong>, â€¦). De plus, le logiciel libre de dessins <strong>Inkscape</strong><a href="#graphiques-univaries_fn6" class="footnoteRef" id="graphiques-univaries_fnref6"><sup>6</sup></a> permet dâ€™Ã©diter et de modifier des fichiers <strong>SVG</strong>. Ce format est donc tout Ã  fait adaptÃ© pour les graphiques que lâ€™on souhaite retoucher avant publication. Depuis <strong>Inkscape</strong>, il sera possible de faire un export <strong>PNG</strong> en haute rÃ©solution pour intÃ©gration dans un fichier <strong>Word</strong>.</p>
<p>On pourra modifier la taille de lâ€™image avec les paramÃ¨tres <em>Height</em> (hauteur) et <em>Width</em> (largeur). En cliquant sur <em>Update Preview</em> la prÃ©visulation du rendu final sera mise Ã  jour.</p>
</div>
<div id="graphiques-univaries_sauvegarder-le-graphique-en-pdf" class="section level3">
<h3>Sauvegarder le graphique en PDF</h3>
<figure>
<img src="images/capture_RStudio_save_plot_as_pdf.png" alt="Sauvegarder un graphique en PDF avec RStudio"/>
<figcaption>
Sauvegarder un graphique en PDF avec RStudio
</figcaption>
</figure>
<p>Les options de la boÃ®te de dialogue permettent de modifier la taille du fichier <strong>PDF</strong> et, bien entendu, dâ€™indiquer le nom et le rÃ©pertoire du fichier Ã  crÃ©er.</p>
<p>En cliquant sur <em>Preview</em>, <strong>RStudio</strong> gÃ©nÃ©rera un fichier temporaire afin de visualiser le rendu final.</p>
</div>
<div id="graphiques-univaries_copier-le-graphique-dans-le-presse-papier" class="section level3">
<h3>Copier le graphique dans le presse-papier</h3>
<figure>
<img src="images/capture_RStudio_copy_plot_to_clipboard.png" alt="Copier un graphique dans le presse-papier avec RStudio"/>
<figcaption>
Copier un graphique dans le presse-papier avec RStudio
</figcaption>
</figure>
<p>Il est possible de redimensionner le graphique. De plus, on prÃ©cisera si lâ€™on souhaite copier une version matricielle (<em>bitmap</em>) ou vectorielle (<em>metafile</em>) du graphique.</p>
</div>
</div>
<div id="graphiques-univaries_exporter-un-graphique-avec-r" class="section level2">
<h2>Exporter un graphique avec <strong>R</strong></h2>
<p>On peut Ã©galement exporter les graphiques dans des fichiers de diffÃ©rents formats directement avec des commandes <strong>R</strong>. Ceci a lâ€™avantage de fonctionner sur toutes les plateformes et de faciliter la mise Ã  jour du graphique exportÃ© (on nâ€™a quâ€™Ã  relancer les commandes concernÃ©es pour que le fichier externe soit mis Ã  jour).</p>
<p>La premiÃ¨re possibilitÃ© est dâ€™exporter le contenu dâ€™une fenÃªtre dÃ©jÃ  existante Ã  lâ€™aide de la fonction <code data-package="grDevices" data-rdocumentation="dev2">dev.print</code>. On doit fournir Ã  celle-ci le format de lâ€™export (option <code>device</code>) et le nom du fichier (option <code>file</code>).</p>
<p>Par exempleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>))
<span class="kw">dev.print</span>(<span class="dt">device =</span> png, <span class="dt">file =</span> <span class="st">"export.png"</span>, <span class="dt">width =</span> <span class="dv">600</span>)</code></pre></div>
<p>Les formats de sortie possibles varient selon les plateformes, mais on retrouve partout les formats <em>bitmap</em> <code>png</code>, <code>jpeg</code>, <code>tiff</code> et les formats vectoriels <code>svg</code>, <code>postscript</code> ou <code>pdf</code>.</p>
<p>Lâ€™autre possibilitÃ© est de rediriger directement la sortie graphique dans un fichier, avant dâ€™exÃ©cuter la commande gÃ©nÃ©rant la figure. On doit pour cela faire appel Ã  lâ€™une des commandes permettant cette redirection. Les plus courantes sont <code data-package="grDevices">png</code>, <code data-package="grDevices" data-rdocumentation="png">jpeg</code> et <code data-package="grDevices" data-rdocumentation="png">tiff</code> pour les formats <em>bitmap</em>, <code data-package="grDevices" data-rdocumentation="cairo">svg</code>, <code data-package="grDevices">pdf</code>, <code data-package="grDevices">postscript</code> et <code data-package="grDevices" data-rdocumentation="windows">win.metafile</code> pour les formats vectoriels.</p>
<p>Ces fonctions prennent diffÃ©rentes options permettant de personnaliser la sortie graphique. Les plus courantes sont <code>width</code> et <code>height</code> qui donnent la largeur et la hauteur de lâ€™image gÃ©nÃ©rÃ©e (en pixels pour les images bitmap, en pouces pour les images vectorielles) et <code>pointsize</code> qui donne la taille de base des polices de caractÃ¨re utilisÃ©es.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">png</span>(<span class="dt">file =</span> <span class="st">"out.png"</span>, <span class="dt">width =</span> <span class="dv">800</span>, <span class="dt">height =</span> <span class="dv">700</span>)
<span class="kw">plot</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>))
<span class="kw">dev.off</span>()
<span class="kw">pdf</span>(<span class="dt">file =</span> <span class="st">"out.pdf"</span>, <span class="dt">width =</span> <span class="dv">9</span>, <span class="dt">height =</span> <span class="dv">9</span>, <span class="dt">pointsize =</span> <span class="dv">10</span>)
<span class="kw">plot</span>(<span class="kw">rnorm</span>(<span class="dv">150</span>))
<span class="kw">dev.off</span>()</code></pre></div>
<p>Il est nÃ©cessaire de faire un appel Ã  la fonction <code data-package="grDevices" data-rdocumentation="dev">dev.off</code> aprÃ¨s gÃ©nÃ©ration du graphique pour que le rÃ©sultat soit bien Ã©crit dans le fichier de sortie (dans le cas contraire on se retrouve avec un fichier vide).</p>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="graphiques-univaries_fn1"><p>Voir <a href="https://fr.wikipedia.org/wiki/Estimation_par_noyau" class="uri">https://fr.wikipedia.org/wiki/Estimation_par_noyau</a><a href="#graphiques-univaries_fnref1">â†©</a></p></li>
<li id="graphiques-univaries_fn2"><p>Voir <a href="http://fr.wikipedia.org/wiki/Image_matricielle" class="uri">http://fr.wikipedia.org/wiki/Image_matricielle</a>.<a href="#graphiques-univaries_fnref2">â†©</a></p></li>
<li id="graphiques-univaries_fn3"><p>Voir <a href="http://fr.wikipedia.org/wiki/Image_vectorielle" class="uri">http://fr.wikipedia.org/wiki/Image_vectorielle</a>.<a href="#graphiques-univaries_fnref3">â†©</a></p></li>
<li id="graphiques-univaries_fn4"><p>Sauf dans le cas des graphiques complexes reposant sur des dÃ©gradÃ©s de couleurs, comme les cartes produites Ã  partir de rasters. Auquel cas, il sera parfois prÃ©fÃ©rable de privilÃ©gier un export dans un format <em>bitmap</em>.<a href="#graphiques-univaries_fnref4">â†©</a></p></li>
<li id="graphiques-univaries_fn5"><p>Voir <a href="https://www.wikiwand.com/fr/Scalable_Vector_Graphics" class="uri">https://www.wikiwand.com/fr/Scalable_Vector_Graphics</a>.<a href="#graphiques-univaries_fnref5">â†©</a></p></li>
<li id="graphiques-univaries_fn6"><p>tÃ©lÃ©chargeable gratuitement sur <a href="https://inkscape.org/fr/" class="uri">https://inkscape.org/fr/</a>.<a href="#graphiques-univaries_fnref6">â†©</a></p></li>
</ol>
</div>

</article>
<article id="statistique-bivariee">

<div class="fluid-row" id="statistique-bivariee_header">


<h1 class="title">Statistique bivariÃ©e</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#statistique-bivariee_deux-variables-quantitatives">Deux variables quantitatives</a></li>
<li><a href="#statistique-bivariee_une-variable-quantitative-et-une-variable-qualitative">Une variable quantitative et une variable qualitative</a><ul>
<li><a href="#statistique-bivariee_representations-graphiques">ReprÃ©sentations graphiques</a></li>
</ul></li>
<li><a href="#statistique-bivariee_deux-variables-qualitatives">Deux variables qualitatives</a><ul>
<li><a href="#statistique-bivariee_tableau-croise">Tableau croisÃ©</a></li>
<li><a href="#statistique-bivariee_representation-graphique">ReprÃ©sentation graphique</a></li>
</ul></li>
</ul>
</div>

<div class="note">
<p>La version originale de ce chapitre a Ã©tÃ© Ã©crite par Julien Barnier dans le cadre du support de cours <a href="https://github.com/juba/intro-r">Introduction Ã  R</a>.</p>
</div>
<p>On entend par <dfn>statistique bivariÃ©e</dfn> lâ€™Ã©tude des relations entre deux variables, celles-ci pouvant Ãªtre <dfn data-index="variable quantitative">quantitatives</dfn><dfn data-index="quantitative, variable"/> ou <dfn data-index="variable qualitative">qualitatives</dfn><dfn data-index="qualitative, variable"/>. La statistique bivariÃ©e fait partie de la <dfn>statistique descriptive</dfn><dfn data-index="descriptive, statistique"/>.</p>
<p>La statistique univariÃ©e a quant Ã  elle dÃ©jÃ  Ã©tÃ© abordÃ©e dans un <a href="#statistique-univariee">chapitre dÃ©diÃ©</a>.</p>
<p>Comme dans la partie prÃ©cÃ©dente, on travaillera sur les jeux de donnÃ©es fournis avec lâ€™extension <code class="pkg">questionr</code> et tirÃ© de lâ€™enquÃªte <em>Histoire de vie</em> et du recensement 1999Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003
<span class="kw">data</span>(rp99)</code></pre></div>
<div id="statistique-bivariee_deux-variables-quantitatives" class="section level2">
<h2>Deux variables quantitatives</h2>
<p>La comparaison de deux variables quantitatives se fait en premier lieu graphiquement, en reprÃ©sentant lâ€™ensemble des couples de valeurs. On peut ainsi reprÃ©senter les valeurs du nombre dâ€™heures passÃ©es devant la tÃ©lÃ©vision selon lâ€™Ã¢ge.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(d$age, d$heures.tv)</code></pre></div>
<img src="graphs/statistique-bivariee/unnamed-chunk-2-1.png" title="" alt="" width="1050"/>
<figcaption>
Nombre dâ€™heures de tÃ©lÃ©vision selon lâ€™Ã¢ge
</figcaption>
</figure>
<p>Le fait que des points sont superposÃ©s ne facilite pas la lecture du graphique. On peut utiliser une reprÃ©sentation avec des points semi-transparents.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(d$age, d$heures.tv, <span class="dt">pch =</span> <span class="dv">19</span>, <span class="dt">col =</span> <span class="kw">rgb</span>(<span class="dv">1</span>, <span class="dv">0</span>, 
  <span class="dv">0</span>, <span class="fl">0.1</span>))</code></pre></div>
<img src="graphs/statistique-bivariee/unnamed-chunk-3-1.png" title="" alt="" width="1050"/>
<figcaption>
Nombre dâ€™heures de tÃ©lÃ©vision selon lâ€™Ã¢ge avec semi-transparence
</figcaption>
</figure>
<p>Plus sophistiquÃ©, on peut faire une <dfn>estimation locale de densitÃ©</dfn><dfn data-index="densitÃ©, estimation locale"/> et reprÃ©senter le rÃ©sultat sous forme de Â«Â carteÂ Â». Pour cela on commence par isoler les deux variables, supprimer les observations ayant au moins une <dfn>valeur manquante</dfn><dfn data-index="manquante, valeur"/> Ã  lâ€™aide de la fonction <code data-pkg="stats">complete.cases</code>, estimer la densitÃ© locale Ã  lâ€™aide de la fonction <code data-pkg="MASS">kde2d</code> de lâ€™extension <code class="pkg">MASS</code><a href="#statistique-bivariee_fn1" class="footnoteRef" id="statistique-bivariee_fnref1"><sup>1</sup></a> et reprÃ©senter le tout Ã  lâ€™aide dâ€™une des fonctions <code data-pkg="graphics">image</code>, <code data-pkg="graphics">contour</code> ou <code data-pkg="graphics">filled.contour</code>. . .</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(MASS)
tmp &lt;-<span class="st"> </span>d[, <span class="kw">c</span>(<span class="st">"age"</span>, <span class="st">"heures.tv"</span>)]
tmp &lt;-<span class="st"> </span>tmp[<span class="kw">complete.cases</span>(tmp), ]
<span class="kw">filled.contour</span>(<span class="kw">kde2d</span>(tmp$age, tmp$heures.tv), <span class="dt">color =</span> terrain.colors)</code></pre></div>
<img src="graphs/statistique-bivariee/unnamed-chunk-4-1.png" title="" alt="" width="1050"/>
<figcaption>
ReprÃ©sentation de lâ€™estimation de densitÃ© locale
</figcaption>
</figure>
<p>Dans tous les cas, il nâ€™y a pas de structure trÃ¨s nette qui semble se dÃ©gager. On peut tester ceci mathÃ©matiquement en calculant le <dfn>coefficient de corrÃ©lation</dfn><dfn data-index="corrÃ©lation, coefficient"/> entre les deux variables Ã  lâ€™aide de la fonction <code data-pkg="stats">cor</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cor</span>(d$age, d$heures.tv, <span class="dt">use =</span> <span class="st">"complete.obs"</span>)</code></pre></div>
<pre><code>[1] 0.1776249</code></pre>
<p>Lâ€™option <code>use</code> permet dâ€™Ã©liminer les observations pour lesquelles lâ€™une des deux valeurs est manquante. Le coefficient de corrÃ©lation est trÃ¨s faible.</p>
<p>On va donc sâ€™intÃ©resser plutÃ´t Ã  deux variables prÃ©sentes dans le jeu de donnÃ©es <code>rp99</code>, la part de diplÃ´mÃ©s du supÃ©rieur et la proportion de cadres dans les communes du RhÃ´ne en 1999.</p>
<p>Ã€ nouveau, commenÃ§ons par reprÃ©senter les deux variables.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(rp99$dipl.sup, rp99$cadres, <span class="dt">ylab =</span> <span class="st">"Part des cadres"</span>, 
  <span class="dt">xlab =</span> <span class="st">"Part des diplomÃªs du supÃ©rieur"</span>)</code></pre></div>
<img src="graphs/statistique-bivariee/unnamed-chunk-6-1.png" title="" alt="" width="1050"/>
<figcaption>
Proportion de cadres et proportion de diplÃ´mÃ©s du supÃ©rieur
</figcaption>
</figure>
<p>Ã‡a ressemble dÃ©jÃ  beaucoup plus Ã  une relation de type linÃ©aire.</p>
<p>Calculons le coefficient de corrÃ©lationÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cor</span>(rp99$dipl.sup, rp99$cadres)</code></pre></div>
<pre><code>[1] 0.8975282</code></pre>
<p>Câ€™est beaucoup plus proche de 1. On peut alors effectuer une <dfn>rÃ©gression linÃ©aire</dfn><dfn data-index="linÃ©aire, rÃ©gression"/> complÃ¨te en utilisant la fonction <code data-pkg="stats">lm</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg &lt;-<span class="st"> </span><span class="kw">lm</span>(cadres ~<span class="st"> </span>dipl.sup, <span class="dt">data =</span> rp99)
<span class="kw">summary</span>(reg)</code></pre></div>
<pre><code>
Call:
lm(formula = cadres ~ dipl.sup, data = rp99)

Residuals:
    Min      1Q  Median      3Q     Max 
-9.6905 -1.9010 -0.1823  1.4913 17.0866 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)  1.24088    0.32988   3.762 0.000203
dipl.sup     1.38352    0.03931  35.196  &lt; 2e-16
               
(Intercept) ***
dipl.sup    ***
---
Signif. codes:  
0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 3.281 on 299 degrees of freedom
Multiple R-squared:  0.8056,    Adjusted R-squared:  0.8049 
F-statistic:  1239 on 1 and 299 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>Le rÃ©sultat montre que les coefficients sont significativement diffÃ©rents de 0. La part de cadres augmente donc avec celle de diplÃ´mÃ©s du supÃ©rieur (Ã´ surprise). On peut trÃ¨s facilement reprÃ©senter la <dfn>droite de rÃ©gression</dfn><dfn data-index="rÃ©gression, droite"/> Ã  lâ€™aide de la fonction <code data-pkg="graphics">abline</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(rp99$dipl.sup, rp99$cadres, <span class="dt">ylab =</span> <span class="st">"Part des cadres"</span>, 
  <span class="dt">xlab =</span> <span class="st">"Part des diplÃ´mÃ©s du supÃ©rieur"</span>)
<span class="kw">abline</span>(reg, <span class="dt">col =</span> <span class="st">"red"</span>)</code></pre></div>
<img src="graphs/statistique-bivariee/unnamed-chunk-9-1.png" title="" alt="" width="1050"/>
<figcaption>
RÃ©gression de la proportion de cadres par celle de diplÃ´mÃ©s du supÃ©rieur
</figcaption>
</figure>
<div class="note">
<p>On remarquera que le premier argument passÃ© Ã  la fonction <code data-pkg="stats">lm</code> a une syntaxe un peu particuliÃ¨re. Il sâ€™agit dâ€™une <dfn>formule</dfn>, utilisÃ©e de maniÃ¨re gÃ©nÃ©rale dans les modÃ¨les statistiques. On indique la variable dâ€™intÃ©rÃªt Ã  gauche et la variable explicative Ã  droite, les deux Ã©tant sÃ©parÃ©es par un tilde <code>âˆ¼</code> (obtenu sous <strong>Windows</strong> en appuyant simultanÃ©ment sur les touches <kbd>Alt Gr</kbd> et <kbd>2</kbd>). On remarquera que les noms des colonnes de notre tableau de donnÃ©es ont Ã©tÃ© Ã©crites sans guillemets.</p>
<p>Dans le cas prÃ©sent, nous avons calculÃ© une rÃ©gression linÃ©aire simple entre deux variables, dâ€™oÃ¹ lâ€™Ã©criture <code>cadres âˆ¼ dipl.sup</code>. Si nous avions voulu expliquer une variable <em>z</em> par deux variables <em>x</em> et <em>y</em>, nous aurions Ã©crit <code>z âˆ¼ x + y</code>. Il est possible de spÃ©cifier des modÃ¨les encore plus complexes.</p>
<p>Pour un aperÃ§u de la syntaxe des formules sous <strong>R</strong>, voir <a href="http://ww2.coastal.edu/kingw/statistics/R-tutorials/formulae.html" class="uri">http://ww2.coastal.edu/kingw/statistics/R-tutorials/formulae.html</a>.</p>
</div>
</div>
<div id="statistique-bivariee_une-variable-quantitative-et-une-variable-qualitative" class="section level2">
<h2>Une variable quantitative et une variable qualitative</h2>
<div id="statistique-bivariee_representations-graphiques" class="section level3">
<h3>ReprÃ©sentations graphiques</h3>
<p>Quand on parle de comparaison entre une variable quantitative et une variable qualitative, on veut en gÃ©nÃ©ral savoir si la <dfn>distribution</dfn> des valeurs de la variable quantitative est la mÃªme selon les modalitÃ©s de la variable qualitative. En clairÂ : est ce que lâ€™Ã¢ge de ceux qui Ã©coutent du hard rock est diffÃ©rent de lâ€™Ã¢ge de ceux qui nâ€™en Ã©coutent pasÂ ?</p>
<p>LÃ  encore, lâ€™idÃ©al est de commencer par une reprÃ©sentation graphique. Les <dfn data-index="boÃ®te Ã  moustache">boÃ®tes Ã  moustaches</dfn><dfn data-index="moustaches, boÃ®te"/> (<dfn lang="en">boxplot</dfn> en anglais) sont parfaitement adaptÃ©es pour cela.</p>
<p>Si on a construit des sous-populations dâ€™individus Ã©coutant ou non du hard rock, on peut utiliser la fonction <code data-pkg="graphics">boxplot</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.hard &lt;-<span class="st"> </span><span class="kw">subset</span>(d, hard.rock ==<span class="st"> "Oui"</span>)
d.non.hard &lt;-<span class="st"> </span><span class="kw">subset</span>(d, hard.rock ==<span class="st"> "Non"</span>)
<span class="kw">boxplot</span>(d.hard$age, d.non.hard$age)</code></pre></div>
<img src="graphs/statistique-bivariee/unnamed-chunk-10-1.png" title="" alt="" width="1050"/>
<figcaption>
Boxplot de la rÃ©partition des Ã¢ges (sous-populations)
</figcaption>
</figure>
<p>Mais construire les sous-populations nâ€™est pas nÃ©cessaire. On peut utiliser directement la version de <code data-pkg="graphics">boxplot</code> prenant une formule en argument.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(age ~<span class="st"> </span>hard.rock, <span class="dt">data =</span> d)</code></pre></div>
<img src="graphs/statistique-bivariee/unnamed-chunk-11-1.png" title="" alt="" width="1050"/>
<figcaption>
Boxplot de la rÃ©partition des Ã¢ges (formule)
</figcaption>
</figure>
<p>Ã€ premiÃ¨re vue, Ã´ surprise, la population Ã©coutant du hard rock a lâ€™air sensiblement plus jeune. Peut-on le tester mathÃ©matiquementÂ ?</p>
</div>
</div>
<div id="statistique-bivariee_deux-variables-qualitatives" class="section level2">
<h2>Deux variables qualitatives</h2>
<p>La comparaison de deux variables qualitatives sâ€™appelle en gÃ©nÃ©ral un <dfn>tableau croisÃ©</dfn><dfn data-index="croisÃ©, tableau"/>. Câ€™est sans doute lâ€™une des analyses les plus frÃ©quentes lors du traitement dâ€™enquÃªtes en sciences sociales.</p>
<div id="statistique-bivariee_tableau-croise" class="section level3">
<h3>Tableau croisÃ©</h3>
<p>La maniÃ¨re la plus simple dâ€™obtenir un tableau croisÃ© est dâ€™utiliser la fonction <code data-pkg="base">table</code> en lui donnant en paramÃ¨tres les deux variables Ã  croiser. En lâ€™occurrence nous allons croiser un recodage du niveau de qualification regroupÃ© avec le fait de pratiquer un sport.</p>
<p>On commence par calculer la variable recodÃ©e et par afficher le tri Ã  plat des deux variablesÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$qualreg &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$qualif)
d$qualreg[d$qualif %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">"Ouvrier specialise"</span>, <span class="st">"Ouvrier qualifie"</span>)] &lt;-<span class="st"> "Ouvrier"</span>
d$qualreg[d$qualif %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">"Profession intermediaire"</span>, 
  <span class="st">"Technicien"</span>)] &lt;-<span class="st"> "Intermediaire"</span>
<span class="kw">table</span>(d$qualreg)</code></pre></div>
<pre><code>
        Autre         Cadre       Employe 
           58           260           594 
Intermediaire       Ouvrier 
          246           495 </code></pre>
<p>Le tableau croisÃ© des deux variables sâ€™obtient de la maniÃ¨re suivanteÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$sport, d$qualreg)</code></pre></div>
<pre><code>     
      Autre Cadre Employe Intermediaire Ouvrier
  Non    38   117     401           127     381
  Oui    20   143     193           119     114</code></pre>
<div class="note">
<p>Il est tout Ã  fait possible de croiser trois variables ou plus. Par exempleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$sport, d$cuisine, d$sexe)</code></pre></div>
<pre><code>, ,  = Homme

     
      Non Oui
  Non 401 129
  Oui 228 141

, ,  = Femme

     
      Non Oui
  Non 358 389
  Oui 132 222</code></pre>
</div>
<p>Une alternative Ã  la fonction <code data-pkg="base">table</code> est la fonction <code data-pkg="stats">xtabs</code>. On indiquera Ã  cette derniÃ¨re le croisement Ã  effectuer Ã  lâ€™aide dâ€™une formule puis lâ€™objet contenant nos donnÃ©es. Comme il ne sâ€™agit pas dâ€™un modÃ¨le avec une variable Ã  expliquer, toutes les variables seront indiquÃ©es Ã  la droite du symbole <code>âˆ¼</code> et sÃ©parÃ©es par <code>+</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xtabs</span>(~sport, d)</code></pre></div>
<pre><code>sport
 Non  Oui 
1277  723 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xtabs</span>(~sport +<span class="st"> </span>cuisine, d)</code></pre></div>
<pre><code>     cuisine
sport Non Oui
  Non 759 518
  Oui 360 363</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xtabs</span>(~sport +<span class="st"> </span>cuisine +<span class="st"> </span>sexe, d)</code></pre></div>
<pre><code>, , sexe = Homme

     cuisine
sport Non Oui
  Non 401 129
  Oui 228 141

, , sexe = Femme

     cuisine
sport Non Oui
  Non 358 389
  Oui 132 222</code></pre>
<p>On remarquera que le rendu par dÃ©faut est en gÃ©nÃ©ral plus lisible car le nom des variables est indiquÃ©, permettant de savoir quelle variable est affichÃ©e en colonnes et laquelle en lignes.</p>
<p>On nâ€™a cependant que les effectifs, ce qui rend difficile les comparaisons. Lâ€™extension <code class="pkg">questionr</code> fournit des fonctions permettant de calculer facilement les pourcentages lignes, colonnes et totaux dâ€™un tableau croisÃ©.</p>
<p>Les pourcentages lignes sâ€™obtiennent avec la fonction <code data-pkg="questionr" data-rdoc="rprop">lprop</code><a href="#statistique-bivariee_fn2" class="footnoteRef" id="statistique-bivariee_fnref2"><sup>2</sup></a>. Celle-ci sâ€™applique au tableau croisÃ© gÃ©nÃ©rÃ© par <code data-pkg="base">table</code> ou <code data-pkg="stats">xtabs</code> Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tab &lt;-<span class="st"> </span><span class="kw">table</span>(d$sport, d$qualreg)
<span class="kw">lprop</span>(tab)</code></pre></div>
<pre><code>          
           Autre Cadre Employe Intermediaire
  Non        3.6  11.0  37.7    11.9        
  Oui        3.4  24.3  32.8    20.2        
  Ensemble   3.5  15.7  35.9    14.9        
          
           Ouvrier Total
  Non       35.8   100.0
  Oui       19.4   100.0
  Ensemble  29.9   100.0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tab &lt;-<span class="st"> </span><span class="kw">xtabs</span>(~sport +<span class="st"> </span>qualreg, d)
<span class="kw">lprop</span>(tab)</code></pre></div>
<pre><code>          qualreg
sport      Autre Cadre Employe Intermediaire
  Non        3.6  11.0  37.7    11.9        
  Oui        3.4  24.3  32.8    20.2        
  Ensemble   3.5  15.7  35.9    14.9        
          qualreg
sport      Ouvrier Total
  Non       35.8   100.0
  Oui       19.4   100.0
  Ensemble  29.9   100.0</code></pre>
<p>Les pourcentages ligne ne nous intÃ©ressent guÃ¨re ici. On ne cherche pas Ã  voir quelle est la proportion de cadres parmi ceux qui pratiquent un sport, mais plutÃ´t quelle est la proportion de sportifs chez les cadres. Il nous faut donc des pourcentages colonnes, que lâ€™on obtient avec la fonction <code data-pkg="questionr">cprop</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cprop</span>(tab)</code></pre></div>
<pre><code>       qualreg
sport   Autre Cadre Employe Intermediaire Ouvrier
  Non    65.5  45.0  67.5    51.6          77.0  
  Oui    34.5  55.0  32.5    48.4          23.0  
  Total 100.0 100.0 100.0   100.0         100.0  
       qualreg
sport   Ensemble
  Non    64.4   
  Oui    35.6   
  Total 100.0   </code></pre>
<p>Dans lâ€™ensemble, le pourcentage de personnes ayant pratiquÃ© un sport est de 35,6 %. Mais cette proportion varie fortement dâ€™une catÃ©gorie professionnelle Ã  lâ€™autreÂ : 55,0 % chez les cadres contre 23,0 % chez les ouvriers.</p>
<p>Enfin, les pourcentage totaux sâ€™obtiennent avec la fonction <code data-pkg="questionr">prop</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop</span>(tab)</code></pre></div>
<pre><code>       qualreg
sport   Autre Cadre Employe Intermediaire Ouvrier
  Non     2.3   7.1  24.3     7.7          23.0  
  Oui     1.2   8.7  11.7     7.2           6.9  
  Total   3.5  15.7  35.9    14.9          29.9  
       qualreg
sport   Total
  Non    64.4
  Oui    35.6
  Total 100.0</code></pre>
<p>Ã€ noter quâ€™on peut personnaliser lâ€™affichage de ces tableaux de pourcentages Ã  lâ€™aide de diffÃ©rentes options, dont <code>digits</code> qui rÃ¨gle le nombre de dÃ©cimales Ã  afficher et <code>percent</code> qui indique si on souhaite ou non rajouter un symbole <code>%</code> dans chaque case du tableau. Cette personnalisation peut se faire directement au moment de la gÃ©nÃ©ration du tableau et dans ce cas elle sera utilisÃ©e par dÃ©fautÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ctab &lt;-<span class="st"> </span><span class="kw">cprop</span>(tab, <span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">percent =</span> <span class="ot">TRUE</span>)
ctab</code></pre></div>
<pre><code>       qualreg
sport   Autre   Cadre   Employe Intermediaire
  Non    65.52%  45.00%  67.51%  51.63%      
  Oui    34.48%  55.00%  32.49%  48.37%      
  Total 100.00% 100.00% 100.00% 100.00%      
       qualreg
sport   Ouvrier Ensemble
  Non    76.97%  64.37% 
  Oui    23.03%  35.63% 
  Total 100.00% 100.00% </code></pre>
<p>ou bien ponctuellement en passant les mÃªmes arguments Ã  la fonction <code data-pkg="questionr" data-rdoc="print.proptab">print</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ctab &lt;-<span class="st"> </span><span class="kw">cprop</span>(tab)
<span class="kw">print</span>(ctab, <span class="dt">percent =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>       qualreg
sport   Autre  Cadre  Employe Intermediaire
  Non    65.5%  45.0%  67.5%   51.6%       
  Oui    34.5%  55.0%  32.5%   48.4%       
  Total 100.0% 100.0% 100.0%  100.0%       
       qualreg
sport   Ouvrier Ensemble
  Non    77.0%   64.4%  
  Oui    23.0%   35.6%  
  Total 100.0%  100.0%  </code></pre>
</div>
<div id="statistique-bivariee_representation-graphique" class="section level3">
<h3>ReprÃ©sentation graphique</h3>
<p>On peut obtenir une reprÃ©sentation graphique synthÃ©tisant lâ€™ensemble des rÃ©sultats obtenus sous la forme dâ€™un <dfn>graphique en mosaÃ¯que</dfn><dfn data-index="mosaÃ¯que, graphique"/><dfn data-index="tableau croisÃ©, graphique en mosaÃ¯que"/> grÃ¢ce Ã  la fonction <code data-pkg="graphics">mosaicplot</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mosaicplot</span>(qualreg ~<span class="st"> </span>sport, <span class="dt">data =</span> d, <span class="dt">shade =</span> <span class="ot">TRUE</span>, 
  <span class="dt">main =</span> <span class="st">"Graphe en mosaÃ¯que"</span>)</code></pre></div>
<img src="graphs/statistique-bivariee/unnamed-chunk-21-1.png" title="" alt="" width="1050"/>
<figcaption>
Exemple de graphe en mosaÃ¯que
</figcaption>
</figure>
<p>Comment interprÃ©ter ce graphique haut en couleurs<a href="#statistique-bivariee_fn3" class="footnoteRef" id="statistique-bivariee_fnref3"><sup>3</sup></a>Â ? Chaque rectangle reprÃ©sente une case de tableau. Sa largeur correspond aux pourcentages en colonnes (il y a beaucoup dâ€™employÃ©s et dâ€™ouvriers et trÃ¨s peu dâ€™Â«Â AutreÂ Â»). Sa hauteur correspond aux pourcentages en lignesÂ : la proportion de sportifs chez les cadres est plus Ã©levÃ©e que chez les employÃ©s. Enfin, la couleur de la case correspond au rÃ©sidu du test du Ï‡Â² correspondantÂ : les cases en rouge sont sous-reprÃ©sentÃ©es, les cases en bleu sur-reprÃ©sentÃ©es, et les cases blanches sont statistiquement proches de lâ€™hypothÃ¨se dâ€™<dfn>indÃ©pendance</dfn>.</p>
<div class="note">
<p>Les graphiques en mosaÃ¯que permettent notamment de reprÃ©senter des tableaux croisÃ©s Ã  3 ou 4 dimensions, voire plus.</p>
<p>Lâ€™extension <code class="pkg">vcd</code> fournie une fonction <code data-pkg="vcd">mosaic</code> fournissant plus dâ€™options pour la crÃ©ation dâ€™un graphique en mosaÃ¯que, permettant par exemple dâ€™indiquer quelles variables doivent Ãªtre affichÃ©es horizontalement ou verticalement, ou encore de colorier le contenu des rectangles en fonction dâ€™une variable donnÃ©e, â€¦</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(vcd)
<span class="kw">mosaic</span>(~sport +<span class="st"> </span>cuisine +<span class="st"> </span>sexe, d, <span class="dt">highlighting =</span> <span class="st">"sexe"</span>, 
  <span class="dt">main =</span> <span class="st">"Exemple de graphique en mosaÃ¯que Ã  3 dimensions"</span>)</code></pre></div>
<p><img src="graphs/statistique-bivariee/unnamed-chunk-22-1.png" title="" alt="" width="1050"/></p>
</div>
<p>Lorsque lâ€™on sâ€™intÃ©resse principalement aux variations dâ€™une variable selon une autre, par exemple ici Ã  la pratique du sport selon le niveau de qualification, il peut Ãªtre intÃ©ressant de prÃ©senter les pourcentages en colonne sous la forme de <dfn data-index="barres cumulÃ©es, graphique">barres cumulÃ©es</dfn>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">barplot</span>(<span class="kw">cprop</span>(tab, <span class="dt">total =</span> <span class="ot">FALSE</span>), <span class="dt">main =</span> <span class="st">"Pratique du sport selon le niveau de qualification"</span>)</code></pre></div>
<img src="graphs/statistique-bivariee/unnamed-chunk-23-1.png" title="" alt="" width="1050"/>
<figcaption>
Exemple de barres cumulÃ©es
</figcaption>
</figure>
</div>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="statistique-bivariee_fn1"><p><code class="pkg">MASS</code> est installÃ©e par dÃ©faut avec la version de base de <strong>R</strong>.<a href="#statistique-bivariee_fnref1">â†©</a></p></li>
<li id="statistique-bivariee_fn2"><p>Il sâ€™agit en fait dâ€™un alias pour les francophones de la fonction <code data-pkg="questionr">rprop</code>.<a href="#statistique-bivariee_fnref2">â†©</a></p></li>
<li id="statistique-bivariee_fn3"><p>Sauf sâ€™il est imprimÃ© en noir et blancâ€¦<a href="#statistique-bivariee_fnref3">â†©</a></p></li>
</ol>
</div>

</article>
<article id="graphiques-bivaries">

<div class="fluid-row" id="graphiques-bivaries_header">


<h1 class="title">Graphiques bivariÃ©s</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#graphiques-bivaries_les-donnees-de-lexemple">Les donnÃ©es de lâ€™exemple</a><ul>
<li><a href="#graphiques-bivaries_nettoyage-des-donnees">Nettoyage des donnÃ©es</a></li>
<li><a href="#graphiques-bivaries_recodage-dune-variable">Recodage dâ€™une variable</a></li>
</ul></li>
<li><a href="#graphiques-bivaries_visualisation-des-donnees">Visualisation des donnÃ©es</a><ul>
<li><a href="#graphiques-bivaries_visualisation-par-petits-multiples">Visualisation par <q>petits multiples</q></a></li>
<li><a href="#graphiques-bivaries_visualisation-en-series-temporelles">Visualisation en sÃ©ries temporelles</a></li>
<li><a href="#graphiques-bivaries_combinaisons-delements-graphiques">Combinaisons dâ€™Ã©lÃ©ments graphiques</a></li>
</ul></li>
<li><a href="#graphiques-bivaries_composition-graphique-avec-ggplot2">Composition graphique avec ggplot2</a><ul>
<li><a href="#graphiques-bivaries_couleurs-et-echelles">Couleurs et Ã©chelles</a></li>
<li><a href="#graphiques-bivaries_utilisation-des-themes">Utilisation des thÃ¨mes</a></li>
<li><a href="#graphiques-bivaries_export-des-graphiques">Export des graphiques</a></li>
</ul></li>
<li><a href="#graphiques-bivaries_pour-aller-plus-loin">Pour aller plus loin</a><ul>
<li><a href="#graphiques-bivaries_ressources-essentielles">Ressources essentielles</a></li>
<li><a href="#graphiques-bivaries_extensions-de-ggplot2">Extensions de ggplot2</a></li>
</ul></li>
</ul>
</div>

<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>
<div class="note">
<p>Ce chapitre est tirÃ© dâ€™une <a href="https://github.com/briatte/aad/tree/master/reinhart-rogoff">sÃ©ance de cours</a> de FranÃ§ois Briatte et destinÃ©e Ã  des Ã©tudiants de L2 sans aucune connaissance de <strong>R</strong>. Cette sÃ©ance de cours est elle-mÃªme inspirÃ©e dâ€™un <a href="http://www.stat.cmu.edu/~cshalizi/uADA/13/hw/11/">exercice</a> tirÃ© dâ€™un cours de <a href="http://www.stat.cmu.edu/~cshalizi/">Cosma Shalizi</a>.</p>
</div>
<p>Comme expliquÃ© dans un <a href="#graphiques-univaries">prÃ©cÃ©dent chapitre</a>, <strong>R</strong> possÃ¨de un puissant moteur graphique interne, qui permet de <q>dessiner</q> dans un graphique en y rajoutant des segments, des points, du texte, ou toutes sortes dâ€™autres symboles. Toutefois, pour produire un graphique complet avec les fonctions basiques de <strong>R</strong>, il faut un peu bricoler : dâ€™abord, ouvrir une fenÃªtre ; puis rajouter des points ; puis rajouter des lignes ; tout en configurant les couleurs au fur et Ã  mesure ; puis finir par fermer la fenÃªtre graphique.</p>
<p><strong>R</strong> est distribuÃ© avec une extension qui permet de moins avoir Ã  bricoler les graphiques : <code class="pkg">lattice</code>. Mais surtout, <strong>R</strong> est aussi capable de comprendre la <q>grammaire graphique</q> <a href="https://books.google.fr/books/about/The_Grammar_of_Graphics.html">thÃ©orisÃ©e par Leland Wilkinson</a>, et traduite pour <strong>R</strong> par Hadley Wickham sous la forme de lâ€™extension <code class="pkg">ggplot2</code><a href="#graphiques-bivaries_fn1" class="footnoteRef" id="graphiques-bivaries_fnref1"><sup>1</sup></a>. Ce chapitre prÃ©sente cette derniÃ¨re extension Ã  partir dâ€™un exemple simple de visualisation de sÃ©ries temporelles, puis rentre dans le dÃ©tail de sa syntaxe<a href="#graphiques-bivaries_fn2" class="footnoteRef" id="graphiques-bivaries_fnref2"><sup>2</sup></a>.</p>
<div id="graphiques-bivaries_les-donnees-de-lexemple" class="section level2">
<h2>Les donnÃ©es de lâ€™exemple</h2>
<p>Il y a quelques annÃ©es, les chercheurs Carmen M. Reinhart et Kenneth S. Rogoff publiaient un article intitulÃ© <cite><a href="http://scholar.harvard.edu/files/rogoff/files/growth_in_time_debt_aer.pdf">Growth in a Time of Debt</a></cite>, dans lequel ils faisaient la dÃ©monstration quâ€™un niveau Ã©levÃ© de dette publique nuisait Ã  la croissance Ã©conomique. Plus exactement, les deux chercheurs y dÃ©fendaient lâ€™idÃ©e que, lorsque la dette publique dÃ©passe 90% du produit intÃ©rieur brut, ce produit cesse de croÃ®tre.</p>
<p>Cette conclusion, proche du discours portÃ© par des institutions comme le Fonds MonÃ©taire International, a <a href="http://www.economist.com/news/finance-and-economics/21576362-seminal-analysis-relationship-between-debt-and-growth-comes-under">alimentÃ© plusieurs argumentaires politiques</a>. Des parlementaires amÃ©ricains sâ€™en ainsi sont servi pour exiger une diminution du budget fÃ©dÃ©ral, et surtout, la Commission europÃ©enne sâ€™est appuyÃ©e sur cet argumentaire pour exiger que des pays comme la GrÃ¨ce, durement frappÃ©s par la crise financiÃ¨re globale de 2008, adoptent des plans dâ€™austÃ©ritÃ© drastiques.</p>
<p>Or, en tentant de reproduire les rÃ©sultats de Reinhart et Rogoff, les chercheurs Thomas Herndon, Michael Ash et Robert Pollin y ont trouvÃ© <a href="http://www.peri.umass.edu/236/hash/31e2ff374b6377b2ddec04deaa6388b1/publication/566/">de nombreuses erreurs</a>, ainsi quâ€™une <a href="http://www.nextnewdeal.net/rortybomb/researchers-finally-replicated-reinhart-rogoff-and-there-are-serious-problems">bÃªte erreur de calcul</a> due Ã  une utilisation peu attentive du logiciel <strong>Microsoft Excel</strong>. La rÃ©vÃ©lation de ces erreurs donna lieu Ã  un dÃ©bat trÃ¨s vif entre adversaires et partisans des politiques Ã©conomiques dâ€™austÃ©ritÃ©, dÃ©bat toujours autant dâ€™actualitÃ© aujourdâ€™hui.</p>
<p>Dans ce chapitre, on va se servir des donnÃ©es (corrigÃ©es) de Reinhart et Rogoff pour Ã©valuer, de maniÃ¨re indÃ©pendante, la cohÃ©rence de leur argument sur le rapport entre endettement et croissance Ã©conomique. CommenÃ§ons par rÃ©cupÃ©rer ces donnÃ©es au format CSV sur le site du chercheur amÃ©ricain <a href="http://www.stat.cmu.edu/~cshalizi/">Cosma Shalizi</a>, qui utilise ces donnÃ©es dans <a href="http://www.stat.cmu.edu/~cshalizi/uADA/">lâ€™un de ses exercices de cours</a>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># charger l'extension lisant le format CSV</span>
<span class="kw">library</span>(readr)

<span class="co"># emplacement souhaitÃ© pour le jeu de donnÃ©es</span>
file &lt;-<span class="st"> "data/debt.csv"</span>

<span class="co"># tÃ©lÃ©charger le jeu de donnÃ©es s'il n'existe pas</span>
if(!<span class="kw">file.exists</span>(file))
  <span class="kw">download.file</span>(<span class="st">"http://www.stat.cmu.edu/~cshalizi/uADA/13/hw/11/debt.csv"</span>,
                file, <span class="dt">mode =</span> <span class="st">"wb"</span>)

<span class="co"># charger les donnÃ©es dans l'objet 'debt'</span>
debt &lt;-<span class="st"> </span><span class="kw">read_csv</span>(file)</code></pre></div>
<div class="note">
<p>Le code ci-dessus utilise la fonction <code data-pkg="readr" data-rdoc="read_csv">read_csv</code> de lâ€™extension <code class="pkg">readr</code>, dont on a recommandÃ© lâ€™utilisation dans un <a href="#import-de-donnees">prÃ©cÃ©dent chapitre</a>. En lâ€™absence de cette extension, on aurait pu utiliser la fonction de base <code data-pkg="utils" data-rdoc="read.csv">read.csv</code>.</p>
</div>
<div id="graphiques-bivaries_nettoyage-des-donnees" class="section level3">
<h3>Nettoyage des donnÃ©es</h3>
<p>Les donnÃ©es de Reinhart et Rogoff contiennent, pour un Ã©chantillon de 20 pays occidentaux membres de la zone <a href="https://fr.wikipedia.org/wiki/Organisation_de_coop%C3%A9ration_et_de_d%C3%A9veloppement_%C3%A9conomiques">OCDE</a>, la croissance de leur <a href="https://fr.wikipedia.org/wiki/Produit_intÃ©rieur_brut">produit intÃ©rieur brut</a> (PIB)<a href="#graphiques-bivaries_fn3" class="footnoteRef" id="graphiques-bivaries_fnref3"><sup>3</sup></a>, et le ratio entre leur <a href="https://fr.wikipedia.org/wiki/Dette_publique">dette publique</a> et ce produit, exprimÃ© sous la forme dâ€™un pourcentage <q>Dette / PIB</q>. Les donnÃ©es vont du milieu des annÃ©es 1940 Ã  la fin des annÃ©es 2000. La premiÃ¨re colonne du jeu de donnÃ©es ne contenant que les numÃ©ros des lignes, on va la supprimer dâ€™entrÃ©e de jeuÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># inspection du jeu de donnÃ©es</span>
<span class="kw">str</span>(debt)</code></pre></div>
<pre><code>Classes 'tbl_df', 'tbl' and 'data.frame':   1171 obs. of  5 variables:
 $        : int  147 148 149 150 151 152 153 154 155 156 ...
 $ Country: chr  "Australia" "Australia" "Australia" "Australia" ...
 $ Year   : int  1946 1947 1948 1949 1950 1951 1952 1953 1954 1955 ...
 $ growth : num  -3.56 2.46 6.44 6.61 6.92 ...
 $ ratio  : num  190 177 149 126 110 ...</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># suppression de la premiÃ¨re colonne</span>
debt &lt;-<span class="st"> </span>debt[, -<span class="dv">1</span>]</code></pre></div>
<p>Il faut aussi noter dâ€™emblÃ©e que certaines mesures sont manquantes : pour certains pays, on ne dispose pas dâ€™une mesure fiable du PIB et/ou de la dette publique. En consÃ©quence, le nombre dâ€™observations par pays est diffÃ©rent, et va de 40 observations <q>pays-annÃ©e</q> pour la GrÃ¨ce Ã  64 observations <q>pays-annÃ©e</q> pour plusieurs pays comme lâ€™Australie ou les Ã‰tats-UnisÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(debt$Country)</code></pre></div>
<pre><code>
  Australia     Austria     Belgium      Canada 
         64          59          63          64 
    Denmark     Finland      France     Germany 
         56          64          54          59 
     Greece     Ireland       Italy       Japan 
         40          63          59          54 
Netherlands New Zealand      Norway    Portugal 
         53          64          64          58 
      Spain      Sweden          UK          US 
         42          64          63          64 </code></pre>
</div>
<div id="graphiques-bivaries_recodage-dune-variable" class="section level3">
<h3>Recodage dâ€™une variable</h3>
<p>DerniÃ¨re manipulation prÃ©alable avant lâ€™analyseÂ : on va calculer la dÃ©cennie de chaque observation, en divisant lâ€™annÃ©e de mesure par 10, et en multipliant la partie entiÃ¨re de ce rÃ©sultat par 10. Cette manipulation trÃ¨s simple donne <q>1940</q> pour les mesures des annÃ©es 1940 Ã  1949, <q>1950</q> pour les annÃ©es 1950-1959, et ainsi de suite.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">debt$Decade &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="dv">10</span> *<span class="st"> </span>debt$Year%/%<span class="dv">10</span>)</code></pre></div>
<p>Voici, pour terminer, les premiÃ¨res lignes du jeu de donnÃ©es sur lequel on travailleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(debt)</code></pre></div>
<pre><code>    Country Year    growth     ratio Decade
1 Australia 1946 -3.557951 190.41908   1940
2 Australia 1947  2.459475 177.32137   1940
3 Australia 1948  6.437534 148.92981   1940
4 Australia 1949  6.611994 125.82870   1940
5 Australia 1950  6.920201 109.80940   1950
6 Australia 1951  4.272612  87.09448   1950</code></pre>
</div>
</div>
<div id="graphiques-bivaries_visualisation-des-donnees" class="section level2">
<h2>Visualisation des donnÃ©es</h2>
<p>Chargeons Ã  prÃ©sent lâ€™extension graphique <code class="pkg">ggplot2</code> dont nous allons nous servir dans ce chapitre, et dans de nombreux chapitres suivantsÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)</code></pre></div>
<p>ProcÃ©dons dÃ©sormais Ã  quelques visualisations trÃ¨s simples de ces donnÃ©es. On dispose de trois variables continuesÂ : lâ€™annÃ©e, le taux de croissance du PIB, et le ratio <q>Dette publique / PIB</q>. Si lâ€™on souhaite visualiser la croissance du PIB au cours du temps, la solution basique dans <strong>R</strong> sâ€™Ã©crit de la maniÃ¨re suivanteÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">with</span>(debt, <span class="kw">plot</span>(Year, growth))</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-7-1.png" title="" alt="" width="1050"/></p>
<p>Le code de la visualisation est trÃ¨s simple et se lit : <q>avec lâ€™objet <code>debt</code>, construire le graphique montrant lâ€™annÃ©e dâ€™observation <var>Year</var> en abcisse et le taux de croissance du PIB <var>growth</var> en ordonnÃ©e</q>. Le code est compris de cette maniÃ¨re par <strong>R</strong> car la fonction <code>plot</code> comprend le premier argument comme Ã©tant la variable Ã  reprÃ©senter sur lâ€™axe horizontal <code>x</code>, et le second comme la variable Ã  reprÃ©senter sur lâ€™axe vertical <code>y</code>.</p>
<p>Le mÃªme graphique sâ€™Ã©crit de la maniÃ¨re suivante avec lâ€™extension <code class="pkg">ggplot2</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">with</span>(debt, <span class="kw">qplot</span>(Year, growth))</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-8-1.png" title="" alt="" width="1050"/></p>
<p>Comme on peut le voir, le code est trÃ¨s proche du code utilisÃ© dans <q><strong>R</strong> base</q>, la syntaxe signifiant toujoursÂ : <q>avec le jeu de donnÃ©es <code>debt</code>, visualiser les variables <var>Year</var> sur lâ€™axe <code>x</code> et <var>growth</var> sur lâ€™axe <code>y</code></q>. Le rÃ©sultat est similaire, bien que plusieurs paramÃ¨tres graphiques aient changÃ©Â : le fond gris clair, en particulier, est caractÃ©ristique du thÃ¨me graphique par dÃ©faut de <code class="pkg">ggplot2</code>, que lâ€™on apprendra Ã  modifier plus loin.</p>
<p>Par ailleurs, dans les deux exemples prÃ©cÃ©dents, on a Ã©crit <code>with(debt, ...)</code> pour indiquer que lâ€™on travaillait avec lâ€™objet <code>debt</code>. Lorsque lâ€™on travaille avec lâ€™extension <code class="pkg">ggplot2</code>, il est toutefois plus commun dâ€™utiliser lâ€™argument <code>data</code> pour indiquer ce choixÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(Year, growth, <span class="dt">data =</span> debt)</code></pre></div>
<div id="graphiques-bivaries_visualisation-par-petits-multiples" class="section level3">
<h3>Visualisation par <q>petits multiples</q></h3>
<p>Cherchons dÃ©sormais Ã  mieux comprendre les variations du taux de croissance du PIB au fil des annÃ©es.</p>
<p>Dans les graphiques prÃ©cÃ©dents, on voit clairement que ce taux est trÃ¨s variable dans lâ€™immÃ©diat aprÃ¨s-guerre, puis quâ€™il oscille entre environ -5% et +15%, puis quâ€™il semble chuter dramatiquement Ã  la fin des annÃ©es 2000, marquÃ©es par la crise financiÃ¨re globale. Mais comment visualiser ces variations pour chacun des vingt pays de lâ€™Ã©chantillonÂ ?</p>
<p>On va ici utiliser le principe de la visualisation par <q><a href="http://www.juiceanalytics.com/writing/better-know-visualization-small-multiples/">petits multiples</a></q>, câ€™est-Ã -dire que lâ€™on va reproduire le mÃªme graphique pour chacun des pays, et visualiser lâ€™ensemble de ces graphiques dans une mÃªme fenÃªtre. ConcrÃ¨tement, il va donc sâ€™agir de montrer la croissance annuelle du PIB en faisant apparaÃ®tre chaque pays dans une facette diffÃ©rente du graphique.</p>
<p><code class="pkg">ggplot2</code> permet dâ€™effectuer cette opÃ©ration en rajoutant au graphique prÃ©cÃ©dent, au moyen de lâ€™opÃ©rateur <code>+</code>, lâ€™Ã©lÃ©ment <code>facet_wrap(~ Country)</code> au graphique, qui utilise la syntaxe <q>Ã©quation</q> de <strong>R</strong>, et qui signifie <q>construire le graphique pour chaque valeur diffÃ©rente de la variable <var>Country</var></q>. Par dÃ©faut, ces <q>facettes</q> sont classÃ©es par ordre alphabÃ©tiqueÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(Year, growth, <span class="dt">data =</span> debt) +
<span class="st">  </span><span class="kw">facet_wrap</span>(~<span class="st"> </span>Country)</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-10-1.png" title="" alt="" width="1050"/></p>
<p>VoilÃ  qui est beaucoup plus clairÂ ! On aperÃ§oit bien, dans ce graphique, les variations trÃ¨s importantes de croissance du PIB dans un pays comme lâ€™Autriche, ruinÃ©e aprÃ¨s la Seconde guerre mondiale, ou lâ€™Irlande, trÃ¨s durement frappÃ©e par la crise financiÃ¨re globale en 2008 et 2009. On aperÃ§oit aussi oÃ¹ se trouvent les donnÃ©es manquantesÂ : voir le graphique de lâ€™Espagne, par exemple.</p>
<p>Il faut noter ici un Ã©lÃ©ment essentiel de la grammaire graphique de <code class="pkg">ggplot2</code>, qui utilise une syntaxe additive, oÃ¹ diffÃ©rents Ã©lÃ©ments et paramÃ¨tres graphiques peuvent Ãªtre combinÃ©s en les additionnant, ce qui permet de construire et de modifier des graphiques de maniÃ¨re cumulative, pas Ã  pas. Cette caractÃ©ristique permet de tÃ¢tonner, et de construire progressivement des graphiques trÃ¨s complets.</p>
</div>
<div id="graphiques-bivaries_visualisation-en-series-temporelles" class="section level3">
<h3>Visualisation en sÃ©ries temporelles</h3>
<p>Enfin, pour produire le mÃªme graphique que ci-dessus en utilisant des lignes plutÃ´t que des points, il suffit dâ€™utiliser lâ€™argument <code>geom = "line"</code>, ce qui peut Ãªtre considÃ©rÃ© comme une meilleure maniÃ¨re de visualiser des sÃ©ries temporelles, mais qui tend aussi Ã  rendre plus difficile la dÃ©tection des pÃ©riodes pour lesquelles il manque des donnÃ©es (voir, Ã  nouveau, le graphique pour lâ€™Espagne)Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(<span class="dt">data =</span> debt, <span class="dt">y =</span> growth, <span class="dt">x =</span> Year, <span class="dt">geom =</span> <span class="st">"line"</span>) +<span class="st"> </span>
<span class="st">  </span><span class="kw">facet_wrap</span>(~<span class="st"> </span>Country)</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-11-1.png" title="" alt="" width="1050"/></p>
<p>Dans ce dernier exemple, on a dÃ©fini lâ€™axe <code>y</code> avant de dÃ©finir lâ€™axe <code>x</code>, en Ã©crivant ces arguments de maniÃ¨re expliciteÂ ; de mÃªme, on a commencÃ© par spÃ©cifier lâ€™argument <code>data</code>, et lâ€™on a terminÃ© par lâ€™argument <code>geom</code>. Cet ordre dâ€™Ã©criture permet de conserver une forme de cohÃ©rence dans lâ€™Ã©criture des fonctions graphiques.</p>
</div>
<div id="graphiques-bivaries_combinaisons-delements-graphiques" class="section level3">
<h3>Combinaisons dâ€™Ã©lÃ©ments graphiques</h3>
<p>On nâ€™a pas encore visualisÃ© le ratio <q>Dette publique / PIB</q>, lâ€™autre variable du raisonnement de Reinhart et Rogoff. Câ€™est lâ€™occasion de voir comment rajouter des titres aux axes des graphiques, et dâ€™utiliser les lignes en mÃªme temps que des points, toujours grÃ¢ce Ã  lâ€™argument <code>geom</code>, qui peut prendre plusieurs valeurs (ici, <code>"point"</code> produit les points et <code>"line"</code> produit les lignes)Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(<span class="dt">data =</span> debt, <span class="dt">y =</span> ratio, <span class="dt">x =</span> Year, <span class="dt">geom =</span> <span class="kw">c</span>(<span class="st">"line"</span>, <span class="st">"point"</span>)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">facet_wrap</span>(~<span class="st"> </span>Country) +
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>,
       <span class="dt">y =</span> <span class="st">"Ratio dette publique / produit intÃ©rieur brut (%)</span><span class="ch">\n</span><span class="st">"</span>)</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-12-1.png" title="" alt="" width="1050"/></p>
<p>Dans ce graphique, on a combinÃ© deux <q>objets gÃ©omÃ©triques</q> (<code>geom</code>) pour afficher Ã  la fois des points et des lignes. On a ensuite dÃ©fini les titres des axes, en supprimant celui de lâ€™axe <code>x</code>, et en rajoutant un peu dâ€™espace entre le titre de lâ€™axe <code>y</code> et lâ€™axe lui-mÃªme grÃ¢ce Ã  la chaÃ®ne de caractÃ¨res finale <code>\n</code>, qui rajoute une ligne vide entre ces deux Ã©lÃ©ments.</p>
<p>Les diffÃ©rents exemples vus dans cette section montrent quâ€™il va falloir apprendre un minimum de syntaxe graphique pour parvenir Ã  produire des graphiques avec <code class="pkg">ggplot2</code>. Ce petit investissement permet de savoir trÃ¨s vite produire de trÃ¨s nombreux types de graphiques, assez Ã©lÃ©gants de surcroÃ®t, et trÃ¨s facilement modifiables Ã  lâ€™aide de toutes sortes de paramÃ¨tres optionnels.</p>
<div class="important">
<p>Aussi Ã©lÃ©gants que soient vos graphiques, il ne vous dispense Ã©videmment pas de rÃ©flÃ©chir Ã  ce que vous Ãªtes en train de visualiser, un graphique trÃ¨s Ã©lÃ©gant pouvant naturellement Ãªtre complÃ¨tement erronÃ©, en particulier si les donnÃ©es de base du graphique ont Ã©tÃ© mal mesurÃ©esâ€¦ ou endommagÃ©es.</p>
</div>
</div>
</div>
<div id="graphiques-bivaries_composition-graphique-avec-ggplot2" class="section level2">
<h2>Composition graphique avec ggplot2</h2>
<p>La section prÃ©cÃ©dente a montrÃ© comment utiliser la fonction <code data-pkg="ggplot2" data-rdoc="qplot">qplot</code> (<q><em>quick plot</em></q>). La syntaxe complÃ¨te de lâ€™extension <code class="pkg">ggplot2</code> passe par une autre fonction, <code data-pkg="ggplot2" data-rdoc="ggplot">ggplot</code>, qui permet de mieux comprendre les diffÃ©rents Ã©lÃ©ments de sa grammaire graphique. Dans cette section, on va dÃ©tailler cette syntaxe pour en tirer un graphique plus complexe que les prÃ©cÃ©dents.</p>
<p>CommenÃ§ons par crÃ©er un <q>treillis de base</q> au graphiqueÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> debt, <span class="kw">aes</span>(<span class="dt">y =</span> growth, <span class="dt">x =</span> ratio))</code></pre></div>
<p>Aucun graphique ne sâ€™affiche iciÂ : en effet, ce que lâ€™on a stockÃ©, dans lâ€™objet <code>p</code>, nâ€™est pas un graphique complet, mais une base de travail. Cette base dÃ©finit les coordonnÃ©es <code>x</code> et <code>y</code> du graphique dans lâ€™argument <code data-pkg="ggplot2" data-rdoc="aes">aes</code> (â€œ<em>aesthetics</em>â€). Ici, on a choisi de mettre la variable dÃ©pendante de Reinhart et Rogoff, <var>growth</var> (le taux de croissance du PIB), sur lâ€™axe <code>y</code>, et la variable indÃ©pendante <var>ratio</var> (le ratio <q>Dette publique / PIB</q>) sur lâ€™axe <code>x</code>.</p>
<p>Rajoutons dÃ©sormais un objet gÃ©omÃ©trique, <code data-pkg="ggplot2" data-rdoc="geom_point">geom_point</code>, qui va projeter, sur le graphique, des points aux coordonnÃ©es prÃ©cÃ©demment dÃ©finies, et divisons le graphique par un <q>petit multiple</q>, en projetant les points de chaque dÃ©cennie dans une facette diffÃ©rente du graphique. Ce graphique propose une dÃ©composition temporelle de la relation Ã©tudiÃ©e par Reinhart et RogoffÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p +<span class="st"> </span><span class="kw">geom_point</span>() +
<span class="st">  </span><span class="kw">facet_grid</span>(. ~<span class="st"> </span>Decade)</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-14-1.png" title="" alt="" width="1050"/></p>
<div class="note">
<p>Le paramÃ¨tre <code data-pkg="ggplot2" data-rdoc="facet_grid">facet_grid</code>, qui utilise aussi la syntaxe <q>Ã©quation</q>, permet de crÃ©er des facettes plus compliquÃ©es que celles crÃ©Ã©es par le paramÃ¨tre <code data-pkg="ggplot2" data-rdoc="facet_wrap">facet_wrap</code>, mÃªme si, dans nos exemples, on aurait pu utiliser aussi bien lâ€™un que lâ€™autre.</p>
</div>
<p>Le graphique ci-dessus prÃ©sente un problÃ¨me frÃ©quent : lâ€™axe horizontal du graphique, trÃ¨s important puisque Reinhart et Rogoff Ã©voquent un seuil <q>fatidique</q>, pour la croissance, de 90% du PIB, est illisible. GrÃ¢ce Ã  lâ€™argument <code data-pkg="ggplot2" data-rdoc="continuous_scale">scale_x_continuous</code>, on va pouvoir clarifier cet axe en nâ€™y faisant figurer que certaines valeursÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p +<span class="st"> </span><span class="kw">geom_point</span>() +
<span class="st">  </span><span class="kw">facet_grid</span>(. ~<span class="st"> </span>Decade) +
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">200</span>, <span class="dt">by =</span> <span class="dv">100</span>))</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-15-1.png" title="" alt="" width="1050"/></p>
<p>Ces rÃ©glages nous conviennentÂ : on va donc les sauvegarder dans lâ€™objet <code>p</code>, de maniÃ¨re Ã  continuer de construire notre graphique en incluant ces diffÃ©rents Ã©lÃ©ments.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p &lt;-<span class="st"> </span>p +<span class="st"> </span><span class="kw">geom_point</span>() +
<span class="st">  </span><span class="kw">facet_grid</span>(. ~<span class="st"> </span>Decade) +
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">200</span>, <span class="dt">by =</span> <span class="dv">100</span>))</code></pre></div>
<div id="graphiques-bivaries_couleurs-et-echelles" class="section level3">
<h3>Couleurs et Ã©chelles</h3>
<p>Abordons dÃ©sormais un Ã©lÃ©ment-clÃ© de <code class="pkg">ggplot2</code> : la manipulation des paramÃ¨tres esthÃ©tiques. PrÃ©cÃ©demment, on nâ€™a montrÃ© que deux de ces paramÃ¨tres : <code>x</code> et <code>y</code>, les coordonnÃ©es du graphique. Mais ces paramÃ¨tres peuvent aussi influencer la couleur des points de notre graphique comme le montre lâ€™exemple suivantÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p +<span class="st"> </span><span class="kw">aes</span>(<span class="dt">color =</span> ratio &lt;<span class="st"> </span><span class="dv">90</span>)</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-17-1.png" title="" alt="" width="1050"/></p>
<p>Quâ€™a-t-on fait iciÂ ? On a rajoutÃ©, au graphique stockÃ© dans <code>p</code>, un paramÃ¨tre esthÃ©tique qui dÃ©termine la couleur de ses points en fonction dâ€™une inÃ©galitÃ©, <code>ratio &lt; 90</code>, qui est vraie quand le ratio <q>Dette publique / PIB</q> est infÃ©rieur au seuil <q>fatidique</q> de Reinhart et Rogoff, et fausse quand ce ratio dÃ©passe ce seuil. Les couleurs des points correspondent aux couleurs par dÃ©faut de <code class="pkg">ggplot2</code>, que lâ€™on peut trÃ¨s facilement modifier avec une autre <a href="http://docs.ggplot2.org/current/scale_brewer.html">variante</a> du paramÃ¨tre <code data-pkg="ggplot2" data-rdoc="scale_brewer">scale</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p +<span class="st"> </span><span class="kw">aes</span>(<span class="dt">color =</span> ratio &lt;<span class="st"> </span><span class="dv">90</span>) +<span class="st"> </span><span class="kw">scale_color_brewer</span>(<span class="dt">palette =</span> <span class="st">"Set1"</span>)</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-18-1.png" title="" alt="" width="1050"/></p>
<p>Ici, on a fait appel Ã  la palette de couleur <code>Set1</code> de lâ€™Ã©ventail de couleurs <a href="http://colorbrewer2.org/">ColorBrewer</a>, qui est automatiquement disponible dans <code class="pkg">ggplot2</code>, et qui est contenu dans lâ€™extension <code class="pkg">RColorBrewer</code>. La palette de couleurs que lâ€™on a choisie affiche les points situÃ©s au-dessus du seuil <q>fatidique</q> de Reinhart et Rogoff en rouge, les autres en bleu.</p>
<p>Que peut-on dire, Ã  ce stade, du seuil <q>fatidique</q> de Reinhart et RogoffÂ ? On peut observer quâ€™aprÃ¨s la Seconde guerre mondiale, de nombreux pays sont <em>dÃ©jÃ </em> endettÃ©s au-delÃ  de ce seuil, et dÃ©gagent <em>dÃ©jÃ </em> moins de croissance que les autres. Sur la base de cette trajectoire, de nombreux critiques de Reinhart et Rogoff ont fait remarquer que le raisonnement de Reinhart et Rogoff pose en rÃ©alitÃ© un sÃ©rieux problÃ¨me dâ€™<a href="http://www.nextnewdeal.net/rortybomb/guest-post-reinhartrogoff-and-growth-time-debt">inversion du rapport causal</a> entre endettement et croissance au cours du temps.</p>
<p>Envisageons une nouvelle modification des paramÃ¨tres graphiques. La lÃ©gende du graphique, qui affiche <code>FALSE</code> et <code>TRUE</code> en fonction de lâ€™inÃ©galitÃ© <code>ratio &lt; 90</code>, peut Ãªtre dÃ©routante. Clarifions un peu cette lÃ©gende en supprimant son titre et en remplaÃ§ant les libellÃ©s (â€œ<em>labels</em>â€) <code>FALSE</code> et <code>TRUE</code> par leur significationÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p &lt;-<span class="st"> </span>p +<span class="st"> </span><span class="kw">aes</span>(<span class="dt">color =</span> ratio &lt;<span class="st"> </span><span class="dv">90</span>) +
<span class="st">  </span><span class="kw">scale_color_brewer</span>(<span class="st">""</span>, <span class="dt">palette =</span> <span class="st">"Set1"</span>,
                     <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">"ratio &gt; 90"</span>, <span class="st">"ratio &lt; 90"</span>))</code></pre></div>
<p>Dans le bloc de code ci-dessus, on a stockÃ© lâ€™ensemble de nos modifications dans lâ€™objet <code>p</code>, sans lâ€™afficherÂ ; en effet, on souhaite encore procÃ©der Ã  une derniÃ¨re modification, en rajoutant une <a href="https://fr.wikipedia.org/wiki/RÃ©gression_locale">rÃ©gression locale</a> Ã  travers les points de chaque facette<a href="#graphiques-bivaries_fn4" class="footnoteRef" id="graphiques-bivaries_fnref4"><sup>4</sup></a>. AprÃ¨s consultation de la documentation de <code class="pkg">ggplot2</code> <a href="http://docs.ggplot2.org/current/geom_smooth.html">ici</a> et <a href="http://docs.ggplot2.org/current/stat_smooth.html">lÃ </a>, on en arrive au code ci-dessous, oÃ¹ <code>p</code> produit le graphique prÃ©cÃ©dent et <code data-pkg="ggplot2" data-rdoc="geom_smooth">geom_smooth</code> produit la rÃ©gression localeÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p +<span class="st"> </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">"loess"</span>, <span class="dt">se =</span> <span class="ot">FALSE</span>,
                <span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">"black"</span>)</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-20-1.png" title="" alt="" width="1050"/></p>
<p>Le graphique permet dâ€™Ã©valuer de maniÃ¨re encore un peu plus prÃ©cise lâ€™argument de Reinhart et Rogoff, et en particulier la nature pas si <q>fatidique</q> du seuil de 90% du ratio â€œDette publique / PIBâ€, qui sans Ãªtre une bonne nouvelle pour lâ€™Ã©conomie, ne dÃ©termine pas <q>fatidiquement</q> la direction du taux de croissanceÂ : si câ€™Ã©tait le cas, toutes les courbes du graphique ressembleraient Ã  celles des annÃ©es 2000. Autrement dit, lâ€™argumentaire de Reinhart et Rogoff laisse clairement Ã  dÃ©sirer.</p>
</div>
<div id="graphiques-bivaries_utilisation-des-themes" class="section level3">
<h3>Utilisation des thÃ¨mes</h3>
<p>Reprenons notre graphique de dÃ©part. On va, pour terminer cette dÃ©monstration, en construire une version imprimable en noir et blanc, ce qui signifie quâ€™au lieu dâ€™utiliser des couleurs pour distinguer les points en-deÃ§Ã  et au-delÃ  du seuil <q>fatidique</q> de Reinhart et Rogoff, on va utiliser une ligne verticale, produite par <code data-pkg="ggplot2" data-rdoc="geom_vline">geom_vline</code> et affichÃ©e en pointillÃ©s par le paramÃ¨tre <code>lty</code> (â€œ<em>linetype</em>â€)Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> debt, <span class="kw">aes</span>(<span class="dt">y =</span> growth, <span class="dt">x =</span> ratio)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">color =</span> <span class="st">"grey50"</span>) +
<span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">90</span>, <span class="dt">lty =</span> <span class="st">"dotted"</span>) +
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">"loess"</span>, <span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">"black"</span>, <span class="dt">se =</span> <span class="ot">FALSE</span>) +
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">200</span>, <span class="dt">by =</span> <span class="dv">100</span>)) +
<span class="st">  </span><span class="kw">facet_grid</span>(. ~<span class="st"> </span>Decade) +
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">"Taux de croissance du produit intÃ©rieur brut</span><span class="ch">\n</span><span class="st">"</span>,
       <span class="dt">x =</span> <span class="st">"</span><span class="ch">\n</span><span class="st">Ratio dette publique / produit intÃ©rieur brut (%)"</span>,
       <span class="dt">title =</span> <span class="st">"DonnÃ©es Reinhart et Rogoff corrigÃ©es, 1946-2009</span><span class="ch">\n</span><span class="st">"</span>) +
<span class="st">  </span><span class="kw">theme_bw</span>() +
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">strip.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">"grey90"</span>, <span class="dt">color =</span> <span class="st">"grey50"</span>),
        <span class="dt">strip.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="kw">rel</span>(<span class="dv">1</span>)),
        <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>())</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-21-1.png" title="" alt="" width="1050"/></p>
<p>Ce graphique utilise tous les Ã©lÃ©ments prÃ©sentÃ©s dans ce chapitre, ainsi quâ€™une derniÃ¨re nouveautÃ©Â : lâ€™utilisation dâ€™un thÃ¨me graphique diffÃ©rent du thÃ¨me par dÃ©faut de <code class="pkg">ggplot2</code>. Le thÃ¨me par dÃ©faut, qui sâ€™appelle <code>theme_grey</code>, est ici remplacÃ© par un thÃ¨me moins chargÃ©, <code>theme_bw</code> (â€œ<em>black and white</em>â€), que lâ€™on a modifiÃ© en y rajoutant <a href="http://docs.ggplot2.org/current/theme.html">quelques paramÃ¨tres supplÃ©mentaires</a>Â :</p>
<ul>
<li>le paramÃ¨tre <code>strip.background</code> dÃ©termine la couleur du rectangle contenant les titres des facettes, câ€™est-Ã -dire les dÃ©cennies observÃ©esÂ ;</li>
<li>le paramÃ¨tre <code>strip.text</code> dÃ©termine la taille des titres des facettes, qui sont ici affichÃ©s dans la mÃªme taille de texte que le reste du texteÂ ;</li>
<li>et le paramÃ¨tre <code>panel.grid</code> supprime ici les guides du graphique grÃ¢ce Ã  lâ€™Ã©lÃ©ment vide <code>element_blank</code>, de maniÃ¨re Ã  en allÃ©ger la lecture.</li>
</ul>
<p>Ces diffÃ©rents rÃ©glages peuvent Ãªtre sauvegardÃ©s de maniÃ¨re Ã  crÃ©er des thÃ¨mes rÃ©utilisables, comme <a href="https://github.com/jrnold/ggthemes/blob/master/README.md#examples">ceux de lâ€™extension <code class="pkg">ggthemes</code></a>, ce qui permet par exemple de crÃ©er un thÃ¨me entiÃ¨rement blanc dans lequel on peut ensuite projeter une carte, ou de produire une sÃ©rie de graphiques homogÃ¨nes dâ€™un point de vue esthÃ©tique.</p>
</div>
<div id="graphiques-bivaries_export-des-graphiques" class="section level3">
<h3>Export des graphiques</h3>
<p>Les graphiques produits par <code class="pkg">ggplot2</code> peuvent Ãªtre sauvegardÃ©s manuellement, comme expliquÃ© dans le chapitre <q><a href="#export-de-graphiques">Export des graphiques</a></q>, ou programmatiquement. Pour sauvegarder le dernier graphique affichÃ© par <code class="pkg">ggplot2</code> au format PNG, il suffit dâ€™utiliser la fonction <code data-pkg="ggplot2" data-rdoc="ggsave">ggsave</code>, qui permet dâ€™en rÃ©gler la taille (en pouces) et la rÃ©solution (en pixels par pouceÂ ; 72 par dÃ©faut)Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggsave</span>(<span class="st">"reinhart-rogoff.png"</span>, <span class="dt">width =</span> <span class="dv">11</span>, <span class="dt">height =</span> <span class="dv">8</span>)</code></pre></div>
<p>De la mÃªme maniÃ¨re, pour sauvegarder nâ€™importe quel graphique construit avec <code class="pkg">ggplot2</code> et stockÃ© dans un objet, il suffit de prÃ©ciser le nom de cet objet, comme ci-dessous, oÃ¹ lâ€™on sauvegarde le graphique contenu dans lâ€™objet <code>p</code> au format vectoriel PDF, qui prÃ©serve la nettetÃ© du texte et des autres Ã©lÃ©ments du graphique Ã  nâ€™importe quelle rÃ©solution dâ€™affichageÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggsave</span>(<span class="st">"reinhart-rogoff.pdf"</span>, <span class="dt">plot =</span> p,
       <span class="dt">width =</span> <span class="dv">11</span>, <span class="dt">height =</span> <span class="dv">8</span>)</code></pre></div>
</div>
</div>
<div id="graphiques-bivaries_pour-aller-plus-loin" class="section level2">
<h2>Pour aller plus loin</h2>
<p>Ce chapitre nâ€™a pu faire la dÃ©monstration que dâ€™une infime partie des maniÃ¨res dâ€™utiliser <code class="pkg">ggplot2</code>. En voici une derniÃ¨re illustration, qui donne une idÃ©e des diffÃ©rents types de graphiques que lâ€™extension permet de produire dÃ¨s que lâ€™on connaÃ®t les principaux Ã©lÃ©ments de sa syntaxeÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> debt, <span class="kw">aes</span>(<span class="dt">x =</span> ratio &gt;<span class="st"> </span><span class="dv">90</span>, <span class="dt">y =</span> growth)) +
<span class="st">  </span><span class="kw">geom_boxplot</span>() +
<span class="st">  </span><span class="kw">scale_x_discrete</span>(<span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">"&lt; 90"</span>, <span class="st">"90+"</span>)) +
<span class="st">  </span><span class="kw">facet_grid</span>(. ~<span class="st"> </span>Decade) +
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">"Taux de croissance du produit intÃ©rieur brut</span><span class="ch">\n</span><span class="st">"</span>,
       <span class="dt">x =</span> <span class="st">"</span><span class="ch">\n</span><span class="st">Ratio dette publique / produit intÃ©rieur brut (%)"</span>,
       <span class="dt">title =</span> <span class="st">"DonnÃ©es Reinhart et Rogoff corrigÃ©es, 1946-2009</span><span class="ch">\n</span><span class="st">"</span>) +
<span class="st">  </span><span class="kw">theme_linedraw</span>() +
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">strip.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="kw">rel</span>(<span class="dv">1</span>)),
        <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>())</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-24-1.png" title="" alt="" width="1050"/></p>
<p>Le code ci-dessus est somme toute trÃ¨s proche du code prÃ©sentÃ© dans le reste du texte, et en mÃªme temps, on a basculÃ© de la visualisation sous forme de sÃ©rie temporelles Ã  une visualisation par <em>boxplots</em>. Ces basculements sont trÃ¨s faciles Ã  envisager dÃ¨s que lâ€™on maÃ®trise les principaux Ã©lÃ©ments de <code class="pkg">ggplot2</code>, <code>geom</code>, <code>scale</code> et <code>facet</code>, et les paramÃ¨tres <code>labs</code> et <code>theme</code> pour effectuer les finitions.</p>
<div id="graphiques-bivaries_ressources-essentielles" class="section level3">
<h3>Ressources essentielles</h3>
<p>Pour tout ce qui concerne lâ€™utilisation de <code class="pkg">ggplot2</code>, <a href="http://ggplot2.org/book/">lâ€™ouvrage de Wickham</a>, <a href="https://github.com/hadley/ggplot2-book">en cours dâ€™actualisation</a>, est la ressource essentielle Ã  consulter. <a href="https://books.google.fr/books?id=ob0VAAAAQBAJ">Lâ€™ouvrage de Winston Chang</a>, qui contient des <a href="http://www.cookbook-r.com/Graphs/">dizaines dâ€™exemples</a>, le complÃ¨te utilement, de mÃªme que la <a href="http://docs.ggplot2.org/current/">documentation en ligne</a> de lâ€™extension. Enfin, le site <a href="https://stackoverflow.com/questions/tagged/ggplot2">StackOverflow</a> contient de trÃ¨s nombreuses questions/rÃ©ponses sur les subtilitÃ©s de sa syntaxe.</p>
<p>On trouve aussi trÃ¨s facilement, ailleurs sur Internet, des dizaines de <em>tutorials</em> et autres <em>cheatsheets</em> pour <code class="pkg">ggplot2</code>, <a href="http://zevross.com/blog/2014/08/04/beautiful-plotting-in-r-a-ggplot2-cheatsheet-3/">ici</a> ou <a href="http://www.rstudio.com/wp-content/uploads/2015/04/ggplot2-cheatsheet.pdf">lÃ </a> par exemple.</p>
</div>
<div id="graphiques-bivaries_extensions-de-ggplot2" class="section level3">
<h3>Extensions de ggplot2</h3>
<p>Il faut signaler, pour terminer, quelques-unes des diffÃ©rentes extensions inspirÃ©es de <code class="pkg">ggplot2</code>, dont la plupart sont encore en cours de dÃ©veloppement, mais qui permettent dâ€™ores et dÃ©jÃ  de produire des centaines de types de graphiques diffÃ©rents, Ã  partir dâ€™une syntaxe graphique proche de celle prÃ©sentÃ©e dans ce chapitreÂ :</p>
<ul>
<li>lâ€™extension <code class="pkg">ggfortify</code> permet de <a href="https://github.com/sinhrks/ggfortify/blob/master/README.rst#examples">visualiser les rÃ©sultats de diffÃ©rentes fonctions de modÃ©lisation</a> avec <code class="pkg">ggplot2</code>Â ;</li>
<li>lâ€™extension <code class="pkg">ggmap</code> permet de visualiser des fonds de carte et dâ€™y superposer des Ã©lÃ©ments graphiques rÃ©digÃ©s avec <code class="pkg">ggplot2</code>Â ;</li>
<li>lâ€™extension <code class="pkg">GGally</code> rajoute quelques types de graphiques Ã  ceux que <code class="pkg">ggplot2</code> peut produire par dÃ©fautÂ ;</li>
<li>et des extensions comme <code class="pkg">ggvis</code> permettent de <a href="http://ggvis.rstudio.com/">produire des graphiques interactifs</a> en utilisant la syntaxe de base de <code class="pkg">ggplot2</code>.</li>
</ul>
<p>On reviendra sur ces extensions dans un chapitre plus avancÃ©. Pour lâ€™instant, on se contentera des Ã©lÃ©ments de syntaxe prÃ©sentÃ©s dans ce chapitre, qui seront trÃ¨s souvent mobilisÃ©s dans les chapitres suivants, de maniÃ¨re Ã  pleinement illustrer la richesse et la flexibilitÃ© de <code class="pkg">ggplot2</code>.</p>
</div>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="graphiques-bivaries_fn1"><p>Voir lâ€™excellente <a href="http://ggplot2.org/">documentation de lâ€™extension</a> et les autres ressources citÃ©es en fin de texte.<a href="#graphiques-bivaries_fnref1">â†©</a></p></li>
<li id="graphiques-bivaries_fn2"><p>Bien que lâ€™on ait fait le choix de prÃ©senter lâ€™extension <code class="pkg">ggplot2</code> plutÃ´t que lâ€™extension <code class="pkg">lattice</code>, celle-ci reste un excellent choix pour la visualisation, notamment, de <a href="http://www.magesblog.com/2013/09/using-planelgroups-in-lattice.html">panels</a> et de <a href="http://www.fromthebottomoftheheap.net/2013/10/23/time-series-plots-with-lattice-and-ggplot/">sÃ©ries temporelles</a>. On trouve de <a href="https://procomun.wordpress.com/2015/04/14/mapping-flows-in-r-with-data-table-and-lattice/">trÃ¨s beaux exemples</a> dâ€™utilisation de <code class="pkg">lattice</code> en ligne, mais un peu moins de documentation, et beaucoup moins dâ€™extensions, que pour <code class="pkg">ggplot2</code>.<a href="#graphiques-bivaries_fnref2">â†©</a></p></li>
<li id="graphiques-bivaries_fn3"><p>Ce produit est mesurÃ© en <a href="https://fr.wikipedia.org/wiki/Produit_intÃ©rieur_brut_rÃ©el">termes rÃ©els</a>, de maniÃ¨re Ã  ce que le calcul de sa croissance ne soit pas affectÃ© par lâ€™inflation.<a href="#graphiques-bivaries_fnref3">â†©</a></p></li>
<li id="graphiques-bivaries_fn4"><p>La rÃ©gression locale est une variante du calcul de la <a href="https://fr.wikipedia.org/wiki/Moyenne_glissante">moyenne glissante</a> (ou <q>moyenne mobile</q>) dâ€™une courbe.<a href="#graphiques-bivaries_fnref4">â†©</a></p></li>
</ol>
</div>

</article>
<article id="donnees-ponderees">

<div class="fluid-row" id="donnees-ponderees_header">


<h1 class="title">DonnÃ©es pondÃ©rÃ©es</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#donnees-ponderees_options-de-certaines-fonctions">Options de certaines fonctions</a></li>
<li><a href="#donnees-ponderees_fonctions-de-lextension-questionr">Fonctions de lâ€™extension questionr</a></li>
<li><a href="#donnees-ponderees_donnees-ponderees-avec-lextension-survey">DonnÃ©es pondÃ©rÃ©es avec lâ€™extension survey</a></li>
<li><a href="#donnees-ponderees_extraire-un-sous-echantillon">Extraire un sous-Ã©chantillon</a></li>
<li><a href="#donnees-ponderees_conclusion">Conclusion</a></li>
</ul>
</div>

<div class="note">
<p>La version originale de ce chapitre a Ã©tÃ© Ã©crite par Julien Barnier dans le cadre du support de cours <a href="https://github.com/juba/intro-r">Introduction Ã  R</a>, complÃ©tÃ©e par Joseph Larmarange dans <a href="https://github.com/larmarange/intro-r/tree/CoursM2">Introduction Ã  lâ€™analyse dâ€™enquÃªtes avec R</a>.</p>
</div>
<p>Sâ€™il est tout Ã  fait possible de travailler avec des <dfn>donnÃ©es pondÃ©rÃ©es</dfn> sous R, cette fonctionnalitÃ© nâ€™est pas aussi bien intÃ©grÃ©e que dans la plupart des autres logiciels de traitement statistique. En particulier, il y a plusieurs maniÃ¨res possibles de gÃ©rer la <dfn>pondÃ©ration</dfn>. Cependant, lorsque lâ€™on doit Ã©galement prendre un compte un <dfn>plan dâ€™Ã©chantillonnage</dfn><dfn data-index="Ã©chantillonnage, plan"/> complexe (voir section dÃ©diÃ©e ci-aprÃ¨s), <strong>R</strong> fournit tous les outils nÃ©cessaires, alors que dans la plupart des logiciels propriÃ©taires, il faut disposer dâ€™une extension adÃ©quate, pas toujours vendue de base avec le logiciel.</p>
<p>Dans ce qui suit, on utilisera le jeu de donnÃ©es tirÃ© de lâ€™enquÃªte <em>Histoire de vie</em> et notamment sa variable de pondÃ©ration <em>poids</em><a href="#donnees-ponderees_fn1" class="footnoteRef" id="donnees-ponderees_fnref1"><sup>1</sup></a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003
<span class="kw">range</span>(d$poids)</code></pre></div>
<pre><code>[1]    78.07834 31092.14132</code></pre>
<div id="donnees-ponderees_options-de-certaines-fonctions" class="section level2">
<h2>Options de certaines fonctions</h2>
<p>Tout dâ€™abord, certaines fonctions de <strong>R</strong> acceptent en argument un vecteur permettant de pondÃ©rer les observations (lâ€™option est en gÃ©nÃ©ral nommÃ©e <code>weights</code> ou <code>row.w</code>). Câ€™est le cas par exemple des mÃ©thodes dâ€™estimation de modÃ¨les linÃ©aires (<code data-pkg="stats">lm</code>) ou de modÃ¨les linÃ©aires gÃ©nÃ©ralisÃ©s (<code data-pkg="stats">glm</code>) ou dans les analyses de correspondances<a href="#donnees-ponderees_fn2" class="footnoteRef" id="donnees-ponderees_fnref2"><sup>2</sup></a> des extensions <code class="pkg">ade4</code> ou <code class="pkg">FactoMineR</code>.</p>
<p>Par contre cette option nâ€™est pas prÃ©sente dans les fonctions de base comme <code data-pkg="base">mean</code>, <code data-pkg="base" data-rdoc="cor">var</code>, <code data-pkg="base">table</code> ou <code data-pkg="stats">chisq.test</code>.</p>
</div>
<div id="donnees-ponderees_fonctions-de-lextension-questionr" class="section level2">
<h2>Fonctions de lâ€™extension questionr</h2>
<p>Lâ€™extension <code class="pkg">questionr</code> propose quelques fonctions permettant de calculer des statistiques simples pondÃ©rÃ©es<a href="#donnees-ponderees_fn3" class="footnoteRef" id="donnees-ponderees_fnref3"><sup>3</sup></a>Â :</p>
<ul>
<li><code data-pkg="questionr">wtd.mean</code>Â : moyenne pondÃ©rÃ©e</li>
<li><code data-pkg="questionr" data-rdoc="wtd.mean">wtd.var</code>Â : variance pondÃ©rÃ©e</li>
<li><code data-pkg="questionr">wtd.table</code>Â : tris Ã  plat et tris croisÃ©s pondÃ©rÃ©s</li>
</ul>
<p>On les utilise de la maniÃ¨re suivanteÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">mean</span>(d$age)</code></pre></div>
<pre><code>[1] 48.157</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">wtd.mean</span>(d$age, <span class="dt">weights =</span> d$poids)</code></pre></div>
<pre><code>[1] 46.34726</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">wtd.var</span>(d$age, <span class="dt">weights =</span> d$poids)</code></pre></div>
<pre><code>[1] 325.2658</code></pre>
<p>Pour les tris Ã  plat, on utilise la fonction wtd.table Ã  laquelle on passe la variable en paramÃ¨treÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">wtd.table</span>(d$sexe, <span class="dt">weights =</span> d$poids)</code></pre></div>
<pre><code>  Homme   Femme 
5149382 5921844 </code></pre>
<p>Pour un tri croisÃ©, il suffit de passer deux variables en paramÃ¨tresÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">wtd.table</span>(d$sexe, d$hard.rock, <span class="dt">weights =</span> d$poids)</code></pre></div>
<pre><code>             Non        Oui
Homme 5109366.41   40016.02
Femme 5872596.42   49247.49</code></pre>
<p>Ces fonctions admettent notamment les deux options suivantesÂ :</p>
<ul>
<li><code>na.rm</code>Â : si <code>TRUE</code>, on ne conserve que les observations sans valeur manquante.</li>
<li><code>normwt</code>Â : si <code>TRUE</code>, on normalise les poids pour que les effectifs totaux pondÃ©rÃ©s soient les mÃªmes que les effectifs initiaux. Il faut utiliser cette option, notamment si on souhaite appliquer un test sensible aux effectifs comme le Ï‡Â².</li>
</ul>
<p>Ces fonctions rendent possibles lâ€™utilisation des statistiques descriptives les plus simples et le traitement des tableaux croisÃ©s (les fonctions <code data-pkg="questionr" data-rdoc="rprop">lprop</code>, <code data-pkg="questionr">cprop</code> ou <code data-pkg="stats">chisq.test</code> peuvent Ãªtre appliquÃ©es au rÃ©sultat dâ€™un <code data-pkg="questionr">wtd.table</code>) mais restent limitÃ©es en termes de tests statistiques ou de graphiquesâ€¦</p>
</div>
<div id="donnees-ponderees_donnees-ponderees-avec-lextension-survey" class="section level2">
<h2>DonnÃ©es pondÃ©rÃ©es avec lâ€™extension survey</h2>
<p>Lâ€™extension <code class="pkg">survey</code> est spÃ©cialement dÃ©diÃ©e au traitement dâ€™enquÃªtes ayant des techniques dâ€™Ã©chantillonnage et de pondÃ©ration potentiellement trÃ¨s complexes.</p>
<p>Lâ€™extension sâ€™installe comme la plupart des autresÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"survey"</span>)</code></pre></div>
<p>Le site officiel (en anglais) comporte beaucoup dâ€™informations, mais pas forcÃ©ment trÃ¨s accessiblesÂ : <br/><a href="http://faculty.washington.edu/tlumley/survey/" class="uri">http://faculty.washington.edu/tlumley/survey/</a>.</p>
<p>Pour utiliser les fonctionnalitÃ©s de lâ€™extension, on doit dâ€™abord dÃ©finir le <dfn>plan dâ€™Ã©chantillonnage</dfn> ou <dfn lang="en">design</dfn> de notre enquÃªte, câ€™est-Ã -dire indiquer quel type de pondÃ©ration nous souhaitons lui appliquer.</p>
<p>Dans un premier temps, nous utiliserons le plan dâ€™Ã©chantillonnage le plus simple, avec une variable de pondÃ©ration dÃ©jÃ  calculÃ©e. Ceci se fait Ã  lâ€™aide de la fonction <code data-pkg="survey">svydesign</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(survey)
dw &lt;-<span class="st"> </span><span class="kw">svydesign</span>(<span class="dt">ids =</span> ~<span class="dv">1</span>, <span class="dt">data =</span> d, <span class="dt">weights =</span> ~d$poids)</code></pre></div>
<p>Cette fonction crÃ©e un nouvel objet, que nous avons nommÃ© <code>dw</code>. Cet objet nâ€™est pas Ã  proprement parler un tableau de donnÃ©es, mais plutÃ´t un tableau de donnÃ©es plus une mÃ©thode de pondÃ©ration. <code>dw</code> et <code>d</code> sont des objets distincts, les opÃ©rations effectuÃ©es sur lâ€™un nâ€™ont pas dâ€™influence sur lâ€™autre. On peut cependant retrouver le contenu de <code>d</code> depuis <code>dw</code> en utilisant <code>dw$variables</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(d$age)</code></pre></div>
<pre><code> int [1:2000] 28 23 59 34 71 35 60 47 20 28 ...</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(dw$variables$age)</code></pre></div>
<pre><code> int [1:2000] 28 23 59 34 71 35 60 47 20 28 ...</code></pre>
<p>Lorsque notre plan dâ€™Ã©chantillonnage est dÃ©clarÃ©, on peut lui appliquer une sÃ©rie de fonctions permettant dâ€™effectuer diverses opÃ©rations statistiques en tenant compte de la pondÃ©ration. On citera notammentÂ :</p>
<ul>
<li><code data-pkg="survey" data-rdoc="surveysummary">svymean</code>, <code data-pkg="survey" data-rdoc="surveysummary">svyvar</code>, <code data-pkg="survey" data-rdoc="surveysummary">svytotal</code>, <code data-pkg="survey">svyquantile</code>Â : <dfn data-index="statistique univariÃ©e">statistiques univariÃ©es</dfn> <dfn data-index="univariÃ©e, statistique"/>(<dfn>moyenne</dfn>, <dfn>variance</dfn>, <dfn>total</dfn>, <dfn data-index="quantile">quantiles</dfn>)</li>
<li><code data-pkg="survey">svytable</code>Â : <dfn>tri Ã  plat</dfn> et <dfn>tableau croisÃ©</dfn></li>
<li><code data-pkg="survey" data-rdoc="svytable">svychisq</code>Â : <dfn data-index="test du ChiÂ²">test du Ï‡Â²</dfn> <dfn data-index="ChiÂ², test"/></li>
<li><code data-pkg="survey">svyby</code>Â : statistiques selon un facteur</li>
<li><code data-pkg="survey">svyttest</code>Â : <dfn>test t de Student</dfn><dfn data-index="Student, test-t"/> de <dfn>comparaison de moyennes</dfn><dfn data-index="moyenne, comparaison"/></li>
<li><code data-pkg="survey">svyglm</code>Â : <dfn data-index="modÃ¨le linÃ©aire gÃ©nÃ©ralisÃ©">modÃ¨les linÃ©aires gÃ©nÃ©ralisÃ©s</dfn> (dont <dfn>rÃ©gression logistique</dfn><dfn data-index="logistique, rÃ©gression"/>)</li>
<li><code data-pkg="survey">svyplot</code>, <code data-pkg="survey">svyhist</code>, <code data-pkg="survey" data-rdoc="svyhist">svyboxplot</code>Â : fonctions graphiques</li>
</ul>
<p>Dâ€™autres fonctions sont disponibles, comme <code data-pkg="survey">svyratio</code>, mais elles ne seront pas abordÃ©es ici.</p>
<p>Pour ne rien arranger, ces fonctions prennent leurs arguments sous forme de formules, câ€™est-Ã -dire pas de la maniÃ¨re habituelle. En gÃ©nÃ©ral lâ€™appel de fonction se fait en spÃ©cifiant dâ€™abord les variables dâ€™intÃ©rÃªt sous forme de formule, puis lâ€™objet <em>survey.design</em>.</p>
<p>Lâ€™<dfn>intervalle de confiance dâ€™une moyenne</dfn><dfn data-index="moyenne, intervalle de confiance"/> sâ€™obtient avec <code data-pkg="survey" data-rdoc="surveysummary">confint</code> et celui dâ€™une <dfn data-index="intervalle de confiance d'une proportion">proportion</dfn><dfn data-index="proportion, intervalle de confiance"/> avec <code data-pkg="survey">svyciprop</code>.</p>
<p>Voyons tout de suite quelques exemples<a href="#donnees-ponderees_fn4" class="footnoteRef" id="donnees-ponderees_fnref4"><sup>4</sup></a>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">svymean</span>(~age, dw)</code></pre></div>
<pre><code>      mean     SE
age 46.347 0.5284</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">confint</span>(<span class="kw">svymean</span>(~age, dw))  <span class="co"># Intervalle de confiance</span></code></pre></div>
<pre><code>      2.5 %   97.5 %
age 45.3117 47.38282</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">svyquantile</span>(~age, dw, <span class="dt">quantile =</span> <span class="kw">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>), 
  <span class="dt">ci =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>$quantiles
    0.25 0.5 0.75
age   31  45   60

$CIs
, , age

       0.25 0.5 0.75
(lower   30  43   58
upper)   32  47   62</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">svyvar</span>(~heures.tv, dw, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>          variance     SE
heures.tv   2.9886 0.1836</code></pre>
<p>Pour comparer deux moyennes Ã  lâ€™aide dâ€™un test <em>t</em> on aura recours Ã  <code data-pkg="survey">svyttest</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">svyttest</span>(age ~<span class="st"> </span>sexe, dw)</code></pre></div>
<pre><code>
    Design-based t-test

data:  age ~ sexe
t = 2.0404, df = 1998, p-value = 0.04144
alternative hypothesis: true difference in mean is not equal to 0
sample estimates:
difference in mean 
          2.141129 </code></pre>
<p>Les tris Ã  plat se dÃ©clarent en passant comme argument le nom de la variable prÃ©cÃ©dÃ© dâ€™un tilde (<code>~</code>), tandis que les tableaux croisÃ©s utilisent les noms des deux variables sÃ©parÃ©s par un signe plus (<code>+</code>) et prÃ©cÃ©dÃ©s par un tilde (<code>~</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">svytable</span>(~sexe, dw)</code></pre></div>
<pre><code>sexe
  Homme   Femme 
5149382 5921844 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">svyciprop</span>(~sexe, dw)  <span class="co"># Intervalle de confiance</span></code></pre></div>
<pre><code>            2.5% 97.5%
sexe 0.535 0.507  0.56</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">svytable</span>(~sexe +<span class="st"> </span>clso, dw)</code></pre></div>
<pre><code>       clso
sexe           Oui        Non Ne sait pas
  Homme 2658744.04 2418187.64    72450.75
  Femme 2602031.76 3242389.36    77422.79</code></pre>
<p>On peut rÃ©cupÃ©rer le tableau issu de <code data-pkg="survey">svytable</code> dans un objet et le rÃ©utiliser ensuite comme nâ€™importe quel tableau croisÃ©Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tab &lt;-<span class="st"> </span><span class="kw">svytable</span>(~sexe +<span class="st"> </span>clso, dw)
tab</code></pre></div>
<pre><code>       clso
sexe           Oui        Non Ne sait pas
  Homme 2658744.04 2418187.64    72450.75
  Femme 2602031.76 3242389.36    77422.79</code></pre>
<p>Les fonctions <code data-pkg="questionr" data-rdoc="rprop">lprop</code> et <code data-pkg="questionr">cprop</code> de <code class="pkg">questionr</code> sont donc tout Ã  fait compatibles avec lâ€™utilisation de <code class="pkg">survey</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lprop</span>(tab)</code></pre></div>
<pre><code>          clso
sexe       Oui   Non   Ne sait pas Total
  Homme     51.6  47.0   1.4       100.0
  Femme     43.9  54.8   1.3       100.0
  Ensemble  47.5  51.1   1.4       100.0</code></pre>
<p>La fonction <code data-pkg="questionr">freq</code> peut Ã©galement Ãªtre utilisÃ©e si on lui passe en argument non pas la variable elle-mÃªme, mais son tri Ã  plat obtenu avec <code data-pkg="survey">svytable</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tab &lt;-<span class="st"> </span><span class="kw">svytable</span>(~peche.chasse, dw)
<span class="kw">freq</span>(tab, <span class="dt">total =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>             n     %  val%
Non    9716683  87.8  87.8
Oui    1354544  12.2  12.2
Total 11071226 100.0 100.0</code></pre>
<p>Par contre, il ne faut pas utiliser <code data-pkg="stats">chisq.test</code> sur un tableau gÃ©nÃ©rÃ© par <code data-pkg="survey">svytable</code>. Les effectifs Ã©tant extrapolÃ©s Ã  partir de la pondÃ©ration, les rÃ©sultats du test seraient complÃ¨tement faussÃ©s. Si on veut faire un test du Ï‡Â² sur un tableau croisÃ© pondÃ©rÃ©, il faut utiliser <code data-pkg="survey" data-rdoc="svytable">svychisq</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">svychisq</span>(~sexe +<span class="st"> </span>clso, dw)</code></pre></div>
<pre><code>
    Pearson's X^2: Rao &amp; Scott adjustment

data:  svychisq(~sexe + clso, dw)
F = 3.3331, ndf = 1.9734, ddf = 3944.9000,
p-value = 0.03641</code></pre>
<p>Le principe de la fonction <code data-pkg="survey">svyby</code> est similaire Ã  celui de <code data-pkg="base">tapply</code><a href="#donnees-ponderees_fn5" class="footnoteRef" id="donnees-ponderees_fnref5"><sup>5</sup></a>. Elle permet de calculer des statistiques selon plusieurs sous-groupes dÃ©finis par un facteur. Par exempleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">svyby</span>(~age, ~sexe, dw, svymean)</code></pre></div>
<pre><code>       sexe      age        se
Homme Homme 45.20200 0.7419450
Femme Femme 47.34313 0.7420836</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">confint</span>(<span class="kw">svyby</span>(~age, ~sexe, dw, svymean))  <span class="co"># Intervalles de confiance</span></code></pre></div>
<pre><code>         2.5 %   97.5 %
Homme 43.74781 46.65618
Femme 45.88867 48.79758</code></pre>
<p><code class="pkg">survey</code> est Ã©galement capable de produire des graphiques Ã  partir des donnÃ©es pondÃ©rÃ©es. Quelques exemplesÂ :</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))
<span class="kw">svyplot</span>(~age +<span class="st"> </span>heures.tv, dw, <span class="dt">col =</span> <span class="st">"red"</span>, <span class="dt">main =</span> <span class="st">"Bubble plot"</span>)
<span class="kw">svyhist</span>(~heures.tv, dw, <span class="dt">col =</span> <span class="st">"peachpuff"</span>, <span class="dt">main =</span> <span class="st">"Histogramme"</span>)
<span class="kw">svyboxplot</span>(age ~<span class="st"> </span><span class="dv">1</span>, dw, <span class="dt">main =</span> <span class="st">"Boxplot simple"</span>, <span class="dt">ylab =</span> <span class="st">"Ã‚ge"</span>)
<span class="kw">svyboxplot</span>(age ~<span class="st"> </span>sexe, dw, <span class="dt">main =</span> <span class="st">"Boxplot double"</span>, 
  <span class="dt">ylab =</span> <span class="st">"Ã‚ge"</span>, <span class="dt">xlab =</span> <span class="st">"Sexe"</span>)</code></pre></div>
<img src="graphs/donnees-ponderees/unnamed-chunk-16-1.png" title="" alt="" width="1050"/>
<figcaption>
Fonctions graphiques de lâ€™extension survey
</figcaption>
</figure>
<p>Enfin, <code class="pkg">survey</code> fournit une fonction <code data-pkg="survey">svyglm</code> permettant de calculer un modÃ¨le statistique tout en prenant en compte le plan dâ€™Ã©chantillonnage spÃ©cifiÃ©. La syntaxe de <code data-pkg="survey">svyglm</code> est proche de celle de <code data-pkg="stats">glm</code>. Cependant, le cadre dâ€™une rÃ©gression logistique, il est nÃ©cessaire dâ€™utiliser <code>family = quasibinomial()</code> afin dâ€™Ã©viter un message dâ€™erreur indiquant un nombre non entier de succÃ¨sÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg &lt;-<span class="st"> </span><span class="kw">svyglm</span>(sport ~<span class="st"> </span>sexe +<span class="st"> </span>age +<span class="st"> </span>relig +<span class="st"> </span>heures.tv, 
  dw, <span class="dt">family =</span> <span class="kw">binomial</span>())</code></pre></div>
<pre><code>Warning: non-integer #successes in a binomial glm!</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg &lt;-<span class="st"> </span><span class="kw">svyglm</span>(sport ~<span class="st"> </span>sexe +<span class="st"> </span>age +<span class="st"> </span>relig +<span class="st"> </span>heures.tv, 
  dw, <span class="dt">family =</span> <span class="kw">quasibinomial</span>())
reg</code></pre></div>
<pre><code>Independent Sampling design (with replacement)
svydesign(ids = ~1, data = d, weights = ~d$poids)

Call:  svyglm(formula = sport ~ sexe + age + relig + heures.tv, dw, 
    family = quasibinomial())

Coefficients:
                     (Intercept)  
                         1.90117  
                       sexeFemme  
                        -0.36526  
                             age  
                        -0.04127  
     religPratiquant occasionnel  
                         0.05577  
 religAppartenance sans pratique  
                         0.16367  
religNi croyance ni appartenance  
                         0.03988  
                      religRejet  
                        -0.14862  
                religNSP ou NVPR  
                        -0.22682  
                       heures.tv  
                        -0.18204  

Degrees of Freedom: 1994 Total (i.e. Null);  1986 Residual
  (5 observations deleted due to missingness)
Null Deviance:      2672 
Residual Deviance: 2378     AIC: NA</code></pre>
<p>Le rÃ©sultat obtenu est similaire Ã  celui de <code data-pkg="stats">glm</code> et lâ€™on peut utiliser sans problÃ¨me les fonctions <code data-pkg="survey" data-rdoc="svyglm">coef</code>, <code data-pkg="survey" data-rdoc="confint.glm">confint</code>, <code data-pkg="questionr">odds.ratio</code> ou <code data-pkg="survey" data-rdoc="svyglm">predict</code> abordÃ©es dans le chapitre sur la <a href="#regression-logistique">rÃ©gression logistique</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">odds.ratio</span>(reg)</code></pre></div>
<pre><code>                                    OR 2.5 %
(Intercept)                      6.694 3.670
sexeFemme                        0.694 0.540
age                              0.960 0.952
religPratiquant occasionnel      1.057 0.659
religAppartenance sans pratique  1.178 0.759
religNi croyance ni appartenance 1.041 0.646
religRejet                       0.862 0.428
religNSP ou NVPR                 0.797 0.325
heures.tv                        0.834 0.770
                                 97.5 %         p
(Intercept)                      12.209 6.848e-10
sexeFemme                         0.892  0.004325
age                               0.967 &lt; 2.2e-16
religPratiquant occasionnel       1.696  0.817180
religAppartenance sans pratique   1.827  0.465321
religNi croyance ni appartenance  1.676  0.869658
religRejet                        1.738  0.677858
religNSP ou NVPR                  1.956  0.620504
heures.tv                         0.902 6.786e-06
                                    
(Intercept)                      ***
sexeFemme                        ** 
age                              ***
religPratiquant occasionnel         
religAppartenance sans pratique     
religNi croyance ni appartenance    
religRejet                          
religNSP ou NVPR                    
heures.tv                        ***
---
Signif. codes:  
0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
<p>Dans ses derniÃ¨res versions, <code class="pkg">survey</code> fournit une mÃ©thode <code data-pkg="survey" data-rdoc="anova.svyglm">AIC.svyglm</code> permettant dâ€™estimer un <dfn>AIC</dfn> sur un modÃ¨le calculÃ© avec <code data-pkg="survey">svyglm</code>. Il est dÃ¨s lors possible dâ€™utiliser la fonction <code data-pkg="stats">step</code> pour rÃ©aliser une <dfn>sÃ©lection descendante pas Ã  pas</dfn><dfn data-index="pas Ã  pas, sÃ©lection descendante"/>.</p>
<p>Lâ€™extension <code class="pkg">effects</code> nâ€™est quant Ã  elle pas compatible avec <code data-pkg="survey">svyglm</code><a href="#donnees-ponderees_fn6" class="footnoteRef" id="donnees-ponderees_fnref6"><sup>6</sup></a>.</p>
</div>
<div id="donnees-ponderees_extraire-un-sous-echantillon" class="section level2">
<h2>Extraire un sous-Ã©chantillon</h2>
<p>Si lâ€™on souhaite travailler sur un <dfn>sous-Ã©chantillon</dfn> tout en gardant les informations dâ€™Ã©chantillonnage, on utilisera la fonction <code data-pkg="survey" data-rdoc="subset.survey.design">subset</code> prÃ©sentÃ©e en dÃ©tail dans le chapitre <a href="pem_manipulation.html#subset">Manipulation de donnÃ©es</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sous &lt;-<span class="st"> </span><span class="kw">subset</span>(dw, sexe ==<span class="st"> "Femme"</span> &amp;<span class="st"> </span>age &gt;=<span class="st"> </span><span class="dv">40</span>)</code></pre></div>
</div>
<div id="donnees-ponderees_conclusion" class="section level2">
<h2>Conclusion</h2>
<p>Si, la gestion de la pondÃ©ration sous <strong>R</strong> nâ€™est sans doute pas ce qui se fait de plus pratique et de plus simple, on pourra quand mÃªme donner les conseils suivantsÂ :</p>
<ul>
<li>utiliser les options de pondÃ©ration des fonctions usuelles ou les fonctions dâ€™extensions comme <code class="pkg">questionr</code> pour les cas les plus simplesÂ ;</li>
<li>si on utilise <code class="pkg">survey</code>, effectuer autant que possible tous les recodages et manipulations sur les donnÃ©es non pondÃ©rÃ©esÂ ;</li>
<li>une fois les recodages effectuÃ©s, on dÃ©clare le design et on fait les analyses en tenant compte de la pondÃ©rationÂ ;</li>
<li>surtout ne jamais modifier les variables du design. Toujours effectuer recodages et manipulations sur les donnÃ©es non pondÃ©rÃ©es, puis redÃ©clarer le design pour que les mises Ã  jour effectuÃ©es soient disponibles pour lâ€™analyse.</li>
</ul>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="donnees-ponderees_fn1"><p>On notera que cette variable est utilisÃ©e Ã  titre purement illustratif. Le jeu de donnÃ©es Ã©tant un extrait dâ€™enquÃªte et la variable de pondÃ©ration nâ€™ayant pas Ã©tÃ© recalculÃ©e, elle nâ€™a ici Ã  proprement parler aucun sens.<a href="#donnees-ponderees_fnref1">â†©</a></p></li>
<li id="donnees-ponderees_fn2"><p>Voir le chapitre dÃ©diÃ© Ã  lâ€™<a href="">analyse des correspondances</a>.<a href="#donnees-ponderees_fnref2">â†©</a></p></li>
<li id="donnees-ponderees_fn3"><p>Les fonctions <code data-pkg="questionr">wtd.mean</code> et <code data-pkg="questionr" data-rdoc="wtd.mean">wtd.var</code> sont des copies conformes des fonctions du mÃªme nom de lâ€™extension <code class="pkg">Hmisc</code> de Frank Harrel. <code class="pkg">Hmisc</code> Ã©tant une extension Â«Â de tailleÂ Â», on a prÃ©fÃ©rÃ© recopiÃ© les fonctions pour limiter le poids des dÃ©pendances.<a href="#donnees-ponderees_fnref3">â†©</a></p></li>
<li id="donnees-ponderees_fn4"><p>Pour dâ€™autres exemples, voir <a href="http://www.ats.ucla.edu/stat/r/faq/svy_r_oscluster.htm" class="uri">http://www.ats.ucla.edu/stat/r/faq/svy_r_oscluster.htm</a> (en anglais).<a href="#donnees-ponderees_fnref4">â†©</a></p></li>
<li id="donnees-ponderees_fn5"><p>La fonction <code data-pkg="base">tapply</code> est prÃ©sentÃ©e plus en dÃ©tails dans le chapitre <a href="pem_manipulation.html#tapply">Manipulation de donnÃ©es</a>.<a href="#donnees-ponderees_fnref5">â†©</a></p></li>
<li id="donnees-ponderees_fn6"><p>CompatibilitÃ© qui pourra Ã©ventuellement Ãªtre introduite dans une future version de lâ€™extension.<a href="#donnees-ponderees_fnref6">â†©</a></p></li>
</ol>
</div>

</article>
<article id="graphiques-de-donnees-ponderees">

<div class="fluid-row" id="graphiques-de-donnees-ponderees_header">


<h1 class="title">Graphiques de donnÃ©es pondÃ©res</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="intervalles-de-confiance">

<div class="fluid-row" id="intervalles-de-confiance_header">


<h1 class="title">Intervalles de confiance</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#intervalles-de-confiance_ic_moyenne">Intervalle de confiance dâ€™une moyenne</a></li>
<li><a href="#intervalles-de-confiance_ic_proportion">Intervalle de confiance dâ€™une proportion</a></li>
</ul>
</div>

<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>
<p>Nous utiliserons dans ce chapitre les donnÃ©es de lâ€™enquÃªte <em>Histoire de vie 2003</em> fournies avec lâ€™extension <code class="pkg">questionr</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(<span class="st">"hdv2003"</span>)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<div id="intervalles-de-confiance_ic_moyenne" class="section level3">
<h3>Intervalle de confiance dâ€™une moyenne</h3>
<p>Lâ€™<dfn>intervalle de confiance dâ€™une moyenne</dfn><dfn data-index="moyenne, intervalle de confiance"/><dfn data-index="intervalle de confiance"/> peut Ãªtre calculÃ© avec la fonction <code data-pkg="stats">t.test</code> (fonction qui permet Ã©galement de rÃ©aliser un test <em>t</em> de Student comme nous le verrons dans le chapitre dÃ©diÃ© aux <a href="#comparaisons-moyennes-et-proportions">comparaisons de moyennes</a>)Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">t.test</span>(d$heures.tv)</code></pre></div>
<pre><code>
    One Sample t-test

data:  d$heures.tv
t = 56.505, df = 1994, p-value &lt; 2.2e-16
alternative hypothesis: true mean is not equal to 0
95 percent confidence interval:
 2.168593 2.324540
sample estimates:
mean of x 
 2.246566 </code></pre>
<p>Le niveau de confiance peut Ãªtre prÃ©cisÃ© via lâ€™argument <code>conf.level</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">t.test</span>(d$heures.tv, <span class="dt">conf.level =</span> <span class="fl">0.9</span>)</code></pre></div>
<pre><code>
    One Sample t-test

data:  d$heures.tv
t = 56.505, df = 1994, p-value &lt; 2.2e-16
alternative hypothesis: true mean is not equal to 0
90 percent confidence interval:
 2.181138 2.311995
sample estimates:
mean of x 
 2.246566 </code></pre>
<p>Le nombre dâ€™heures moyennes Ã  regarder la tÃ©lÃ©vision parmi les enquÃªtÃ©s sâ€™avÃ¨re Ãªtre de 2,2 heures, avec un intervalle de confiance Ã  95Â % de [2,17Â -Â 2,33] et un intervalle de confiance Ã  90Â % de [2,18Â -Â 2,31].</p>
</div>
<div id="intervalles-de-confiance_ic_proportion" class="section level3">
<h3>Intervalle de confiance dâ€™une proportion</h3>
<p>La fonction <code data-pkg="stats">prop.test</code> permet de calculer lâ€™<dfn>intervalle de confiance dâ€™une proportion</dfn><dfn data-index="proportion, intervalle de confiance"/><dfn data-index="intervalle de confiance"/>. Une premiÃ¨re possibilitÃ© consiste Ã  lui transmettre une table Ã  une dimension et deux entrÃ©es. Par exemple, si lâ€™on sâ€™intÃ©resse Ã  la proportion de personnes ayant pratiquÃ© une activitÃ© physique au cours des douze derniers moisÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">freq</span>(d$sport)</code></pre></div>
<pre><code>       n    % val%
Non 1277 63.8 63.8
Oui  723 36.1 36.1
NA     0  0.0   NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.test</span>(<span class="kw">table</span>(d$sport))</code></pre></div>
<pre><code>
    1-sample proportions test with continuity
    correction

data:  table(d$sport), null probability 0.5
X-squared = 152.9, df = 1, p-value &lt; 2.2e-16
alternative hypothesis: true p is not equal to 0.5
95 percent confidence interval:
 0.6169447 0.6595179
sample estimates:
     p 
0.6385 </code></pre>
<p>On remarquera que la fonction a calculÃ© lâ€™intervalle de confiance correspondant Ã  la premiÃ¨re entrÃ©e du tableau, autrement dit celui de la proportion dâ€™enquÃªtÃ©s nâ€™ayant pas pratiquÃ© une activitÃ© sportive. Or, nous sommes intÃ©ressÃ© par la proportion complÃ©mentaire, Ã  savoir celle dâ€™enquÃªtÃ©s ayant pratiquÃ© une activitÃ© sportive. On peut dÃ¨s lors modifier lâ€™ordre de la table en indiquant notre modalitÃ© dâ€™intÃ©rÃªt avec la fonction <code data-pkg="stats">relevel</code> ou bien indiquer Ã  <code data-pkg="stats">prop.test</code> dâ€™abord le nombre de succÃ¨s puis lâ€™effectif totalÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.test</span>(<span class="kw">table</span>(<span class="kw">relevel</span>(d$sport, <span class="st">"Oui"</span>)))</code></pre></div>
<pre><code>
    1-sample proportions test with continuity
    correction

data:  table(relevel(d$sport, "Oui")), null probability 0.5
X-squared = 152.9, df = 1, p-value &lt; 2.2e-16
alternative hypothesis: true p is not equal to 0.5
95 percent confidence interval:
 0.3404821 0.3830553
sample estimates:
     p 
0.3615 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.test</span>(<span class="kw">sum</span>(d$sport ==<span class="st"> "Oui"</span>), <span class="kw">length</span>(d$sport))</code></pre></div>
<pre><code>
    1-sample proportions test with continuity
    correction

data:  sum(d$sport == "Oui") out of length(d$sport), null probability 0.5
X-squared = 152.9, df = 1, p-value &lt; 2.2e-16
alternative hypothesis: true p is not equal to 0.5
95 percent confidence interval:
 0.3404821 0.3830553
sample estimates:
     p 
0.3615 </code></pre>
<p>Enfin, le niveau de confiance peut Ãªtre modifiÃ© via lâ€™argument <code>conf.level</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.test</span>(<span class="kw">table</span>(<span class="kw">relevel</span>(d$sport, <span class="st">"Oui"</span>)), <span class="dt">conf.level =</span> <span class="fl">0.9</span>)</code></pre></div>
<pre><code>
    1-sample proportions test with continuity
    correction

data:  table(relevel(d$sport, "Oui")), null probability 0.5
X-squared = 152.9, df = 1, p-value &lt; 2.2e-16
alternative hypothesis: true p is not equal to 0.5
90 percent confidence interval:
 0.3437806 0.3795989
sample estimates:
     p 
0.3615 </code></pre>
<div class="note">
<p>Il existe de nombreuses maniÃ¨res de calculer un intervalle de confiance pour une proportion. En lâ€™occurence, lâ€™intervalle calculÃ© par <code data-pkg="stats">prop.test</code> correspond dans le cas prÃ©sent Ã  un intervalle bilatÃ©ral selon la mÃ©thode des scores de Wilson avec correction de continuitÃ©. Pour plus dâ€™information, on pourra lire <a href="http://joseph.larmarange.net/?Intervalle-de-confiance-bilateral" class="uri">http://joseph.larmarange.net/?Intervalle-de-confiance-bilateral</a>.</p>
</div>
<div class="note">
<p>Pour se simplifier un peu la vie, le package <code class="pkg">JLutils</code> propose une fonction <code data-pkg="JLutils">prop.ci</code> (et ses deux variantes <code data-pkg="JLutils">prop.ci.lower</code> et <code data-pkg="JLutils">prop.ci.upper</code>) permettant dâ€™appeler plus facilement <code data-pkg="stats">prop.test</code> et renvoyant directement lâ€™intervalle de confiance.</p>
<p><code class="pkg">JLutils</code> nâ€™Ã©tant disponible que sur <a href="https://github.com/larmarange/JLutils">GitHub</a>, on aura recours au package <code class="pkg">devtools</code> et Ã  sa fonction <code data-pkg="devtools">install_github</code> pour lâ€™installerÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="kw">install_github</span>(<span class="st">"larmarange/JLutils"</span>)</code></pre></div>
<p><code data-pkg="JLutils">prop.ci</code> fonction accepte directement un tri Ã  plat obtenu avec <code data-pkg="base">table</code>, un vecteur de donnÃ©es, un vecteur logique (issu dâ€™une condition), ou bien le nombre de succÃ¨s et le nombre total dâ€™essais. Voir les exemples ci-aprÃ¨sÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(JLutils)
<span class="kw">freq</span>(d$sport)</code></pre></div>
<pre><code>       n    % val%
Non 1277 63.8 63.8
Oui  723 36.1 36.1
NA     0  0.0   NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.ci</span>(d$sport)</code></pre></div>
<pre><code>[1] 0.6169447 0.6595179</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.ci.lower</span>(d$sport)</code></pre></div>
<pre><code>[1] 0.6169447</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.ci.upper</span>(d$sport)</code></pre></div>
<pre><code>[1] 0.6595179</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.ci</span>(d$sport, <span class="dt">conf.level =</span> <span class="fl">0.9</span>)</code></pre></div>
<pre><code>[1] 0.6204011 0.6562194</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.ci</span>(<span class="kw">table</span>(d$sport))</code></pre></div>
<pre><code>[1] 0.6169447 0.6595179</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.ci</span>(d$sport ==<span class="st"> "Non"</span>)</code></pre></div>
<pre><code>[1] 0.6169447 0.6595179</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.ci</span>(d$sport ==<span class="st"> "Oui"</span>)</code></pre></div>
<pre><code>[1] 0.3404821 0.3830553</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.ci.lower</span>(<span class="kw">c</span>(<span class="dv">1277</span>, <span class="dv">723</span>), <span class="dt">n =</span> <span class="dv">2000</span>)</code></pre></div>
<pre><code>[1] 0.6169447 0.3404821</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.ci.upper</span>(<span class="kw">c</span>(<span class="dv">1277</span>, <span class="dv">723</span>), <span class="dt">n =</span> <span class="dv">2000</span>)</code></pre></div>
<pre><code>[1] 0.6595179 0.3830553</code></pre>
</div>
</div>

</article>
<article id="comparaisons-moyennes-et-proportions">

<div class="fluid-row" id="comparaisons-moyennes-et-proportions_header">


<h1 class="title">Comparaisons (moyennes et proportions)</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#comparaisons-moyennes-et-proportions_comp_moyennes">Comparaison de moyennes</a></li>
<li><a href="#comparaisons-moyennes-et-proportions_comp_prop">Comparaison de proportions</a></li>
<li><a href="#comparaisons-moyennes-et-proportions_-et-derives">Ï‡Â² et dÃ©rivÃ©s</a></li>
</ul>
</div>

<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>
<p>Nous utiliserons dans ce chapitre les donnÃ©es de lâ€™enquÃªte <em>Histoire de vie 2003</em> fournies avec lâ€™extension <code class="pkg">questionr</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(<span class="st">"hdv2003"</span>)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<div id="comparaisons-moyennes-et-proportions_comp_moyennes" class="section level2">
<h2>Comparaison de moyennes</h2>
<p>On peut calculer la <dfn>moyenne</dfn> dâ€™Ã¢ge des deux groupes en utilisant la fonction <code data-pkg="base">tapply</code><a href="#comparaisons-moyennes-et-proportions_fn1" class="footnoteRef" id="comparaisons-moyennes-et-proportions_fnref1"><sup>1</sup></a>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tapply</span>(d$age, d$hard.rock, mean)</code></pre></div>
<pre><code>     Non      Oui 
48.30211 27.57143 </code></pre>
<p>Lâ€™Ã©cart est important. Est-il statistiquement significatifÂ ? Pour cela on peut faire un <dfn>test t de Student</dfn><dfn data-index="Student, test t"/> <dfn>comparaison de moyennes</dfn><dfn data-index="moyenne, comparaison"/> Ã  lâ€™aide de la fonction <code data-pkg="stats">t.test</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">t.test</span>(d$age ~<span class="st"> </span>d$hard.rock)</code></pre></div>
<pre><code>
    Welch Two Sample t-test

data:  d$age by d$hard.rock
t = 9.6404, df = 13.848, p-value = 1.611e-07
alternative hypothesis: true difference in means is not equal to 0
95 percent confidence interval:
 16.11379 25.34758
sample estimates:
mean in group Non mean in group Oui 
         48.30211          27.57143 </code></pre>
<p>Le test est extrÃªmement significatif. Lâ€™<dfn>intervalle de confiance</dfn> Ã  95Â % de la diffÃ©rence entre les deux moyennes va de 14,5 ans Ã  21,8 ans.</p>
<div class="note">
<p>La valeur affichÃ©e pour <em>p</em> est de <code>1.611e-07</code>. Cette valeur peut paraÃ®tre Ã©trange pour les non avertis. Cela signifie tout simplement 1,611 multipliÃ© par 10 Ã  la puissance -7, autrement dit 0,0000001611. Cette maniÃ¨re de reprÃ©senter un nombre est couramment appelÃ©e <dfn>notation scientifique</dfn><dfn data-index="scientifique, notation"/>.</p>
<p>Pour plus de dÃ©tails, voir <a href="http://fr.wikipedia.org/wiki/Notation_scientifique" class="uri">http://fr.wikipedia.org/wiki/Notation_scientifique</a>.</p>
</div>
<p>Nous sommes cependant allÃ©s un peu vite en besogne, car nous avons nÃ©gligÃ© une hypothÃ¨se fondamentale du test <em>t</em>Â : les ensembles de valeur comparÃ©s doivent suivre approximativement une <dfn>loi normale</dfn><dfn data-index="normale, loi"/> et Ãªtre de mÃªme <dfn>variance</dfn><a href="#comparaisons-moyennes-et-proportions_fn2" class="footnoteRef" id="comparaisons-moyennes-et-proportions_fnref2"><sup>2</sup></a>. Comment le vÃ©rifierÂ ?</p>
<p>Dâ€™abord avec un petit graphique composÃ©s de deux <dfn data-index="histogramme">histogrammes</dfn>Â :</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))
<span class="kw">hist</span>(d$age[d$hard.rock ==<span class="st"> "Oui"</span>], <span class="dt">main =</span> <span class="st">"Hard rock"</span>, 
  <span class="dt">col =</span> <span class="st">"red"</span>)
<span class="kw">hist</span>(d$age[d$hard.rock ==<span class="st"> "Non"</span>], <span class="dt">main =</span> <span class="st">"Sans hard rock"</span>, 
  <span class="dt">col =</span> <span class="st">"red"</span>)</code></pre></div>
<img src="graphs/comparaisons-moyennes-et-proportions/unnamed-chunk-4-1.png" title="" alt="" width="1050"/>
<figcaption>
Distribution des Ã¢ges pour apprÃ©ciation de la normalitÃ©
</figcaption>
</figure>
<div class="note">
<p>La fonction <code data-pkg="graphics">par</code> permet de modifier de nombreux paramÃ¨tres graphiques. <code>par(mfrow = c(1, 2))</code> sert Ã  indiquer que lâ€™on souhaite afficher deux graphiques sur une mÃªme fenÃªtre, plus prÃ©cisÃ©ment que la fenÃªtre doit comporter une ligne et deux colonnes.</p>
</div>
<p>Ã‡a a lâ€™air Ã  peu prÃ¨s bon pour les Â«Â Sans hard rockÂ Â», mais un peu plus limite pour les fans de <em>Metallica</em>, dont les effectifs sont dâ€™ailleurs assez faibles. Si on veut en avoir le coeur net on peut utiliser le <dfn>test de normalitÃ© de Shapiro-Wilk</dfn><dfn data-index="normalitÃ©, test de Shapiro-Wilk"/><dfn data-index="Shapiro-Wilk, test de normalitÃ©"/> avec la fonction <code data-pkg="stats">shapiro.test</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">shapiro.test</span>(d$age[d$hard.rock ==<span class="st"> "Oui"</span>])</code></pre></div>
<pre><code>
    Shapiro-Wilk normality test

data:  d$age[d$hard.rock == "Oui"]
W = 0.86931, p-value = 0.04104</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">shapiro.test</span>(d$age[d$hard.rock ==<span class="st"> "Non"</span>])</code></pre></div>
<pre><code>
    Shapiro-Wilk normality test

data:  d$age[d$hard.rock == "Non"]
W = 0.98141, p-value = 2.079e-15</code></pre>
<p>Visiblement, le test estime que les distributions ne sont pas suffisamment proches de la normalitÃ© dans les deux cas.</p>
<p>Et concernant lâ€™Ã©galitÃ© des variancesÂ ?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tapply</span>(d$age, d$hard.rock, var)</code></pre></div>
<pre><code>      Non       Oui 
285.62858  62.72527 </code></pre>
<p>Lâ€™Ã©cart nâ€™a pas lâ€™air nÃ©gligeable. On peut le vÃ©rifier avec le <dfn>test dâ€™Ã©galitÃ© des variances</dfn><dfn data-index="variance, test d'Ã©galitÃ©"/> fourni par la fonction <code data-pkg="stats">var.test</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">var.test</span>(d$age ~<span class="st"> </span>d$hard.rock)</code></pre></div>
<pre><code>
    F test to compare two variances

data:  d$age by d$hard.rock
F = 4.5536, num df = 1985, denom df = 13,
p-value = 0.003217
alternative hypothesis: true ratio of variances is not equal to 1
95 percent confidence interval:
 1.751826 8.694405
sample estimates:
ratio of variances 
          4.553644 </code></pre>
<p>La diffÃ©rence est trÃ¨s significative. En toute rigueur le test <em>t</em> nâ€™aurait donc pas pu Ãªtre utilisÃ©.</p>
<p><em>Damned</em>Â ! Ces maudits tests statistiques vont-ils nous empÃªcher de faire connaÃ®tre au monde entier notre fabuleuse dÃ©couverte sur lâ€™Ã¢ge des fans de <em>Sepultura</em>Â ? NonÂ ! Car voici quâ€™approche Ã  lâ€™horizon un nouveau test, connu sous le nom de <dfn data-index="test de Wilcoxon/Mann-Whitney">Wilcoxon/Mann-Whitney</dfn><dfn data-index="Wilcoxon, test"/><dfn data-index="Mann-Whitney, test"/><dfn data-index="mÃ©diane, test de comparaison"/><dfn data-index="comparaison de mÃ©dianes, test"/>. Celui-ci a lâ€™avantage dâ€™Ãªtre non-paramÃ©trique, câ€™est Ã  dire de ne faire aucune hypothÃ¨se sur la distribution des Ã©chantillons comparÃ©s. Par contre il ne compare pas des diffÃ©rences de moyennes mais des diffÃ©rences de <dfn data-index="mÃ©diane">mÃ©dianes</dfn>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">wilcox.test</span>(d$age ~<span class="st"> </span>d$hard.rock)</code></pre></div>
<pre><code>
    Wilcoxon rank sum test with continuity
    correction

data:  d$age by d$hard.rock
W = 23980, p-value = 2.856e-06
alternative hypothesis: true location shift is not equal to 0</code></pre>
<p>OufÂ ! La diffÃ©rence est hautement significative<a href="#comparaisons-moyennes-et-proportions_fn3" class="footnoteRef" id="comparaisons-moyennes-et-proportions_fnref3"><sup>3</sup></a>. Nous allons donc pouvoir entamer la rÃ©daction de notre article pour la <em>Revue franÃ§aise de sociologie</em>.</p>
</div>
<div id="comparaisons-moyennes-et-proportions_comp_prop" class="section level2">
<h2>Comparaison de proportions</h2>
<p>La fonction <code data-pkg="stats">prop.test</code>, que nous avons dÃ©jÃ  rencontrer pour calculer lâ€™intervalle de confiance dâ€™une proportion (voir le chapitre dÃ©diÃ© aux <a href="#intervalles-de-confiance">intervalles de confiance</a>) permets Ã©galement dâ€™effectuer un <dfn>test de comparaison de deux proportions</dfn><dfn data-index="comparaison de proportions, test"/><dfn data-index="proportion, test de comparaison"/>.</p>
<p>Supposons que lâ€™on souhaite comparer la proportion de personnes faisant du sport entre ceux qui lisent des bandes dessinÃ©es et les autresÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tab &lt;-<span class="st"> </span><span class="kw">xtabs</span>(~lecture.bd +<span class="st"> </span>sport, d)
<span class="kw">lprop</span>(tab)</code></pre></div>
<pre><code>          sport
lecture.bd Non   Oui   Total
  Non       64.2  35.8 100.0
  Oui       48.9  51.1 100.0
  Ensemble  63.8  36.1 100.0</code></pre>
<p>Il suffit de transmettre notre tableau croisÃ© (Ã  2Ã—2 dimensions) Ã  <code data-pkg="stats">prop.test</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.test</span>(tab)</code></pre></div>
<pre><code>
    2-sample test for equality of proportions
    with continuity correction

data:  tab
X-squared = 4, df = 1, p-value = 0.0455
alternative hypothesis: two.sided
95 percent confidence interval:
 -0.002652453  0.308107236
sample estimates:
   prop 1    prop 2 
0.6420891 0.4893617 </code></pre>
<p>On pourra Ã©galement avoir recours Ã  la fonction <code data-pkg="stats">fisher.test</code> qui renverra notamment lâ€™<dfn>odds ratio</dfn> et son intervalle de confiance correspondantÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">fisher.test</span>(<span class="kw">table</span>(d$lecture.bd, d$sport))</code></pre></div>
<pre><code>
    Fisher's Exact Test for Count Data

data:  table(d$lecture.bd, d$sport)
p-value = 0.0445
alternative hypothesis: true odds ratio is not equal to 1
95 percent confidence interval:
 1.003372 3.497759
sample estimates:
odds ratio 
  1.871433 </code></pre>
<p>On pourra aussi avoir recours Ã  la fonction <code data-pkg="questionr">odds.ratio</code> de lâ€™extension <code class="pkg">questionr</code> qui rÃ©alise le mÃªme calcul mais prÃ©sente le rÃ©sultat lÃ©gÃ¨rement diffÃ©remmentÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">odds.ratio</span>(tab)</code></pre></div>
<pre><code>                 OR 2.5 % 97.5 %      p  
Fisher's test 1.871 1.003  3.498 0.0445 *
---
Signif. codes:  
0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
<p>NoteÂ : pour le calcul du <dfn>risque relatif</dfn>, on pourra regarder du cÃ´tÃ© de la fonction <code data-pkg="mosaic">relrisk</code> de lâ€™extension <code class="pkg">mosaic</code>.</p>
</div>
<div id="comparaisons-moyennes-et-proportions_-et-derives" class="section level2">
<h2>Ï‡Â² et dÃ©rivÃ©s</h2>
<p>Dans le cadre dâ€™un tableau croisÃ©e, on peut tester lâ€™existence dâ€™un lien entre les modalitÃ©s de deux variables, avec le trÃ¨s classique <dfn data-index="test du ChiÂ²">test du Ï‡Â²</dfn><dfn data-index="ChiÂ², test"/><a href="#comparaisons-moyennes-et-proportions_fn4" class="footnoteRef" id="comparaisons-moyennes-et-proportions_fnref4"><sup>4</sup></a>. Celui-ci sâ€™obtient grÃ¢ce Ã  la fonction <code data-pkg="stats">chisq.test</code>, appliquÃ©e au tableau croisÃ© obtenu avec <code data-pkg="base">table</code> ou <code data-pacakge="stats">xtabs</code><a href="#comparaisons-moyennes-et-proportions_fn5" class="footnoteRef" id="comparaisons-moyennes-et-proportions_fnref5"><sup>5</sup></a>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$qualreg &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$qualif)
d$qualreg[d$qualif %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">"Ouvrier specialise"</span>, <span class="st">"Ouvrier qualifie"</span>)] &lt;-<span class="st"> "Ouvrier"</span>
d$qualreg[d$qualif %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">"Profession intermediaire"</span>, 
  <span class="st">"Technicien"</span>)] &lt;-<span class="st"> "Intermediaire"</span>

tab &lt;-<span class="st"> </span><span class="kw">table</span>(d$sport, d$qualreg)
tab</code></pre></div>
<pre><code>     
      Autre Cadre Employe Intermediaire Ouvrier
  Non    38   117     401           127     381
  Oui    20   143     193           119     114</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">chisq.test</span>(tab)</code></pre></div>
<pre><code>
    Pearson's Chi-squared test

data:  tab
X-squared = 96.798, df = 4, p-value &lt;
2.2e-16</code></pre>
<p>Le test est hautement significatif, on ne peut pas considÃ©rer quâ€™il y a indÃ©pendance entre les lignes et les colonnes du tableau.</p>
<p>On peut affiner lâ€™interprÃ©tation du test en dÃ©terminant dans quelle case lâ€™Ã©cart Ã  lâ€™indÃ©pendance est le plus significatif en utilisant les <dfn data-index="rÃ©sidus, test du ChiÂ²">rÃ©sidus</dfn><dfn data-index="test du ChiÂ², rÃ©sidus"/><dfn data-index="ChiÂ², rÃ©sidus"/> du test. Ceux-ci sont notamment affichables avec la fonction <code data-pkg="questionr">chisq.residuals</code> de <code class="pkg">questionr</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">chisq.residuals</span>(tab)</code></pre></div>
<pre><code>     
      Autre Cadre Employe Intermediaire Ouvrier
  Non  0.11 -3.89    0.95         -2.49    3.49
  Oui -0.15  5.23   -1.28          3.35   -4.70</code></pre>
<p>Les cases pour lesquelles lâ€™Ã©cart Ã  lâ€™indÃ©pendance est significatif ont un rÃ©sidu dont la valeur est supÃ©rieure Ã  2 ou infÃ©rieure Ã  -2. Ici on constate que la pratique dâ€™un sport est sur-reprÃ©sentÃ©e parmi les cadres et, Ã  un niveau un peu moindre, parmi les professions intermÃ©diaires, tandis quâ€™elle est sousreprÃ©sentÃ©e chez les ouvriers.</p>
<p>Enfin, on peut calculer le <dfn>coefficient de contingence de Cramer</dfn><dfn data-index="Cramer, coefficient de contingence"/><dfn data-index="tableau croisÃ©, coefficient de contingence de Cramer"/> du tableau, qui peut nous permettre de le comparer par la suite Ã  dâ€™autres tableaux croisÃ©s. On peut pour cela utiliser la fonction <code data-pkg="questionr">cramer.v</code> de <code class="pkg">questionr</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cramer.v</span>(tab)</code></pre></div>
<pre><code>[1] 0.24199</code></pre>
<div class="note">
<p>Pour un tableau Ã  2Ã—2 entrÃ©es, il est possible de calculer le <dfn>test exact de Fisher</dfn><dfn data-index="Fisher, test exact"/><dfn data-index="tableau croisÃ©, test exact de Fisher"/> avec la fonction <code data-pkg="stats">fisher.test</code>. On peut soit lui passer le rÃ©sultat de <code data-pkg="base">table</code> ou <code data-pkg="stats">xtabs</code>, soit directement les deux variables Ã  croiser.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lprop</span>(<span class="kw">table</span>(d$sexe, d$cuisine))</code></pre></div>
<pre><code>          
           Non   Oui   Total
  Homme     70.0  30.0 100.0
  Femme     44.5  55.5 100.0
  Ensemble  56.0  44.0 100.0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">fisher.test</span>(<span class="kw">table</span>(d$sexe, d$cuisine))</code></pre></div>
<pre><code>
    Fisher's Exact Test for Count Data

data:  table(d$sexe, d$cuisine)
p-value &lt; 2.2e-16
alternative hypothesis: true odds ratio is not equal to 1
95 percent confidence interval:
 2.402598 3.513723
sample estimates:
odds ratio 
  2.903253 </code></pre>
</div>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="comparaisons-moyennes-et-proportions_fn1"><p>La fonction <code data-pkg="base">tapply</code> est prÃ©sentÃ©e plus en dÃ©tails dans le chapitre <a href="pem_manipulation.html#tapply">Manipulation de donnÃ©es</a>.<a href="#comparaisons-moyennes-et-proportions_fnref1">â†©</a></p></li>
<li id="comparaisons-moyennes-et-proportions_fn2"><p>Concernant cette seconde condition, <code data-pkg="stats">t.test</code> propose une option nommÃ©e <code>var.equal</code> qui permet dâ€™utiliser une approximation dans le cas oÃ¹ les variances ne sont pas Ã©gales.<a href="#comparaisons-moyennes-et-proportions_fnref2">â†©</a></p></li>
<li id="comparaisons-moyennes-et-proportions_fn3"><p>Ce test peut Ã©galement fournir un intervalle de confiance avec lâ€™option <code>conf.int=TRUE</code>.<a href="#comparaisons-moyennes-et-proportions_fnref3">â†©</a></p></li>
<li id="comparaisons-moyennes-et-proportions_fn4"><p>On ne donnera pas plus dâ€™indications sur le test du Ï‡Â² ici. Les personnes dÃ©sirant une prÃ©sentation plus dÃ©taillÃ©e pourront se reporter (attention, sÃ©ance dâ€™autopromotionÂ !) Ã  la page suivanteÂ : <a href="http://alea.fr.eu.org/pages/khi2" class="uri">http://alea.fr.eu.org/pages/khi2</a>.<a href="#comparaisons-moyennes-et-proportions_fnref4">â†©</a></p></li>
<li id="comparaisons-moyennes-et-proportions_fn5"><p>On peut aussi appliquer directement le test en spÃ©cifiant les deux variables Ã  croiser via <code>chisq.test(d$qualreg, d$sport)</code>.<a href="#comparaisons-moyennes-et-proportions_fnref5">â†©</a></p></li>
</ol>
</div>

</article>
<article id="definir-un-plan-d-echantillonnage-complexe">

<div class="fluid-row" id="definir-un-plan-d-echantillonnage-complexe_header">


<h1 class="title">DÃ©finir un plan dâ€™Ã©chantillonnage complexe</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe_differents-types-dechantillonnage">DiffÃ©rents types dâ€™Ã©chantillonnage</a></li>
<li><a href="#definir-un-plan-d-echantillonnage-complexe_les-options-de-svydesign">Les options de svydesign</a></li>
<li><a href="#definir-un-plan-d-echantillonnage-complexe_quelques-exemples">Quelques exemples</a></li>
<li><a href="#definir-un-plan-d-echantillonnage-complexe_extraire-un-sous-echantillon">Extraire un sous-Ã©chantillon</a></li>
</ul>
</div>

<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>
<p>Lâ€™extension <code class="pkg">survey</code> ne permet pas seulement dâ€™indiquer une variable de pondÃ©ration mais Ã©galement de prendre les spÃ©cificitÃ©s du plan dâ€™Ã©chantillonnage (strates, grappes, â€¦). Le plan dâ€™Ã©chantillonnage ne joue pas seulement sur la pondÃ©ration des donnÃ©es, mais influence le calcul des variances et par ricochet tous les tests statistiques. Deux Ã©chantillons identiques avec la mÃªme variable de pondÃ©ration mais des designs diffÃ©rents produiront les mÃªmes moyennes et proportions mais des intervalles de confiance diffÃ©rents.</p>
<div id="definir-un-plan-d-echantillonnage-complexe_differents-types-dechantillonnage" class="section level2">
<h2>DiffÃ©rents types dâ€™Ã©chantillonnage</h2>
<p>Lâ€™<dfn>Ã©chantillonnage alÃ©atoire simple</dfn><dfn data-index="alÃ©atoire, Ã©chantillonnage"/> ou <dfn>Ã©chantillonnage Ã©quiprobable</dfn><dfn data-index="Ã©quiprobable, Ã©chantillonnage"/> est une mÃ©thode pour laquelle tous les Ã©chantillons possibles (de mÃªme taille) ont la mÃªme probabilitÃ© dâ€™Ãªtre choisis et tous les Ã©lÃ©ments de la population ont une chance Ã©gale de faire partie de lâ€™Ã©chantillon. Câ€™est lâ€™Ã©chantillonnage le plus simpleÂ : chaque individu Ã  la mÃªme probabilitÃ© dâ€™Ãªtre sÃ©lectionnÃ©.</p>
<p>Lâ€™<dfn>Ã©chantillonnage stratifiÃ©</dfn><dfn data-index="stratifiÃ©, Ã©chantillonnage"/> est une mÃ©thode qui consiste dâ€™abord Ã  subdiviser la population en groupes homogÃ¨nes (<dfn data-index="strate">strates</dfn>) pour ensuite extraire un Ã©chantillon alÃ©atoire de chaque strate. Cette mÃ©thode suppose la connaissance de la structure de la population. Pour estimer les paramÃ¨tres, les rÃ©sultats doivent Ãªtre pondÃ©rÃ©s par lâ€™importance relative de chaque strate dans la population.</p>
<p>Lâ€™<dfn>Ã©chantillonnage par grappes</dfn> est une mÃ©thode qui consiste Ã  choisir un Ã©chantillon alÃ©atoire dâ€™unitÃ©s qui sont elles-mÃªmes des sous-ensembles de la population (<dfn data-index="grappe, Ã©chantillonnage">grappes</dfn> ou <dfn data-index="cluster" lang="en">clusters</dfn> en anglais). Cette mÃ©thode suppose que les unitÃ©s de chaque grappe sont reprÃ©sentatives. Elle possÃ¨de lâ€™avantage dâ€™Ãªtre souvent plus Ã©conomique.</p>
<p>Il est possible de combiner plusieurs de ces approches. Par exemple, les <em>EnquÃªtes DÃ©mographiques et de SantÃ©</em><a href="#definir-un-plan-d-echantillonnage-complexe_fn1" class="footnoteRef" id="definir-un-plan-d-echantillonnage-complexe_fnref1"><sup>1</sup></a> (EDS) sont des enquÃªtes stratifiÃ©es en grappes Ã  deux degrÃ©s. Dans un premier temps, la population est divisÃ©e en strates par rÃ©gion et milieu de rÃ©sidence. Dans chaque strate, des zones dâ€™enquÃªtes, correspondant Ã  des unitÃ©s de recensement, sont tirÃ©es au sort avec une probabilitÃ© proportionnelle au nombre de mÃ©nages de chaque zone au dernier recensement de population. Enfin, au sein de chaque zone dâ€™enquÃªte sÃ©lectionnÃ©e, un recensement de lâ€™ensemble des mÃ©nages est effectuÃ© puis un nombre identique de mÃ©nages par zone dâ€™enquÃªte est tirÃ© au sort de maniÃ¨re alÃ©toire simple.</p>
</div>
<div id="definir-un-plan-d-echantillonnage-complexe_les-options-de-svydesign" class="section level2">
<h2>Les options de svydesign</h2>
<p>La fonction <code data-pkg="survey">svydesign</code> accepte plusieurs arguments dÃ©crits sur sa page dâ€™aide (obtenue avec la commande <code>?svydesign</code>).</p>
<p>Lâ€™agument <code>data</code> permet de spÃ©cifier le tableau de donnÃ©es contenant les observations.</p>
<p>Lâ€™argument <code>ids</code> est obligatoire et spÃ©cifie sous la forme dâ€™une formule les identifiants des diffÃ©rents niveaux dâ€™un tirage en grappe. Sâ€™il sâ€™agit dâ€™un Ã©chantillon alÃ©atoire simple, on entrera <code>ids=Ëœ1</code>. Autre situationÂ : supposons une Ã©tude portant sur la population franÃ§aise. Dans un premier temps, on a tirÃ© au sort un certain nombre de dÃ©partements franÃ§ais. Dans un second temps, on tire au sort dans chaque dÃ©partement des communes. Dans chaque commune sÃ©lectionnÃ©e, on tire au sort des quartiers. Enfin, on interroge de maniÃ¨re exhaustive toutes les personnes habitant les quartiers enquÃªtÃ©s. Notre fichier de donnÃ©es devra donc comporter pour chaque observation les variables <em>id_departement</em>, <em>id_commune</em> et <em>id_quartier</em>. On Ã©crira alors pour lâ€™argument <code>ids</code> la valeur suivanteÂ :<br/><code>ids=Ëœid_departement+id_commune+id_quartier</code>.</p>
<p>Si lâ€™Ã©chantillon est stratifiÃ©, on spÃ©cifiera les strates Ã  lâ€™aide de lâ€™argument <code>strata</code> en spÃ©cifiant la variable contenant lâ€™identifiant des strates. Par exempleÂ : <code>strata=Ëœid_strate</code>.</p>
<p>Il faut encore spÃ©cifier les probabilitÃ©s de tirage de chaque cluster ou bien la pondÃ©ration des individus. Si lâ€™on dispose de la probabilitÃ© de chaque observation dâ€™Ãªtre sÃ©lectionnÃ©e, on utilisera lâ€™argument <code>probs</code>. Si, par contre, on connaÃ®t la pondÃ©ration de chaque observation (qui doit Ãªtre proportionnelle Ã  lâ€™inverse de cette probabilitÃ©), on utilisera lâ€™argument <code>weights</code>.</p>
<p>Si lâ€™Ã©chantillon est stratifiÃ©, quâ€™au sein de chaque strate les individus ont Ã©tÃ© tirÃ©s au sort de maniÃ¨re alÃ©atoire et que lâ€™on connaÃ®t la taille de chaque strate, il est possible de ne pas avoir Ã  spÃ©cifier la probabilitÃ© de tirage ou la pondÃ©ration de chaque observation. Il est prÃ©fÃ©rable de fournir une variable contenant la taille de chaque strate Ã  lâ€™argument <code>fpc</code>. De plus, dans ce cas-lÃ , une petite correction sera appliquÃ©e au modÃ¨le pour prendre en compte la taille finie de chaque strate.</p>
</div>
<div id="definir-un-plan-d-echantillonnage-complexe_quelques-exemples" class="section level2">
<h2>Quelques exemples</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Ã‰chantillonnage alÃ©atoire simple</span>
plan &lt;-<span class="st"> </span><span class="kw">svydesign</span>(<span class="dt">ids =</span> ~<span class="dv">1</span>, <span class="dt">data =</span> donnees)

<span class="co"># Ã‰chantillonnage stratifiÃ© Ã  un seul niveau (la</span>
<span class="co"># taille de chaque strate est connue)</span>
plan &lt;-<span class="st"> </span><span class="kw">svydesign</span>(<span class="dt">ids =</span> ~<span class="dv">1</span>, <span class="dt">data =</span> donnees, <span class="dt">fpc =</span> ~taille)

<span class="co"># Ã‰chantillonnage en grappes avec tirages Ã  quatre</span>
<span class="co"># degrÃ©s (departement, commune, quartier,</span>
<span class="co"># individus). La probabilitÃ© de tirage de chaque</span>
<span class="co"># niveau de cluster est connue.</span>
plan &lt;-<span class="st"> </span><span class="kw">svydesign</span>(<span class="dt">ids =</span> ~id_departement +<span class="st"> </span>id_commune +<span class="st"> </span>
<span class="st">  </span>id_quartier, <span class="dt">data =</span> donnees, <span class="dt">probs =</span> ~proba_departement +<span class="st"> </span>
<span class="st">  </span>proba_commune +<span class="st"> </span>proba_quartier)

<span class="co"># Ã‰chantillonnage stratifiÃ© avec tirage Ã  deux</span>
<span class="co"># degrÃ©s (clusters et individus). Le poids</span>
<span class="co"># statistiques de chaque observation est connu.</span>
plan &lt;-<span class="st"> </span><span class="kw">svydesign</span>(<span class="dt">ids =</span> ~id_cluster, <span class="dt">data =</span> donnees, 
  <span class="dt">strata =</span> ~id_strate, <span class="dt">weights =</span> ~poids)</code></pre></div>
<p>Prenons lâ€™exemple dâ€™une <em>EnquÃªte DÃ©mographique et de SantÃ©</em>. Le nom des diffÃ©rentes variables est standardisÃ© et commun quelle que soit lâ€™enquÃªte. Nous supposerons que vous avez importÃ© le fichier <em>individus</em> dans un tableau de donnÃ©es nommÃ©s <code>eds</code>. Le poids statistique de chaque individu est fourni par la variable <em>V005</em> qui doit au prÃ©alable Ãªtre divisÃ©e par un million. Les grappes dâ€™Ã©chantillonnage au premier degrÃ© sont fournies par la variable <em>V021 (primary sample unit)</em>. Si elle nâ€™est pas renseignÃ©e, on pourra utilisier le numÃ©ro de grappe <em>V001</em>. Enfin, le milieu de rÃ©sidence (urbain / rural) est fourni par <em>V025</em> et la rÃ©gion par <em>V024</em>. Pour rappel, lâ€™Ã©chantillon a Ã©tÃ© stratifiÃ© Ã  la fois par rÃ©gion et par mileu de rÃ©sidence. Certaines enquÃªtes fournissent directement un numÃ©ro de strate via <em>V022</em>. Si tel est le cas, on pourra prÃ©ciser le plan dâ€™Ã©chantillonnage ainsiÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">eds$poids &lt;-<span class="st"> </span>eds$V005/<span class="fl">1e+06</span>
design.eds &lt;-<span class="st"> </span><span class="kw">svydesign</span>(<span class="dt">ids =</span> ~V021, <span class="dt">data =</span> eds, <span class="dt">strata =</span> ~V022, 
  <span class="dt">weights =</span> ~poids)</code></pre></div>
<p>Si <em>V022</em> nâ€™est pas fourni mais que lâ€™enquÃªte a bien Ã©tÃ© stratifiÃ©e par rÃ©gion et milieu de rÃ©sidence (vÃ©rifiez toujours le premier chapitre du rapport dâ€™enquÃªte), on pourra crÃ©er une variable strate ainsi<a href="#definir-un-plan-d-echantillonnage-complexe_fn2" class="footnoteRef" id="definir-un-plan-d-echantillonnage-complexe_fnref2"><sup>2</sup></a>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">eds$strate &lt;-<span class="st"> </span><span class="kw">as.factor</span>(<span class="kw">as.integer</span>(eds$V024) *<span class="st"> </span><span class="dv">10</span> +<span class="st"> </span>
<span class="st">  </span><span class="kw">as.integer</span>(eds$V025))
<span class="kw">levels</span>(eds$strate) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">paste</span>(<span class="kw">levels</span>(eds$V024), <span class="st">"Urbain"</span>), 
  <span class="kw">paste</span>(<span class="kw">levels</span>(eds$V024), <span class="st">"Rural"</span>))
design.eds &lt;-<span class="st"> </span><span class="kw">svydesign</span>(<span class="dt">ids =</span> ~V021, <span class="dt">data =</span> eds, <span class="dt">strata =</span> ~strate, 
  <span class="dt">weights =</span> ~poids)</code></pre></div>
</div>
<div id="definir-un-plan-d-echantillonnage-complexe_extraire-un-sous-echantillon" class="section level2">
<h2>Extraire un sous-Ã©chantillon</h2>
<p>Si lâ€™on souhaite travailler sur un <dfn>sous-Ã©chantillon</dfn> tout en gardant les informations dâ€™Ã©chantillonnage, on utilisera la fonction <code data-pkg="survey" data-rdoc="subset.survey.design">subset</code> prÃ©sentÃ©e en dÃ©tail dans le chapitre <a href="pem_manipulation.html#subset">Manipulation de donnÃ©es</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sous &lt;-<span class="st"> </span><span class="kw">subset</span>(plan, sexe ==<span class="st"> "Femme"</span> &amp;<span class="st"> </span>age &gt;=<span class="st"> </span><span class="dv">40</span>)</code></pre></div>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="definir-un-plan-d-echantillonnage-complexe_fn1"><p>Vaste programme dâ€™enquÃªtes rÃ©alisÃ©es Ã  intervalles rÃ©guliers dans les pays du Sud, disponibles sur <a href="http://www.dhsprogram.com/" class="uri">http://www.dhsprogram.com/</a>.<a href="#definir-un-plan-d-echantillonnage-complexe_fnref1">â†©</a></p></li>
<li id="definir-un-plan-d-echantillonnage-complexe_fn2"><p>Lâ€™astuce consiste Ã  utiliser <code data-pkg="base">as.integer</code> pour obtenir le code des facteurs et non leur valeur textuelle. Lâ€™addition des deux valeurs aprÃ¨s multiplication du code de la rÃ©gion par 10 permet dâ€™obtenir une valeur unique pour chaque combinaison des deux variables. On retransforme le rÃ©sultat en facteurs puis on modifie les Ã©tiquettes des modalitÃ©s.<a href="#definir-un-plan-d-echantillonnage-complexe_fnref2">â†©</a></p></li>
</ol>
</div>

</article>
<article id="regression-lineaire">

<div class="fluid-row" id="regression-lineaire_header">


<h1 class="title">RÃ©gression linÃ©aire</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="regression-logistique">

<div class="fluid-row" id="regression-logistique_header">


<h1 class="title">RÃ©gression logistique</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#regression-logistique_preparation-des-donnees">PrÃ©paration des donnÃ©es</a></li>
<li><a href="#regression-logistique_regression-logistique-binaire">RÃ©gression logistique binaire</a></li>
<li><a href="#regression-logistique_selection-de-modeles">SÃ©lection de modÃ¨les</a></li>
<li><a href="#regression-logistique_regression-logistique-multinomiale">RÃ©gression logistique multinomiale</a></li>
</ul>
</div>

<div class="note">
<p>La version originale de ce chapitre a Ã©tÃ© Ã©crite par Joseph Larmarange dans le cadre du support de cours <a href="https://github.com/larmarange/intro-r/tree/CoursM2">Introduction Ã  lâ€™analyse dâ€™enquÃªtes avec R</a>.</p>
</div>
<p>La <dfn>rÃ©gression logistique</dfn><dfn data-index="logistique, rÃ©gression"/> est frÃ©quemment utilisÃ©e en sciences sociales car elle permet dâ€™effectuer un raisonnement dit <em>toutes choses Ã©tant Ã©gales par ailleurs</em>. Plus prÃ©cisÃ©ment, la rÃ©gression logistique a pour but dâ€™isoler les effets de chaque variable, câ€™est-Ã -dire dâ€™identifier les effets rÃ©siduels dâ€™une <dfn>variable explicative</dfn><dfn data-index="explicative, variable"/> sur une <dfn>variable dâ€™intÃ©rÃªt</dfn>, une fois pris en compte les autres variables explicatives introduites dans le modÃ¨le. La rÃ©gression logistique est ainsi prisÃ©e en Ã©pidÃ©miologie pour identifier les facteurs associÃ©s Ã  telle ou telle pathologie.</p>
<p>La <dfn>rÃ©gression logistique ordinaire</dfn><dfn data-index="ordinaire, rÃ©gression logistique"/> ou <dfn>rÃ©gression logistique binaire</dfn><dfn data-index="binaire, rÃ©gression logistique"/> vise Ã  expliquer une variable dâ€™intÃ©rÃªt binaire (câ€™est-Ã -dire de type Â«Â ouiÂ /Â nonÂ Â» ou Â«Â vraiÂ /Â fauxÂ Â»). Les variables explicatives qui seront introduites dans le modÃ¨le peuvent Ãªtre <dfn data-index="variable quantitative">quantitatives</dfn><dfn data-index="quantitative, variable"/> ou <dfn data-index="variable qualitative">qualitatives</dfn><dfn data-index="qualitative, variable"/>.</p>
<p>La <dfn>rÃ©gression logistique multinomiale</dfn><dfn data-index="multinomiale, rÃ©gression logistique"/> est une extension de la rÃ©gression logistique aux variables qualitatives Ã  trois modalitÃ©s ou plus.</p>
<div id="regression-logistique_preparation-des-donnees" class="section level2">
<h2>PrÃ©paration des donnÃ©es</h2>
<p>Dans ce chapite, nous allons encore une fois utiliser les donnÃ©es de lâ€™enquÃªte <em>Histoire de vie</em>, fournies avec lâ€™extension <code class="pkg">questionr</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<p>Ã€ titre dâ€™exemple, nous allons Ã©tudier lâ€™effet de lâ€™Ã¢ge, du sexe, du niveau dâ€™Ã©tude, de la pratique religieuse et du nombre moyen dâ€™heures passÃ©es Ã  regarder la tÃ©lÃ©vision par jour.</p>
<p>En premier lieu, il importe de vÃ©rifier que notre variable dâ€™intÃ©rÃªt (ici <em>sport</em>) est correctement codÃ©e. Une possibilitÃ© consiste Ã  crÃ©er une <dfn>variable boolÃ©enne</dfn><dfn data-index="boolÃ©enne, variable"/> (vrai / faux) selon que lâ€™individu a pratiquÃ© du sport ou nonÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$sport2 &lt;-<span class="st"> </span><span class="ot">FALSE</span>
d$sport2[d$sport ==<span class="st"> "Oui"</span>] &lt;-<span class="st"> </span><span class="ot">TRUE</span></code></pre></div>
<p>Dans le cas prÃ©sent, cette variable nâ€™a pas de <dfn>valeur manquante</dfn><dfn data-index="manquante, valeur">/dfn&gt;. Mais, le cas Ã©chÃ©ant, il importe de bien coder les valeurs manquantes en <code>NA</code>, les individus en question Ã©tant alors exclu de lâ€™analyse.</dfn></p>
<p>Il nâ€™est pas forcÃ©ment nÃ©cessaire de transformer notre variable dâ€™intÃ©rÃªt en variable boolÃ©enne. En effet, <strong>R</strong> accepte sans problÃ¨me une variable de type <dfn>facteur</dfn>. Cependant, lâ€™ordre des valeurs dâ€™un facteur a de lâ€™importance. En effet, <strong>R</strong> considÃ¨re toujours la premiÃ¨re modalitÃ© comme Ã©tant la <dfn>modalitÃ© de rÃ©fÃ©rence</dfn><dfn data-index="rÃ©fÃ©rence, modalitÃ©"/>. Dans le cas de la variable dâ€™intÃ©rÃªt, la modalitÃ© de rÃ©fÃ©rence correspond au fait de ne pas remplir le critÃ¨re Ã©tudiÃ©, dans notre exemple au fait de ne pas avoir eu dâ€™activitÃ© sportive au cours des douze derniers mois.</p>
<p>Pour connaÃ®tre lâ€™ordre des modalitÃ©s dâ€™une variable de type facteur, on peut utiliser la fonction <code data-pkg="base">levels</code> ou bien encore tout simplement la fonction <code data-pkg="questionr">freq</code> de lâ€™extension <code class="pkg">questionr</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">levels</span>(d$sport)</code></pre></div>
<pre><code>[1] "Non" "Oui"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">freq</span>(d$sport)</code></pre></div>
<pre><code>       n    % val%
Non 1277 63.8 63.8
Oui  723 36.1 36.1
NA     0  0.0   NA</code></pre>
<p>Dans notre exemple, la modalitÃ© Â«Â NonÂ Â» est dÃ©jÃ  la premiÃ¨re modalitÃ©. Il nâ€™y a donc pas besoin de modifier notre variable. Si ce nâ€™est pas le cas, il faudra modifier la modalitÃ© de rÃ©fÃ©rence avec la fonction <code data-pkg="stats">relevel</code> comme nous allons le voir un peu plus loin.</p>
<div class="important">
<p>Il est possible dâ€™indiquer un facteur Ã  plus de deux modalitÃ©s. Dans une telle situation, <strong>R</strong> considÃ©rera que tous les modalitÃ©s, sauf la modalitÃ© de rÃ©fÃ©rence, est une rÃ©alisation de la variable dâ€™intÃ©rÃªt. Cela serait correct, par exemple, si notre variable <em>sport</em> Ã©tait codÃ©e ainsiÂ : Â«Â NonÂ Â», Â«Â Oui, toutes les semainesÂ Â», Â«Â Oui, au moins une fois par moisÂ Â», Â«Â Oui, moins dâ€™une fois par moisÂ Â». Cependant, afin dâ€™Ã©viter tout risque dâ€™erreur ou de mauvaise interprÃ©tation, il est vivement conseillÃ© de recoder au prÃ©alable sa variable dâ€™intÃ©rÃªt en un facteur Ã  deux modalitÃ©s.</p>
</div>
<p>La notion de modalitÃ© de rÃ©fÃ©rence sâ€™applique Ã©galement aux variables explicatives qualitatives. En effet, dans un modÃ¨le, tous les coefficients sont calculÃ©s par rapport Ã  la modalitÃ© de rÃ©fÃ©rence. Il importe de choisir une modalitÃ© de rÃ©fÃ©rence qui fasse sens afin de faciliter lâ€™interprÃ©tation. Par ailleurs, ce choix peut Ã©galement dÃ©pendre de la maniÃ¨re dont on souhaite prÃ©senter les rÃ©sultats. De maniÃ¨re gÃ©nÃ©rale on Ã©vitera de choisir comme rÃ©fÃ©rence une modalitÃ© peu reprÃ©sentÃ©e dans lâ€™Ã©chantillon ou bien une modalitÃ© correspondant Ã  une situation atypique.</p>
<p>Prenons lâ€™exemple de la variable <em>sexe</em>. Souhaite-t-on connaitre lâ€™effet dâ€™Ãªtre une femme par rapport au fait dâ€™Ãªtre un homme ou bien lâ€™effet dâ€™Ãªtre un homme par rapport au fait dâ€™Ãªtre une femmeÂ ? Si lâ€™on opte pour le second, alors notre modalitÃ© de rÃ©fÃ©rence sera le sexe fÃ©minin. Comme est codÃ©e cette variableÂ ?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">freq</span>(d$sexe)</code></pre></div>
<pre><code>         n  % val%
Homme  899 45   45
Femme 1101 55   55
NA       0  0   NA</code></pre>
<p>La modalitÃ© Â«Â FemmeÂ Â» sâ€™avÃ¨re ne pas Ãªtre la premiÃ¨re modalitÃ©. Nous devons appliquer la fonction <code data-pkg="stats">relevel</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$sexe &lt;-<span class="st"> </span><span class="kw">relevel</span>(d$sexe, <span class="st">"Femme"</span>)
<span class="kw">freq</span>(d$sexe)</code></pre></div>
<pre><code>         n  % val%
Femme 1101 55   55
Homme  899 45   45
NA       0  0   NA</code></pre>
<div class="note">
<p>Si lâ€™on a importÃ© nos donnÃ©es depuis <strong>SPSS</strong> ou <strong>Stata</strong> avec lâ€™extension <code class="pkg">haven</code>, les variables codÃ©es numÃ©riquement et disposant dâ€™Ã©tiquettes sont conservÃ©es stockÃ©es sous forme de <dfn lang="en">labelled vector</dfn>, câ€™est-Ã -dire dâ€™un vecteur numÃ©rique ayant des attributs indiquant les Ã©tiquettes des modalitÃ©s. Il importera donc de convertir notre variable en facteur avant dâ€™effectuer notre analyse. La fonction <code data-pkg="haven" data-rdoc="labelled">as_factor</code> crÃ©era automatiquement un facteur Ã  partir des Ã©tiquettes.</p>
<p>Une alternative consiste Ã  utiliser la fonction <code data-pkg="JLutils">lfactor</code> de lâ€™extension <code class="pkg">JLutils</code> qui fonctionne Ã©galement si les donnÃ©es ont Ã©tÃ© importÃ©es avec <code data-pkg="foreign">read.spss</code> ou <code data-pkg="foreign">read.dta</code> de lâ€™extension <code class="pkg">foreign</code> sans avoir converti les variables labelisÃ©es en facteurs.</p>
</div>
<p>Les variables <em>age</em> et <em>heures.tv</em> sont des variables quantitatives. Il importe de vÃ©rifier quâ€™elles sont bien enregistrÃ©es en tant que variables numÃ©riques. En effet, il arrive parfois que dans le fichier source les variables quantitatives soient renseignÃ©es sous forme de valeur textuelle et non sous forme numÃ©rique.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(d$age)</code></pre></div>
<pre><code> int [1:2000] 28 23 59 34 71 35 60 47 20 28 ...</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(d$heures.tv)</code></pre></div>
<pre><code> num [1:2000] 0 1 0 2 3 2 2.9 1 2 2 ...</code></pre>
<p>Nos deux variables sont bien renseignÃ©es sous forme numÃ©rique.</p>
<p>Cependant, lâ€™effet de lâ€™Ã¢ge est rarement linÃ©aire. Un exemple trivial est par exemple le fait dâ€™occuper un emploi qui sera moins frÃ©quent aux jeunes Ã¢ges et aux Ã¢ges Ã©levÃ©s. DÃ¨s lors, on pourra transformer la variable <em>age</em> en groupe dâ€™Ã¢ges avec la fonction <code data-pkg="base">cut</code> (voir le chapitre <a href="pem_manipulation.html#decouper_en_classes">Manipulation de donnÃ©es</a>)Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$grpage &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">16</span>, <span class="dv">25</span>, <span class="dv">45</span>, <span class="dv">65</span>, <span class="dv">93</span>), <span class="dt">right =</span> <span class="ot">FALSE</span>, 
  <span class="dt">include.lowest =</span> <span class="ot">TRUE</span>)
<span class="kw">freq</span>(d$grpage)</code></pre></div>
<pre><code>          n    % val%
[16,25) 169  8.5  8.5
[25,45) 706 35.3 35.3
[45,65) 745 37.2 37.3
[65,93] 378 18.9 18.9
NA        2  0.1   NA</code></pre>
<p>Jetons maintenant un oeil Ã  la variable <em>nivetud</em>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">freq</span>(d$nivetud)</code></pre></div>
<pre><code>                                                                  n
N'a jamais fait d'etudes                                         39
A arrete ses etudes, avant la derniere annee d'etudes primaires  86
Derniere annee d'etudes primaires                               341
1er cycle                                                       204
2eme cycle                                                      183
Enseignement technique ou professionnel court                   463
Enseignement technique ou professionnel long                    131
Enseignement superieur y compris technique superieur            441
NA                                                              112
                                                                   %
N'a jamais fait d'etudes                                         2.0
A arrete ses etudes, avant la derniere annee d'etudes primaires  4.3
Derniere annee d'etudes primaires                               17.1
1er cycle                                                       10.2
2eme cycle                                                       9.2
Enseignement technique ou professionnel court                   23.2
Enseignement technique ou professionnel long                     6.6
Enseignement superieur y compris technique superieur            22.1
NA                                                               5.6
                                                                val%
N'a jamais fait d'etudes                                         2.1
A arrete ses etudes, avant la derniere annee d'etudes primaires  4.6
Derniere annee d'etudes primaires                               18.1
1er cycle                                                       10.8
2eme cycle                                                       9.7
Enseignement technique ou professionnel court                   24.5
Enseignement technique ou professionnel long                     6.9
Enseignement superieur y compris technique superieur            23.4
NA                                                                NA</code></pre>
<p>En premier lieu, cette variable est dÃ©taillÃ©e en pas moins de huit modalitÃ©s dont certaines sont peu reprÃ©sentÃ©es (seulement 39 individus soit 2Â % nâ€™ont jamais fait dâ€™Ã©tudes par exemple). Afin dâ€™amÃ©liorier notre modÃ¨le logistique, il peut Ãªtre pertinent de regrouper certaines modalitÃ©s (voir le chapitre <a href="pem_manipulation.html#regrouper_modalites">Manipulation de donnÃ©es</a>)Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$etud &lt;-<span class="st"> </span>d$nivetud
<span class="kw">levels</span>(d$etud) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Primaire"</span>, <span class="st">"Primaire"</span>, <span class="st">"Primaire"</span>, 
  <span class="st">"Secondaire"</span>, <span class="st">"Secondaire"</span>, <span class="st">"Technique/Professionnel"</span>, 
  <span class="st">"Technique/Professionnel"</span>, <span class="st">"SupÃ©rieur"</span>)
<span class="kw">freq</span>(d$etud)</code></pre></div>
<pre><code>                          n    % val%
Primaire                466 23.3 24.7
Secondaire              387 19.4 20.5
Technique/Professionnel 594 29.7 31.5
SupÃ©rieur               441 22.1 23.4
NA                      112  5.6   NA</code></pre>
<p>Notre variable comporte Ã©galement 112 individus avec une valeur manquante. Si nous conservons cette valeur manquante, ces 112 individus seront, par dÃ©faut, exclus de lâ€™analyse. Ces valeurs manquantes nâ€™Ã©tant pas nÃ©gligeable (5,6Â %), nous pouvons Ã©galement faire le choix de considÃ©rer ces valeurs manquantes comme une modalitÃ© supplÃ©mentaire. Auquel cas, nous utiliserons la fonction <code data-pkg="base">add.NA</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">levels</span>(d$etud)</code></pre></div>
<pre><code>[1] "Primaire"               
[2] "Secondaire"             
[3] "Technique/Professionnel"
[4] "SupÃ©rieur"              </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$etud &lt;-<span class="st"> </span><span class="kw">addNA</span>(d$etud)
<span class="kw">levels</span>(d$etud)</code></pre></div>
<pre><code>[1] "Primaire"               
[2] "Secondaire"             
[3] "Technique/Professionnel"
[4] "SupÃ©rieur"              
[5] NA                       </code></pre>
</div>
<div id="regression-logistique_regression-logistique-binaire" class="section level2">
<h2>RÃ©gression logistique binaire</h2>
<p>La fonction <code data-pkg="stats">glm</code> (pour <dfn lang="en">generalized linear models</dfn> soit <dfn>modÃ¨le linÃ©aire gÃ©nÃ©ralisÃ©</dfn> en franÃ§ais) permet de calculer une grande variÃ©tÃ© de modÃ¨les statistiques. La rÃ©gression logistique ordinaire correspond au modÃ¨le <em>logit</em> de la famille des modÃ¨les binomiaux, ce que lâ€™on indique Ã  <code data-pkg="stats">glm</code> avec lâ€™argument <code>family=binomial(logit)</code>.</p>
<p>Le modÃ¨le proprement dit sera renseignÃ© sous la forme dâ€™une <dfn>formule</dfn> (que nous avons dÃ©jÃ  rencontrÃ©e dans le chapitre sur la <a href="#statistique-bivariee">statistique bivariÃ©e</a> et prÃ©sentÃ©e plus en dÃ©tails dans un <a href="#formules">chapitre dÃ©diÃ©</a>). On indiquera dâ€™abord la variable dâ€™intÃ©rÃªt, suivie du signe <code>~</code> (que lâ€™on obtient en appuyant sur les touches <kbd>Alt Gr</kbd> et <kbd>3</kbd> sur un clavier de type PC) puis de la liste des variables explicatives sÃ©parÃ©es par un signe <code>+</code>. Enfin, lâ€™argument <code>data</code> permettra dâ€™indiquer notre tableau de donnÃ©es.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg &lt;-<span class="st"> </span><span class="kw">glm</span>(sport ~<span class="st"> </span>sexe +<span class="st"> </span>grpage +<span class="st"> </span>etud +<span class="st"> </span>relig +<span class="st"> </span>heures.tv, 
  <span class="dt">data =</span> d, <span class="dt">family =</span> <span class="kw">binomial</span>(logit))
reg</code></pre></div>
<pre><code>
Call:  glm(formula = sport ~ sexe + grpage + etud + relig + heures.tv, 
    family = binomial(logit), data = d)

Coefficients:
                     (Intercept)  
                       -0.797364  
                       sexeHomme  
                        0.439002  
                   grpage[25,45)  
                       -0.420306  
                   grpage[45,65)  
                       -1.085463  
                   grpage[65,93]  
                       -1.379274  
                  etudSecondaire  
                        0.948312  
     etudTechnique/Professionnel  
                        1.047156  
                   etudSupÃ©rieur  
                        1.889621  
                          etudNA  
                        2.148545  
     religPratiquant occasionnel  
                       -0.020597  
 religAppartenance sans pratique  
                       -0.006176  
religNi croyance ni appartenance  
                       -0.214067  
                      religRejet  
                       -0.382744  
                religNSP ou NVPR  
                       -0.083361  
                       heures.tv  
                       -0.120724  

Degrees of Freedom: 1992 Total (i.e. Null);  1978 Residual
  (7 observations deleted due to missingness)
Null Deviance:      2607 
Residual Deviance: 2206     AIC: 2236</code></pre>
<div class="note">
<p>Il est possible de spÃ©cifier des modÃ¨les plus complexes. Par exemple, <code>x:y</code> permet dâ€™indiquer lâ€™interaction entre les variables <em>x</em> et <em>y</em>. <code>x * y</code> sera Ã©quivalent Ã  <code>x + y + x:y</code>. Pour aller plus loin, voir <a href="http://ww2.coastal.edu/kingw/statistics/R-tutorials/formulae.html" class="uri">http://ww2.coastal.edu/kingw/statistics/R-tutorials/formulae.html</a>.</p>
</div>
<p>Une prÃ©sentation plus complÃ¨te des rÃ©sultats est obtenue avec la mÃ©thode <code data-pkg="stats" data-rdoc="summary.glm">summary</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(reg)</code></pre></div>
<pre><code>
Call:
glm(formula = sport ~ sexe + grpage + etud + relig + heures.tv, 
    family = binomial(logit), data = d)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-1.8783  -0.8864  -0.4814   1.0033   2.4202  

Coefficients:
                                  Estimate
(Intercept)                      -0.797364
sexeHomme                         0.439002
grpage[25,45)                    -0.420306
grpage[45,65)                    -1.085463
grpage[65,93]                    -1.379274
etudSecondaire                    0.948312
etudTechnique/Professionnel       1.047156
etudSupÃ©rieur                     1.889621
etudNA                            2.148545
religPratiquant occasionnel      -0.020597
religAppartenance sans pratique  -0.006176
religNi croyance ni appartenance -0.214067
religRejet                       -0.382744
religNSP ou NVPR                 -0.083361
heures.tv                        -0.120724
                                 Std. Error
(Intercept)                        0.323833
sexeHomme                          0.106063
grpage[25,45)                      0.228042
grpage[45,65)                      0.237704
grpage[65,93]                      0.273794
etudSecondaire                     0.197427
etudTechnique/Professionnel        0.189777
etudSupÃ©rieur                      0.195190
etudNA                             0.330198
religPratiquant occasionnel        0.189203
religAppartenance sans pratique    0.174709
religNi croyance ni appartenance   0.193096
religRejet                         0.285878
religNSP ou NVPR                   0.410968
heures.tv                          0.033589
                                 z value Pr(&gt;|z|)
(Intercept)                       -2.462 0.013806
sexeHomme                          4.139 3.49e-05
grpage[25,45)                     -1.843 0.065313
grpage[45,65)                     -4.566 4.96e-06
grpage[65,93]                     -5.038 4.71e-07
etudSecondaire                     4.803 1.56e-06
etudTechnique/Professionnel        5.518 3.43e-08
etudSupÃ©rieur                      9.681  &lt; 2e-16
etudNA                             6.507 7.67e-11
religPratiquant occasionnel       -0.109 0.913311
religAppartenance sans pratique   -0.035 0.971801
religNi croyance ni appartenance  -1.109 0.267600
religRejet                        -1.339 0.180624
religNSP ou NVPR                  -0.203 0.839260
heures.tv                         -3.594 0.000325
                                    
(Intercept)                      *  
sexeHomme                        ***
grpage[25,45)                    .  
grpage[45,65)                    ***
grpage[65,93]                    ***
etudSecondaire                   ***
etudTechnique/Professionnel      ***
etudSupÃ©rieur                    ***
etudNA                           ***
religPratiquant occasionnel         
religAppartenance sans pratique     
religNi croyance ni appartenance    
religRejet                          
religNSP ou NVPR                    
heures.tv                        ***
---
Signif. codes:  
0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 2607.4  on 1992  degrees of freedom
Residual deviance: 2205.9  on 1978  degrees of freedom
  (7 observations deleted due to missingness)
AIC: 2235.9

Number of Fisher Scoring iterations: 4</code></pre>
<p>Dans le cadre dâ€™un modÃ¨le logistique, gÃ©nÃ©ralement on ne prÃ©sente pas les <dfn data-index="coefficient, modÃ¨le">coefficients</dfn> du modÃ¨le mais leur valeur exponentielle, cette derniÃ¨re correspondant en effet Ã  des <dfn data-index="odds ratio" lang="en">odds ratio</dfn>, Ã©galement appelÃ©s <dfn data-index="rapport des cotes">rapports des cotes</dfn>. Lâ€™odds ratio diffÃ¨re du <dfn>risque relatif</dfn><dfn data-index="relatif, risque"/>. Cependent son interprÃ©tation est similaire. Un <em>odds ratio</em> de 1 signifie lâ€™absence dâ€™effet. Un <em>odds ratio</em> largement supÃ©rieur Ã  1 correspond Ã  une augmentation du phÃ©nomÃ¨ne Ã©tudiÃ© et un <em>odds ratio</em> largement infÃ©ieur Ã  1 correspond Ã  une diminution du phÃ©nomÃ¨ne Ã©tudiÃ©<a href="#regression-logistique_fn1" class="footnoteRef" id="regression-logistique_fnref1"><sup>1</sup></a>.</p>
<p>La fonction <code data-pkg="stats">coef</code> permet dâ€™obtenir les coefficients dâ€™un modÃ¨le, <code data-pkg="stats">confint</code> leurs intervalles de confiance et <code data-pkg="base" data-rdoc="log">exp</code> de calculer lâ€™exponentiel. Les <em>odds ratio</em> et leurs <dfn data-index="intervalle de confiance d'un odds ratio">intervalles de confiance</dfn><dfn data-index="odds ratio, intervalle de confiance"/> sâ€™obtiennent ainsiÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">exp</span>(<span class="kw">coef</span>(reg))</code></pre></div>
<pre><code>                     (Intercept) 
                       0.4505151 
                       sexeHomme 
                       1.5511577 
                   grpage[25,45) 
                       0.6568456 
                   grpage[45,65) 
                       0.3377455 
                   grpage[65,93] 
                       0.2517614 
                  etudSecondaire 
                       2.5813476 
     etudTechnique/Professionnel 
                       2.8495358 
                   etudSupÃ©rieur 
                       6.6168632 
                          etudNA 
                       8.5723745 
     religPratiquant occasionnel 
                       0.9796133 
 religAppartenance sans pratique 
                       0.9938431 
religNi croyance ni appartenance 
                       0.8072940 
                      religRejet 
                       0.6819874 
                religNSP ou NVPR 
                       0.9200190 
                       heures.tv 
                       0.8862785 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">exp</span>(<span class="kw">confint</span>(reg))</code></pre></div>
<pre><code>Waiting for profiling to be done...</code></pre>
<pre><code>                                     2.5 %
(Intercept)                      0.2379725
sexeHomme                        1.2605519
grpage[25,45)                    0.4195082
grpage[45,65)                    0.2115297
grpage[65,93]                    0.1466915
etudSecondaire                   1.7613423
etudTechnique/Professionnel      1.9764492
etudSupÃ©rieur                    4.5427464
etudNA                           4.5265421
religPratiquant occasionnel      0.6767575
religAppartenance sans pratique  0.7067055
religNi croyance ni appartenance 0.5531366
religRejet                       0.3872078
religNSP ou NVPR                 0.3998878
heures.tv                        0.8291800
                                     97.5 %
(Intercept)                       0.8480538
sexeHomme                         1.9106855
grpage[25,45)                     1.0275786
grpage[45,65)                     0.5380619
grpage[65,93]                     0.4296919
etudSecondaire                    3.8240276
etudTechnique/Professionnel       4.1639745
etudSupÃ©rieur                     9.7745023
etudNA                           16.5563346
religPratiquant occasionnel       1.4217179
religAppartenance sans pratique   1.4026763
religNi croyance ni appartenance  1.1798422
religRejet                        1.1898605
religNSP ou NVPR                  2.0221544
heures.tv                         0.9459484</code></pre>
<p>On pourra faciliter la lecture en combinant les deuxÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">exp</span>(<span class="kw">cbind</span>(<span class="kw">coef</span>(reg), <span class="kw">confint</span>(reg)))</code></pre></div>
<pre><code>Waiting for profiling to be done...</code></pre>
<pre><code>                                          
(Intercept)                      0.4505151
sexeHomme                        1.5511577
grpage[25,45)                    0.6568456
grpage[45,65)                    0.3377455
grpage[65,93]                    0.2517614
etudSecondaire                   2.5813476
etudTechnique/Professionnel      2.8495358
etudSupÃ©rieur                    6.6168632
etudNA                           8.5723745
religPratiquant occasionnel      0.9796133
religAppartenance sans pratique  0.9938431
religNi croyance ni appartenance 0.8072940
religRejet                       0.6819874
religNSP ou NVPR                 0.9200190
heures.tv                        0.8862785
                                     2.5 %
(Intercept)                      0.2379725
sexeHomme                        1.2605519
grpage[25,45)                    0.4195082
grpage[45,65)                    0.2115297
grpage[65,93]                    0.1466915
etudSecondaire                   1.7613423
etudTechnique/Professionnel      1.9764492
etudSupÃ©rieur                    4.5427464
etudNA                           4.5265421
religPratiquant occasionnel      0.6767575
religAppartenance sans pratique  0.7067055
religNi croyance ni appartenance 0.5531366
religRejet                       0.3872078
religNSP ou NVPR                 0.3998878
heures.tv                        0.8291800
                                     97.5 %
(Intercept)                       0.8480538
sexeHomme                         1.9106855
grpage[25,45)                     1.0275786
grpage[45,65)                     0.5380619
grpage[65,93]                     0.4296919
etudSecondaire                    3.8240276
etudTechnique/Professionnel       4.1639745
etudSupÃ©rieur                     9.7745023
etudNA                           16.5563346
religPratiquant occasionnel       1.4217179
religAppartenance sans pratique   1.4026763
religNi croyance ni appartenance  1.1798422
religRejet                        1.1898605
religNSP ou NVPR                  2.0221544
heures.tv                         0.9459484</code></pre>
<p>Pour savoir si un <em>odds ratio</em> diffÃ¨re significativement de 1 (ce qui est identique au fait que le coefficient soit diffÃ©rent de 0), on pourra se rÃ©fÃ©rer Ã  la colonne <em>Pr(&gt;|z|)</em> obtenue avec <code data-pkg="stats" data-rdoc="summary.glm">summary</code>.</p>
<p>Si vous disposez de lâ€™extension <code class="pkg">questionr</code>, la fonction <code data-pacakge="questionr">odds.ratio</code> permet de calculer directement les <em>odds ratio</em>, leur intervalles de confiance et les <em>p-value</em>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">odds.ratio</span>(reg)</code></pre></div>
<pre><code>Waiting for profiling to be done...</code></pre>
<pre><code>                                    OR 2.5 %
(Intercept)                      0.451 0.238
sexeHomme                        1.551 1.261
grpage[25,45)                    0.657 0.420
grpage[45,65)                    0.338 0.212
grpage[65,93]                    0.252 0.147
etudSecondaire                   2.581 1.761
etudTechnique/Professionnel      2.850 1.976
etudSupÃ©rieur                    6.617 4.543
etudNA                           8.572 4.527
religPratiquant occasionnel      0.980 0.677
religAppartenance sans pratique  0.994 0.707
religNi croyance ni appartenance 0.807 0.553
religRejet                       0.682 0.387
religNSP ou NVPR                 0.920 0.400
heures.tv                        0.886 0.829
                                 97.5 %         p
(Intercept)                       0.848 0.0138062
sexeHomme                         1.911 3.488e-05
grpage[25,45)                     1.028 0.0653132
grpage[45,65)                     0.538 4.961e-06
grpage[65,93]                     0.430 4.713e-07
etudSecondaire                    3.824 1.560e-06
etudTechnique/Professionnel       4.164 3.432e-08
etudSupÃ©rieur                     9.775 &lt; 2.2e-16
etudNA                           16.556 7.674e-11
religPratiquant occasionnel       1.422 0.9133105
religAppartenance sans pratique   1.403 0.9718010
religNi croyance ni appartenance  1.180 0.2675998
religRejet                        1.190 0.1806239
religNSP ou NVPR                  2.022 0.8392596
heures.tv                         0.946 0.0003255
                                    
(Intercept)                      *  
sexeHomme                        ***
grpage[25,45)                    .  
grpage[45,65)                    ***
grpage[65,93]                    ***
etudSecondaire                   ***
etudTechnique/Professionnel      ***
etudSupÃ©rieur                    ***
etudNA                           ***
religPratiquant occasionnel         
religAppartenance sans pratique     
religNi croyance ni appartenance    
religRejet                          
religNSP ou NVPR                    
heures.tv                        ***
---
Signif. codes:  
0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
<p>Lâ€™extension <code class="pkg">effects</code> propose une reprÃ©sentation graphique rÃ©sumant les effets de chaque variable du modÃ¨le. Pour cela, il suffit dâ€™appliquer la mÃ©thode <code data-pkg="effects" data-rdoc="summary.effect">plot</code> au rÃ©sultat de la fonction <code data-pkg="effects" data-rdoc="effect">allEffects</code>. Nous obtenons alors la <a href="#regression-logistique_reglog_alleffects">figure ci-dessous</a>.</p>
<figure id="regression-logistique_reglog_alleffects">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(effects)
<span class="kw">plot</span>(<span class="kw">allEffects</span>(reg))</code></pre></div>
<img src="graphs/regression-logistique/plot_allEffects-1.png" title="" alt="" width="1050"/>
<figcaption>
ReprÃ©sentation graphique de lâ€™effet de chaque variable du modÃ¨le logistique
</figcaption>
</figure>
<p>Une maniÃ¨re de tester la qualitÃ© dâ€™un modÃ¨le est le calcul dâ€™une <dfn>matrice de confusion</dfn><dfn data-index="confusion, matrice"/>, câ€™est-Ã -dire le tableau croisÃ© des valeurs observÃ©es et celles des valeurs prÃ©dites en appliquant le modÃ¨le aux donnÃ©es dâ€™origine.</p>
<p>La mÃ©thode <code data-pkg="stats" data-rdoc="predict.glm">predict</code> avec lâ€™argument <code>type="response"</code> permet dâ€™appliquer notre modÃ¨le logistique Ã  un tableau de donnÃ©es et renvoie pour chaque individu la probabilitÃ© quâ€™il ait vÃ©cu le phÃ©nomÃ¨ne Ã©tudiÃ©.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sport.pred &lt;-<span class="st"> </span><span class="kw">predict</span>(reg, <span class="dt">type =</span> <span class="st">"response"</span>, <span class="dt">newdata =</span> d)
<span class="kw">head</span>(sport.pred)</code></pre></div>
<pre><code>         1          2          3          4 
0.61251214 0.73426878 0.16004519 0.70335574 
         5          6 
0.07318189 0.34841147 </code></pre>
<p>Or notre variable Ã©tudiÃ©e est de type binaire. Nous devons donc transformer nos probabilitÃ©s prÃ©dites en une variable du type Â«Â oui / nonÂ Â». Usuellement, les probabilitÃ©s prÃ©dites seront rÃ©unies en deux groupes selon quâ€™elles soient supÃ©rieures ou infÃ©rieures Ã  la moitiÃ©. La matrice de confusion est alors Ã©gale Ã Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(sport.pred &gt;<span class="st"> </span><span class="fl">0.5</span>, d$sport)</code></pre></div>
<pre><code>       
         Non  Oui
  FALSE 1074  384
  TRUE   199  336</code></pre>
<p>Nous avons donc 583 (384+199) prÃ©dictions incorrectes sur un total de 1993, soit un taux de mauvais classement de 29,3Â %.</p>
</div>
<div id="regression-logistique_selection-de-modeles" class="section level2">
<h2>SÃ©lection de modÃ¨les</h2>
<p>Il est toujours tentant lorsque lâ€™on recherche les facteurs associÃ©s Ã  un phÃ©nomÃ¨ne dâ€™inclure un nombre important de variables explicatives potentielles dans un mmodÃ¨le logistique. Cependant, un tel modÃ¨le nâ€™est pas forcÃ©ment le plus efficace et certaines variables nâ€™auront probablement pas dâ€™effet significatif sur la variable dâ€™intÃ©rÃªt.</p>
<p>La technique de <dfn>sÃ©lection descendante pas Ã  pas</dfn><dfn data-index="pas Ã  pas, sÃ©lection descendante"/> est une approche visant Ã  amÃ©liorer son modÃ¨le explicatif<a href="#regression-logistique_fn2" class="footnoteRef" id="regression-logistique_fnref2"><sup>2</sup></a>. On rÃ©alise un premier modÃ¨le avec toutes les variables spÃ©cifiÃ©es, puis on regarde sâ€™il est possible dâ€™amÃ©liorer le modÃ¨le en supprimant une des variables du modÃ¨le. Si plusieurs variables permettent dâ€™amÃ©liorer le modÃ¨le, on supprimera la variable dont la suppression amÃ©liorera le plus le modÃ¨le. Puis on recommence le mÃªme procÃ©dÃ© pour voir si la suppression dâ€™une seconde variable peut encore amÃ©liorer le modÃ¨le et ainsi de suite. Lorsque le modÃ¨le ne peut plus Ãªtre amÃ©liorer par la suppresion dâ€™une variable, on sâ€™arrÃªte.</p>
<p>Il faut Ã©galement dÃ©finir un critÃ¨re pour dÃ©terminer la qualitÃ© dâ€™un modÃ¨le. Lâ€™un des plus utilisÃ©s est le <dfn lang="en">Akaike Information Criterion</dfn> ou <dfn>AIC</dfn>. Plus lâ€™AIC sera faible, meilleure sera le modÃ¨le.</p>
<p>La fonction <code data-pkg="stats">step</code> permet justement de sÃ©lectionner le meilleur modÃ¨le par une procÃ©dure pas Ã  pas descendante basÃ©e sur la minimisation de lâ€™AIC. La fonction affiche Ã  lâ€™Ã©cran les diffÃ©rentes Ã©tapes de la sÃ©lection et renvoie le modÃ¨le final.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg2 &lt;-<span class="st"> </span><span class="kw">step</span>(reg)</code></pre></div>
<pre><code>Start:  AIC=2235.94
sport ~ sexe + grpage + etud + relig + heures.tv

            Df Deviance    AIC
- relig      5   2210.2 2230.2
&lt;none&gt;           2205.9 2235.9
- heures.tv  1   2219.3 2247.3
- sexe       1   2223.2 2251.2
- grpage     3   2258.7 2282.7
- etud       4   2329.6 2351.6

Step:  AIC=2230.15
sport ~ sexe + grpage + etud + heures.tv

            Df Deviance    AIC
&lt;none&gt;           2210.2 2230.2
- heures.tv  1   2223.7 2241.7
- sexe       1   2226.1 2244.1
- grpage     3   2260.3 2274.3
- etud       4   2333.8 2345.8</code></pre>
<p>Le modÃ¨le initial a un AIC de 2235,9. Ã€ la premiÃ¨re Ã©tape, il apparait que la suppression de la variable religion permet diminuer lâ€™AIC Ã  2230,2. Lors de la seconde Ã©tape, toute suppression dâ€™une autre variable ferait augmenter lâ€™AIC. La procÃ©dure sâ€™arrÃªte donc.</p>
</div>
<div id="regression-logistique_regression-logistique-multinomiale" class="section level2">
<h2>RÃ©gression logistique multinomiale</h2>
<p>La <dfn>rÃ©gression logistique multinomiale</dfn> est une extension de la rÃ©gression logistique aux variables qualitatives Ã  trois modalitÃ©s ou plus. Dans ce cas de figure, chaque modalitÃ© de la variable dâ€™intÃ©rÃªt sera comparÃ©e Ã  la modalitÃ© de rÃ©ference. Les <em>odds ratio</em> seront donc exprimÃ©s par rapport Ã  cette derniÃ¨re.</p>
<p>Nous allons prendre pour exemple la variable <em>trav.satisf</em>, Ã  savoir la satisfaction ou lâ€™insatisfaction au travail.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">freq</span>(d$trav.satisf)</code></pre></div>
<pre><code>                 n    % val%
Satisfaction   480 24.0 45.8
Insatisfaction 117  5.9 11.2
Equilibre      451 22.6 43.0
NA             952 47.6   NA</code></pre>
<p>Nous allons choisir comme modalitÃ© de rÃ©fÃ©rence la position intermÃ©diaire, Ã  savoir lâ€™Â«Â Ã©quilibreÂ Â».</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$trav.satisf &lt;-<span class="st"> </span><span class="kw">relevel</span>(d$trav.satisf, <span class="st">"Equilibre"</span>)</code></pre></div>
<p>Enfin, nous allons aussi en profiter pour raccourcir les Ã©tiquettes de la variable <em>trav.imp</em>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">levels</span>(d$trav.imp) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Le plus"</span>, <span class="st">"Aussi"</span>, <span class="st">"Moins"</span>, 
  <span class="st">"Peu"</span>)</code></pre></div>
<p>Pour calculer un modÃ¨le logistique multinomial, nous allons utiliser la fonction <code data-pkg="nnet">multinom</code> de lâ€™extension <code class="pkg">nnet</code><a href="#regression-logistique_fn3" class="footnoteRef" id="regression-logistique_fnref3"><sup>3</sup></a>. La syntaxe de <code data-pkg="nnet">multinom</code> est similaire Ã  celle de <code data-pkg="stats">glm</code>, le paramÃ¨tre <code>family</code> en moins.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(nnet)
regm &lt;-<span class="st"> </span><span class="kw">multinom</span>(trav.satisf ~<span class="st"> </span>sexe +<span class="st"> </span>etud +<span class="st"> </span>grpage +<span class="st"> </span>
<span class="st">  </span>trav.imp, <span class="dt">data =</span> d)</code></pre></div>
<pre><code># weights:  39 (24 variable)
initial  value 1151.345679 
iter  10 value 977.348901
iter  20 value 969.849189
iter  30 value 969.522965
final  value 969.521855 
converged</code></pre>
<p>Comme pour la rÃ©gression logistique, il est possible de rÃ©aliser une sÃ©lection pas Ã  pas descendanteÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">regm2 &lt;-<span class="st"> </span><span class="kw">step</span>(regm)</code></pre></div>
<pre><code>Start:  AIC=1987.04
trav.satisf ~ sexe + etud + grpage + trav.imp

trying - sexe 
# weights:  36 (22 variable)
initial  value 1151.345679 
iter  10 value 978.538886
iter  20 value 970.453555
iter  30 value 970.294459
final  value 970.293988 
converged
trying - etud 
# weights:  27 (16 variable)
initial  value 1151.345679 
iter  10 value 987.907714
iter  20 value 981.785467
iter  30 value 981.762800
final  value 981.762781 
converged
trying - grpage 
# weights:  30 (18 variable)
initial  value 1151.345679 
iter  10 value 979.485430
iter  20 value 973.175923
final  value 973.172389 
converged
trying - trav.imp 
# weights:  30 (18 variable)
initial  value 1151.345679 
iter  10 value 998.803976
iter  20 value 994.417973
iter  30 value 994.378914
final  value 994.378869 
converged
           Df      AIC
- grpage   18 1982.345
- sexe     22 1984.588
&lt;none&gt;     24 1987.044
- etud     16 1995.526
- trav.imp 18 2024.758
# weights:  30 (18 variable)
initial  value 1151.345679 
iter  10 value 979.485430
iter  20 value 973.175923
final  value 973.172389 
converged

Step:  AIC=1982.34
trav.satisf ~ sexe + etud + trav.imp

trying - sexe 
# weights:  27 (16 variable)
initial  value 1151.345679 
iter  10 value 976.669670
iter  20 value 973.928385
iter  20 value 973.928377
iter  20 value 973.928377
final  value 973.928377 
converged
trying - etud 
# weights:  18 (10 variable)
initial  value 1151.345679 
iter  10 value 988.413720
final  value 985.085797 
converged
trying - trav.imp 
# weights:  21 (12 variable)
initial  value 1151.345679 
iter  10 value 1001.517287
final  value 998.204280 
converged
           Df      AIC
- sexe     16 1979.857
&lt;none&gt;     18 1982.345
- etud     10 1990.172
- trav.imp 12 2020.409
# weights:  27 (16 variable)
initial  value 1151.345679 
iter  10 value 976.669670
iter  20 value 973.928385
iter  20 value 973.928377
iter  20 value 973.928377
final  value 973.928377 
converged

Step:  AIC=1979.86
trav.satisf ~ etud + trav.imp

trying - etud 
# weights:  15 (8 variable)
initial  value 1151.345679 
iter  10 value 986.124104
final  value 986.034023 
converged
trying - trav.imp 
# weights:  18 (10 variable)
initial  value 1151.345679 
iter  10 value 1000.225356
final  value 998.395273 
converged
           Df      AIC
&lt;none&gt;     16 1979.857
- etud      8 1988.068
- trav.imp 10 2016.791</code></pre>
<p>La plupart des fonctions vues prÃ©cÃ©demment fonctionnentÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(regm2)</code></pre></div>
<pre><code>Call:
multinom(formula = trav.satisf ~ etud + trav.imp, data = d)

Coefficients:
               (Intercept) etudSecondaire
Satisfaction    -0.1110996     0.04916210
Insatisfaction  -1.1213760    -0.09737523
               etudTechnique/Professionnel
Satisfaction                    0.07793241
Insatisfaction                  0.08392603
               etudSupÃ©rieur      etudNA
Satisfaction      0.69950061 -0.53841577
Insatisfaction    0.07755307 -0.04364055
               trav.impAussi trav.impMoins
Satisfaction       0.2578973    -0.1756206
Insatisfaction    -0.2279774    -0.5330349
               trav.impPeu
Satisfaction    -0.5995051
Insatisfaction   1.3401509

Std. Errors:
               (Intercept) etudSecondaire
Satisfaction     0.4520902      0.2635573
Insatisfaction   0.6516992      0.3999875
               etudTechnique/Professionnel
Satisfaction                     0.2408483
Insatisfaction                   0.3579684
               etudSupÃ©rieur    etudNA
Satisfaction       0.2472571 0.5910993
Insatisfaction     0.3831110 0.8407592
               trav.impAussi trav.impMoins
Satisfaction       0.4260623     0.4115818
Insatisfaction     0.6213781     0.5941721
               trav.impPeu
Satisfaction     0.5580115
Insatisfaction   0.6587383

Residual Deviance: 1947.857 
AIC: 1979.857 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">odds.ratio</span>(regm2)</code></pre></div>
<pre><code>                                              OR
Satisfaction/(Intercept)                   0.895
Satisfaction/etudSecondaire                1.050
Satisfaction/etudTechnique/Professionnel   1.081
Satisfaction/etudSupÃ©rieur                 2.013
Satisfaction/etudNA                        0.584
Satisfaction/trav.impAussi                 1.294
Satisfaction/trav.impMoins                 0.839
Satisfaction/trav.impPeu                   0.549
Insatisfaction/(Intercept)                 0.326
Insatisfaction/etudSecondaire              0.907
Insatisfaction/etudTechnique/Professionnel 1.088
Insatisfaction/etudSupÃ©rieur               1.081
Insatisfaction/etudNA                      0.957
Insatisfaction/trav.impAussi               0.796
Insatisfaction/trav.impMoins               0.587
Insatisfaction/trav.impPeu                 3.820
                                           2.5 %
Satisfaction/(Intercept)                   0.369
Satisfaction/etudSecondaire                0.627
Satisfaction/etudTechnique/Professionnel   0.674
Satisfaction/etudSupÃ©rieur                 1.240
Satisfaction/etudNA                        0.183
Satisfaction/trav.impAussi                 0.561
Satisfaction/trav.impMoins                 0.374
Satisfaction/trav.impPeu                   0.184
Insatisfaction/(Intercept)                 0.091
Insatisfaction/etudSecondaire              0.414
Insatisfaction/etudTechnique/Professionnel 0.539
Insatisfaction/etudSupÃ©rieur               0.510
Insatisfaction/etudNA                      0.184
Insatisfaction/trav.impAussi               0.236
Insatisfaction/trav.impMoins               0.183
Insatisfaction/trav.impPeu                 1.050
                                           97.5 %
Satisfaction/(Intercept)                    2.171
Satisfaction/etudSecondaire                 1.761
Satisfaction/etudTechnique/Professionnel    1.733
Satisfaction/etudSupÃ©rieur                  3.268
Satisfaction/etudNA                         1.859
Satisfaction/trav.impAussi                  2.983
Satisfaction/trav.impMoins                  1.880
Satisfaction/trav.impPeu                    1.639
Insatisfaction/(Intercept)                  1.169
Insatisfaction/etudSecondaire               1.987
Insatisfaction/etudTechnique/Professionnel  2.194
Insatisfaction/etudSupÃ©rieur                2.290
Insatisfaction/etudNA                       4.974
Insatisfaction/trav.impAussi                2.691
Insatisfaction/trav.impMoins                1.880
Insatisfaction/trav.impPeu                 13.891
                                                  p
Satisfaction/(Intercept)                   0.805878
Satisfaction/etudSecondaire                0.852027
Satisfaction/etudTechnique/Professionnel   0.746260
Satisfaction/etudSupÃ©rieur                 0.004669
Satisfaction/etudNA                        0.362363
Satisfaction/trav.impAussi                 0.544977
Satisfaction/trav.impMoins                 0.669600
Satisfaction/trav.impPeu                   0.282661
Insatisfaction/(Intercept)                 0.085306
Insatisfaction/etudSecondaire              0.807660
Insatisfaction/etudTechnique/Professionnel 0.814635
Insatisfaction/etudSupÃ©rieur               0.839581
Insatisfaction/etudNA                      0.958603
Insatisfaction/trav.impAussi               0.713701
Insatisfaction/trav.impMoins               0.369663
Insatisfaction/trav.impPeu                 0.041909
                                             
Satisfaction/(Intercept)                     
Satisfaction/etudSecondaire                  
Satisfaction/etudTechnique/Professionnel     
Satisfaction/etudSupÃ©rieur                 **
Satisfaction/etudNA                          
Satisfaction/trav.impAussi                   
Satisfaction/trav.impMoins                   
Satisfaction/trav.impPeu                     
Insatisfaction/(Intercept)                 . 
Insatisfaction/etudSecondaire                
Insatisfaction/etudTechnique/Professionnel   
Insatisfaction/etudSupÃ©rieur                 
Insatisfaction/etudNA                        
Insatisfaction/trav.impAussi                 
Insatisfaction/trav.impMoins                 
Insatisfaction/trav.impPeu                 * 
---
Signif. codes:  
0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
<p>De mÃªme, il est possible de calculer la matrice de confusionÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(<span class="kw">predict</span>(regm2, <span class="dt">newdata =</span> d), d$trav.satisf)</code></pre></div>
<pre><code>                
                 Equilibre Satisfaction
  Equilibre            262          211
  Satisfaction         171          258
  Insatisfaction        18           11
                
                 Insatisfaction
  Equilibre                  49
  Satisfaction               45
  Insatisfaction             23</code></pre>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="regression-logistique_fn1"><p>Pour plus de dÃ©tails, voir <a href="http://www.spc.univ-lyon1.fr/polycop/odds%20ratio.htm">http://www.spc.univ-lyon1.fr/polycop/odds%20ratio.htm</a>.<a href="#regression-logistique_fnref1">â†©</a></p></li>
<li id="regression-logistique_fn2"><p>Il existe Ã©galement des mÃ©thodes de <em>sÃ©lection ascendante pas Ã  pas</em>, mais nous les aborderons pas ici.<a href="#regression-logistique_fnref2">â†©</a></p></li>
<li id="regression-logistique_fn3"><p>Une alternative est dâ€™avoir recours Ã  lâ€™extension <code class="pkg">mlogit</code> que nous nâ€™aborderons pas ici. Voir <a href="http://www.ats.ucla.edu/stat/r/dae/mlogit.htm" class="uri">http://www.ats.ucla.edu/stat/r/dae/mlogit.htm</a> (en anglais) pour plus de dÃ©tails.<a href="#regression-logistique_fnref3">â†©</a></p></li>
</ol>
</div>

</article>
<article id="analyse-en-composantes-principales">

<div class="fluid-row" id="analyse-en-composantes-principales_header">


<h1 class="title">Analyse en composantes principales (ACP)</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="analyse-des-correspondances-multiples">

<div class="fluid-row" id="analyse-des-correspondances-multiples_header">


<h1 class="title">Analyse des correspondances multiples (ACM)</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#analyse-des-correspondances-multiples_principe-general">Principe gÃ©nÃ©ral</a></li>
<li><a href="#analyse-des-correspondances-multiples_acm-avec-ade4">ACM avec ade4</a></li>
<li><a href="#analyse-des-correspondances-multiples_factominer">ACM avec FactoMineR</a></li>
</ul>
</div>

<div class="note">
<p>La version originale de ce chapitre a Ã©tÃ© Ã©crite par Joseph Larmarange dans le cadre du support de cours <a href="https://github.com/larmarange/intro-r/tree/CoursM2">Introduction Ã  lâ€™analyse dâ€™enquÃªtes avec R</a>.</p>
</div>
<p>Il existe plusieurs techniques dâ€™<dfn>analyse factorielle</dfn><dfn data-index="factorielle, analyse"/> dont les plus courantes sont lâ€™<dfn>analyse en composante principale</dfn> (<dfn>ACP</dfn>) portant sur des <dfn data-index="variable quantitative">variables quantitatives</dfn><dfn data-index="quantitative, variable"/>, lâ€™<dfn>analyse factorielle des correspondances</dfn><dfn data-index="correspondances, analyse factorielle"/> (<dfn>AFC</dfn>) portant sur deux <dfn data-index="variable qualitative">variables qualitatives</dfn><dfn data-index="qualitative, variable"/> et lâ€™<dfn>analyse des correspondances multiples</dfn> (<dfn>ACM</dfn>) portant sur plusieurs variables qualitatives (il sâ€™agit dâ€™une extension de lâ€™AFC). Pour combiner des variables Ã  la fois quantitatives et qualitatives, on pourra avoir recours Ã  lâ€™<dfn>analyse mixte de Hill et Smith</dfn><dfn data-index="Hill et Smith, analyse mixte"/>.</p>
<p>Bien que ces techniques soient disponibles dans les extensions standards de <strong>R</strong>, il est souvent prÃ©fÃ©rable dâ€™avoir recours Ã  deux autres extensions plus complÃ¨tes, <code class="pkg">ade4</code> et <code class="pkg">FactoMineR</code>, chacune ayant ses avantages et des possibilitÃ©s diffÃ©rentes. Voici les fonctions les plus frÃ©quentesÂ :</p>
<table style="width:133%;">
<colgroup>
<col width="13%"/>
<col width="16%"/>
<col width="27%"/>
<col width="59%"/>
<col width="15%"/>
</colgroup>
<thead>
<tr class="header">
<th align="left">Analyse</th>
<th align="left">Variables</th>
<th align="center">Fonction standard</th>
<th align="center">Fonction <code class="pkg">ade4</code></th>
<th align="center">Fonctions <code class="pkg">FactoMineR</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ACP</td>
<td align="left">plusieurs variables quantitatives</td>
<td align="center"><code data-pkg="stats">princomp</code></td>
<td align="center"><code data-pkg="ade4">dudi.pca</code></td>
<td align="center"><code data-pkg="FactoMineR">PCA</code></td>
</tr>
<tr class="even">
<td align="left">AFC</td>
<td align="left">deux variables qualitatives</td>
<td align="center"><code data-pkg="MASS">corresp</code></td>
<td align="center"><code data-pkg="ade4">dudi.coa</code></td>
<td align="center"><code data-pkg="FactoMineR">CA</code></td>
</tr>
<tr class="odd">
<td align="left">ACM</td>
<td align="left">plusieurs variables qualitatives</td>
<td align="center"><code data-pkg="MASS">mca</code></td>
<td align="center"><code data-pkg="ade4">dudi.acm</code></td>
<td align="center"><code data-pkg="FactoMineR">MCA</code></td>
</tr>
<tr class="even">
<td align="left">Analyse mixte de Hill et Smith</td>
<td align="left">plusieurs variables quantitatives et/ou qualitatives</td>
<td align="center">â€”</td>
<td align="center"><code data-pkg="ade4">dudi.mix</code></td>
<td align="center">â€”</td>
</tr>
</tbody>
</table>
<p>Dans la suite de ce chapitre, nous nâ€™arboderons que lâ€™analyse des correspondances multiples (ACM).</p>
<div class="note">
<p>On trouvera Ã©galement de nombreux supports de cours en franÃ§ais sur lâ€™analyse factorielle sur le site de FranÃ§ois Gilles CarpentierÂ : <a href="http://geai.univ-brest.fr/~carpenti/" class="uri">http://geai.univ-brest.fr/~carpenti/</a>.</p>
</div>
<div id="analyse-des-correspondances-multiples_principe-general" class="section level2">
<h2>Principe gÃ©nÃ©ral</h2>
<p>Lâ€™analyse des correspondances multiples est une technique descriptive visant Ã  rÃ©sumer lâ€™information contenu dans un grand nombre de variables afin de faciliter lâ€™interprÃ©tention des corrÃ©lations existantes entre ces diffÃ©rentes variables. On cherche Ã  savoir quelles sont les modalitÃ©s corrÃ©lÃ©es entre elles.</p>
<p>Lâ€™idÃ©e gÃ©nÃ©rale est la suivante<a href="#analyse-des-correspondances-multiples_fn1" class="footnoteRef" id="analyse-des-correspondances-multiples_fnref1"><sup>1</sup></a>. Lâ€™ensemble des individus peut Ãªtre reprÃ©sentÃ© dans un espace Ã  plusieurs dimensions oÃ¹ chaque axe reprÃ©sente les diffÃ©rentes variables utilisÃ©es pour dÃ©crire chaque individu. Plus prÃ©cisÃ©ment, pour chaque variable qualitative, il y a autant dâ€™axes que de modalitÃ©s moins un. Ainsi il faut trois axes pour dÃ©crire une variable Ã  quatre modalitÃ©s. Un tel nuage de points est aussi difficile Ã  interprÃ©ter que de lire directement le fichier de donnÃ©es. On ne voit pas les corrÃ©lations quâ€™il peut y avoir entre modalitÃ©s, par exemple quâ€™aller au cinÃ©ma est plus frÃ©quent chez les personnes habitant en milieu urbain. Afin de mieux reprÃ©senter ce nuage de points, on va procÃ©der Ã  un changement de systÃ¨mes de coordonnÃ©es. Les individus seront dÃ¨s lors projetÃ©s et reprÃ©sentÃ©s sur un nouveau systÃ¨me dâ€™axe. Ce nouveau systÃ¨me dâ€™axes est choisis de telle maniÃ¨re que la majoritÃ© des variations soit concentrÃ©es sur les premiers axes. Les deux-trois premiers axes permettront dâ€™expliquer la majoritÃ© des diffÃ©rences observÃ©es dans lâ€™Ã©chantillon, les autres axes nâ€™apportant quâ€™une faible part additionnelle dâ€™information. DÃ¨s lors, lâ€™analyse pourra se concentrer sur ses premiers axes qui constitueront un bon rÃ©sumÃ© des variations observables dans lâ€™Ã©chantillon.</p>
<p>Avant toute ACM, il est indispensable de rÃ©aliser une analyse prÃ©liminaire de chaque variable, afin de voir si toutes les classes sont aussi bien reprÃ©sentÃ©es ou sâ€™il existe un dÃ©sÃ©quilibre. Lâ€™ACM est sensible aux effectifs faibles, aussi il est prÃ©fÃ©rable de regrouper les classes peu reprÃ©sentÃ©es le cas Ã©chÃ©ant.</p>
</div>
<div id="analyse-des-correspondances-multiples_acm-avec-ade4" class="section level2">
<h2>ACM avec ade4</h2>
<p>Si lâ€™extension <code class="pkg">ade4</code> nâ€™est pas prÃ©sente sur votre PC, il vous faut lâ€™installerÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"ade4"</span>, <span class="dt">dep =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>Dans tous les cas, il faut penser Ã  la charger en mÃ©moireÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ade4)</code></pre></div>
<p>Comme prÃ©cÃ©demment, nous utiliserons le fichier de donnÃ©es <code>hdv2003</code> fourni avec lâ€™extension <code class="pkg">questionr</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<p>En premier lieu, comme dans le <a href="#regression-logistique">chapitre sur la rÃ©gression logistique</a>, nous allons crÃ©er une variable groupe dâ€™Ã¢ges et regrouper les modalitÃ©s de la variable Â«Â niveau dâ€™Ã©tudeÂ Â».</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$grpage &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">16</span>, <span class="dv">25</span>, <span class="dv">45</span>, <span class="dv">65</span>, <span class="dv">93</span>), <span class="dt">right =</span> <span class="ot">FALSE</span>, 
  <span class="dt">include.lowest =</span> <span class="ot">TRUE</span>)
d$etud &lt;-<span class="st"> </span>d$nivetud
<span class="kw">levels</span>(d$etud) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Primaire"</span>, <span class="st">"Primaire"</span>, <span class="st">"Primaire"</span>, 
  <span class="st">"Secondaire"</span>, <span class="st">"Secondaire"</span>, <span class="st">"Technique/Professionnel"</span>, 
  <span class="st">"Technique/Professionnel"</span>, <span class="st">"SupÃ©rieur"</span>)</code></pre></div>
<p>Ensuite, nous allons crÃ©er un tableau de donnÃ©es ne contenant que les variables que nous souhaitons prendre en compte pour notre analyse factorielle.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d2 &lt;-<span class="st"> </span>d[, <span class="kw">c</span>(<span class="st">"grpage"</span>, <span class="st">"sexe"</span>, <span class="st">"etud"</span>, <span class="st">"peche.chasse"</span>, 
  <span class="st">"cinema"</span>, <span class="st">"cuisine"</span>, <span class="st">"bricol"</span>, <span class="st">"sport"</span>, <span class="st">"lecture.bd"</span>)]</code></pre></div>
<p>Le calcul de lâ€™ACM se fait tout simplement avec la fonction <code>dudi.acm</code>{data-pkg=â€œade4â€&gt;.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">acm &lt;-<span class="st"> </span><span class="kw">dudi.acm</span>(d2)</code></pre></div>
<p>Par dÃ©faut, la fonction affichera le graphique des <dfn data-index="valeur propre, ACM">valeurs propres</dfn> de chaque axe (nous y reviendrons) et vous demandera le nombre dâ€™axes que vous souhaitez conserver dans les rÃ©sultats. Le plus souvent, cinq axes seront largement plus que suffisants. Vous pouvez Ã©galement Ã©viter cette Ã©tape en indiquant directement Ã  <code data-pkg="ade4">dudi.acm</code> de vous renvoyer les cinq premiers axes ainsiÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">acm &lt;-<span class="st"> </span><span class="kw">dudi.acm</span>(d2, <span class="dt">scannf =</span> <span class="ot">FALSE</span>, <span class="dt">nf =</span> <span class="dv">5</span>)</code></pre></div>
<p>Le graphique des valeurs propres peut Ãªtre reproduit avec <code data-pkg="ade4" data-rdoc="scatter">screeplot</code>Â :</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">screeplot</span>(acm)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-8-1.png" title="" alt="" width="1050"/>
<figcaption>
Valeurs propres ou inerties de chaque axe
</figcaption>
</figure>
<p>Les mÃªmes valeurs pour les premiers axes sâ€™obtiennent Ã©galement avec <code data-pkg="ade4" data-rdoc="dudi">summary</code><a href="#analyse-des-correspondances-multiples_fn2" class="footnoteRef" id="analyse-des-correspondances-multiples_fnref2"><sup>2</sup></a>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(acm)</code></pre></div>
<pre><code>Class: acm dudi
Call: dudi.acm(df = d2, scannf = FALSE, nf = 5)

Total inertia: 1.451

Eigenvalues:
    Ax1     Ax2     Ax3     Ax4     Ax5 
 0.2474  0.1672  0.1309  0.1263  0.1176 

Projected inertia (%):
    Ax1     Ax2     Ax3     Ax4     Ax5 
 17.055  11.525   9.022   8.705   8.109 

Cumulative projected inertia (%):
    Ax1   Ax1:2   Ax1:3   Ax1:4   Ax1:5 
  17.06   28.58   37.60   46.31   54.42 

(Only 5 dimensions (out of 15) are shown)</code></pre>
<p>Lâ€™<dfn>inertie</dfn> totale est de 1,451 et lâ€™axe 1 en explique 0,1474 soit 17Â %. Lâ€™inertie projetÃ©e cumulÃ©e nous indique que les deux premiers axes expliquent Ã  eux seuls 29Â % des variations observÃ©es dans notre Ã©chantillon.</p>
<p>Pour comprendre la signification des diffÃ©rents axes, il importe dâ€™identifier quelles sont les variables/ modalitÃ©s qui contribuent le plus Ã  chaque axe. Une premiÃ¨re reprÃ©sentation graphique est le <dfn>cercle de corrÃ©lation</dfn><dfn data-index="corrÃ©lation, cercle"/> des modalitÃ©s. Pour cela, on aura recours Ã  <code data-pkg="ade4">s.corcicle</code>. On indiquera dâ€™abord <code>acm$co</code> si lâ€™on souhaite reprÃ©senter les modalitÃ©s ou <code>acm$li</code> si lâ€™on souhaite reprÃ©senter les individus. Les deux chiffres suivant indiquent les deux axes que lâ€™on souhaite afficher (dans le cas prÃ©sent les deux premiers axes). Enfin, le paramÃ¨tre <code>clabel</code> permet de modifier la taille des Ã©tiquettes.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">s.corcircle</span>(acm$co, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dt">clabel =</span> <span class="fl">0.7</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-10-1.png" title="" alt="" width="1050"/>
<figcaption>
Cercle de corrÃ©lations des modalitÃ©s sur les deux premiers axes
</figcaption>
</figure>
<p>On pourra avoir Ã©galement recours Ã  <code data-pkg="ade4" data-rdoc="dudi.acm">boxplot</code> pour visualiser comment se rÃ©partissent les modalitÃ©s de chaque variable sur un axe donnÃ©<a href="#analyse-des-correspondances-multiples_fn3" class="footnoteRef" id="analyse-des-correspondances-multiples_fnref3"><sup>3</sup></a>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(acm)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-11-1.png" title="" alt="" width="1050"/>
<figcaption>
RÃ©partition des modalitÃ©s selon le premier axe
</figcaption>
</figure>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(acm, <span class="dv">2</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-12-1.png" title="" alt="" width="1050"/>
<figcaption>
RÃ©partition des modalitÃ©s selon le second axe
</figcaption>
</figure>
<p>Le tableau <code>acm$cr</code> contient les rapports de corrÃ©lation (variant de 0 Ã  1) entre les variables et les axes choisis au dÃ©part de lâ€™ACM. Pour reprÃ©senter graphiquement ces rapports, utiliser la fonction <code data-pkg="graphics">barplot</code> ainsiÂ : <code>barplot(acm$cr[,num],names.arg=row.names( acm$cr),las=2)</code> oÃ¹ <code>num</code> est le numÃ©ro de lâ€™axe Ã  reprÃ©senter. Pour lâ€™interprÃ©tation des axes, se concentrer sur les variables les plus structurantes, câ€™est-Ã -dire dont le rapport de corrÃ©lation est le plus proche de 1.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))
for (i in <span class="dv">1</span>:<span class="dv">4</span>) <span class="kw">barplot</span>(acm$cr[, i], <span class="dt">names.arg =</span> <span class="kw">row.names</span>(acm$cr), 
  <span class="dt">las =</span> <span class="dv">2</span>, <span class="dt">main =</span> <span class="kw">paste</span>(<span class="st">"Axe"</span>, i))</code></pre></div>
<p><img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-13-1.png" title="" alt="" width="1050"/></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>))</code></pre></div>
<figcaption>
Rapports de corrÃ©lation des variables sur les 4 premiers axes
</figcaption>
</figure>
<div class="note">
<p>Le paramÃ¨tre <code>mfrow</code> de la fonction <code data-pkg="graphics">par</code> permet dâ€™indiquer Ã  <strong>R</strong> que lâ€™on souhaite afficher plusieurs graphiques sur une seule et mÃªme fenÃªtre, plus prÃ©cisÃ©ment que lâ€™on souhaite diviser la fenÃªtre en deux lignes et deux colonnes.</p>
<p>Dans lâ€™exemple prÃ©cÃ©dent, aprÃ¨s avoir produit notre graphique, nous avons rÃ©initilisÃ© cette valeur Ã  <code>c(1, 1)</code> (un seul graphique par fenÃªtre) pour ne pas affecter les prochains graphiques que nous allons produire.</p>
</div>
<p>Pour reprÃ©senter, les modalitÃ©s dans le <dfn>plan factoriel</dfn><dfn data-index="factoriel, plan"/>, on utilisera la fonction <code data-pkg="ade4">s.label</code>. Par dÃ©faut, les deux premiers axes sont reprÃ©sentÃ©s.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">s.label</span>(acm$co, <span class="dt">clabel =</span> <span class="fl">0.7</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-14-1.png" title="" alt="" width="1050"/>
<figcaption>
RÃ©partition des modalitÃ©s selon les deux premiers axes
</figcaption>
</figure>
<p>Il est bien sur possible de prÃ©ciser les axes Ã  reprÃ©senter. Lâ€™argument <code>boxes</code> permet quant Ã  lui dâ€™indiquer si lâ€™on souhaite tracer une boÃ®te pour chaque modalitÃ©.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">s.label</span>(acm$co, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dt">clabel =</span> <span class="fl">0.7</span>, <span class="dt">boxes =</span> <span class="ot">FALSE</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-15-1.png" title="" alt="" width="1050"/>
<figcaption>
RÃ©partition des modalitÃ©s selon les axes 3 et 4
</figcaption>
</figure>
<p>Bien entendu, on peut Ã©galement reprÃ©senter les individus. En indiquant <code>clabel=0</code> (une taille nulle pour les Ã©tiquettes), <code data-pkg="ade4">s.label</code> remplace chaque observation par un symbole qui peut Ãªtre spÃ©cifiÃ© avec <code>pch</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">s.label</span>(acm$li, <span class="dt">clabel =</span> <span class="dv">0</span>, <span class="dt">pch =</span> <span class="dv">17</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-16-1.png" title="" alt="" width="1050"/>
<figcaption>
RÃ©partition des individus selon les deux premiers axes
</figcaption>
</figure>
<div class="note">
<p>Lâ€™agument <code>pch</code> permet de spÃ©cifier le symbole Ã  utiliser. Il peut prendre soit un nombre entier compris entre 0 et 25, soit un charactÃ¨re textuel.</p>
<p><img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-17-1.png" title="" alt="" width="1050"/></p>
</div>
<div class="note">
<p>Lorsque lâ€™on rÃ©alise une ACM, il nâ€™est pas rare que plusieurs observations soient identiques, câ€™est-Ã -dire correspondent Ã  la mÃªme combinaison de modalitÃ©s. DÃ¨s lors, ces observations seront projetÃ©es sur le mÃªme point dans le plan factoriel. Une reprÃ©sentation classique des observations avec <code data-pkg="ade4">s.label</code> ne permettra pas de rendre compte les effectifs de chaque point.</p>
<p>Le package <code class="pkg">JLutils</code>, disponible seulement sur <strong><a href="https://github.com/larmarange/JLutils">GitHub</a></strong>, propose une fonction <code data-pkg="JLutils">s.freq</code> reprÃ©sentant chaque point par un carrÃ© proportionnel au nombre dâ€™individus.</p>
<p>Pour installer <code class="pkg">JLutils</code>, on aura recours au package <code class="pkg">devtools</code> et Ã  sa fonction <code data-pkg="devtools">install_github</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="kw">install_github</span>(<span class="st">"larmarange/JLutils"</span>)</code></pre></div>
<p>La fonction <code data-pkg="JLutils">s.freq</code> sâ€™emploie de maniÃ¨re similaire aux autres fonctions graphiques de <code class="pkg">ade4</code>. Le paramÃ¨tre <code>csize</code> permet dâ€™ajuster la taille des carrÃ©s.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(JLutils)
<span class="kw">s.freq</span>(acm$li)</code></pre></div>
<p><img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-19-1.png" title="" alt="" width="1050"/></p>
<p>Lâ€™interprÃ©tation est tout autre, nonÂ ?</p>
</div>
<div class="note">
<p>Gaston Sanchez propose un graphique amÃ©liorÃ© des modalitÃ©s dans le plan factoriel Ã  cette adresseÂ : <a href="http://rpubs.com/gaston/MCA" class="uri">http://rpubs.com/gaston/MCA</a>.</p>
</div>
<p>La fonction <code data-pkg="ade4">s.value</code> permet notamment de reprÃ©senter un troisiÃ¨me axe factoriel. Dans lâ€™exemple ci-aprÃ¨s, nous projettons les individus selon les deux premiers axes factoriels. La taille et la couleur des carrÃ©s dÃ©pendent pour leur part de la coordonnÃ©e des individus sur le troisiÃ¨me axe factoriel. Le paramÃ¨tre <code>csi</code> permet dâ€™ajuster la taille des carrÃ©s.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">s.value</span>(acm$li, acm$li[, <span class="dv">3</span>], <span class="dv">1</span>, <span class="dv">2</span>, <span class="dt">csi =</span> <span class="fl">0.5</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-20-1.png" title="" alt="" width="1050"/>
<figcaption>
RÃ©partition des individus selon les trois premiers axes
</figcaption>
</figure>
<p><code data-pkg="ade4">s.arrow</code> permet de reprÃ©senter les vecteurs variables ou les vecteurs individus sous la forme dâ€™une flÃ¨che allant de lâ€™origine du plan factoriel aux coordonnÃ©es des variables/individusÂ :</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">s.arrow</span>(acm$co, <span class="dt">clabel =</span> <span class="fl">0.7</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-21-1.png" title="" alt="" width="1050"/>
<figcaption>
Vecteurs des modalitÃ©s selon les deux premiers axes
</figcaption>
</figure>
<p><code data-pkg="ade4">s.hist</code> permet de reprÃ©senter des individus (ou des modalitÃ©s) sur le plan factoriel et dâ€™afficher leur distribution sur chaque axeÂ :</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">s.hist</span>(acm$li, <span class="dt">clabel =</span> <span class="dv">0</span>, <span class="dt">pch =</span> <span class="dv">15</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-22-1.png" title="" alt="" width="1050"/>
<figcaption>
Distribution des individus dans le plan factoriel
</figcaption>
</figure>
<p><code data-pkg="ade4">s.class</code> et <code data-pkg="ade4">s.chull</code> permettent de reprÃ©senter les diffÃ©rentes observations classÃ©es en plusieurs catÃ©gories. Cela permet notamment de projeter certaines variables.</p>
<p><code data-pkg="ade4">s.class</code> reprÃ©sente les observations par des points, lie chaque observation au barycentre de la modalitÃ© Ã  laquelle elle appartient et dessine une ellipse reprÃ©sentant la forme gÃ©nÃ©rale du nuage de pointsÂ :</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(RColorBrewer)
<span class="kw">s.class</span>(acm$li, d2$sexe, <span class="dt">col =</span> <span class="kw">brewer.pal</span>(<span class="dv">4</span>, <span class="st">"Set1"</span>))</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-23-1.png" title="" alt="" width="1050"/>
<figcaption>
Individus dans le plan factoriel selon le sexe (s.class)
</figcaption>
</figure>
<p><code data-pkg="ade4">s.chull</code> reprÃ©sente les barycentres de chaque catÃ©gorie et dessine des lignes de niveaux reprÃ©sentant la distribution des individus de cette catÃ©gorie. Les individus ne sont pas directement reprÃ©sentÃ©sÂ :</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">s.chull</span>(acm$li, d2$sexe, <span class="dt">col =</span> <span class="kw">brewer.pal</span>(<span class="dv">4</span>, <span class="st">"Set1"</span>))</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-24-1.png" title="" alt="" width="1050"/>
<figcaption>
Individus dans le plan factoriel selon le sexe (s.chull)
</figcaption>
</figure>
<div class="note">
<p>Il est prÃ©fÃ©rable de fournir une liste de couleurs (via le paramÃ¨tre <code>col</code>) pour rendre le graphique plus lisible. Si vous avez installÃ© lâ€™extension <code class="pkg">RColorBrewer</code>, vous pouvez utiliser les diffÃ©rentes palettes de couleurs proposÃ©es. Pour afficher les palettes disponibles, utilisez <code data-pkg="RColorBrewer" data-rdoc="RColorsBrewer">display.brewer.all</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(RColorBrewer)
<span class="kw">display.brewer.all</span>(<span class="dv">8</span>)</code></pre></div>
<p><img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-25-1.png" title="" alt="" width="1050"/></p>
<p>Pour obtenir une <dfn>palette de couleurs</dfn><dfn data-index="couleur, palette"/>, utilisez la fonction <code data-pkg="RColorBrewer" data-rdoc="RColorsBrewer">brewer.pal</code> avec les arguments <code>n</code> (nombre de couleurs demandÃ©es) et <code>pal</code>(nom de la palette de couleurs dÃ©sirÃ©e).</p>
<p>Pour plus dâ€™informations sur les palettes <em>Color Brewer</em>, voir <a href="http://colorbrewer2.org/" class="uri">http://colorbrewer2.org/</a>.</p>
</div>
<p>La variable catÃ©gorielle transmise Ã  <code data-pkg="ade4">s.class</code> ou <code data-pkg="ade4">s.chull</code> nâ€™est pas obligatoirement une des variables retenues pour lâ€™ACM. Il est tout Ã  fait possible dâ€™utiliser une autre variable. Par exempleÂ :</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">s.class</span>(acm$li, d$trav.imp, <span class="dt">col =</span> <span class="kw">brewer.pal</span>(<span class="dv">4</span>, <span class="st">"Set1"</span>))</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-26-1.png" title="" alt="" width="1050"/>
<figcaption>
Individus dans le plan factoriel selon lâ€™importance donnÃ©e au travail
</figcaption>
</figure>
<p>Les fonctions <code data-pkg="ade4">scatter</code> et <code data-pkg="ade4" data-rdoc="scatter">biplot</code> sont Ã©quivalentesÂ : elles appliquent <code data-pkg="ade4">s.class</code> Ã  chaque variable utilisÃ©e pour lâ€™ACM.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">scatter</span>(acm, <span class="dt">col =</span> <span class="kw">brewer.pal</span>(<span class="dv">4</span>, <span class="st">"Set1"</span>))</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-27-1.png" title="" alt="" width="1050"/>
<figcaption>
La fonction scatter appliquÃ©e au rÃ©sultat dâ€™une ACM
</figcaption>
</figure>
</div>
<div id="analyse-des-correspondances-multiples_factominer" class="section level2">
<h2>ACM avec FactoMineR</h2>
<p>Comme avec <code class="pkg">ade4</code>, il est nÃ©cessaire de prÃ©parer les donnÃ©es au prÃ©alable (voir section prÃ©cÃ©dente).</p>
<p>Lâ€™ACM se calcule avec la fonction <code data-pkg="FactoMineR">MCA</code>, lâ€™argument <code>ncp</code> permettant de choisir le nombre dâ€™axes Ã  retenirÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(FactoMineR)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">acm2 &lt;-<span class="st"> </span><span class="kw">MCA</span>(d2, <span class="dt">ncp =</span> <span class="dv">5</span>, <span class="dt">graph =</span> <span class="ot">FALSE</span>)
acm2</code></pre></div>
<pre><code>**Results of the Multiple Correspondence Analysis (MCA)**
The analysis was performed on 2000 individuals, described by 9 variables
*The results are available in the following objects:

   name             
1  "$eig"           
2  "$var"           
3  "$var$coord"     
4  "$var$cos2"      
5  "$var$contrib"   
6  "$var$v.test"    
7  "$ind"           
8  "$ind$coord"     
9  "$ind$cos2"      
10 "$ind$contrib"   
11 "$call"          
12 "$call$marge.col"
13 "$call$marge.li" 
   description                       
1  "eigenvalues"                     
2  "results for the variables"       
3  "coord. of the categories"        
4  "cos2 for the categories"         
5  "contributions of the categories" 
6  "v-test for the categories"       
7  "results for the individuals"     
8  "coord. for the individuals"      
9  "cos2 for the individuals"        
10 "contributions of the individuals"
11 "intermediate results"            
12 "weights of columns"              
13 "weights of rows"                 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">acm2$eig</code></pre></div>
<pre><code>       eigenvalue percentage of variance
dim 1  0.25757489              15.454493
dim 2  0.18363502              11.018101
dim 3  0.16164626               9.698776
dim 4  0.12871623               7.722974
dim 5  0.12135737               7.281442
dim 6  0.11213331               6.727999
dim 7  0.10959377               6.575626
dim 8  0.10340564               6.204338
dim 9  0.09867478               5.920487
dim 10 0.09192693               5.515616
dim 11 0.07501208               4.500725
dim 12 0.06679676               4.007805
dim 13 0.06002063               3.601238
dim 14 0.05832024               3.499215
dim 15 0.03785276               2.271166
       cumulative percentage of variance
dim 1                           15.45449
dim 2                           26.47259
dim 3                           36.17137
dim 4                           43.89434
dim 5                           51.17579
dim 6                           57.90378
dim 7                           64.47941
dim 8                           70.68375
dim 9                           76.60424
dim 10                          82.11985
dim 11                          86.62058
dim 12                          90.62838
dim 13                          94.22962
dim 14                          97.72883
dim 15                         100.00000</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(acm2$eig$eigenvalue)</code></pre></div>
<pre><code>[1] 1.666667</code></pre>
<p>En premier lieu, il apparait que lâ€™inertie totale obtenue avec <code data-pkg="FactoMineR">MCA</code> est diffÃ©rente de celle observÃ©e avec <code data-pkg="ade4">dudi.acm</code>. Cela est dÃ» Ã  un traitement diffÃ©rents des <dfn data-index="valeur manquante">valeurs manquantes</dfn><dfn data-index="manquante, valeur"/>. Alors que <code data-pkg="ade4">dudi.acm</code> exclu les valeurs manquantes, <code data-pkg="FactoMineR">MCA</code> les considÃ¨rent, par dÃ©faut, comme une modalitÃ© additionnelle. Pour calculer lâ€™ACM uniquement sur les individus nâ€™ayant pas de valeur manquante, on aura recours Ã  <code data-pkg="stats">complete.cases</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">acm2 &lt;-<span class="st"> </span><span class="kw">MCA</span>(d2[<span class="kw">complete.cases</span>(d2), ], <span class="dt">ncp =</span> <span class="dv">5</span>, <span class="dt">graph =</span> <span class="ot">FALSE</span>)
acm2$eig</code></pre></div>
<pre><code>       eigenvalue percentage of variance
dim 1  0.24790700              17.162792
dim 2  0.16758465              11.602014
dim 3  0.13042357               9.029324
dim 4  0.12595105               8.719688
dim 5  0.11338629               7.849820
dim 6  0.10976674               7.599236
dim 7  0.10060204               6.964757
dim 8  0.09802387               6.786268
dim 9  0.09283131               6.426783
dim 10 0.07673502               5.312425
dim 11 0.06609694               4.575942
dim 12 0.05950655               4.119684
dim 13 0.05562942               3.851267
       cumulative percentage of variance
dim 1                           17.16279
dim 2                           28.76481
dim 3                           37.79413
dim 4                           46.51382
dim 5                           54.36364
dim 6                           61.96287
dim 7                           68.92763
dim 8                           75.71390
dim 9                           82.14068
dim 10                          87.45311
dim 11                          92.02905
dim 12                          96.14873
dim 13                         100.00000</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(acm2$eig$eigenvalue)</code></pre></div>
<pre><code>[1] 1.444444</code></pre>
<p>Les possibilitÃ©s graphiques de <code class="pkg">FactoMineR</code> sont diffÃ©rentes de celles de <code class="pkg">ade4</code>. Un recours Ã  la fonction <code data-pkg="FactoMineR" data-rdoc="plot.MCA">plot</code> affichera par dÃ©faut les individus, les modalitÃ©s et les variables. La commande <code>?plot.MCA</code> permet dâ€™accÃ©der au fichier dâ€™aide de cette fonction (i.e.Â de la mÃ©thode gÃ©nÃ©rique <code>plot</code> appliquÃ©e aux objets de type <code>MCA</code>) et de voir toutes les options graphiques. Lâ€™argument <code>choix</code> permet de spÃ©cifier ce que lâ€™on souhaite afficher (Â«Â indÂ Â» pour les individus et les catÃ©gories, Â«Â varÂ Â» pour les variables). Lâ€™argument <code>invisible</code> quant Ã  lui permet de spÃ©cifier ce que lâ€™on souhaite masquer. Les axes Ã  afficher se prÃ©cisent avec <code>axes</code>. Voir les exemples ci-dessous.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(acm2)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-31-1.png" title="" alt="" width="1050"/>
<figcaption>
Plan factoriel (deux premiers axes)
</figcaption>
</figure>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(acm2, <span class="dt">axes =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>))</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-32-1.png" title="" alt="" width="1050"/>
<figcaption>
Plan factoriel (axes 3 et 4)
</figcaption>
</figure>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(acm2, <span class="dt">choix =</span> <span class="st">"ind"</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-33-1.png" title="" alt="" width="1050"/>
<figcaption>
Plan factoriel (seulement les individus et les catÃ©gories)
</figcaption>
</figure>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(acm2, <span class="dt">choix =</span> <span class="st">"ind"</span>, <span class="dt">invisible =</span> <span class="st">"ind"</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-34-1.png" title="" alt="" width="1050"/>
<figcaption>
Plan factoriel (seulement les catÃ©gories)
</figcaption>
</figure>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(acm2, <span class="dt">choix =</span> <span class="st">"var"</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-35-1.png" title="" alt="" width="1050"/>
<figcaption>
Plan factoriel (seulement les variables)
</figcaption>
</figure>
<p>La fonction <code data-pkg="FactoMineR">plotellipses</code> trace des ellipses de confiance atour des modalitÃ©s de variables qualitatives. Lâ€™objectif est de voir si les modalitÃ©s dâ€™une variable qualitative sont significativement diffÃ©rentes les unes des autres.</p>
<p>Par dÃ©faut (<code>means=TRUE</code>), les ellipses de confiance sont calculÃ©es pour les coordonnÃ©es moyennes de chaque catÃ©gorie.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plotellipses</span>(acm2)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-36-1.png" title="" alt="" width="1050"/>
<figcaption>
Ellipses de confiance (means=TRUE) dans le plan factoriel
</figcaption>
</figure>
<p>Lâ€™option <code>means=FALSE</code> calculera les ellipses de confiance pour lâ€™ensemble des coordonnÃ©es des observations relevant de chaque catÃ©gorie.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plotellipses</span>(acm2, <span class="dt">means =</span> <span class="ot">FALSE</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-37-1.png" title="" alt="" width="1050"/>
<figcaption>
Ellipses de confiance (means=FALSE) dans le plan factoriel
</figcaption>
</figure>
<p>La fonction <code data-pkg="FactoMineR">dimdesc</code> aide Ã  dÃ©crire et interprÃ©ter les dimensions de lâ€™ACM. Cette fonction est trÃ¨s utile quand le nombre de variables est Ã©levÃ©. Elle permet de voir Ã  quelles variables les axes sont le plus liÃ©sÂ : quelles variables et quelles modalitÃ©s dÃ©crivent le mieux chaque axeÂ ?</p>
<blockquote>
<p>Pour les variables qualitatives, un modÃ¨le dâ€™analyse de variance Ã  un facteur est rÃ©alisÃ© pour chaque dimensionÂ ; les variables Ã  expliquer sont les coordonnÃ©es des individus et la variable explicative est une des variables qualitatives. Un test F permet de voir si la variable a un effet significatif sur la dimension et des tests T sont rÃ©alisÃ©s modalitÃ© par modalitÃ© (avec le contraste somme des alpha_i=0). Cela montre si les coordonnÃ©es des individus de la sous-population dÃ©finie par une modalitÃ© sont significativement diffÃ©rentes de celles de lâ€™ensemble de la population (<em>i.e.</em> diffÃ©rentes de 0). Les variables et modalitÃ©s sont triÃ©es par probabilitÃ© critique et seules celles qui sont significatives sont gardÃ©es dans le rÃ©sultat.</p>
<footer>
SourceÂ : <a href="http://factominer.free.fr/factosbest/description-des-dimensions.html" class="uri">http://factominer.free.fr/factosbest/description-des-dimensions.html</a>
</footer>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dimdesc</span>(acm2, <span class="dt">axes =</span> <span class="dv">1</span>:<span class="dv">2</span>)</code></pre></div>
<pre><code>$`Dim 1`
$`Dim 1`$quali
                      R2       p.value
etud         0.586058164  0.000000e+00
grpage       0.512231318 1.008479e-292
cinema       0.471002163 8.339548e-263
sport        0.398103140 5.940105e-210
bricol       0.179188677  7.142716e-83
cuisine      0.048233515  4.941749e-22
lecture.bd   0.017667936  6.856650e-09
sexe         0.013670717  3.546801e-07
peche.chasse 0.005007337  2.105728e-03

$`Dim 1`$category
                           Estimate       p.value
cinema_Oui               0.35033716 8.339548e-263
sport_Oui                0.33199860 5.940105e-210
[25,45)                  0.33895697 1.959716e-159
SupÃ©rieur                0.45630756 1.376719e-118
bricol_Oui               0.21255190  7.142716e-83
Technique/Professionnel  0.17291856  4.703868e-23
cuisine_Oui              0.11015793  4.941749e-22
[16,25)                  0.39553122  3.635181e-15
lecture.bd_Oui           0.22169306  6.856650e-09
Homme                    0.05853263  3.546801e-07
peche.chasse_Oui         0.05543091  2.105728e-03
peche.chasse_Non        -0.05543091  2.105728e-03
Femme                   -0.05853263  3.546801e-07
lecture.bd_Non          -0.22169306  6.856650e-09
[45,65)                 -0.13173232  2.477610e-12
cuisine_Non             -0.11015793  4.941749e-22
bricol_Non              -0.21255190  7.142716e-83
[65,93]                 -0.60275587 2.906563e-165
sport_Non               -0.33199860 5.940105e-210
cinema_Non              -0.35033716 8.339548e-263
Primaire                -0.59465967 5.269497e-268


$`Dim 2`
$`Dim 2`$quali
                     R2       p.value
sexe         0.62723828  0.000000e+00
peche.chasse 0.31109226 1.161746e-154
bricol       0.20276579  8.014713e-95
etud         0.13925513  6.754592e-61
cuisine      0.12908453  1.461380e-58
cinema       0.04039994  1.215838e-18
grpage       0.03776900  1.257795e-15
lecture.bd   0.01995653  7.190474e-10

$`Dim 2`$category
                           Estimate       p.value
Homme                    0.32598031  0.000000e+00
peche.chasse_Oui         0.35922450 1.161746e-154
bricol_Oui               0.18590016  8.014713e-95
cuisine_Non              0.14816688  1.461380e-58
Technique/Professionnel  0.23013181  5.919911e-54
cinema_Non               0.08436024  1.215838e-18
[45,65)                  0.11638978  3.028836e-17
lecture.bd_Non           0.19371997  7.190474e-10
[65,93]                 -0.02872480  1.229757e-02
[25,45)                 -0.05570792  2.294799e-09
lecture.bd_Oui          -0.19371997  7.190474e-10
Secondaire              -0.09715846  1.240732e-10
cinema_Oui              -0.08436024  1.215838e-18
SupÃ©rieur               -0.14813997  6.942611e-24
cuisine_Oui             -0.14816688  1.461380e-58
bricol_Non              -0.18590016  8.014713e-95
peche.chasse_Non        -0.35922450 1.161746e-154
Femme                   -0.32598031  0.000000e+00</code></pre>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="analyse-des-correspondances-multiples_fn1"><p>Pour une prÃ©sentation plus dÃ©taillÃ©e, voir <br/><a href="http://www.math.univ-toulouse.fr/~baccini/zpedago/asdm.pdf" class="uri">http://www.math.univ-toulouse.fr/~baccini/zpedago/asdm.pdf</a>.<a href="#analyse-des-correspondances-multiples_fnref1">â†©</a></p></li>
<li id="analyse-des-correspondances-multiples_fn2"><p>On pourra Ã©galement avoir recours Ã  la fonction <code data-pkg="ade4">inertia.dudi</code> pour lâ€™ensemble des axes.<a href="#analyse-des-correspondances-multiples_fnref2">â†©</a></p></li>
<li id="analyse-des-correspondances-multiples_fn3"><p>La fonction <code data-pkg="ade4" data-rdoc="score.acm">score</code> constituera Ã©galement une aide Ã  lâ€™interprÃ©tation des axes.<a href="#analyse-des-correspondances-multiples_fnref3">â†©</a></p></li>
</ol>
</div>

</article>
<article id="classification-ascendante-hierarchique">

<div class="fluid-row" id="classification-ascendante-hierarchique_header">


<h1 class="title">Classification ascendante hiÃ©rarchique (CAH)</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#classification-ascendante-hierarchique_calculer-une-matrice-des-distances">Calculer une matrice des distances</a><ul>
<li><a href="#classification-ascendante-hierarchique_distance-de-gower">Distance de Gower</a></li>
<li><a href="#classification-ascendante-hierarchique_distance-du-">Distance du Î¦Â²</a></li>
<li><a href="#classification-ascendante-hierarchique_exemple">Exemple</a></li>
</ul></li>
<li><a href="#classification-ascendante-hierarchique_calcul-du-dendrogramme">Calcul du dendrogramme</a></li>
<li><a href="#classification-ascendante-hierarchique_decouper-le-dendrogramme">DÃ©couper le dendrogramme</a></li>
<li><a href="#classification-ascendante-hierarchique_factominer">CAH avec lâ€™extension FactoMineR</a></li>
</ul>
</div>

<div class="note">
<p>La version originale de ce chapitre a Ã©tÃ© Ã©crite par Joseph Larmarange dans le cadre du support de cours <a href="https://github.com/larmarange/intro-r/tree/CoursM2">Introduction Ã  lâ€™analyse dâ€™enquÃªtes avec R</a>.</p>
</div>
<p>Il existe de nombreuses techniques statistiques visant Ã  partinionner une population en diffÃ©rentes classes ou sous-groupes. La <dfn>classification ascendante hiÃ©rarchique</dfn> (<dfn>CAH</dfn>) est lâ€™une dâ€™entre elles. On cherche Ã  ce que les individus regroupÃ©s au sein dâ€™une mÃªme classe (homogÃ©nÃ©itÃ© intra-classe) soient le plus semblables possibles tandis que les classes soient le plus dissemblables (hÃ©tÃ©rogÃ©nÃ©itÃ© inter-classe).</p>
<p>Le principe de la CAH est de rassembler des individus selon un critÃ¨re de ressemblance dÃ©fini au prÃ©alable qui sâ€™exprimera sous la forme dâ€™une <dfn>matrice de distances</dfn>, exprimant la distance existant entre chaque individu pris deux Ã  deux. Deux observations identiques auront une distance nulle. Plus les deux observations seront dissemblables, plus la distance sera importante. La CAH va ensuite rassembler les individus de maniÃ¨re itÃ©rative afin de produire un <dfn>dendrogramme</dfn> ou <dfn>arbre de classification</dfn><dfn data-index="classification, arbre"/>. La classification est <em>ascendante</em> car elle part des observations individuellesÂ ; elle est <em>hiÃ©rarchique</em> car elle produit des classes ou groupes de plus en plus vastes, incluant des sous-groupes en leur sein. En dÃ©coupant cet arbre Ã  une certaine hauteur choisie, on produira la <dfn>partition</dfn> dÃ©sirÃ©e.</p>
<div class="note">
<p>On trouvera Ã©galement de nombreux supports de cours en franÃ§ais sur la CAH sur le site de FranÃ§ois Gilles CarpentierÂ : <a href="http://pagesperso.univ-brest.fr/~carpenti/" class="uri">http://pagesperso.univ-brest.fr/~carpenti/</a>.</p>
</div>
<div id="classification-ascendante-hierarchique_calculer-une-matrice-des-distances" class="section level2">
<h2>Calculer une matrice des distances</h2>
<p>La notion de <dfn>ressemblance</dfn> entre observations est Ã©valuÃ©e par une <dfn>distance</dfn> entre individus. Plusieurs type de ditances existent selon les donnÃ©es utilisÃ©es.</p>
<p>Il existe de nombreuses distances mathÃ©matiques pour les variables quantitatives (euclidiennes, Manhattanâ€¦) que nous nâ€™aborderons pas ici<a href="#classification-ascendante-hierarchique_fn1" class="footnoteRef" id="classification-ascendante-hierarchique_fnref1"><sup>1</sup></a>. La plupart peuvent Ãªtre calculÃ©es avec la fonction <code data-pkg="stats">dist</code>.</p>
<p>Usuellement, pour un ensemble de variables qualitatives, on aura recours Ã  la <dfn data-index="distance du PhiÂ²">distance du Î¦Â²</dfn><dfn data-index="PhiÂ², distance"/> qui est celle utilisÃ©e pour lâ€™analyse des correspondances multiples (voir le <a href="">chapitre dÃ©diÃ©</a>). Avec lâ€™extension <code class="pkg">ade4</code>, la distance du Î¦Â² sâ€™obtient avec la fonction <code data-pkg="ade4">dist.dudi</code><a href="#classification-ascendante-hierarchique_fn2" class="footnoteRef" id="classification-ascendante-hierarchique_fnref2"><sup>2</sup></a>. Le cas particulier de la CAH avec lâ€™extension <code class="pkg">FactoMineR</code> sera abordÃ©e dans une section spÃ©cifique ci-aprÃ¨s. Nous Ã©voquerons Ã©galement la <dfn>distance de Gower</dfn><dfn data-index="Gower, distance"/> qui peut sâ€™appliquer Ã  un ensemble de variables Ã  la fois qualitatives et quantitatives et qui se calcule avec la fonction <code data-pkg="cluster">daisy</code> de lâ€™extension <code class="pkg">cluster</code>. Enfin, dans le chapitre sur lâ€™<a href="#analyse-de-sequences">analyse de sÃ©quences</a>, nous verrons Ã©galement la fonction <code data-pkg="TraMineR">seqdist</code> (extension <code class="pkg">TraMineR</code>) permettant de calculer une distance entre sÃ©quences.</p>
<div id="classification-ascendante-hierarchique_distance-de-gower" class="section level3">
<h3>Distance de Gower</h3>
<p>En 1971, Gower a proposÃ© un <dfn>indice de similaritÃ©</dfn><dfn data-index="similaritÃ©, indice"/> qui porte son nom. Lâ€™objectif de cet indice consiste Ã  mesurer dans quelle mesure deux individus sont semblables. Lâ€™indice de Gower varie entre 0 et 1. Si lâ€™indice vaut 1, les deux individus sont identiques. Ã€ lâ€™opposÃ©, sâ€™il vaut 0, les deux individus considÃ©rÃ©s nâ€™ont pas de point commun. Si lâ€™on note <em>S<sub>g</sub></em> lâ€™<dfn>indice de similaritÃ© de Gower</dfn><dfn data-index="Gower, indice de similaritÃ©"/>, la distance de Gower <em>D<sub>g</sub></em> sâ€™obtient simplement de la maniÃ¨re suivanteÂ : <em>D<sub>g</sub></em>Â =Â 1Â -Â <em>S<sub>g</sub></em>. Ainsi, la distance sera nulle entre deux individus identiques et elle sera Ã©gale Ã  1 entre deux individus totalement diffÃ©rents. Cette distance sâ€™obtient sous <strong>R</strong> avec la fonction <code data-pkg="cluster">daisy</code> du package <code class="pkg">cluster</code>.</p>
<p>Lâ€™indice de similaritÃ© de Gower entre deux individus <em>x<sub>1</sub></em> et <em>x<sub>2</sub></em> se calcule de la maniÃ¨re suivanteÂ :</p>
<!-- 
$$ S_{g}(x_{1},x_{2})=\frac{1}{p}\sum_{j=1}^{p}s_{12j} $$
converted on http://www2.ph.ed.ac.uk/snuggletex/MathInputDemo
-->
<p><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"> <semantics> <mrow> <msub> <mi>S</mi> <mi>g</mi> </msub> <mfenced close=")" open="("> <msub> <mi>x</mi> <mn>1</mn> </msub> <msub> <mi>x</mi> <mn>2</mn> </msub> </mfenced> <mo>=</mo> <mfrac> <mn>1</mn> <mi>p</mi> </mfrac> <munderover> <mo>âˆ‘</mo> <mrow> <mi>j</mi> <mo>=</mo> <mn>1</mn> </mrow> <mi>p</mi> </munderover> <msub> <mi>s</mi> <mrow> <mn>12</mn> <mi>j</mi> </mrow> </msub> </mrow> </semantics> </math></p>
<p><em>p</em> reprÃ©sente le nombre total de caractÃ¨res (ou de variables) descriptifs utilisÃ©s pour comparer les deux individus. <em>s</em><sub>12<em>j</em></sub> reprÃ©sente la similaritÃ© partielle entre les individus 1 et 2 concernant le descripteur <em>j</em>. Cette similaritÃ© partielle se calcule diffÃ©remment sâ€™il sâ€™agit dâ€™une <dfn>variable qualitative</dfn><dfn data-index="qualitative, variable"/> ou <dfn data-index="variable quantitative">quantitative</dfn><dfn data-index="quantitative, variable"/>Â :</p>
<ul>
<li><strong>variable qualitativeÂ :</strong> <em>s</em><sub>12<em>j</em></sub> vaut 1 si la variable <em>j</em> prend la mÃªme valeur pour les individus 1 et 2, et vaut 0 sinon. Par exemple, si 1 et 2 sont tous les deux Â«Â grandÂ Â», alors <em>s</em><sub>12<em>j</em></sub> vaudra 1. Si 1 est Â«Â grandÂ Â» et 2 Â«Â petitÂ Â», <em>s</em><sub>12<em>j</em></sub> vaudra 0.</li>
<li><strong>variable quantitativeÂ :</strong> la diffÃ©rence absolue entre les valeurs des deux variables est tout dâ€™abord calculÃ©e, soit |<em>y</em><sub>1<em>j</em></sub>Â âˆ’Â <em>y</em><sub>2<em>j</em></sub>|. Puis lâ€™Ã©cart maximum observÃ© sur lâ€™ensemble du fichier est dÃ©terminÃ© et notÃ© <em>R</em><sub><em>j</em></sub>. DÃ¨s lors, la similaritÃ© partielle vaut <em>S</em><sub>12<em>j</em></sub>Â =Â |<em>y</em><sub>1<em>j</em></sub>Â âˆ’Â <em>y</em><sub>2<em>j</em></sub>|Â /Â <em>R</em><sub><em>j</em></sub>.</li>
</ul>
<p>Dans le cas oÃ¹ lâ€™on nâ€™a que des variables qualitatives, la valeur de lâ€™indice de Gower correspond Ã  la proportion de caractÃ¨res en commun. Supposons des individus 1 et 2 dÃ©cris ainsiÂ :</p>
<ol style="list-style-type: decimal">
<li>homme / grand / blond / Ã©tudiant / urbain</li>
<li>femme / grande / brune / Ã©tudiante / rurale</li>
</ol>
<p>Sur les 5 variables utilisÃ©es pour les dÃ©crire, 1 et 2 ont deux caractÃ©ristiques communesÂ : ils sont grand(e)s et Ã©tudiant(e)s. DÃ¨s lors, lâ€™indice de similaritÃ© de Gower entre 1 et 2 vaut 2/5Â =Â 0,4 (soit une distance de 1Â âˆ’Â 0,4Â =Â 0,6).</p>
<p>Plusieurs approches peuvent Ãªtre retenues pour traiter les valeurs manquantesÂ :</p>
<ul>
<li>supprimer tout individu nâ€™Ã©tant pas renseignÃ© pour toutes les variables de lâ€™analyseÂ ;</li>
<li>considÃ©rer les valeurs manquantes comme une modalitÃ© en tant que telleÂ ;</li>
<li>garder les valeurs manquantes en tant que valeurs manquantes.</li>
</ul>
<p>Le choix retenu modifiera les distances de Gower calculÃ©es. Supposons que lâ€™on aitÂ :</p>
<ol style="list-style-type: decimal">
<li>homme / grand / blond / Ã©tudiant / urbain</li>
<li>femme / grande / brune / Ã©tudiante / manquant</li>
</ol>
<p>Si lâ€™on supprime les individus ayant des <dfn data-index="valeur manquante">valeurs manquantes</dfn><dfn data-index="manquante, valeur"/>, 2 est retirÃ©e du fichier dâ€™observations et aucune distance nâ€™est calculÃ©e.</p>
<p>Si lâ€™on traite les valeurs manquantes comme une modalitÃ© particuliÃ¨re, 1 et 2 partagent alors 2 caractÃ¨res sur les 5 analysÃ©s, la distance de Gower entre eux est alors de 1Â âˆ’Â 2/5Â =1Â âˆ’Â 0,4Â =Â 0,6.</p>
<p>Si on garde les valeurs manquantes, lâ€™indice de Gower est dÃ¨s lors calculÃ© sur les seuls descripteurs renseignÃ©s Ã  la fois pour 1 et 2. La distance de Gower sera calculÃ©e dans le cas prÃ©sent uniquement sur les 4 caractÃ¨res renseignÃ©s et vaudra 1Â âˆ’Â 2/4Â =Â 0,5.</p>
</div>
<div id="classification-ascendante-hierarchique_distance-du-" class="section level3">
<h3>Distance du Î¦Â²</h3>
<p>Il sâ€™agit de la distance utilisÃ©e dans les analyses de correspondance multiples (ACM). Câ€™est une variante de la <dfn data-index="distance du ChiÂ²">distance du Ï‡Â²</dfn><dfn data-index="ChiÂ², distance"/>. Nous considÃ©rons ici que nous avons <em>Q</em> questions (soit <em>Q</em> variables initiales de type facteur). Ã€ chaque individu est associÃ© un <dfn>patron</dfn> câ€™est-Ã -dire une certaine combinaison de rÃ©ponses aux <em>Q</em> questions. La distance entre deux individus correspond Ã  la distance entre leurs deux patrons. Si les deux individus prÃ©sentent le mÃªme patron, leur distance sera nulle. La distance du Î¦Â² peut sâ€™exprimer ainsiÂ :</p>
<!-- 
$$ d_{\Phi^2}^2(L_i,L_j)=\frac{1}{Q}\sum_{k}\frac{(\delta_{ik}-\delta_{jk})^2}{f_k} $$ 
converted on http://www2.ph.ed.ac.uk/snuggletex/MathInputDemo
-->
<p><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"> <semantics> <mrow> <msubsup> <mi>d</mi> <msup> <mi>Î¦</mi> <mn>2</mn> </msup> <mn>2</mn> </msubsup> <mfenced close=")" open="("> <msub> <mi>L</mi> <mi>i</mi> </msub> <msub> <mi>L</mi> <mi>j</mi> </msub> </mfenced> <mo>=</mo> <mfrac> <mn>1</mn> <mi>Q</mi> </mfrac> <munder> <mo>âˆ‘</mo> <mi>k</mi> </munder> <mfrac> <msup> <mfenced close=")" open="("> <mrow> <msub> <mi>Î´</mi> <mrow> <mi>i</mi> <mi>k</mi> </mrow> </msub> <mo>-</mo> <msub> <mi>Î´</mi> <mrow> <mi>j</mi> <mi>k</mi> </mrow> </msub> </mrow> </mfenced> <mn>2</mn> </msup> <msub> <mi>f</mi> <mi>k</mi> </msub> </mfrac> </mrow> </semantics> </math></p>
<p>oÃ¹ <em>L<sub>i</sub></em> et <em>L<sub>j</sub></em> sont deux patrons, <em>Q</em> le nombre total de questions. <em>Î´<sub>ik</sub></em> vaut 1 si la modalitÃ© <em>k</em> est prÃ©sente dans le patron <em>L<sub>i</sub></em>, 0 sinon. <em>f<sub>k</sub></em> est la frÃ©quence de la modalitÃ© <em>k</em> dans lâ€™ensemble de la population.</p>
<p>ExprimÃ© plus simplement, on fait la somme de lâ€™inverse des modalitÃ©s non communes aux deux patrons, puis on divise par le nombre total de question. Si nous reprenons notre exemple prÃ©cÃ©dentÂ :</p>
<ol style="list-style-type: decimal">
<li>homme / grand / blond / Ã©tudiant / urbain</li>
<li>femme / grande / brune / Ã©tudiante / rurale</li>
</ol>
<p>Pour calculer la distance entre 1 et 2, il nous faut connaÃ®tre la proportion des diffÃ©rentes modalitÃ©s dans lâ€™ensemble de la population Ã©tudiÃ©e. En lâ€™occurrenceÂ :</p>
<ul>
<li>hommesÂ : 52Â % / femmesÂ : 48Â %</li>
<li>grandÂ : 30Â % / moyenÂ : 45Â % / petitÂ : 25Â %</li>
<li>blondÂ : 15Â % / chÃ¢tainÂ : 45Â % / brunÂ : 30Â % / blancÂ : 10Â %</li>
<li>Ã©tudiantÂ : 20 % / salariÃ©sÂ : 65Â % / retraitÃ©sÂ : 15Â %</li>
<li>urbainÂ : 80 % / ruralÂ : 20Â %</li>
</ul>
<p>Les modalitÃ©s non communes entre les profils de 1 et 2 sontÂ : homme, femme, blond, brun, urbain et rural. La distance du Î¦Â² entre 1 et 2 est donc la suivanteÂ :</p>
<!-- 
$$ d_{\Phi^2}^2(L_1,L_2)=\frac{1}{5}(\frac{1}{0,52}+\frac{1}{0,48}+\frac{1}{0,15}+\frac{1}{0,30}+\frac{1}{0,80}+\frac{1}{0,20})=4,05 $$
converted on http://www2.ph.ed.ac.uk/snuggletex/MathInputDemo
-->
<p><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"> <semantics> <mrow> <msubsup> <mi>d</mi> <msup> <mi>Î¦</mi> <mn>2</mn> </msup> <mn>2</mn> </msubsup> <mfenced close=")" open="("> <msub> <mi>L</mi> <mn>1</mn> </msub> <msub> <mi>L</mi> <mn>2</mn> </msub> </mfenced> <mo>=</mo> <mfrac> <mn>1</mn> <mn>5</mn> </mfrac> <mfenced close=")" open="("> <mrow> <mfrac> <mn>1</mn> <mrow> <mn>0</mn> <mo>,</mo> <mn>52</mn> </mrow> </mfrac> <mo>+</mo> <mfrac> <mn>1</mn> <mrow> <mn>0</mn> <mo>,</mo> <mn>48</mn> </mrow> </mfrac> <mo>+</mo> <mfrac> <mn>1</mn> <mrow> <mn>0</mn> <mo>,</mo> <mn>15</mn> </mrow> </mfrac> <mo>+</mo> <mfrac> <mn>1</mn> <mrow> <mn>0</mn> <mo>,</mo> <mn>30</mn> </mrow> </mfrac> <mo>+</mo> <mfrac> <mn>1</mn> <mrow> <mn>0</mn> <mo>,</mo> <mn>80</mn> </mrow> </mfrac> <mo>+</mo> <mfrac> <mn>1</mn> <mrow> <mn>0</mn> <mo>,</mo> <mn>20</mn> </mrow> </mfrac> </mrow> </mfenced> <mo>=</mo> <mn>4</mn> <mo>,</mo> <mn>05</mn> </mrow> </semantics> </math></p>
<p>Cette distance, bien que moins intuitive que la distance de Gower Ã©voquÃ©e prÃ©cÃ©demment, est la plus employÃ©e pour lâ€™analyse dâ€™enquÃªtes en sciences sociales. Il faut retenir que la distance entre deux profils est dÃ©pendante de la distribution globale de chaque modalitÃ© dans la population Ã©tudiÃ©e. Ainsi, si lâ€™on recalcule les distances entre individus Ã  partir dâ€™un sous-Ã©chantillon, le rÃ©sultat obtenu sera diffÃ©rent. De maniÃ¨re gÃ©nÃ©rale, les individus prÃ©sentant des caractÃ©ristiques rares dans la population vont se retrouver Ã©loignÃ©s des individus prÃ©sentant des caractÃ©ristiques fortement reprÃ©sentÃ©es.</p>
</div>
<div id="classification-ascendante-hierarchique_exemple" class="section level3">
<h3>Exemple</h3>
<p>Nous allons reprendre lâ€™ACM calculÃ©e avec <code data-pkg="ade4">dudi.acm</code> (<code class="pkg">ade4</code>) dans le <a href="">chapitre consacrÃ© Ã  lâ€™ACM</a>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003
d$grpage &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">16</span>, <span class="dv">25</span>, <span class="dv">45</span>, <span class="dv">65</span>, <span class="dv">93</span>), <span class="dt">right =</span> <span class="ot">FALSE</span>, 
  <span class="dt">include.lowest =</span> <span class="ot">TRUE</span>)
d$etud &lt;-<span class="st"> </span>d$nivetud
<span class="kw">levels</span>(d$etud) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Primaire"</span>, <span class="st">"Primaire"</span>, <span class="st">"Primaire"</span>, 
  <span class="st">"Secondaire"</span>, <span class="st">"Secondaire"</span>, <span class="st">"Technique/Professionnel"</span>, 
  <span class="st">"Technique/Professionnel"</span>, <span class="st">"SupÃ©rieur"</span>)
d2 &lt;-<span class="st"> </span>d[, <span class="kw">c</span>(<span class="st">"grpage"</span>, <span class="st">"sexe"</span>, <span class="st">"etud"</span>, <span class="st">"peche.chasse"</span>, 
  <span class="st">"cinema"</span>, <span class="st">"cuisine"</span>, <span class="st">"bricol"</span>, <span class="st">"sport"</span>, <span class="st">"lecture.bd"</span>)]
<span class="kw">library</span>(ade4)
acm &lt;-<span class="st"> </span><span class="kw">dudi.acm</span>(d2, <span class="dt">scannf =</span> <span class="ot">FALSE</span>, <span class="dt">nf =</span> <span class="dv">5</span>)</code></pre></div>
<p>La matrice des distances sâ€™obtient dÃ¨s lors avec la fonction <code data-pkg="ade4">dist.dudi</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">md &lt;-<span class="st"> </span><span class="kw">dist.dudi</span>(acm)</code></pre></div>
</div>
</div>
<div id="classification-ascendante-hierarchique_calcul-du-dendrogramme" class="section level2">
<h2>Calcul du dendrogramme</h2>
<p>Il faut ensuite choisir une mÃ©thode dâ€™<dfn>agrÃ©gation</dfn> pour construire le dendrogramme. De nombreuses solutions existent (saut minimum, distance maximum, moyenne, Wardâ€¦). Chacune dâ€™elle produira un dendrogramme diffÃ©rent. Nous ne dÃ©taillerons pas ici ces diffÃ©rentes techniques<a href="#classification-ascendante-hierarchique_fn3" class="footnoteRef" id="classification-ascendante-hierarchique_fnref3"><sup>3</sup></a>. Cependant, Ã  lâ€™usage, on privilÃ©giera le plus souvent la <dfn>mÃ©thode de Ward</dfn><dfn data-index="Ward, mÃ©thode"/>. Cette mÃ©thode se distingue de toutes les autres en ce sens quâ€™elle utilise une analyse de la variance approchÃ©e afin dâ€™Ã©valuer les distances entre groupes. La mÃ©thode de Ward se justifie bien lorsque lorsque lâ€™on utilise le carrÃ© de la distance. Choisir de regrouper les deux individus les plus proches revient alors Ã  choisir la paire de points dont lâ€™agrÃ©gation entraÃ®ne la diminution minimale de lâ€™inertie du nuage. En rÃ©sumÃ©, cette mÃ©thode cherche Ã  minimiser lâ€™inertie intra-classe et Ã  maximiser lâ€™inertie inter-classe afin dâ€™obtenir des classes les plus homogÃ¨nes possibles.</p>
<p>En raison de la variÃ©tÃ© des distances possibles et de la variÃ©tÃ© des techniques dâ€™agrÃ©gation, on pourra Ãªtre amenÃ© Ã  rÃ©aliser plusieurs dendrogrammes diffÃ©rents sur un mÃªme jeu de donnÃ©es jusquâ€™Ã  obtenir une classification qui fait Â«Â sensÂ Â».</p>
<p>La fonction de base pour le calcul dâ€™un dendrogramme est <code data-pkg="stats">hclust</code> en prÃ©cisant le critÃ¨re dâ€™aggrÃ©gation avec <code>method</code>. Dans notre cas, nous allons opter pour la mÃ©thode de Ward appliquÃ©e au carrÃ© des distances (ce quâ€™on indique avec <code>method = "ward.D2"</code><a href="#classification-ascendante-hierarchique_fn4" class="footnoteRef" id="classification-ascendante-hierarchique_fnref4"><sup>4</sup></a>, lâ€™option <code>method = "ward.D"</code> correspondant Ã  la version Â«Â classiqueÂ Â»)Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">arbre &lt;-<span class="st"> </span><span class="kw">hclust</span>(md, <span class="dt">method =</span> <span class="st">"ward.D2"</span>)</code></pre></div>
<div class="note">
<p>Le temps de calcul dâ€™un dendrogramme peut Ãªtre particuliÃ¨rement important sur un gros fichier de donnÃ©es. Lâ€™extension <code class="pkg">fastcluster</code> permet de rÃ©duire significativement le temps de calcul. Il suffit dâ€™installer puis dâ€™appeler cette extension. La fonction <code data-pkg="fastcluster">hclust</code> sera automatiquement remplacÃ©e par cette version optimisÃ©e. Elle prends les mÃªmes paramÃ¨tresÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(fastcluster)
arbre &lt;-<span class="st"> </span><span class="kw">hclust</span>(md, <span class="dt">method =</span> <span class="st">"ward.D2"</span>)</code></pre></div>
</div>
<p>Le dendrogramme obtenu peut Ãªtre affichÃ© simplement avec <code data-pkg="stats" data-rdoc="hclust">plot</code>. Lorsque le nombre dâ€™individus est important, il peut Ãªtre utile de ne pas afficher les Ã©tiquettes des individus avec <code>labels=FALSE</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(arbre, <span class="dt">labels =</span> <span class="ot">FALSE</span>, <span class="dt">main =</span> <span class="st">"Dendrogramme"</span>)</code></pre></div>
<img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-5-1.png" title="" alt="" width="1050"/>
<figcaption>
Dendrogramme obtenu avec hclust
</figcaption>
</figure>
<p>La fonction <code data-pkg="cluster">agnes</code> de lâ€™extension <code class="pkg">cluster</code> peut Ã©galement Ãªtre utilisÃ©e pour calculer le dendrogramme. Cependant, Ã  lâ€™usage, elle semble Ãªtre un peu plus lente que <code data-pkg="stats">hclust</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(cluster)
arbre2 &lt;-<span class="st"> </span><span class="kw">agnes</span>(md, <span class="dt">method =</span> <span class="st">"ward"</span>)</code></pre></div>
<p>ATTENTIONÂ : la mÃ©thode implÃ©mentÃ©e dans la fonction <code data-pkg="cluster">agnes</code> correspond Ã  lâ€™option <code>method = "ward.D2"</code> de <code data-pkg="stats">hclust</code>.</p>
<p>Le rÃ©sultat obtenu nâ€™est pas au mÃªme format que celui de <code data-pkg="stats">hclust</code>. Il est possible de transformer un objet <code data-pkg="cluster" data-rdoc="agnes.object">agnes</code> au format <code data-pkg="stats">hclust</code> avec <code data-pkg="cluster" data-rdoc="agnes.object">as.hclust</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.hclust</span>(arbre2)</code></pre></div>
</div>
<div id="classification-ascendante-hierarchique_decouper-le-dendrogramme" class="section level2">
<h2>DÃ©couper le dendrogramme</h2>
<p>Pour obtenir une <dfn>partition</dfn> de la population, il suffit de dÃ©couper le dendrogramme obtenu Ã  une certaine hauteur. En premier lieu, une analyse de la forme du dendrogramme pourra nous donner une indication sur le nombre de classes Ã  retenir. Dans notre exemple, deux branches bien distinctes apparaissent sur lâ€™arbre.</p>
<p>Pour nous aider, nous pouvons reprÃ©senter les <dfn data-index="saut d'inertie">sauts dâ€™inertie</dfn><dfn data-index="inertie, saut"/> du dendrogramme selon le nombre de classes retenues.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">inertie &lt;-<span class="st"> </span><span class="kw">sort</span>(arbre$height, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>)
<span class="kw">plot</span>(inertie[<span class="dv">1</span>:<span class="dv">20</span>], <span class="dt">type =</span> <span class="st">"s"</span>, <span class="dt">xlab =</span> <span class="st">"Nombre de classes"</span>, 
  <span class="dt">ylab =</span> <span class="st">"Inertie"</span>)</code></pre></div>
<img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-8-1.png" title="" alt="" width="1050"/>
<figcaption>
Inertie du dendrogramme
</figcaption>
</figure>
<p>On voit trois sauts assez nets Ã  2, 5 et 8 classes, que nous avons reprÃ©sentÃ©s ci-dessous respectivement en vert, en rouge et en bleu.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(inertie[<span class="dv">1</span>:<span class="dv">20</span>], <span class="dt">type =</span> <span class="st">"s"</span>, <span class="dt">xlab =</span> <span class="st">"Nombre de classes"</span>, 
  <span class="dt">ylab =</span> <span class="st">"Inertie"</span>)
<span class="kw">points</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">8</span>), inertie[<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">8</span>)], <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">"green3"</span>, 
  <span class="st">"red3"</span>, <span class="st">"blue3"</span>), <span class="dt">cex =</span> <span class="dv">2</span>, <span class="dt">lwd =</span> <span class="dv">3</span>)</code></pre></div>
<img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-9-1.png" title="" alt="" width="1050"/>
<figcaption>
Sauts dâ€™inertie du dendrogramme
</figcaption>
</figure>
<p>La fonction <code data-pkg="stats">rect.hclust</code> permet de visualiser les diffÃ©rentes partitions directement sur le dendrogramme.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(arbre, <span class="dt">labels =</span> <span class="ot">FALSE</span>, <span class="dt">main =</span> <span class="st">"Partition en 2, 5 ou 8 classes"</span>, 
  <span class="dt">xlab =</span> <span class="st">""</span>, <span class="dt">ylab =</span> <span class="st">""</span>, <span class="dt">sub =</span> <span class="st">""</span>, <span class="dt">axes =</span> <span class="ot">FALSE</span>, <span class="dt">hang =</span> -<span class="dv">1</span>)
<span class="kw">rect.hclust</span>(arbre, <span class="dv">2</span>, <span class="dt">border =</span> <span class="st">"green3"</span>)
<span class="kw">rect.hclust</span>(arbre, <span class="dv">5</span>, <span class="dt">border =</span> <span class="st">"red3"</span>)
<span class="kw">rect.hclust</span>(arbre, <span class="dv">8</span>, <span class="dt">border =</span> <span class="st">"blue3"</span>)</code></pre></div>
<img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-10-1.png" title="" alt="" width="1050"/>
<figcaption>
DiffÃ©rentes partitions du dendrogramme
</figcaption>
</figure>
<p>Lâ€™extension <code class="pkg">FactoMineR</code> (que nous aborderons <a href="#classification-ascendante-hierarchique_factominer">dans une section dÃ©diÃ©e ci-aprÃ¨s</a>) suggÃ¨re dâ€™utiliser la partition ayant la plus grande <dfn>perte relative dâ€™inertie</dfn><dfn data-index="indertie, perte relative"/>.</p>
<p>Lâ€™extension <code class="pkg">JLutils</code> (disponible sur <a href="https://github.com/larmarange/JLutils">GitHub</a>) propose une fonction <code data-pkg="JLutils">best.cutree</code> qui permet de calculer cette indicateur Ã  partir de nâ€™importe quel dendrogramme calculÃ© avec <code data-pkg="stats">hclust</code> ou <code data-pkg="cluster">agnes</code>.</p>
<p>Pour installer <code class="pkg">JLutils</code>, on aura recours au package <code class="pkg">devtools</code> et Ã  sa fonction <code data-pkg="devtools">install_github</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="kw">install_github</span>(<span class="st">"larmarange/JLutils"</span>)</code></pre></div>
<p>Par dÃ©faut, <code data-pkg="JLutils">best.cutree</code> regarde quelle serait la meilleure partition entre 3 et 20 classes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(JLutils)
<span class="kw">best.cutree</span>(arbre)</code></pre></div>
<pre><code>[1] 5</code></pre>
<p>En lâ€™occurence il sâ€™agirait dâ€™une partition en 5 classes. Il est possible de modifier le minimum et le maximum des partitions recherchÃ©es avec <code>min</code> et <code>max</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">best.cutree</span>(arbre, <span class="dt">min =</span> <span class="dv">2</span>)</code></pre></div>
<pre><code>[1] 2</code></pre>
<p>On peut Ã©galement reprÃ©senter le graphique des pertes relatives dâ€™inertie avec <code>graph=TRUE</code>. La meilleure partition selon ce critÃ¨re est reprÃ©sentÃ©e par un point noir et la seconde par un point gris.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">best.cutree</span>(arbre, <span class="dt">min =</span> <span class="dv">2</span>, <span class="dt">graph =</span> <span class="ot">TRUE</span>, <span class="dt">xlab =</span> <span class="st">"Nombre de classes"</span>, 
  <span class="dt">ylab =</span> <span class="st">"Inertie relative"</span>)</code></pre></div>
<p><img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-14-1.png" title="" alt="" width="1050"/></p>
<pre><code>[1] 2</code></pre>
<figcaption>
Perte relative dâ€™inertie selon le nombre de classes
</figcaption>
</figure>
<p>Un dÃ©coupage en deux classes minimise ce critÃ¨re. Cependant, si lâ€™on souhaite rÃ©aliser une analyse un peu plus fine, un nombre de classes plus Ã©levÃ© serait pertinent. Nous allons donc retenir un dÃ©coupage en cinq classes. Le dÃ©coupage sâ€™effectue avec la fonction <code data-pkg="stats">cutree</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">typo &lt;-<span class="st"> </span><span class="kw">cutree</span>(arbre, <span class="dv">5</span>)
<span class="kw">freq</span>(typo)</code></pre></div>
<pre><code>         n    % val%
[1] 1 1031 51.5 51.5
[2] 2  164  8.2  8.2
[3] 3  553 27.7 27.7
[4] 4  205 10.2 10.2
[5] 5   47  2.4  2.4
NA       0  0.0   NA</code></pre>
<p>La typologie obtenue peut Ãªtre reprÃ©sentÃ©e dans le plan factoriel avec <code data-pkg="ade4">s.class</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))
<span class="kw">library</span>(RColorBrewer)
<span class="kw">s.class</span>(acm$li, <span class="kw">as.factor</span>(typo), <span class="dt">col =</span> <span class="kw">brewer.pal</span>(<span class="dv">5</span>, 
  <span class="st">"Set1"</span>), <span class="dt">sub =</span> <span class="st">"Axes 1 et 2"</span>)
<span class="kw">s.class</span>(acm$li, <span class="kw">as.factor</span>(typo), <span class="dv">3</span>, <span class="dv">4</span>, <span class="dt">col =</span> <span class="kw">brewer.pal</span>(<span class="dv">5</span>, 
  <span class="st">"Set1"</span>), <span class="dt">sub =</span> <span class="st">"Axes 3 et 4"</span>)</code></pre></div>
<p><img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-16-1.png" title="" alt="" width="1050"/></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>))</code></pre></div>
<figcaption>
Projection de la typologie obtenue par CAH selon les 4 premiers axes
</figcaption>
</figure>
<div class="note">
<p>De nombreuses possibilitÃ©s graphiques sont possibles avec les dendrogrammes. Des exemples documentÃ©s sont disponibles Ã  cette adresseÂ : <a href="http://rpubs.com/gaston/dendrograms" class="uri">http://rpubs.com/gaston/dendrograms</a>.</p>
<p>Romain FranÃ§ois a developpÃ© une fonction <code data-pkg="JLutils">A2Rplot</code> permettant de rÃ©aliser facilement un dendrogramme avec les branches colorÃ©es<a href="#classification-ascendante-hierarchique_fn5" class="footnoteRef" id="classification-ascendante-hierarchique_fnref5"><sup>5</sup></a>. Par commoditÃ©, cette fonction est disponible directement au sein de lâ€™extension <code class="pkg">JLutils</code>.</p>
<p>Pour rÃ©aliser le graphique, on indiquera le nombre de classes et les couleurs Ã  utiliser pour chaque branche de lâ€™arbreÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">A2Rplot</span>(arbre, <span class="dt">k =</span> <span class="dv">5</span>, <span class="dt">boxes =</span> <span class="ot">FALSE</span>, <span class="dt">col.up =</span> <span class="st">"gray50"</span>, 
  <span class="dt">col.down =</span> <span class="kw">brewer.pal</span>(<span class="dv">5</span>, <span class="st">"Dark2"</span>), <span class="dt">show.labels =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p><img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-17-1.png" title="" alt="" width="1050"/></p>
<p>On pourra aussi noter lâ€™extension <code class="pkg">ggdendro</code> pour reprÃ©senter des dendrogrammes avec <code class="pkg">ggplot2</code> ou encore lâ€™extension <code class="pkg">dendextend</code> qui permet de manipuler, reprÃ©senter et comparer des dendrogrammes<a href="#classification-ascendante-hierarchique_fn6" class="footnoteRef" id="classification-ascendante-hierarchique_fnref6"><sup>6</sup></a>.</p>
</div>
</div>
<div id="classification-ascendante-hierarchique_factominer" class="section level2">
<h2>CAH avec lâ€™extension FactoMineR</h2>
<p>Lâ€™extension <code class="pkg">FactoMineR</code> fournit une fonction <code data-pkg="FactoMineR">HCPC</code> permettant de rÃ©aliser une classification hiÃ©rarchique Ã  partir du rÃ©sultats dâ€™une analyse factorielle rÃ©alisÃ©e avec la mÃªme extension (voir la <a href="#classification-ascendante-hierarchique_factominer">section dÃ©diÃ©e du chapitre sur lâ€™ACM</a>).</p>
<p><code data-pkg="FactoMineR">HCPC</code> rÃ©alise Ã  la fois le calcul de la matrice des distances, du dendrogramme et le partitionnement de la population en classes. Par dÃ©faut, <code data-pkg="FactoMineR">HCPC</code> calcule le dendrogramme Ã  partir du carrÃ© des distances du Î¦Â² et avec la mÃ©thode de Ward.</p>
<p>Par dÃ©faut, lâ€™arbre est affichÃ© Ã  lâ€™Ã©cran et lâ€™arbre sera coupÃ© selon la partition ayant la plus grande perte relative dâ€™inertie (comme avec <code data-pkg="JLutils">best.cutree</code>). Utilisez <code>graph=FALSE</code> pour ne pas afficher le graphique et lâ€™argument <code>nb.clust</code> pour indiquer le nombre de classes dÃ©sirÃ©es.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(FactoMineR)
acm2 &lt;-<span class="st"> </span><span class="kw">MCA</span>(d2[<span class="kw">complete.cases</span>(d2), ], <span class="dt">ncp =</span> <span class="dv">5</span>, <span class="dt">graph =</span> <span class="ot">FALSE</span>)
cah &lt;-<span class="st"> </span><span class="kw">HCPC</span>(acm2)</code></pre></div>
<img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-18-1.png" title="" alt="" width="1050"/>
<figcaption>
Graphique produit par HCPC
</figcaption>
</figure>
<p>On pourra reprÃ©senter le dendrogramme avec <code data-pkg="FactoMineR" data-rdoc="plot.HCPC">plot</code> et lâ€™argument <code>choice="tree"</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(cah, <span class="dt">choice =</span> <span class="st">"tree"</span>)</code></pre></div>
<img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-19-1.png" title="" alt="" width="1050"/>
<figcaption>
Dendrogramme obtenu avec HCPC (5 axes)
</figcaption>
</figure>
<p>Il apparait que le dendrogramme obtenu avec <code data-pacakge="FactoMineR">HCPC</code> diffÃ¨re de celui que nous avons calculÃ© prÃ©cÃ©demment en utilisant la matrice des distances fournies par <code data-pkg="ade4">dist.dudi</code>. Cela est dÃ» au fait que <code data-pkg="FactoMineR">HCPC</code> procÃ¨de diffÃ©rement pour calculer la matrice des distances en ne prenant en compte que les axes retenus dans le cadre de lâ€™ACM. Pour rappel, nous avions retenu que 5 axes dans le cadre de notre ACMÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">acm2 &lt;-<span class="st"> </span><span class="kw">MCA</span>(d2[<span class="kw">complete.cases</span>(d2), ], <span class="dt">ncp =</span> <span class="dv">5</span>, <span class="dt">graph =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p><code data-pkg="FactoMineR">HCPC</code> nâ€™a donc pris en compte que ces 5 premiers axes pour calculer les distances entre les individus, considÃ©rant que les autres axes nâ€™apportent que du Â«Â bruitÂ Â» rendant la classification instable. Cependant, comme le montre <code>summary(acm2)</code>, nos cinq premiers axes nâ€™expliquent que 54Â % de la variance. Il usuellement prÃ©fÃ©rable de garder un plus grande nombre dâ€™axes afin de couvrir au moins 80 Ã  90Â % de la variance<a href="#classification-ascendante-hierarchique_fn7" class="footnoteRef" id="classification-ascendante-hierarchique_fnref7"><sup>7</sup></a>. De son cÃ´tÃ©, <code data-pkg="ade4">dist.dudi</code> prends en compte lâ€™ensemble des axes pour calculer la matrice des distances. On peut reproduire cela avec <code class="pkg">FactoMineR</code> en indiquant <code>ncp=Inf</code> lors du calcul de lâ€™ACM.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">acm2 &lt;-<span class="st"> </span><span class="kw">MCA</span>(d2[<span class="kw">complete.cases</span>(d2), ], <span class="dt">ncp =</span> <span class="ot">Inf</span>, <span class="dt">graph =</span> <span class="ot">FALSE</span>)
cah &lt;-<span class="st"> </span><span class="kw">HCPC</span>(acm2, <span class="dt">nb.clust =</span> -<span class="dv">1</span>, <span class="dt">graph =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>On obtient bien cette fois-ci le mÃªme rÃ©sultat.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(cah, <span class="dt">choice =</span> <span class="st">"tree"</span>)</code></pre></div>
<img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-22-1.png" title="" alt="" width="1050"/>
<figcaption>
Dendrogramme obtenu avec HCPC (tous les axes)
</figcaption>
</figure>
<p>Dâ€™autres graphiques sont disponibles, en faisant varier la valeur de lâ€™argument <code>choice</code>Â :</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(cah, <span class="dt">choice =</span> <span class="st">"3D.map"</span>)</code></pre></div>
<img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-23-1.png" title="" alt="" width="1050"/>
<figcaption>
ReprÃ©sentation en 3 dimensions du dendrogramme
</figcaption>
</figure>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(cah, <span class="dt">choice =</span> <span class="st">"bar"</span>)</code></pre></div>
<img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-24-1.png" title="" alt="" width="1050"/>
<figcaption>
Gains dâ€™inertie
</figcaption>
</figure>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(cah, <span class="dt">choice =</span> <span class="st">"map"</span>)</code></pre></div>
<img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-25-1.png" title="" alt="" width="1050"/>
<figcaption>
Projection des catÃ©gories sur le plan factoriel
</figcaption>
</figure>
<p>Lâ€™objet renvoyÃ© par <code data-pkg="FactoMineR">HCPC</code> contient de nombreuses informations. La partition peut notamment Ãªtre rÃ©cupÃ©rÃ©e avec <code>cah$data.clust$clust</code>. Il y a Ã©galement diverses statistiques pour dÃ©crire les catÃ©gories.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cah</code></pre></div>
<pre><code>**Results for the Hierarchical Clustering on Principal Components**
   name                   
1  "$data.clust"          
2  "$desc.var"            
3  "$desc.var$test.chi2"  
4  "$desc.axes$category"  
5  "$desc.axes"           
6  "$desc.axes$quanti.var"
7  "$desc.axes$quanti"    
8  "$desc.ind"            
9  "$desc.ind$para"       
10 "$desc.ind$dist"       
11 "$call"                
12 "$call$t"              
   description                                              
1  "dataset with the cluster of the individuals"            
2  "description of the clusters by the variables"           
3  "description of the cluster var. by the categorical var."
4  "description of the clusters by the categories."         
5  "description of the clusters by the dimensions"          
6  "description of the cluster var. by the axes"            
7  "description of the clusters by the axes"                
8  "description of the clusters by the individuals"         
9  "parangons of each clusters"                             
10 "specific individuals"                                   
11 "summary statistics"                                     
12 "description of the tree"                                </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">freq</span>(cah$data.clust$clust)</code></pre></div>
<pre><code>     n    % val%
1  490 26.0 27.6
2  189 10.0 10.6
3  984 52.2 55.3
4   74  3.9  4.2
5   41  2.2  2.3
NA 108  5.7   NA</code></pre>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="classification-ascendante-hierarchique_fn1"><p>Pour une prÃ©sentation de ces diffÃ©rentes distances, on pourra se rÃ©fÃ©rer Ã  <a href="http://old.biodiversite.wallonie.be/outils/methodo/similarite_distance.htm" class="uri">http://old.biodiversite.wallonie.be/outils/methodo/similarite_distance.htm</a> ou encore Ã  ce support de cours par D. Chessel, J. Thioulouse et A.B. Dufour disponible Ã  <a href="http://pbil.univ-lyon1.fr/R/pdf/stage7.pdf" class="uri">http://pbil.univ-lyon1.fr/R/pdf/stage7.pdf</a>.<a href="#classification-ascendante-hierarchique_fnref1">â†©</a></p></li>
<li id="classification-ascendante-hierarchique_fn2"><p>Cette mÃªme fonction peut aussi Ãªtre utilisÃ©e pour calculer une distance aprÃ¨s une analyse en composantes principales ou une analyse mixte de Hill et Smith.<a href="#classification-ascendante-hierarchique_fnref2">â†©</a></p></li>
<li id="classification-ascendante-hierarchique_fn3"><p>On pourra consulter le cours de FG Carpentier dÃ©jÃ  citÃ© ou bien des ouvrages dâ€™analyse statistique.<a href="#classification-ascendante-hierarchique_fnref3">â†©</a></p></li>
<li id="classification-ascendante-hierarchique_fn4"><p>Depuis la version 3.1 de <strong>R</strong>.<a href="#classification-ascendante-hierarchique_fnref4">â†©</a></p></li>
<li id="classification-ascendante-hierarchique_fn5"><p>Voir <a href="http://addicted2or.free.fr/packages/A2R/lastVersion/R/code.R" class="uri">http://addicted2or.free.fr/packages/A2R/lastVersion/R/code.R</a>.<a href="#classification-ascendante-hierarchique_fnref5">â†©</a></p></li>
<li id="classification-ascendante-hierarchique_fn6"><p>Pour une prÃ©sentation succincte, voir par exemple <a href="http://www.r-bloggers.com/dendextend-version-1-0-1-user2015-presentation/" class="uri">http://www.r-bloggers.com/dendextend-version-1-0-1-user2015-presentation/</a> (en anglais).<a href="#classification-ascendante-hierarchique_fnref6">â†©</a></p></li>
<li id="classification-ascendante-hierarchique_fn7"><p>Voir <a href="http://factominer.free.fr/classical-methods/classification-hierarchique-sur-composantes-principales.html" class="uri">http://factominer.free.fr/classical-methods/classification-hierarchique-sur-composantes-principales.html</a><a href="#classification-ascendante-hierarchique_fnref7">â†©</a></p></li>
</ol>
</div>

</article>
<article id="modeles-lineaires-a-effets-mixtes">

<div class="fluid-row" id="modeles-lineaires-a-effets-mixtes_header">


<h1 class="title">ModÃ¨les linÃ©aires Ã  effets mixtes</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="modeles-gee">

<div class="fluid-row" id="modeles-gee_header">


<h1 class="title">ModÃ¨les GEE</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="series-temporelles">

<div class="fluid-row" id="series-temporelles_header">


<h1 class="title">SÃ©ries temporelles</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="modeles-a-temps-discret">

<div class="fluid-row" id="modeles-a-temps-discret_header">


<h1 class="title">ModÃ¨les Ã  temps discret</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="analyse-de-survie">

<div class="fluid-row" id="analyse-de-survie_header">


<h1 class="title">Analyse de survie</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="analyse-de-sequences">

<div class="fluid-row" id="analyse-de-sequences_header">


<h1 class="title">Analyse de sÃ©quences</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#analyse-de-sequences_lanalyse-de-sequences">Lâ€™analyse de sÃ©quences</a></li>
<li><a href="#analyse-de-sequences_installer-traminer-et-recuperer-les-donnees">Installer TraMineR et rÃ©cupÃ©rer les donnÃ©es</a></li>
<li><a href="#analyse-de-sequences_appariement-optimal-et-classification">Appariement optimal et classification</a></li>
<li><a href="#analyse-de-sequences_representations-graphiques">ReprÃ©sentations graphiques</a></li>
<li><a href="#analyse-de-sequences_bibliographie">Bibliographie</a></li>
</ul>
</div>

<div class="note">
<p>La version originale de ce chapitre est une reprise, avec lâ€™aimable autorisation de son auteur, dâ€™un article de Nicolas Robette intitulÃ© <em>Lâ€™analyse de sÃ©quencesÂ : une introduction avec le logiciel R et le package TraMineR</em> et publiÃ© sur le blog Quanti (<a href="http://quanti.hypotheses.org/686/" class="uri">http://quanti.hypotheses.org/686/</a>).</p>
</div>
<p>Depuis les annÃ©es 1980, lâ€™Ã©tude quantitative des <dfn data-index="trajectoire biographique">trajectoires biographiques</dfn> (<dfn lang="en">life course analysis</dfn>) a pris une ampleur considÃ©rable dans le champ des sciences sociales. Les collectes de donnÃ©es micro-individuelles longitudinales se sont dÃ©veloppÃ©es, principalement sous la forme de panels ou dâ€™enquÃªtes rÃ©trospectives. ParallÃ¨lement Ã  cette multiplication des donnÃ©es disponibles, la mÃ©thodologie statistique a connu de profondes Ã©volutions. Lâ€™<dfn>analyse des biographies</dfn><dfn data-index="biographie, analyse"/> (<dfn lang="en">event history analysis</dfn>) â€” qui ajoute une dimension diachronique aux modÃ¨les Ã©conomÃ©triques mainstream â€” sâ€™est rapidement imposÃ©e comme lâ€™approche dominanteÂ : il sâ€™agit de modÃ©liser la durÃ©e des situations ou le risque dâ€™occurrence des Ã©vÃ©nements.</p>
<div id="analyse-de-sequences_lanalyse-de-sequences" class="section level2">
<h2>Lâ€™analyse de sÃ©quences</h2>
<p>Cependant, ces derniÃ¨res annÃ©es ont vu la diffusion dâ€™un large corpus de mÃ©thodes descriptives dâ€™<dfn>analyse de sÃ©quences</dfn><dfn data-index="sÃ©quence, analyse"/>, au sein desquelles lâ€™<dfn>appariement optimal</dfn><dfn data-index="optimal, appariement"/> (<dfn lang="en">optimal matching</dfn><dfn data-index="matching, optimal" lang="en"/>) occupe une place centrale<a href="#analyse-de-sequences_fn1" class="footnoteRef" id="analyse-de-sequences_fnref1"><sup>1</sup></a>. Lâ€™objectif principal de ces mÃ©thodes est dâ€™identifier â€” dans la diversitÃ© dâ€™un corpus de sÃ©quences constituÃ©es de sÃ©ries dâ€™Ã©tats successifs â€” les rÃ©gularitÃ©s, les ressemblances, puis le plus souvent de construire des typologies de Â«Â sÃ©quences-typesÂ Â». Lâ€™analyse de sÃ©quences constitue donc un moyen de dÃ©crire mais aussi de mieux comprendre le dÃ©roulement de divers processus.</p>
<p>La majeure partie des applications de lâ€™analyse de sÃ©quences traite de trajectoires biographiques ou de carriÃ¨res professionnelles. Dans ces cas, chaque trajectoire ou chaque carriÃ¨re est dÃ©crite par une sÃ©quence, autrement dit par une suite chronologiquement ordonnÃ©e de Â«Â momentsÂ Â» Ã©lÃ©mentaires, chaque moment correspondant Ã  un Â«Â Ã©tatÂ Â» dÃ©terminÃ© de la trajectoire (par exemple, pour les carriÃ¨res professionnellesÂ : Ãªtre en emploi, au chÃ´mage ou en inactivitÃ©). Mais on peut bien sÃ»r imaginer des types de sÃ©quences plus originauxÂ : Andrew Abbott<a href="#analyse-de-sequences_fn2" class="footnoteRef" id="analyse-de-sequences_fnref2"><sup>2</sup></a>, le sociologue amÃ©ricain qui a introduit lâ€™<em>optimal matching</em> dans les sciences scientifiques ou des sÃ©quences de pas de danses traditionnelles.</p>
<p>En France, les premiers travaux utilisant lâ€™appariement optimal sont ceux de Claire Lemercier<a href="#analyse-de-sequences_fn3" class="footnoteRef" id="analyse-de-sequences_fnref3"><sup>3</sup></a> sur les carriÃ¨res des membres des institutions consulaires parisiennes au <span style="font-variant: small-caps;">xix</span><sup>e</sup> siÃ¨cle (Lemercier, 2005), et de Laurent Lesnard<a href="#analyse-de-sequences_fn4" class="footnoteRef" id="analyse-de-sequences_fnref4"><sup>4</sup></a> sur les emplois du temps (Lesnard, 2008). Mais dÃ¨s les annÃ©es 1980, les chercheurs du CÃ©req construisaient des typologies de trajectoires dâ€™insertion Ã  lâ€™aide des mÃ©thodes dâ€™analyse des donnÃ©es Â«Â Ã  la franÃ§aiseÂ Â» (analyse des correspondances, etc.)<a href="#analyse-de-sequences_fn5" class="footnoteRef" id="analyse-de-sequences_fnref5"><sup>5</sup></a>. Au final, on dÃ©nombre maintenant plus dâ€™une centaine dâ€™articles de sciences sociales contenant ou discutant des techniques empruntÃ©es Ã  lâ€™analyse de sÃ©quences.</p>
<p>Pour une prÃ©sentation des diffÃ©rentes mÃ©thodes dâ€™analyse de sÃ©quences disponibles et de leur mise en oeuvre pratique, il existe un petit manuel en franÃ§ais, publiÃ© en 2011 derniÃ¨re aux Ã©ditions du Ceped (collection Â«Â Les clefs pourÂ Â»<a href="#analyse-de-sequences_fn6" class="footnoteRef" id="analyse-de-sequences_fnref6"><sup>6</sup></a>) et disponible en pdf<a href="#analyse-de-sequences_fn7" class="footnoteRef" id="analyse-de-sequences_fnref7"><sup>7</sup></a> (Robette, 2011). De plus, un article rÃ©cemment publiÃ© dans le <em>Bulletin de MÃ©thodologie Sociologique</em> compare de maniÃ¨re systÃ©matique les rÃ©sultats obtenus par les principales mÃ©thodes dâ€™analyse de sÃ©quences (Robette &amp; Bry, 2012). La conclusion en est quâ€™avec des donnÃ©es empiriques aussi structurÃ©es que celles que lâ€™on utilise en sciences sociales, lâ€™approche est robuste, câ€™est-Ã -dire quâ€™un changement de mÃ©thode aura peu dâ€™influence sur les principaux rÃ©sultats. Cependant, lâ€™article tente aussi de dÃ©crire les spÃ©cificitÃ©s de chaque mÃ©thode et les diffÃ©rences marginales quâ€™elles font apparaÃ®tre, afin de permettre aux chercheurs de mieux adapter leurs choix mÃ©thodologiques Ã  leur question de recherche.</p>
<p>Afin dâ€™illustrer la dÃ©marche de lâ€™analyse de sÃ©quences, nous allons procÃ©der ici Ã  la description Â«Â pas Ã  pasÂ Â» dâ€™un corpus de carriÃ¨res professionnelles, issues de lâ€™enquÃªte <em>Biographies et entourage</em> (Ined, 2000)<a href="#analyse-de-sequences_fn8" class="footnoteRef" id="analyse-de-sequences_fnref8"><sup>8</sup></a>. Et pour ce faire, on va utiliser le logiciel <strong>R</strong>, qui propose la solution actuellement la plus complÃ¨te et la plus puissante en matiÃ¨re dâ€™analyse de sÃ©quences. Les mÃ©thodes dâ€™analyse de sÃ©quences par analyses factorielles ou de correspondances ne nÃ©cessitent pas de logiciel spÃ©cifiqueÂ : tous les logiciels de statistiques gÃ©nÃ©ralistes peuvent Ãªtre utilisÃ©s (<strong>SAS</strong>, <strong>SPSS</strong>, <strong>Stata</strong>, <strong>R</strong>, etc.). En revanche, il nâ€™existe pas de fonctions pour lâ€™appariement optimal dans <strong>SAS</strong> ou <strong>SPSS</strong>. Certains logiciels gratuits implÃ©mentent lâ€™appariement optimal (comme <strong>Chesa</strong><a href="#analyse-de-sequences_fn9" class="footnoteRef" id="analyse-de-sequences_fnref9"><sup>9</sup></a> ou <strong>TDA</strong><a href="#analyse-de-sequences_fn10" class="footnoteRef" id="analyse-de-sequences_fnref10"><sup>10</sup></a>) mais il faut alors recourir Ã  dâ€™autres programmes pour dÃ©rouler lâ€™ensemble de lâ€™analyse (classification, reprÃ©sentation graphique). <strong>Stata</strong> propose le module <strong>sq</strong><a href="#analyse-de-sequences_fn11" class="footnoteRef" id="analyse-de-sequences_fnref11"><sup>11</sup></a>, qui dispose dâ€™un Ã©ventail de fonctions intÃ©ressantes. Mais câ€™est <strong>R</strong> et le package <code class="pkg">TraMineR</code><a href="#analyse-de-sequences_fn12" class="footnoteRef" id="analyse-de-sequences_fnref12"><sup>12</sup></a>, dÃ©veloppÃ© par des collÃ¨gues de lâ€™UniversitÃ© de GenÃ¨ve (Gabadinho et al, 2011), qui fournit la solution la plus complÃ¨te et la plus puissante Ã  ce jourÂ : on y trouve lâ€™appariement optimal mais aussi dâ€™autres algorithmes alternatifs, ainsi que de nombreuses fonctions de description des sÃ©quences et de reprÃ©sentation graphique.</p>
</div>
<div id="analyse-de-sequences_installer-traminer-et-recuperer-les-donnees" class="section level2">
<h2>Installer TraMineR et rÃ©cupÃ©rer les donnÃ©es</h2>
<p>Tout dâ€™abord, Ã  quoi ressemblent nos donnÃ©esÂ ? On a reconstruit Ã  partir de lâ€™enquÃªte les carriÃ¨res de 1000 hommes. Pour chacune, on connaÃ®t la position professionnelle chaque annÃ©e, de lâ€™Ã¢ge de 14 ans jusquâ€™Ã  50 ans. Cette position est codÃ©e de la maniÃ¨re suivanteÂ : les codes 1 Ã  6 correspondent aux groupes socioprofessionnels de la nomenclature des PCS de lâ€™INSEE 13 (agriculteurs exploitantsÂ ; artisans, commerÃ§ants et chefs dâ€™entrepriseÂ ; cadres et professions intellectuelles supÃ©rieuresÂ ; professions intermÃ©diairesÂ ; employÃ©sÂ ; ouvriers)Â ; on y a ajoutÃ© Â«Â Ã©tudesÂ Â» (code 7), Â«Â inactivitÃ©Â Â» (code 8) et Â«Â service militaireÂ Â» (code 9). Le fichier de donnÃ©es comporte une ligne par individu et une colonne par annÃ©eÂ : la variable <em>csp1</em> correspond Ã  la position Ã  14 ans, la variable <em>csp2</em> Ã  la position Ã  15 ans, etc. Par ailleurs, les enquÃªtÃ©s Ã©tant tous nÃ©s entre 1930 et 1950, on ajoute Ã  notre base une variable Â«Â gÃ©nÃ©rationÂ Â» Ã  trois modalitÃ©s, prenant les valeurs suivantesÂ : 1=â€œ1930-1938â€Â ; 2=â€œ1939-1945â€Â ; 3=â€œ1946-1950â€. Au final, la base est constituÃ©e de 500 lignes et de 37Â +Â 1Â =Â 38 colonnes et se prÃ©sente sous la forme dâ€™un fichier texte au format <strong>csv</strong> (tÃ©lÃ©chargeable Ã  <a href="http://larmarange.github.io/analyse-R/data/trajpro.csv" class="uri">http://larmarange.github.io/analyse-R/data/trajpro.csv</a>).</p>
<p>Une fois <strong>R</strong> ouvert, on commence par installer les extensions nÃ©cessaires Ã  ce programme (opÃ©ration Ã  ne rÃ©aliser que lors de leur premiÃ¨re utilisation) et par les charger en mÃ©moire. Lâ€™extension <code class="pkg">TraMineR</code> propose de nombreuses fonctions pour lâ€™analyse de sÃ©quences. Lâ€™extension <code class="pkg">cluster</code> comprend un certain nombre de mÃ©thodes de classification automatique<a href="#analyse-de-sequences_fn13" class="footnoteRef" id="analyse-de-sequences_fnref13"><sup>13</sup></a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="kw">c</span>(<span class="st">"TraMineR"</span>))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(TraMineR)</code></pre></div>
<pre><code>
TraMineR stable version 1.8-9 (Built: 2015-06-20)
Website: http://mephisto.unige.ch/traminer
Please type 'citation("TraMineR")' for citation information.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(cluster)</code></pre></div>
<p>On importe ensuite les donnÃ©es, on recode la variable Â«Â gÃ©nÃ©rationÂ Â» pour lui donner des Ã©tiquettes plus explicites. On jette Ã©galement un coup dâ€™oeil Ã  la structure du tableau de donnÃ©esÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">donnees &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">"http://larmarange.github.io/analyse-R/data/trajpro.csv"</span>, 
  <span class="dt">header =</span> T)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">donnees$generation &lt;-<span class="st"> </span><span class="kw">factor</span>(donnees$generation, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">"1930-38"</span>, 
  <span class="st">"1939-45"</span>, <span class="st">"1946-50"</span>))
<span class="kw">str</span>(donnees)</code></pre></div>
<pre><code>'data.frame':   1000 obs. of  38 variables:
 $ csp1      : int  1 7 6 7 7 6 7 7 7 6 ...
 $ csp2      : int  1 7 6 7 7 6 7 7 6 6 ...
 $ csp3      : int  1 7 6 6 7 6 7 7 6 6 ...
 $ csp4      : int  1 7 6 6 7 6 7 7 6 6 ...
 $ csp5      : int  1 7 6 6 7 6 7 7 6 6 ...
 $ csp6      : int  1 7 6 6 7 6 9 7 6 6 ...
 $ csp7      : int  6 9 6 6 7 6 9 7 9 6 ...
 $ csp8      : int  6 9 9 6 7 6 9 7 4 6 ...
 $ csp9      : int  6 6 9 6 7 6 9 3 4 9 ...
 $ csp10     : int  6 6 9 6 7 6 4 3 4 9 ...
 $ csp11     : int  6 6 6 6 3 6 4 3 4 6 ...
 $ csp12     : int  6 6 6 6 3 6 4 3 4 6 ...
 $ csp13     : int  6 6 6 6 3 6 4 3 4 6 ...
 $ csp14     : int  6 4 6 6 3 6 4 3 4 6 ...
 $ csp15     : int  6 4 6 6 3 6 4 3 4 6 ...
 $ csp16     : int  6 4 6 6 3 6 6 3 4 6 ...
 $ csp17     : int  6 4 6 6 3 6 6 3 4 6 ...
 $ csp18     : int  6 4 6 6 3 6 6 3 4 6 ...
 $ csp19     : int  6 4 6 6 3 6 6 3 4 6 ...
 $ csp20     : int  6 4 6 6 3 6 6 3 4 6 ...
 $ csp21     : int  6 4 6 6 6 6 6 3 4 6 ...
 $ csp22     : int  6 4 6 6 6 6 6 3 4 4 ...
 $ csp23     : int  6 4 6 6 6 6 6 3 4 4 ...
 $ csp24     : int  6 6 6 6 5 6 6 3 4 4 ...
 $ csp25     : int  6 6 6 6 5 6 6 3 4 4 ...
 $ csp26     : int  6 6 6 6 5 6 6 3 4 4 ...
 $ csp27     : int  6 6 6 6 5 6 6 3 4 4 ...
 $ csp28     : int  6 6 6 6 5 6 6 3 4 4 ...
 $ csp29     : int  6 6 6 6 5 6 6 3 4 4 ...
 $ csp30     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ csp31     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ csp32     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ csp33     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ csp34     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ csp35     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ csp36     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ csp37     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ generation: Factor w/ 3 levels "1930-38","1939-45",..: 2 1 1 3 2 3 1 1 2 1 ...</code></pre>
<p>On a bien 1000 observations et 38 variables. On dÃ©finit maintenant des <em>labels</em> pour les diffÃ©rents Ã©tats qui composent les sÃ©quences et on crÃ©e un objet Â«Â sÃ©quenceÂ Â» avec <code data-pkg="TraMineR">seqdef</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">labels &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"agric"</span>, <span class="st">"acce"</span>, <span class="st">"cadr"</span>, <span class="st">"pint"</span>, <span class="st">"empl"</span>, 
  <span class="st">"ouvr"</span>, <span class="st">"etud"</span>, <span class="st">"inact"</span>, <span class="st">"smil"</span>)
seq &lt;-<span class="st"> </span><span class="kw">seqdef</span>(donnees[, <span class="dv">1</span>:<span class="dv">37</span>], <span class="dt">states =</span> labels)</code></pre></div>
<pre><code> [&gt;] state coding:
       [alphabet]  [label]  [long label] 
     1  1           agric    agric
     2  2           acce     acce
     3  3           cadr     cadr
     4  4           pint     pint
     5  5           empl     empl
     6  6           ouvr     ouvr
     7  7           etud     etud
     8  8           inact    inact
     9  9           smil     smil
 [&gt;] 1000 sequences in the data set
 [&gt;] min/max sequence length: 37/37</code></pre>
</div>
<div id="analyse-de-sequences_appariement-optimal-et-classification" class="section level2">
<h2>Appariement optimal et classification</h2>
<p>Ces Ã©tapes prÃ©alables achevÃ©es, on peut comparer les sÃ©quences en calculant les dissimilaritÃ©s entre paires de sÃ©quences. On va ici utiliser la mÃ©thode la plus rÃ©pandue, lâ€™appariement optimal (<em>optimal matching</em>). Cette mÃ©thode consiste, pour chaque paire de sÃ©quences, Ã  compter le nombre minimal de modifications (substitutions, suppressions, insertions) quâ€™il faut faire subir Ã  lâ€™une des sÃ©quences pour obtenir lâ€™autre. On peut considÃ©rer que chaque modification est Ã©quivalente, mais il est aussi possible de prendre en compte le fait que les Â«Â distancesÂ Â» entre les diffÃ©rents Ã©tats nâ€™ont pas toutes la mÃªme Â«Â valeurÂ Â» (par exemple, la distance sociale entre emploi Ã  temps plein et chÃ´mage est plus grande quâ€™entre emploi Ã  temps plein et emploi Ã  temps partiel), en assignant aux diffÃ©rentes modifications des Â«Â coÃ»tsÂ Â» distincts. Dans notre exemple, on va crÃ©er avec <code data-pkg="TraMineR">seqsubm</code> une Â«Â matrice des coÃ»ts de substitutionÂ Â» dans laquelle tous les coÃ»ts sont constants et Ã©gaux Ã  2<a href="#analyse-de-sequences_fn14" class="footnoteRef" id="analyse-de-sequences_fnref14"><sup>14</sup></a>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">couts &lt;-<span class="st"> </span><span class="kw">seqsubm</span>(seq, <span class="dt">method =</span> <span class="st">"CONSTANT"</span>, <span class="dt">cval =</span> <span class="dv">2</span>)</code></pre></div>
<pre><code> [&gt;] creating 9x9 substitution-cost matrix using 2 as constant value</code></pre>
<p>Ensuite, on calcule la <dfn>matrice de distances</dfn><dfn data-index="distance, matrice"/> entre les sÃ©quences (i.e contenant les Â«Â dissimilaritÃ©sÂ Â» entre les sÃ©quences) avec <code data-pkg="TraMineR">seqdist</code>, avec un coÃ»t dâ€™insertion/suppression (<em>indel</em>) que lâ€™on fixe ici Ã  1,1Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">seq.om &lt;-<span class="st"> </span><span class="kw">seqdist</span>(seq, <span class="dt">method =</span> <span class="st">"OM"</span>, <span class="dt">indel =</span> <span class="fl">1.1</span>, 
  <span class="dt">sm =</span> couts)</code></pre></div>
<pre><code> [&gt;] 1000 sequences with 9 distinct events/states
 [&gt;] 818 distinct sequences
 [&gt;] min/max sequence length: 37/37
 [&gt;] computing distances using OM metric
 [&gt;] total time: 1.78 secs</code></pre>
<p>Cette matrice des distances ou des dissimilaritÃ©s entre sÃ©quences peut ensuite Ãªtre utilisÃ©e pour une <dfn>classification ascendante hiÃ©rarchique</dfn> (<dfn>CAH</dfn>), qui permet de regrouper les sÃ©quences en un certain nombre de Â«Â classesÂ Â» en fonction de leur proximitÃ©Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">seq.agnes &lt;-<span class="st"> </span><span class="kw">agnes</span>(<span class="kw">as.dist</span>(seq.om), <span class="dt">method =</span> <span class="st">"ward"</span>, 
  <span class="dt">keep.diss =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>Avec la fonction <code data-pkg="stats" data-rdoc="dendrogram">plot</code>, il est possible de tracer lâ€™arbre de la classification (<dfn>dendrogramme</dfn>).</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="kw">as.dendrogram</span>(seq.agnes), <span class="dt">leaflab =</span> <span class="st">"none"</span>)</code></pre></div>
<img src="graphs/analyse-de-sequences/unnamed-chunk-10-1.png" title="" alt="" width="1050"/>
<figcaption>
Dendrogramme de la classification des sÃ©quences
</figcaption>
</figure>
<p>De mÃªme, on peut reprÃ©senter les <dfn data-index="saut d'inertie">sauts dâ€™inertie</dfn>&lt;dfn data-index=â€œinertie, sautâ€.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="kw">sort</span>(seq.agnes$height, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>)[<span class="dv">1</span>:<span class="dv">20</span>], 
  <span class="dt">type =</span> <span class="st">"s"</span>, <span class="dt">xlab =</span> <span class="st">"nb de classes"</span>, <span class="dt">ylab =</span> <span class="st">"inertie"</span>)</code></pre></div>
<img src="graphs/analyse-de-sequences/unnamed-chunk-11-1.png" title="" alt="" width="1050"/>
<figcaption>
Sauts dâ€™inertie de la classification des sÃ©quences
</figcaption>
</figure>
<p>Lâ€™observation, sur ce dendogramme ou sur la courbe des sauts dâ€™inertie, des sauts dâ€™inertie des derniÃ¨res Ã©tapes de la classification peut servir de guide pour dÃ©terminer le nombre de classes que lâ€™on va retenir pour la suite des analyses. Une premiÃ¨re inflexion dans la courbe des sauts dâ€™inertie apparaÃ®t au niveau dâ€™une partition en 5 classes. On voit aussi une seconde inflexion assez nette Ã  7 classes. Mais il faut garder en tÃªte le fait que ces outils ne sont que des guides, le choix devant avant tout se faire aprÃ¨s diffÃ©rents essais, en fonction de lâ€™intÃ©rÃªt des rÃ©sultats par rapport Ã  la question de recherche et en arbitrant entre exhaustivitÃ© et parcimonie.</p>
<p>On fait ici le choix dâ€™une <dfn>partition</dfn> en 5 classesÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nbcl &lt;-<span class="st"> </span><span class="dv">5</span>
seq.part &lt;-<span class="st"> </span><span class="kw">cutree</span>(seq.agnes, nbcl)
seq.part &lt;-<span class="st"> </span><span class="kw">factor</span>(seq.part, <span class="dt">labels =</span> <span class="kw">paste</span>(<span class="st">"classe"</span>, 
  <span class="dv">1</span>:nbcl, <span class="dt">sep =</span> <span class="st">"."</span>))</code></pre></div>
</div>
<div id="analyse-de-sequences_representations-graphiques" class="section level2">
<h2>ReprÃ©sentations graphiques</h2>
<p>Pour se faire une premiÃ¨re idÃ©e de la nature des classes de la typologie, il existe un certain nombre de reprÃ©sentations graphiques. Les chronogrammes (<em>state distribution plots</em>) prÃ©sentent une sÃ©rie de coupes transversalesÂ : pour chaque Ã¢ge, on a les proportions dâ€™individus de la classe dans les diffÃ©rentes situations (agriculteur, Ã©tudiant, etc.). Ce graphique sâ€™obtient avec <code data-pkg="TraMineR" data-rdoc="seqplot">seqdplot</code>Â :</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seqdplot</span>(seq, <span class="dt">group =</span> seq.part, <span class="dt">xtlab =</span> <span class="dv">14</span>:<span class="dv">50</span>, <span class="dt">border =</span> <span class="ot">NA</span>, 
  <span class="dt">withlegend =</span> T)</code></pre></div>
<img src="graphs/analyse-de-sequences/unnamed-chunk-13-1.png" title="" alt="" width="1050"/>
<figcaption>
Chronogrammes
</figcaption>
</figure>
<p>Chacune des classes semble caractÃ©risÃ©e par un groupe professionnel principalÂ : profession intermÃ©diaire pour la classe 1, ouvrier pour la 2, employÃ© pour la 3, cadre pour la 4 et indÃ©pendant pour la 5. Cependant, on aperÃ§oit aussi des Â«Â couchesÂ Â» dâ€™autres couleurs, indiquant que lâ€™ensemble des carriÃ¨res ne sont probablement pas stables.</p>
<p>Les Â«Â <dfn dataindex="tapis des sÃ©quences">tapis</dfn><dfn data-index="sÃ©quence, tapis"/>Â Â» (<dfn lang="en">index plots</dfn>), obtenus avec <code data-pkg="TraMineR" data-rdoc="seqplot">seqiplot</code>, permettent de mieux visualiser la dimension individuelle des sÃ©quences. Chaque segment horizontal reprÃ©sente une sÃ©quence, dÃ©coupÃ©e en sous-segments correspondant aux aux diffÃ©rents Ã©tats successifs qui composent la sÃ©quence.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seqiplot</span>(seq, <span class="dt">group =</span> seq.part, <span class="dt">xtlab =</span> <span class="dv">14</span>:<span class="dv">50</span>, <span class="dt">tlim =</span> <span class="dv">0</span>, 
  <span class="dt">space =</span> <span class="dv">0</span>, <span class="dt">border =</span> <span class="ot">NA</span>, <span class="dt">withlegend =</span> T, <span class="dt">yaxis =</span> <span class="ot">FALSE</span>)</code></pre></div>
<img src="graphs/analyse-de-sequences/unnamed-chunk-14-1.png" title="" alt="" width="1050"/>
<figcaption>
Tapis des sÃ©quences triÃ©s
</figcaption>
</figure>
<p>Il est possible de trier les sÃ©quences pour rendre les tapis plus lisibles (on trie ici par <dfn lang="en">multidimensional scaling</dfn> Ã  lâ€™aide de la fonction <code data-pkg="stats">cmdscale</code>).</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ordre &lt;-<span class="st"> </span><span class="kw">cmdscale</span>(<span class="kw">as.dist</span>(seq.om), <span class="dt">k =</span> <span class="dv">1</span>)
<span class="kw">seqiplot</span>(seq, <span class="dt">group =</span> seq.part, <span class="dt">sortv =</span> ordre, <span class="dt">xtlab =</span> <span class="dv">14</span>:<span class="dv">50</span>, 
  <span class="dt">tlim =</span> <span class="dv">0</span>, <span class="dt">space =</span> <span class="dv">0</span>, <span class="dt">border =</span> <span class="ot">NA</span>, <span class="dt">withlegend =</span> T, 
  <span class="dt">yaxis =</span> <span class="ot">FALSE</span>)</code></pre></div>
<img src="graphs/analyse-de-sequences/unnamed-chunk-15-1.png" title="" alt="" width="1050"/>
<figcaption>
Tapis des sÃ©quences triÃ©s par multidimensional scaling
</figcaption>
</figure>
<p>On voit mieux apparaÃ®tre ainsi lâ€™hÃ©tÃ©rogÃ©nÃ©itÃ© de certaines classes. Les classes 1, 3 et 4, par exemple, semblent regrouper des carriÃ¨res relativement stables (respectivement de professions intermÃ©diaires, dâ€™employÃ©s et de cadres) et des carriÃ¨res plus Â«Â mobilesÂ Â» commencÃ©es comme ouvrier (classes 1 et 3, en orange) ou comme profession intermÃ©diaire (classe 4, en rouge). De mÃªme, la majoritÃ© des membres de la derniÃ¨re classe commencent leur carriÃ¨re dans un groupe professionnel distinct de celui quâ€™ils occuperont par la suite (indÃ©pendants). Ces distinctions apparaissent dâ€™ailleurs si on relance le programme avec un nombre plus Ã©levÃ© de classes (en remplaÃ§ant le 5 de la ligne <code>nbcl &lt;- 5</code> par 7, seconde inflexion de la courbe des sauts dâ€™inertie, et en exÃ©cutant de nouveau le programme Ã  partir de cette ligne)Â : les stables et les mobiles se trouvent alors dans des classes distinctes.</p>
<p>Le package <code class="pkg">JLutils</code>, disponible sur <a href="https://github.com/larmarange/JLutils"><strong>GitHub</strong></a>, propose une fonction <code data-pkg="JLutils">seq_heatmap</code> permettant de reprÃ©senter le tapis de lâ€™ensemble des sÃ©quences selon lâ€™ordre du dendrogramme.</p>
<p>Pour installer <code class="pkg">JLutils</code>, on aura recours au package <code class="pkg">devtools</code> et Ã  sa fonction <code data-pkg="devtools">install_github</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="kw">install_github</span>(<span class="st">"larmarange/JLutils"</span>)</code></pre></div>
<p>On peut ensuite gÃ©nÃ©rer le graphique ainsiÂ :</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(JLutils)
<span class="kw">seq_heatmap</span>(seq, seq.agnes, <span class="dt">labCol =</span> <span class="dv">14</span>:<span class="dv">50</span>)</code></pre></div>
<img src="graphs/analyse-de-sequences/unnamed-chunk-17-1.png" title="" alt="" width="1050"/>
<figcaption>
Tapis des sÃ©quences triÃ© selon le dendrogramme
</figcaption>
</figure>
<p>La distance moyenne des sÃ©quences dâ€™une classe au centre de cette classe, obtenue avec <code data-pkg="TraMineR">disscenter</code>, permet de mesurer plus prÃ©cisÃ©ment lâ€™<dfn>homogÃ©nÃ©itÃ© des classes</dfn><dfn data-index="classe, homogÃ©nÃ©itÃ©"/>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">round</span>(<span class="kw">aggregate</span>(<span class="kw">disscenter</span>(<span class="kw">as.dist</span>(seq.om), <span class="dt">group =</span> seq.part), 
  <span class="kw">list</span>(seq.part), mean)[, -<span class="dv">1</span>], <span class="dv">1</span>)</code></pre></div>
<pre><code>[1] 13.1  8.9 15.6  9.7 16.5</code></pre>
<p>Cela nous confirme que les classes 1, 3 et 5 sont nettement plus hÃ©tÃ©rogÃ¨nes que les autres, alors que la classe 2 est la plus homogÃ¨ne.</p>
<p>Dâ€™autres reprÃ©sentations graphiques existent pour poursuivre lâ€™examen de la typologie. On peut visualiser les 10 sÃ©quences les plus frÃ©quentes de chaque classe avec <code data-pkg="TraMineR" data-rdoc="seqplot">seqfplot</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seqfplot</span>(seq, <span class="dt">group =</span> seq.part, <span class="dt">withlegend =</span> T)</code></pre></div>
<img src="graphs/analyse-de-sequences/unnamed-chunk-19-1.png" title="" alt="" width="1050"/>
<figcaption>
SÃ©quences les plus frÃ©quentes de chaque classe
</figcaption>
</figure>
<p>On peut aussi visualiser avec <code data-pkg="TraMineR" data-rdoc="seqplot">seqmsplot</code> lâ€™Ã©tat modal (celui qui correspond au plus grand nombre de sÃ©quences de la classe) Ã  chaque Ã¢ge.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seqmsplot</span>(seq, <span class="dt">group =</span> seq.part, <span class="dt">xtlab =</span> <span class="dv">14</span>:<span class="dv">50</span>, <span class="dt">withlegend =</span> T, 
  <span class="dt">title =</span> <span class="st">"classe"</span>)</code></pre></div>
<img src="graphs/analyse-de-sequences/unnamed-chunk-20-1.png" title="" alt="" width="1050"/>
<figcaption>
Statut modal Ã  chaque Ã¢ge
</figcaption>
</figure>
<p>On peut Ã©galement reprÃ©senter avec <code data-pkg="TraMineR" data-rdoc="seqplot">seqmtplot</code> les durÃ©es moyennes passÃ©es dans les diffÃ©rents Ã©tats.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seqmtplot</span>(seq, <span class="dt">group =</span> seq.part, <span class="dt">withlegend =</span> T)</code></pre></div>
<img src="graphs/analyse-de-sequences/unnamed-chunk-21-1.png" title="" alt="" width="1050"/>
<figcaption>
DurÃ©e moyenne dans chaque statut
</figcaption>
</figure>
<p>Enfin, lâ€™<dfn>entropie transversale</dfn><dfn data-index="transversale, entropie"/> dÃ©crit lâ€™Ã©volution de lâ€™homogÃ©nÃ©itÃ© de la classe. Pour un Ã¢ge donnÃ©, une entropie proche de 0 signifie que tous les individus de la classe (ou presque) sont dans la mÃªme situation. Ã€ lâ€™inverse, lâ€™entropie est de 1 si les individus sont dispersÃ©s dans toutes les situations. Ce type de graphique produit par <code data-pkg="TraMineR" data-rdoc="seqplot">seqHtplot</code> peut Ãªtre pratique pour localiser les moments de transition, lâ€™insertion professionnelle ou une mobilitÃ© sociale ascendante.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seqHtplot</span>(seq, <span class="dt">group =</span> seq.part, <span class="dt">xtlab =</span> <span class="dv">14</span>:<span class="dv">50</span>, <span class="dt">withlegend =</span> T)</code></pre></div>
<img src="graphs/analyse-de-sequences/unnamed-chunk-22-1.png" title="" alt="" width="1050"/>
<figcaption>
Entropie transversale
</figcaption>
</figure>
<p>On souhaite maintenant connaÃ®tre la distribution de la typologie (en effectifs et en pourcentages)Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">freq</span>(seq.part)</code></pre></div>
<pre><code>           n    % val%
classe.1 280 28.0 28.0
classe.2 199 19.9 19.9
classe.3 114 11.4 11.4
classe.4 341 34.1 34.1
classe.5  66  6.6  6.6
NA         0  0.0   NA</code></pre>
<p>On poursuit ensuite la description des classes en croisant la typologie avec la variable <em>generation</em>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cprop</span>(<span class="kw">table</span>(seq.part, donnees$generation))</code></pre></div>
<pre><code>          
seq.part   1930-38 1939-45 1946-50 Ensemble
  classe.1  25.6    27.1    31.0    28.0   
  classe.2  20.9    20.0    18.9    19.9   
  classe.3   7.9    13.6    12.9    11.4   
  classe.4  38.2    31.9    32.1    34.1   
  classe.5   7.4     7.5     5.2     6.6   
  Total    100.0   100.0   100.0   100.0   </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">chisq.test</span>(<span class="kw">table</span>(seq.part, donnees$generation))</code></pre></div>
<pre><code>
    Pearson's Chi-squared test

data:  table(seq.part, donnees$generation)
X-squared = 12.032, df = 8, p-value = 0.1498</code></pre>
<p>Le lien entre le fait dâ€™avoir un certain type de carriÃ¨res et la cohorte de naissance est significatif Ã  un seuil de 15Â %. On constate par exemple lâ€™augmentation continue de la proportion de carriÃ¨res de type Â«Â professions intermÃ©diairesÂ Â» (classe 1) et, entre les deux cohortes les plus anciennes, lâ€™augmentation de la part des carriÃ¨res de type Â«Â employÃ©sÂ Â» (classe 3) et la baisse de la part des carriÃ¨res de type Â«Â cadresÂ Â» (classe 4).</p>
<p>Bien dâ€™autres analyses sont envisageablesÂ : croiser la typologie avec dâ€™autres variables (origine sociale, etc.), construire lâ€™espace des carriÃ¨res possibles, Ã©tudier les interactions entre trajectoires familiales et professionnelles, analyser la variance des dissimilaritÃ©s entre sÃ©quences en fonction de plusieurs variables Â«Â explicatives<a href="#analyse-de-sequences_fn15" class="footnoteRef" id="analyse-de-sequences_fnref15"><sup>15</sup></a>Â Â»â€¦</p>
<p>Mais lâ€™exemple proposÃ© est sans doute bien suffisant pour une premiÃ¨re introductionÂ !</p>
</div>
<div id="analyse-de-sequences_bibliographie" class="section level2">
<h2>Bibliographie</h2>
<ul>
<li>Abbott A., 2001, <em>Time matters. On theory and method</em>, The University of Chicago Press.</li>
<li>Abbott A., Hrycak A., 1990, Â«Â Measuring ressemblance in sequence data: an optimal matching analysis of musiciansâ€™ careersÂ», <em>American journal of sociology</em>, (96), p.144-185. <a href="http://www.jstor.org/stable/10.2307/2780695" class="uri">http://www.jstor.org/stable/10.2307/2780695</a></li>
<li>Abbott A., Tsay A., 2000, Â«Â Sequence analysis and optimal matching methods in sociology: Review and prospectÂ Â», <em>Sociological methods &amp; research</em>, 29(1), p.3-33. <a href="http://smr.sagepub.com/content/29/1/3.short" class="uri">http://smr.sagepub.com/content/29/1/3.short</a></li>
<li>Gabadinho, A., Ritschard, G., MÃ¼ller, N.S. &amp; Studer, M., 2011, Â«Â Analyzing and visualizing state sequences in R with TraMineRÂ Â», <em>Journal of Statistical Software</em>, 40(4), p.1-37. <a href="http://archive-ouverte.unige.ch/downloader/vital/pdf/tmp/4hff8pe6uhukqiavvgaluqmjq2/out.pdf" class="uri">http://archive-ouverte.unige.ch/downloader/vital/pdf/tmp/4hff8pe6uhukqiavvgaluqmjq2/out.pdf</a></li>
<li>Grelet Y., 2002, Â«Â Des typologies de parcours. MÃ©thodes et usagesÂ Â», <em>Document GÃ©nÃ©ration</em> 92, (20), 47 p. <a href="http://www.cmh.greco.ens.fr/programs/Grelet_typolparc.pdf" class="uri">http://www.cmh.greco.ens.fr/programs/Grelet_typolparc.pdf</a></li>
<li>LeliÃ¨vre Ã‰., Vivier G., 2001, Â«Â Ã‰valuation dâ€™une collecte Ã  la croisÃ©e du quantitatif et du qualitatifÂ : lâ€™enquÃªte Biographies et entourageÂ Â», <em>Population</em>, (6), p.1043-1073. <a href="http://www.persee.fr/web/revues/home/prescript/article/pop_0032-4663_2001_num_56_6_7217" class="uri">http://www.persee.fr/web/revues/home/prescript/article/pop_0032-4663_2001_num_56_6_7217</a></li>
<li>Lemercier C., 2005, Â«Â Les carriÃ¨res des membres des institutions consulaires parisiennes au XIX<sup>e</sup> siÃ¨cleÂ Â», <em>Histoire et mesure</em>, XX (1-2), p.59-95. <a href="http://histoiremesure.revues.org/786" class="uri">http://histoiremesure.revues.org/786</a></li>
<li>Lesnard L., 2008, Â«Â Off-Scheduling within Dual-Earner Couples: An Unequal and Negative Externality for Family TimeÂ Â», <em>American Journal of Sociology</em>, 114(2), p.447-490. <a href="http://laurent.lesnard.free.fr/IMG/pdf/lesnard_2008_off-scheduling_within_dual-earner_couples-2.pdf" class="uri">http://laurent.lesnard.free.fr/IMG/pdf/lesnard_2008_off-scheduling_within_dual-earner_couples-2.pdf</a></li>
<li>Lesnard L., Saint Pol T. (de), 2006, Â«Â Introduction aux MÃ©thodes dâ€™Appariement Optimal (Optimal Matching Analysis)Â Â», <em>Bulletin de MÃ©thodologie Sociologique</em>, 90, p.5-25. <a href="http://bms.revues.org/index638.html" class="uri">http://bms.revues.org/index638.html</a></li>
<li>Robette N., 2011, <em>Explorer et dÃ©crire les parcours de vieÂ : les typologies de trajectoires</em>, Ceped (Les Clefs pour), 86 p. <a href="http://nicolas.robette.free.fr/Docs/Robette2011_Manuel_TypoTraj.pdf" class="uri">http://nicolas.robette.free.fr/Docs/Robette2011_Manuel_TypoTraj.pdf</a></li>
<li>Robette N., 2012, Â«Â Du prosÃ©lytisme Ã  la sÃ©cularisation. Le processus de diffusion de lâ€™Optimal Matching AnalysisÂ Â», <em>document de travail</em>. <a href="http://nicolas.robette.free.fr/Docs/Proselytisme_secularisation_NRobette.pdf" class="uri">http://nicolas.robette.free.fr/Docs/Proselytisme_secularisation_NRobette.pdf</a></li>
<li>Robette N., Bry X., 2012, Â«Â Harpoon or bait? A comparison of various metrics to fish for life course patternsÂ Â», <em>Bulletin de MÃ©thodologie Sociologique</em>, 116, p.5-24. <a href="http://nicolas.robette.free.fr/Docs/Harpoon_maggot_RobetteBry.pdf" class="uri">http://nicolas.robette.free.fr/Docs/Harpoon_maggot_RobetteBry.pdf</a></li>
<li>Robette N., Thibault N., 2008, Â«Â Lâ€™analyse exploratoire de trajectoires professionnellesÂ : analyse harmonique qualitative ou appariement optimalÂ ? Â», <em>Population</em>, 64(3), p.621-646. <a href="http://www.cairn.info/revue-population-2008-4-p-621.htm" class="uri">http://www.cairn.info/revue-population-2008-4-p-621.htm</a></li>
<li>Savage M., 2009, Â«Â Contemporary Sociology and the Challenge of Descriptive AssemblageÂ Â», <em>European Journal of Social Theory</em>, 12(1), p.155-174. <a href="http://est.sagepub.com/content/12/1/155.short" class="uri">http://est.sagepub.com/content/12/1/155.short</a></li>
</ul>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="analyse-de-sequences_fn1"><p>Pour une analyse des conditions sociales de la diffusion de lâ€™analyse de sÃ©quences dans le champ des sciences sociales, voir Robette, 2012.<a href="#analyse-de-sequences_fnref1">â†©</a></p></li>
<li id="analyse-de-sequences_fn2"><p><a href="http://home.uchicago.edu/~aabbott/" class="uri">http://home.uchicago.edu/~aabbott/</a><a href="#analyse-de-sequences_fnref2">â†©</a></p></li>
<li id="analyse-de-sequences_fn3"><p><a href="http://lemercier.ouvaton.org/document.php?id=62" class="uri">http://lemercier.ouvaton.org/document.php?id=62</a><a href="#analyse-de-sequences_fnref3">â†©</a></p></li>
<li id="analyse-de-sequences_fn4"><p><a href="http://laurent.lesnard.free.fr/article.php3?id_article=22" class="uri">http://laurent.lesnard.free.fr/article.php3?id_article=22</a><a href="#analyse-de-sequences_fnref4">â†©</a></p></li>
<li id="analyse-de-sequences_fn5"><p>Voir par exemple lâ€™article dâ€™Yvette Grelet (2002).<a href="#analyse-de-sequences_fnref5">â†©</a></p></li>
<li id="analyse-de-sequences_fn6"><p><a href="http://www.ceped.org/?rubrique57" class="uri">http://www.ceped.org/?rubrique57</a><a href="#analyse-de-sequences_fnref6">â†©</a></p></li>
<li id="analyse-de-sequences_fn7"><p><a href="http://nicolas.robette.free.fr/Docs/Robette2011_Manuel_TypoTraj.pdf" class="uri">http://nicolas.robette.free.fr/Docs/Robette2011_Manuel_TypoTraj.pdf</a><a href="#analyse-de-sequences_fnref7">â†©</a></p></li>
<li id="analyse-de-sequences_fn8"><p>Pour une analyse plus poussÃ©e de ces donnÃ©es, avec deux mÃ©thodes diffÃ©rentes, voir Robette &amp; Thibault, 2008. Pour une prÃ©sentation de lâ€™enquÃªte, voir LeliÃ¨vre &amp; Vivier, 2001.<a href="#analyse-de-sequences_fnref8">â†©</a></p></li>
<li id="analyse-de-sequences_fn9"><p><a href="http://home.fsw.vu.nl/ch.elzinga/" class="uri">http://home.fsw.vu.nl/ch.elzinga/</a><a href="#analyse-de-sequences_fnref9">â†©</a></p></li>
<li id="analyse-de-sequences_fn10"><p><a href="http://steinhaus.stat.ruhr-uni-bochum.de/tda.html" class="uri">http://steinhaus.stat.ruhr-uni-bochum.de/tda.html</a><a href="#analyse-de-sequences_fnref10">â†©</a></p></li>
<li id="analyse-de-sequences_fn11"><p><a href="http://www.stata-journal.com/article.html?article=st0111" class="uri">http://www.stata-journal.com/article.html?article=st0111</a><a href="#analyse-de-sequences_fnref11">â†©</a></p></li>
<li id="analyse-de-sequences_fn12"><p><a href="http://mephisto.unige.ch/traminer/" class="uri">http://mephisto.unige.ch/traminer/</a><a href="#analyse-de-sequences_fnref12">â†©</a></p></li>
<li id="analyse-de-sequences_fn13"><p>Pour une prÃ©sentation plus dÃ©taillÃ©e, voir le chapitre sur la <a href="#classification-ascendante-hierarchique">classification ascendante hiÃ©rarchique (CAH)</a>.<a href="#analyse-de-sequences_fnref13">â†©</a></p></li>
<li id="analyse-de-sequences_fn14"><p>Le fonctionnement de lâ€™algorithme dâ€™appariement optimal â€” et notamment le choix des coÃ»ts â€” est dÃ©crit dans le chapitre 9 du manuel de <code class="pkg">TraMineR</code> (<a href="http://mephisto.unige.ch/pub/TraMineR/doc/TraMineR-Users-Guide.pdf" class="uri">http://mephisto.unige.ch/pub/TraMineR/doc/TraMineR-Users-Guide.pdf</a>).<a href="#analyse-de-sequences_fnref14">â†©</a></p></li>
<li id="analyse-de-sequences_fn15"><p>Lâ€™articulation entre mÃ©thodes Â«Â descriptivesÂ Â» et mÃ©thodes Â«Â explicativesÂ Â» est un prolongement possible de lâ€™analyse de sÃ©quences. Cependant, lâ€™analyse de sÃ©quences Ã©tait envisagÃ©e par Abbott comme une alternative Ã  la sociologie quantitative <em>mainstream</em>, i.e le Â«Â paradigme des variablesÂ Â» et ses hypothÃ¨ses implicites souvent difficilement tenables (Abbott, 2001). Une bonne description solidement fondÃ©e thÃ©oriquement vaut bien des Â«Â modÃ¨les explicatifsÂ Â» (Savage, 2009).<a href="#analyse-de-sequences_fnref15">â†©</a></p></li>
</ol>
</div>

</article>
<article id="analyse-de-reseaux">

<div class="fluid-row" id="analyse-de-reseaux_header">


<h1 class="title">Analyse de rÃ©seaux</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="analyse-spatiale">

<div class="fluid-row" id="analyse-spatiale_header">


<h1 class="title">Analyse spatiale</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="ggplot2-la-grammaire-des-graphiques">

<div class="fluid-row" id="ggplot2-la-grammaire-des-graphiques_header">


<h1 class="title">ggplot2Â : la grammaire des graphiques</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="etendre-ggplot2">

<div class="fluid-row" id="etendre-ggplot2_header">


<h1 class="title">Ã‰tendre ggplot2</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="lattice-graphiques-et-formules">

<div class="fluid-row" id="lattice-graphiques-et-formules_header">


<h1 class="title">latticeÂ : graphiques et formules</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="diagrammes">

<div class="fluid-row" id="diagrammes_header">


<h1 class="title">Diagrammes</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="representer-des-flux">

<div class="fluid-row" id="representer-des-flux_header">


<h1 class="title">ReprÃ©senter des flux</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="reseaux-dynamiques">

<div class="fluid-row" id="reseaux-dynamiques_header">


<h1 class="title">RÃ©seaux dynamiques</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="ggvis-les-graphiques-interactifs">

<div class="fluid-row" id="ggvis-les-graphiques-interactifs_header">


<h1 class="title">ggvisÂ : les graphiques interactifs</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="htmlwidgets-la-puissance-du-javascript">

<div class="fluid-row" id="htmlwidgets-la-puissance-du-javascript_header">


<h1 class="title">htmlwidgetsÂ : la puissance de javascript</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="cartes">

<div class="fluid-row" id="cartes_header">


<h1 class="title">Cartes</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="formules">

<div class="fluid-row" id="formules_header">


<h1 class="title">Formules</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#formules_statistiques-descriptives">Statistiques descriptives</a><ul>
<li><a href="#formules_tableaux-croises-avec-xtabs">Tableaux croisÃ©s avec xtabs</a></li>
<li><a href="#formules_statistiques-bivariees-avec-aggregate">Statistiques bivariÃ©es avec aggregate</a></li>
</ul></li>
<li><a href="#formules_panels-graphiques-avec-lattice">Panels graphiques avec lattice</a><ul>
<li><a href="#formules_visualisation-bivariee">Visualisation bivariÃ©e</a></li>
<li><a href="#formules_visualisation-par-petits-multiples">Visualisation par <q>petits multiples</q></a></li>
</ul></li>
<li><a href="#formules_pour-aller-plus-loin">Pour aller plus loin</a></li>
</ul>
</div>

<p>Ce chapitre vise Ã  illustrer lâ€™utilisation de la <dfn>notation <q>formule</q></dfn> de <strong>R</strong>, qui dÃ©signe lâ€™emploi de cette notation par lâ€™expression <code data-pkg="stats">formula</code>. Cette notation est utilisÃ©e par de trÃ¨s nombreuses fonctions de <strong>R</strong>Â : on en a notamment vu plusieurs exemples dans le <a href="#graphiques-bivaries">chapitre sur les graphiques bivariÃ©s</a>, car lâ€™extension <code class="pkg">ggplot2</code> se sert de cette notation dans ses paramÃ¨tres <code data-pkg="ggplot2">facet_wrap</code> et <code data-pkg="ggplot2">facet_grid</code>.</p>
<p>Dans ce chapitre, on verra comment se servir de la notation <q>formule</q> dans deux contextes diffÃ©rents. Dâ€™une part, on verra que deux fonctions basiques de <strong>R</strong> se servent de cette notation pour produire des tableaux croisÃ©s et des statistiques bivariÃ©es. Dâ€™autre part, on verra que lâ€™extension <code class="pkg">lattice</code> se sert de cette notation pour crÃ©er des graphiques <q>panelisÃ©s</q>, dits graphiques Ã  <q>petits multiples</q>.</p>
<p>Dans plusieurs autres chapitres, les opÃ©rations dÃ©crites ci-dessus sont effectuÃ©es avec les extensions <code class="pkg">dplyr</code> dâ€™une part, et <code class="pkg">ggplot2</code> dâ€™autre part. On se servira Ã©galement de ces extensions dans ce chapitre, de maniÃ¨re Ã  mener une comparaison des diffÃ©rentes maniÃ¨res dâ€™effectuer certaines opÃ©rations dans <strong>R</strong>, avec ou sans la notation <q>formule</q>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)</code></pre></div>
<div id="formules_statistiques-descriptives" class="section level2">
<h2>Statistiques descriptives</h2>
<p>Les premiers exemples de ce chapitre montrent lâ€™utilisation de cette notation pour produire des tableaux croisÃ©s et des statistiques descriptives. Le jeu de donnÃ©es utilisÃ©, <code data-pkg="questionr">hdv2003</code>, a dÃ©jÃ  Ã©tÃ© utilisÃ© dans plusieurs chapitres, et font partie de lâ€™extension <code class="pkg">questionr</code>. Chargeons cette extension et le jeu de donnÃ©es <code data-pkg="questionr">hdv2003</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)</code></pre></div>
<p>Pour rappel, ce jeu de donnÃ©es contient des individus, leur Ã¢ge, leur statut professionnel, et le nombre dâ€™heures quotidiennes passÃ©es Ã  regarder la tÃ©lÃ©vision.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(hdv2003, <span class="dv">75</span>)</code></pre></div>
<pre><code>Observations: 2000
Variables:
$ id            (int) 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 1...
$ age           (int) 28, 23, 59, 34, 71, 35, 60, 47, 20, 28, 65, 47, ...
$ sexe          (fctr) Femme, Femme, Homme, Homme, Femme, Femme, Femme...
$ nivetud       (fctr) Enseignement superieur y compris technique supe...
$ poids         (dbl) 2634.3982, 9738.3958, 3994.1025, 5731.6615, 4329...
$ occup         (fctr) Exerce une profession, Etudiant, eleve, Exerce ...
$ qualif        (fctr) Employe, NA, Technicien, Technicien, Employe, E...
$ freres.soeurs (int) 8, 2, 2, 1, 0, 5, 1, 5, 4, 2, 3, 4, 1, 5, 2, 3, ...
$ clso          (fctr) Oui, Oui, Non, Non, Oui, Non, Oui, Non, Oui, No...
$ relig         (fctr) Ni croyance ni appartenance, Ni croyance ni app...
$ trav.imp      (fctr) Peu important, NA, Aussi important que le reste...
$ trav.satisf   (fctr) Insatisfaction, NA, Equilibre, Satisfaction, NA...
$ hard.rock     (fctr) Non, Non, Non, Non, Non, Non, Non, Non, Non, No...
$ lecture.bd    (fctr) Non, Non, Non, Non, Non, Non, Non, Non, Non, No...
$ peche.chasse  (fctr) Non, Non, Non, Non, Non, Non, Oui, Oui, Non, No...
$ cuisine       (fctr) Oui, Non, Non, Oui, Non, Non, Oui, Oui, Non, No...
$ bricol        (fctr) Non, Non, Non, Oui, Non, Non, Non, Oui, Non, No...
$ cinema        (fctr) Non, Oui, Non, Oui, Non, Oui, Non, Non, Oui, Ou...
$ sport         (fctr) Non, Oui, Oui, Oui, Non, Oui, Non, Non, Non, Ou...
$ heures.tv     (dbl) 0.0, 1.0, 0.0, 2.0, 3.0, 2.0, 2.9, 1.0, 2.0, 2.0...</code></pre>
<div id="formules_tableaux-croises-avec-xtabs" class="section level3">
<h3>Tableaux croisÃ©s avec xtabs</h3>
<p>Utilisons, pour ce premier exemple, la variable <var>occup</var> du jeu de donnÃ©es <code data-pkg="questionr">hdv2003</code>, qui correspond au statut professionnel des individus inclus dans lâ€™Ã©chantillon. La fonction de base pour compter les individus par statut est la fonction <code data-pkg="base">table</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(hdv2003$occup)</code></pre></div>
<pre><code>
Exerce une profession               Chomeur 
                 1049                   134 
      Etudiant, eleve              Retraite 
                   94                   392 
  Retire des affaires              Au foyer 
                   77                   171 
        Autre inactif 
                   83 </code></pre>
<p>Avec la fonction <code data-pkg="stats">xtabs</code>, le mÃªme rÃ©sultat est produit Ã  partir de la notation suivanteÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xtabs</span>(~occup, <span class="dt">data =</span> hdv2003)</code></pre></div>
<pre><code>occup
Exerce une profession               Chomeur 
                 1049                   134 
      Etudiant, eleve              Retraite 
                   94                   392 
  Retire des affaires              Au foyer 
                   77                   171 
        Autre inactif 
                   83 </code></pre>
<p>Le premier argument est une formule, au sens oÃ¹ <strong>R</strong> entend cette expression. Le second argument, <code>data</code>, correspond au jeu de donnÃ©es auquel la formule doit Ãªtre appliquÃ©e. On pourra se passer dâ€™Ã©crire explicitement cet argument dans les exemples suivants.</p>
<p>Lâ€™avantage de la fonction <code data-pkg="stats">xtabs</code> nâ€™est pas Ã©vident dans ce premier exemple. En rÃ©alitÃ©, cette fonction devient utile lorsque lâ€™on souhaite construire un ou plusieurs tableau(x) croisÃ©(s). Par exemple, pour croiser la variable <var>occup</var> avec la variable <var>sexe</var>, une solution constiste Ã  Ã©crireÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">with</span>(hdv2003, <span class="kw">table</span>(occup, sexe))</code></pre></div>
<pre><code>                       sexe
occup                   Homme Femme
  Exerce une profession   520   529
  Chomeur                  54    80
  Etudiant, eleve          48    46
  Retraite                208   184
  Retire des affaires      39    38
  Au foyer                  0   171
  Autre inactif            30    53</code></pre>
<p>Ou alors, ce qui revient au mÃªmeÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(hdv2003$occup, hdv2003$sexe)</code></pre></div>
<p>Avec <code data-pkg="stats">xtabs</code>, la mÃªme opÃ©ration sâ€™Ã©crit de la maniÃ¨re suivanteÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xtabs</span>(~occup +<span class="st"> </span>sexe, hdv2003)</code></pre></div>
<pre><code>                       sexe
occup                   Homme Femme
  Exerce une profession   520   529
  Chomeur                  54    80
  Etudiant, eleve          48    46
  Retraite                208   184
  Retire des affaires      39    38
  Au foyer                  0   171
  Autre inactif            30    53</code></pre>
<p>Cette Ã©criture est plus courte que le code Ã©quivalent dans <code class="pkg">dplyr</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">group_by</span>(hdv2003, occup) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Homme =</span> <span class="kw">sum</span>(sexe ==<span class="st"> "Homme"</span>),
            <span class="dt">Femme =</span> <span class="kw">sum</span>(sexe ==<span class="st"> "Femme"</span>))</code></pre></div>
<pre><code>Source: local data frame [7 x 3]

                  occup Homme Femme
1 Exerce une profession   520   529
2               Chomeur    54    80
3       Etudiant, eleve    48    46
4              Retraite   208   184
5   Retire des affaires    39    38
6              Au foyer     0   171
7         Autre inactif    30    53</code></pre>
<p>De plus, <code data-pkg="stats">xtabs</code> permet de crÃ©er plusieurs tableaux croisÃ©s en une seule formuleÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xtabs</span>(~occup +<span class="st"> </span>sexe +<span class="st"> </span>trav.imp, hdv2003)</code></pre></div>
<pre><code>, , trav.imp = Le plus important

                       sexe
occup                   Homme Femme
  Exerce une profession    13    16
  Chomeur                   0     0
  Etudiant, eleve           0     0
  Retraite                  0     0
  Retire des affaires       0     0
  Au foyer                  0     0
  Autre inactif             0     0

, , trav.imp = Aussi important que le reste

                       sexe
occup                   Homme Femme
  Exerce une profession   159   100
  Chomeur                   0     0
  Etudiant, eleve           0     0
  Retraite                  0     0
  Retire des affaires       0     0
  Au foyer                  0     0
  Autre inactif             0     0

, , trav.imp = Moins important que le reste

                       sexe
occup                   Homme Femme
  Exerce une profession   328   380
  Chomeur                   0     0
  Etudiant, eleve           0     0
  Retraite                  0     0
  Retire des affaires       0     0
  Au foyer                  0     0
  Autre inactif             0     0

, , trav.imp = Peu important

                       sexe
occup                   Homme Femme
  Exerce une profession    20    32
  Chomeur                   0     0
  Etudiant, eleve           0     0
  Retraite                  0     0
  Retire des affaires       0     0
  Au foyer                  0     0
  Autre inactif             0     0</code></pre>
<p>Cet exemple permet simplement de rÃ©aliser que la variable <var>trav.imp</var>, qui contient les rÃ©ponses Ã  une question portant sur lâ€™importance du travail, nâ€™a Ã©tÃ© mesurÃ©e (câ€™est-Ã -dire que la question nâ€™a Ã©tÃ© posÃ©e) quâ€™aux seuls individus actifs de lâ€™Ã©chantillon.</p>
</div>
<div id="formules_statistiques-bivariees-avec-aggregate" class="section level3">
<h3>Statistiques bivariÃ©es avec aggregate</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">aggregate</span>(heures.tv ~<span class="st"> </span>sexe, mean, <span class="dt">data =</span> hdv2003)</code></pre></div>
<pre><code>   sexe heures.tv
1 Homme  2.219330
2 Femme  2.268727</code></pre>
<p>Ici, le premier argument est Ã  nouveau une formule. Le second argument correspond Ã  la statistique descriptive que lâ€™on souhaite obtenir, et le dernier argument indique le jeu de donnÃ©es auquel appliquer les deux autres arguments. On peut dâ€™ailleurs obtenir le mÃªme rÃ©sultat en respectant de maniÃ¨re plus stricte lâ€™ordre des arguments dans la syntaxe de la fonction <code data-pkg="stats">aggregate</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">aggregate</span>(heures.tv ~<span class="st"> </span>sexe, hdv2003, mean)</code></pre></div>
<pre><code>   sexe heures.tv
1 Homme  2.219330
2 Femme  2.268727</code></pre>
<p>Cette Ã©criture est, Ã  nouveau, plus compacte que le code Ã©quivalent dans <code class="pkg">dplyr</code>, qui demande de spÃ©cifier le retrait des valeurs manquantesÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">group_by</span>(hdv2003, sexe) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">heures.tv =</span> <span class="kw">mean</span>(heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</code></pre></div>
<p>Ã€ nouveau, on va pouvoir combiner plusieurs variables dans la formule que lâ€™on passe Ã  <code data-pkg="stats">aggregate</code>, ce qui va permettre dâ€™obtenir la moyenne des heures de tÃ©lÃ©vision quotidiennes par sexe et par statut professionnelÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">aggregate</span>(heures.tv ~<span class="st"> </span>sexe +<span class="st"> </span>occup, hdv2003, mean)</code></pre></div>
<pre><code>    sexe                 occup heures.tv
1  Homme Exerce une profession  1.920463
2  Femme Exerce une profession  1.724953
3  Homme               Chomeur  2.853846
4  Femme               Chomeur  2.888608
5  Homme       Etudiant, eleve  1.400000
6  Femme       Etudiant, eleve  1.256522
7  Homme              Retraite  2.826442
8  Femme              Retraite  2.877174
9  Homme   Retire des affaires  2.410256
10 Femme   Retire des affaires  2.844737
11 Femme              Au foyer  2.822222
12 Homme         Autre inactif  3.133333
13 Femme         Autre inactif  3.339623</code></pre>
<p>La mÃªme opÃ©ration demanderait toujours un peu plus de code avec <code class="pkg">dplyr</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">group_by</span>(hdv2003, occup, sexe) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">heures.tv =</span> <span class="kw">mean</span>(heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</code></pre></div>
<p>La fonction <code data-pkg="stats">aggregate</code> permet bien sÃ»r dâ€™utiliser une autre fonction que la moyenne, comme dans cet exemple, suivi de son Ã©quivalent avec <code class="pkg">dplyr</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Ã¢ge mÃ©dian par sexe et statut professionnel</span>
<span class="kw">aggregate</span>(age ~<span class="st"> </span>sexe +<span class="st"> </span>occup, hdv2003, median)</code></pre></div>
<pre><code>    sexe                 occup  age
1  Homme Exerce une profession 42.0
2  Femme Exerce une profession 41.0
3  Homme               Chomeur 35.5
4  Femme               Chomeur 40.0
5  Homme       Etudiant, eleve 20.0
6  Femme       Etudiant, eleve 20.5
7  Homme              Retraite 68.0
8  Femme              Retraite 69.0
9  Homme   Retire des affaires 70.0
10 Femme   Retire des affaires 74.0
11 Femme              Au foyer 51.0
12 Homme         Autre inactif 56.0
13 Femme         Autre inactif 58.0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># code Ã©quivalent avec l'extension 'dplyr'</span>
<span class="kw">group_by</span>(hdv2003, occup, sexe) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">age =</span> <span class="kw">median</span>(age, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</code></pre></div>
<p>La fonction <code data-pkg="stats">aggregate</code> permet, par ailleurs, dâ€™obtenir des rÃ©sultats Ã  plusieurs colonnes. Dans lâ€™exemple ci-dessus, on illustre ce principe avec la fonction <code data-pkg="stats">range</code>, qui renvoie deux rÃ©sultats (la valeur minimale et la valeur maximale de la variable, qui est toujours la variable <var>age</var>), chacun prÃ©sentÃ©s dans une colonneÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">aggregate</span>(age ~<span class="st"> </span>sexe +<span class="st"> </span>occup, hdv2003, range)</code></pre></div>
<pre><code>    sexe                 occup age.1 age.2
1  Homme Exerce une profession    18    63
2  Femme Exerce une profession    18    67
3  Homme               Chomeur    18    63
4  Femme               Chomeur    18    63
5  Homme       Etudiant, eleve    18    34
6  Femme       Etudiant, eleve    18    35
7  Homme              Retraite    48    92
8  Femme              Retraite    41    96
9  Homme   Retire des affaires    57    91
10 Femme   Retire des affaires    57    93
11 Femme              Au foyer    22    90
12 Homme         Autre inactif    39    71
13 Femme         Autre inactif    19    97</code></pre>
<p>Cette fonction ne peut pas Ãªtre facilement Ã©crite dans <code class="pkg">dplyr</code> sans rÃ©Ã©crire chacune des colonnes, ce que le bloc de code suivant illustre. On y gagne en lisibilitÃ© dans les intitulÃ©s de colonnesÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">group_by</span>(hdv2003, occup, sexe) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">min =</span> <span class="kw">min</span>(age, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
            <span class="dt">max =</span> <span class="kw">max</span>(age, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</code></pre></div>
</div>
</div>
<div id="formules_panels-graphiques-avec-lattice" class="section level2">
<h2>Panels graphiques avec lattice</h2>
<p>Les exemples suivants montreront ensuite comment la notation <q>formule</q> peut servir Ã  produire des graphiques par panel avec lâ€™extension <code class="pkg">lattice</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lattice)</code></pre></div>
<div class="note">
<p>Lâ€™extension <code class="pkg">lattice</code> prÃ©sente lâ€™avantage dâ€™Ãªtre installÃ©e par dÃ©faut avec <strong>R</strong>. Il nâ€™est donc pas nÃ©cessaire de lâ€™installer prÃ©alablement.</p>
</div>
<p>Chargeons les mÃªmes donnÃ©es que le <a href="#graphiques-bivaries">chapitre sur les graphiques bivariÃ©s</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># charger l'extension lisant le format CSV</span>
<span class="kw">library</span>(readr)

<span class="co"># emplacement souhaitÃ© pour le jeu de donnÃ©es</span>
file =<span class="st"> "data/debt.csv"</span>

<span class="co"># tÃ©lÃ©charger le jeu de donnÃ©es s'il n'existe pas</span>
if(!<span class="kw">file.exists</span>(file))
  <span class="kw">download.file</span>(<span class="st">"http://www.stat.cmu.edu/~cshalizi/uADA/13/hw/11/debt.csv"</span>,
                file, <span class="dt">mode =</span> <span class="st">"wb"</span>)

<span class="co"># charger les donnÃ©es dans l'objet 'debt'</span>
debt =<span class="st"> </span><span class="kw">read_csv</span>(file)</code></pre></div>
<p>Rejetons rapidement un coup dâ€™oeil Ã  ces donnÃ©es, qui sont structurÃ©es par pays (variable <var>Country&lt;/var) et par annÃ©e (variable <var>Year</var>). On y trouve deux variables, <var>growth</var> (le taux de croissance du produit intÃ©rieur brut rÃ©el), et <var>ratio</var> (le ratio entre la dette publique et le produit intÃ©rieur brut), ainsi quâ€™une premiÃ¨re colonne vide, ne contenant que des numÃ©ros lignes, dont on va se dÃ©barrasserÂ :</var></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># inspection des donnÃ©es</span>
<span class="kw">glimpse</span>(debt, <span class="dv">75</span>)</code></pre></div>
<pre><code>Observations: 1,171
Variables: 5
$         (int) 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157,...
$ Country (chr) "Australia", "Australia", "Australia", "Australia", "A...
$ Year    (int) 1946, 1947, 1948, 1949, 1950, 1951, 1952, 1953, 1954, ...
$ growth  (dbl) -3.5579515, 2.4594746, 6.4375341, 6.6119938, 6.9202012...
$ ratio   (dbl) 190.41908, 177.32137, 148.92981, 125.82870, 109.80940,...</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># suppression de la premiÃ¨re colonne</span>
debt =<span class="st"> </span>debt[, -<span class="dv">1</span>]</code></pre></div>
<div id="formules_visualisation-bivariee" class="section level3">
<h3>Visualisation bivariÃ©e</h3>
<p>Le mÃªme graphique sâ€™Ã©crit de la maniÃ¨re suivante avec lâ€™extension <code class="pkg">lattice</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xyplot</span>(growth ~<span class="st"> </span>Year, <span class="dt">data =</span> debt)</code></pre></div>
<p><img src="graphs/formules/unnamed-chunk-23-1.png" title="" alt="" width="1050"/></p>
</div>
<div id="formules_visualisation-par-petits-multiples" class="section level3">
<h3>Visualisation par <q>petits multiples</q></h3>
<p>Appliquons dÃ©sormais la mÃªme visualisation par <q>petits multiples</q> que vue dans le chapitreÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xyplot</span>(growth ~<span class="st"> </span>Year |<span class="st"> </span>Country, <span class="dt">data =</span> debt)</code></pre></div>
<p><img src="graphs/formules/unnamed-chunk-24-1.png" title="" alt="" width="1050"/></p>
<p>Enfin, rajoutons quelques options au graphique, afin de montrer comment lâ€™extension <code class="pkg">lattice</code> fonctionneÂ :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xyplot</span>(growth ~<span class="st"> </span>Year |<span class="st"> </span>Country, <span class="dt">type =</span> <span class="kw">c</span>(<span class="st">"o"</span>, <span class="st">"l"</span>), 
  <span class="dt">main =</span> <span class="st">"DonnÃ©es Reinhart et Rogoff corrigÃ©es, 1946-2009"</span>, 
  <span class="dt">ylab =</span> <span class="st">"Taux de croissance du PIB"</span>, <span class="dt">xlab =</span> <span class="ot">NULL</span>, 
  <span class="dt">data =</span> debt)</code></pre></div>
<p><img src="graphs/formules/unnamed-chunk-25-1.png" title="" alt="" width="1050"/></p>
</div>
</div>
<div id="formules_pour-aller-plus-loin" class="section level2">
<h2>Pour aller plus loin</h2>
<p>Comme vient de le voir dans ce chapitre, la notation <q>formule</q> apparaÃ®t Ã§Ã  et lÃ  dans les diffÃ©rentes fonctions de <strong>R</strong> est de ses extensions. Il est par consÃ©quent utile dâ€™en connaÃ®tre les rudiments, et en particulier les opÃ©rateurs <code>~</code> (<em>tilde</em>) et <code>+</code>, ne serait-ce que pour pouvoir se servir des diffÃ©rentes fonctions prÃ©sentÃ©es sur cette page.</p>
<p>La notation <q>formule</q> devient cruciale dÃ¨s que lâ€™on souhaite rÃ©diger des modÃ¨lesÂ : la formule <code>y ~ x</code>, par exemple, qui est Ã©quivalente Ã  la formule <code>y ~ 1 + x</code>, correspond Ã  lâ€™Ã©quation mathÃ©matique <span class="math inline"><em>Y</em>â€„=â€„<em>a</em>â€…+â€…<em>b</em><em>X</em></span>. On trouvera de nombreux exemples dâ€™usage de cette notation dans les chapitres consacrÃ©s, notamment, Ã  la rÃ©gression linÃ©aire ou Ã  la <a href="#regression-logistique">rÃ©gression logistique</a>.</p>
<p>De la mÃªme maniÃ¨re, lâ€™opÃ©rateur <code>|</code> (<em>pipe</em>) utilisÃ© par lâ€™extension <code class="pkg">lattice</code> joue aussi un rÃ´le trÃ¨s important dans la rÃ©daction de modÃ¨les multi-niveaux, oÃ¹ il sert Ã  indiquer les variables Ã  pentes ou Ã  coefficients alÃ©atoires. Ces modÃ¨les sont prÃ©sentÃ©s dans un <a href="#modeles-lineaires-a-effets-mixtes">chapitre dÃ©diÃ©</a>.</p>
</div>

</article>
<article id="structures-conditionnelles">

<div class="fluid-row" id="structures-conditionnelles_header">


<h1 class="title">Structures conditionnelles</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="expressions-regulieres">

<div class="fluid-row" id="expressions-regulieres_header">


<h1 class="title">Expressions rÃ©guliÃ¨res</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="ecrire-ses-propres-fonctions">

<div class="fluid-row" id="ecrire-ses-propres-fonctions_header">


<h1 class="title">Ã‰crire ses propres fonctions</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="rmarkdown-les-rapports-automatises">

<div class="fluid-row" id="rmarkdown-les-rapports-automatises_header">


<h1 class="title">R MarkdownÂ : les rapports automatisÃ©s</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="shiny-les-interfaces-interactives">

<div class="fluid-row" id="shiny-les-interfaces-interactives_header">


<h1 class="title">ShinyÂ : les interfaces interactives</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="git">

<div class="fluid-row" id="git_header">


<h1 class="title">Git</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="developper-un-package">

<div class="fluid-row" id="developper-un-package_header">


<h1 class="title">DÃ©velopper un package</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="calculer-un-age">

<div class="fluid-row" id="calculer-un-age_header">


<h1 class="title">Calculer un Ã¢ge</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#calculer-un-age_rappel-sur-les-ages">Rappel sur les Ã¢ges</a></li>
<li><a href="#calculer-un-age_le-package-lubridate">Le package lubridate</a></li>
<li><a href="#calculer-un-age_calcul-dun-age-exact">Calcul dâ€™un Ã¢ge exact</a><ul>
<li><a href="#calculer-un-age_cas-particulier-des-personnes-nees-un-29-fevrier">Cas particulier des personnes nÃ©es un 29 fÃ©vrier</a></li>
</ul></li>
<li><a href="#calculer-un-age_age-revolu-ou-age-au-dernier-anniversaire">Ã‚ge rÃ©volu ou Ã¢ge au dernier anniversaire</a></li>
<li><a href="#calculer-un-age_age-par-difference-de-millesimes">Ã‚ge par diffÃ©rence de millÃ©simes</a></li>
<li><a href="#calculer-un-age_calcul-dun-age-moyen">Calcul dâ€™un Ã¢ge moyen</a></li>
<li><a href="#calculer-un-age_notes">Notes</a></li>
</ul>
</div>

<div class="note">
<p>La version originale de cette astuce a Ã©tÃ© publiÃ©e par Joseph Larmarange sur <a href="http://joseph.larmarange.net/?Calculer-proprement-un-age-sous-R" class="uri">http://joseph.larmarange.net/?Calculer-proprement-un-age-sous-R</a>.</p>
</div>
<p>Le calcul dâ€™un <dfn>Ã¢ge</dfn> sous <strong>R</strong> nâ€™est pas forcÃ©ment aussi trivial quâ€™il nâ€™y parait.</p>
<div id="calculer-un-age_rappel-sur-les-ages" class="section level2">
<h2>Rappel sur les Ã¢ges</h2>
<p>Il convient en premier lieu de rappeler les principaux Ã¢ges utilisÃ©s les dÃ©mographesÂ :</p>
<blockquote>
<p>Lâ€™Ã¢ge â€“ on prÃ©cise parfois Ã¢ge chronologique â€“ est une des caractÃ©ristiques fondamentales de la structure des populations. On lâ€™exprime gÃ©nÃ©ralement en annÃ©es, ou en annÃ©es et mois, voire en mois et jours, pour les enfants en bas Ã¢geÂ ; parfois en annÃ©es et fractions dÃ©cimales dâ€™annÃ©e. Les dÃ©mographes arrondissent dâ€™ordinaire lâ€™Ã¢ge Ã  lâ€™unitÃ© infÃ©rieure, lâ€™exprimant ainsi en annÃ©es rÃ©volues, ou annÃ©es accomplies, le cas Ã©chÃ©ant en mois rÃ©volus, ou mois accomplis. Cet Ã¢ge est aussi lâ€™Ã¢ge au dernier anniversaire. On trouve aussi, dans les statistiques, lâ€™Ã¢ge atteint dans lâ€™annÃ©e, qui est Ã©gal Ã  la diffÃ©rence de millÃ©simes entre lâ€™annÃ©e considÃ©rÃ©e et lâ€™annÃ©e de naissance. [â€¦] On est parfois conduit Ã  prÃ©ciser que lâ€™on considÃ¨re un Ã¢ge exact, pour Ã©viter toute confusion avec un Ã¢ge en annÃ©es rÃ©volues, qui reprÃ©sente en fait une classe dâ€™Ã¢ges exacts.</p>
<footer>
SourceÂ : <a href="http://fr-ii.demopaedia.org/wiki/32#322"><cite>DemopÃ¦dia</cite> (322)</a>
</footer>
</blockquote>
</div>
<div id="calculer-un-age_le-package-lubridate" class="section level2">
<h2>Le package lubridate</h2>
<p>Le package <code class="pkg">lubridate</code> est spÃ©cialement dÃ©veloppÃ© pour faciliter la manipulation et le calcul autour des <dfn data-index="date, variable">dates</dfn>. La version de dÃ©veloppement intÃ¨gre depuis peu une fonction <code data-pkg="lubridate">time_length</code> adaptÃ©e au calcul des Ã¢ges exacts.</p>
<div class="note">
<p>La fonction <code data-pkg="lubridate">time_length</code> Ã©tant rÃ©cente, elle nâ€™est pas encore disponible dans la version stable du package. Pour installer la version de dÃ©veloppement de <code class="pkg">lubridate</code>, on aura recours au package <code class="pkg">devtools</code>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="kw">install_github</span>(<span class="st">"hadley/lubridate"</span>)</code></pre></div>
</div>
<p>Nous noterons <code>naiss</code> la date de naissance et <code>evt</code> la date Ã  laquelle nous calculerons lâ€™Ã¢ge.</p>
</div>
<div id="calculer-un-age_calcul-dun-age-exact" class="section level2">
<h2>Calcul dâ€™un Ã¢ge exact</h2>
<p>On appelle <dfn>Ã¢ge exact</dfn><dfn data-index="exact, Ã¢ge"/> lâ€™expression dâ€™un Ã¢ge avec sa partie dÃ©cimale.</p>
<p>Une approche simple consiste Ã  calculer une diffÃ©rence en jours puis Ã  diviser par 365. Or, le souci câ€™est que toutes les annÃ©es nâ€™ont pas le mÃªme nombre de jours. Regardons par exemple ce qui se passe si lâ€™on calcule lâ€™Ã¢ge au 31 dÃ©cembre 1999 dâ€™une personne nÃ©e le 1<sup>er</sup> janvier 1900.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lubridate)
naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1900-01-01"</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1999-12-31"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"days"</span>)</code></pre></div>
<pre><code>[1] 36523</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"days"</span>)/<span class="dv">365</span></code></pre></div>
<pre><code>[1] 100.063</code></pre>
<p>Or, au 31 dÃ©cembre 1999, cette personne nâ€™a pas encore fÃªtÃ© son centiÃ¨me anniversaire. Le calcul prÃ©cÃ©dent ne prend pas en compte les annÃ©es bissextiles. Une approche plus correcte serait de considÃ©rer que les annÃ©es durent en moyenne 365,25 jours.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"days"</span>)/<span class="fl">365.25</span></code></pre></div>
<pre><code>[1] 99.99452</code></pre>
<p>Si cette approche semble fonctionner avec cet exemple, ce nâ€™est plus le cas dans dâ€™autres situations.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1903-01-01"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"days"</span>)/<span class="fl">365.25</span></code></pre></div>
<pre><code>[1] 2.997947</code></pre>
<p>Or, Ã  la date du premier janvier 1903, cette personne a bien fÃªtÃ© son troisiÃ¨me anniversaire.</p>
<p>Pour calculer proprement un Ã¢ge en annÃ©es (ou en mois), il est dÃ¨s lors nÃ©cessaire de prendre en compte la date <dfn>anniversaire</dfn> et le fait que la durÃ©e de chaque annÃ©e (ou mois) est variable. Câ€™est justement ce que fait la fonction <code data-pkg="lubridate">time_length</code> appliquÃ©e Ã  un objet de type <code data-pkg="lubridate" data-rdoc="Interval-class">Interval</code>. On dÃ©termine le dernier et le prochain anniversaire et lâ€™on rajoute, Ã  lâ€™Ã¢ge atteint au dernier anniversaire, le ratio entre le nombre de jours entre lâ€™Ã©vÃ©nement et le dernier anniversaire par le nombre de jours entre le prochain et le dernier anniversaire.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1900-01-01"</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1999-12-31"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 99.99726</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1903-01-01"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1918-11-11"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 18.86027</code></pre>
<p>Attention, cela nâ€™est valable que si lâ€™on prÃ©sente Ã  la fonction <code data-pkg="lubridate">time_length</code> un objet de type <code data-pkg="lubridate" data-rdoc="Interval-class">Interval</code> (pour lequel on connait dÃ¨s lors la date de dÃ©but et la date de fin). Si lâ€™on passe une durÃ©e (objet de type <code data-pkg="lubridate" data-rdoc="Duration-class">Duration</code>) Ã  la fonction <code data-pkg="lubridate">time_length</code>, le calcul sâ€™effectuera alors en prenant en compte la durÃ©e moyenne dâ€™une annÃ©e (plus prÃ©cisÃ©ment 365 jours).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1900-01-01"</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1999-12-31"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 99.99726</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_length</span>(evt -<span class="st"> </span>naiss, <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 100.063</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_length</span>(<span class="kw">as.duration</span>(<span class="kw">interval</span>(naiss, evt)), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 100.063</code></pre>
<div id="calculer-un-age_cas-particulier-des-personnes-nees-un-29-fevrier" class="section level3">
<h3>Cas particulier des personnes nÃ©es un 29 fÃ©vrier</h3>
<p>Pour les personnes nÃ©es un 29 fÃ©vrier, il existe un certain flou concernant leur date dâ€™anniversaire pour les annÃ©es non bissextiles. Doit-on considÃ©rer quâ€™il sâ€™agit du 28 fÃ©vrier ou du 1<sup>er</sup> marsÂ ?</p>
<p>Au sens strict, on peut considÃ©rer que leur anniversaire a lieu entre le 28 fÃ©vrier soir Ã  minuit et le 1<sup>er</sup> mars Ã  0 heure du matin, autrement dit que le 28 fÃ©vrier ils nâ€™ont pas encore fÃªtÃ© leur anniversaire. Câ€™est la position adoptÃ©e par la fonction <code data-pkg="lubridate">time_length</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1992-02-29"</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"2014-02-28"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 21.99726</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"2014-03-01"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 22</code></pre>
<p>Cette approche permets Ã©galement dâ€™Ãªtre cohÃ©rent avec la maniÃ¨re dont les dates sont prises en compte informatiquement. On considÃ¨re en effet que lorsque seule la date est prÃ©cisÃ©e (sans mention de lâ€™heure), lâ€™heure correspondante est <code>0:00</code>. Autrement dit, <code>"2014-03-01"</code> est Ã©quivalent Ã  <code>"2014-03-01 00:00:00"</code>. Lâ€™approche adoptÃ©e permet donc dâ€™Ãªtre cohÃ©rent lorsque lâ€™anniversaire est calculÃ© en tenant compte des heures.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1992-02-29"</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">"2014-02-28 23:00:00"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 21.99989</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">"2014-03-01 00:00:00"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 22</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">"2014-03-01 01:00:00"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 22.00011</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">"1992-02-29 12:00:00"</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">"2014-03-01 01:00:00"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 22.00011</code></pre>
</div>
</div>
<div id="calculer-un-age_age-revolu-ou-age-au-dernier-anniversaire" class="section level2">
<h2>Ã‚ge rÃ©volu ou Ã¢ge au dernier anniversaire</h2>
<p>Une fois que lâ€™on sait calculer un Ã¢ge exact, le calcul dâ€™un <dfn>Ã¢ge rÃ©volu</dfn><dfn data-index="rÃ©volu, Ã¢ge"/> ou <dfn>Ã¢ge au dernier anniversaire</dfn> est assez simple. Il suffit de ne garder que la partie entiÃ¨re de lâ€™Ã¢ge exact (approche conseillÃ©e).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1980-01-09"</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"2015-01-01"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 34.97808</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">trunc</span>(<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>))</code></pre></div>
<pre><code>[1] 34</code></pre>
<p>Une autre approche consiste Ã  convertir lâ€™intervalle en objet de type <code data-pkg="lubridate" data-rdoc="Period-class">Period</code> et Ã  ne prendre en compte que les annÃ©es.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.period</span>(<span class="kw">interval</span>(naiss, evt))</code></pre></div>
<pre><code>[1] "34y 11m 23d 0H 0M 0S"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.period</span>(<span class="kw">interval</span>(naiss, evt))@year</code></pre></div>
<pre><code>[1] 34</code></pre>
</div>
<div id="calculer-un-age_age-par-difference-de-millesimes" class="section level2">
<h2>Ã‚ge par diffÃ©rence de millÃ©simes</h2>
<p>Lâ€™<dfn>Ã¢ge par diffÃ©rence de millÃ©simes</dfn>, encore appelÃ© <dfn>Ã¢ge atteint dans lâ€™annÃ©e</dfn>, sâ€™obtient tout simplement en soustrayant lâ€™annÃ©e de naissance Ã  lâ€™annÃ©e de lâ€™Ã©vÃ©nement.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1980-01-09"</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"2015-01-01"</span>)
<span class="kw">year</span>(evt) -<span class="st"> </span><span class="kw">year</span>(naiss)</code></pre></div>
<pre><code>[1] 35</code></pre>
</div>
<div id="calculer-un-age_calcul-dun-age-moyen" class="section level2">
<h2>Calcul dâ€™un Ã¢ge moyen</h2>
<p>Le calcul dâ€™un <dfn>Ã¢ge moyen</dfn><dfn data-index="moyenne, Ã¢ge"/> sâ€™effectue normalement Ã  partir dâ€™Ã¢ges exacts. Il arrive frÃ©quemment que lâ€™on ne dispose dans les donnÃ©es dâ€™enquÃªtes que de lâ€™Ã¢ge rÃ©volu. Auquel cas, il faut bien penser Ã  rajouter 0,5 au rÃ©sultat obtenu. En effet, un Ã¢ge rÃ©volu peut Ãªtre vu comme une classe dâ€™Ã¢ges exactsÂ : les individus ayant 20 ans rÃ©volus ont entre 20 et 21 ans exacts, soit en moyenne 20,5 ansÂ !</p>
</div>
<div id="calculer-un-age_notes" class="section level2">
<h2>Notes</h2>
<p>Lâ€™ensemble des fonctions prÃ©sentÃ©es peuvent Ãªtre appliquÃ©es Ã  des vecteurs et, par consÃ©quent, aux colonnes dâ€™un tableau de donnÃ©es (<em>data.frame</em>).</p>
<p>Le package <code class="pkg">eeptools</code> fournit de son cÃ´tÃ© une fonction <code data-pkg="eeptools">age_calc</code><a href="#calculer-un-age_fn1" class="footnoteRef" id="calculer-un-age_fnref1"><sup>1</sup></a> qui permet le calcul des Ã¢ges exacts et rÃ©volus.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(eeptools)</code></pre></div>
<pre><code>Loading required package: ggplot2
Loading required package: MASS</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">"1980-01-09"</span>)
evt &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">"2015-01-01"</span>)
<span class="kw">age_calc</span>(naiss, evt, <span class="dt">units =</span> <span class="st">"years"</span>, <span class="dt">precise =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 34.97814</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 34.97808</code></pre>
<p>La mÃ©thode utilisÃ©e par <code data-pkg="eeptools">age_calc</code> donne des rÃ©sultats lÃ©gÃ¨rement diffÃ©rent de ceux de <code data-pkg="lubridate">time_length</code>. Il est donc conseillÃ© dâ€™utiliser de prÃ©fÃ©rence le package <code class="pkg">lubridate</code>.</p>
<p>En lâ€™absence du package <code class="pkg">lubridate</code>, il reste facile de calculer une durÃ©e en jours avec les fonctions de base de <strong>R</strong>Â :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">"1900-01-01"</span>)
evt &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">"1999-12-31"</span>)
evt -<span class="st"> </span>naiss</code></pre></div>
<pre><code>Time difference of 36523 days</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.integer</span>(evt -<span class="st"> </span>naiss)</code></pre></div>
<pre><code>[1] 36523</code></pre>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="calculer-un-age_fn1"><p><a href="https://github.com/jknowles/eeptools/blob/master/R/age_calc.R" class="uri">https://github.com/jknowles/eeptools/blob/master/R/age_calc.R</a><a href="#calculer-un-age_fnref1">â†©</a></p></li>
</ol>
</div>

</article>
<article id="prevR-cartes-de-prevalence">

<div class="fluid-row" id="prevR-cartes-de-prevalence_header">


<h1 class="title">prevRÂ : cartes de prÃ©valence Ã  partir des EDS</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours dâ€™Ã©criture.</p>
</div>

</article>
<article id="index-des-concepts">

<div class="fluid-row" id="index-des-concepts_header">


<h1 class="title">Index des concepts</h1>

</div>


<nav>
<ul class="pagination pagination-sm">
<li>
<a href="#index-des-concepts_ "> </a>
</li>
<li>
<a href="#index-des-concepts_,">,</a>
</li>
<li>
<a href="#index-des-concepts_A">A</a>
</li>
<li>
<a href="#index-des-concepts_B">B</a>
</li>
<li>
<a href="#index-des-concepts_C">C</a>
</li>
<li>
<a href="#index-des-concepts_D">D</a>
</li>
<li>
<a href="#index-des-concepts_E">E</a>
</li>
<li>
<a href="#index-des-concepts_F">F</a>
</li>
<li>
<a href="#index-des-concepts_G">G</a>
</li>
<li>
<a href="#index-des-concepts_H">H</a>
</li>
<li>
<a href="#index-des-concepts_I">I</a>
</li>
<li>
<a href="#index-des-concepts_L">L</a>
</li>
<li>
<a href="#index-des-concepts_M">M</a>
</li>
<li>
<a href="#index-des-concepts_N">N</a>
</li>
<li>
<a href="#index-des-concepts_O">O</a>
</li>
<li>
<a href="#index-des-concepts_P">P</a>
</li>
<li>
<a href="#index-des-concepts_Q">Q</a>
</li>
<li>
<a href="#index-des-concepts_R">R</a>
</li>
<li>
<a href="#index-des-concepts_S">S</a>
</li>
<li>
<a href="#index-des-concepts_T">T</a>
</li>
<li>
<a href="#index-des-concepts_U">U</a>
</li>
<li>
<a href="#index-des-concepts_V">V</a>
</li>
<li>
<a href="#index-des-concepts_W">W</a>
</li>
</ul>
<p/></nav>
<div id="index-des-concepts_index_concepts">
<h2 id="index-des-concepts_ ">
</h2>
<p><dfn> consiste Ã  fournir un vecteur logique indiquant si chaque Ã©lÃ©ment doit Ãªtre inclu (si <code>TRUE</code>) ou exclu (si <code>FALSE</code>). Par exempleÂ :</dfn></p>
<pre class="{r}"><code>sexe
sexe[c(TRUE, FALSE, FALSE, TRUE, FALSE, FALSE)]</code></pre>
<p>Ã‰crire manuellement une telle condition nâ€™est pas trÃ¨s pratique Ã  lâ€™usage. Mais supposons que nous ayons Ã©galement Ã  notre disposition les deux vecteurs suivants, Ã©galement de longueur 6.</p>
<pre class="{r}"><code>urbain opÃ©rateurs de comparaison suivantsÂ :

OpÃ©rateur de comparaison  | Signification
:-----------|:-------------
`==` | Ã©gal Ã 
`!=` | diffÃ©rent de
`&gt;` | strictement supÃ©rieur Ã 
`=` | supÃ©rieur ou Ã©gal Ã 
`= 80</code></pre>
<p>Que sâ€™est-il passÃ©Â ? Nous avons fourni Ã  <strong>R</strong> une condition et il nous a renvoyÃ© un vecteur logique avec autant dâ€™Ã©lÃ©ments quâ€™il yâ€™a dâ€™observations et dont la valeur est <code>TRUE</code> si la condition est remplie et <code>FALSE</code> dans les autres cas. Nous pouvons alors utiliser ce vecteur logique pour obtenir la taille des participants pesant 80 kilogrammes ou plusÂ :</p>
<pre class="{r}"><code>taille[poids &gt;= 80]</code></pre>
<p>On peut combiner ou modifier des conditions Ã  lâ€™aide des opÃ©rateurs logiques habituelsÂ :</p>
<table>
<thead>
<tr class="header">
<th align="left">OpÃ©rateur logique</th>
<th align="left">Signification</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>&amp;</code></td>
<td align="left">et logique</td>
</tr>
<tr class="even">
<td align="left"><code>|</code></td>
<td align="left">ou logique</td>
</tr>
<tr class="odd">
<td align="left"><code>!</code></td>
<td align="left">nÃ©gation logique</td>
</tr>
</tbody>
</table>
<p>Comment les utilise-t-onÂ ? Voyons tout de suite un exemple. Supposons que je veuille identifier les personnes pesant 80 kilogrammes ou plus <strong>et</strong> vivant en milieu urbainÂ :</p>
<p><code>{r, results='hide'} poids &gt;= 80 &amp; urbain</code></p>
<p>Les rÃ©sultats sont trÃ¨s diffÃ©rents si je souhaite isoler les personnes pesant 80 kilogrammes ou plus <em>ou</em> vivant milieu urbainÂ :</p>
<p><code>{r, results='hide'} poids &gt;= 80 &amp; urbain</code></p>
<p>Une remarque importanteÂ : quand lâ€™un des termes dâ€™une condition comporte une valeur manquante (<code>NA</code>), le rÃ©sultat de cette condition nâ€™est pas toujours <code>TRUE</code> ou <code>FALSE</code>, il peut aussi Ãªtre Ã  son tour une valeur manquante.</p>
<pre class="{r}"><code>taille
taille &gt; 1.8</code></pre>
<p>On voit que le test <code>NA &gt; 1.8</code> ne renvoie ni vrai ni faux, mais <code>NA</code>.</p>
<p>Une autre consÃ©quence importante de ce comportement est quâ€™on ne peut pas utiliser lâ€™opÃ©rateur lâ€™expression <code>== NA</code> pour tester la prÃ©sence de valeurs manquantes. On utilisera Ã  la place la fonction <em>ad hoc</em> <code data-pkg="base" data-rdoc="NA">is.na</code>Â :</p>
<pre class="{r}"><code>is.na(taille &gt; 1.8)</code></pre>
<p>Pour compliquer encore un peu le tout, lorsquâ€™on utilise une condition pour lâ€™indexation, si la condition renvoie <code>NA</code>, <strong>R</strong> ne sÃ©lectionne pas lâ€™Ã©lÃ©ment mais retourne quand mÃªme la valeur <code>NA</code>. Ceci a donc des consÃ©quences sur le rÃ©sultat dâ€™une indexation par comparaison.</p>
<p>Par exemple si je cherche Ã  connaÃ®tre le poids des personnes mesurant 1,80 mÃ¨tre ou plusÂ :</p>
<pre class="{r}"><code>taille
poids
poids[taille &gt; 1.8]</code></pre>
<p>Les Ã©lÃ©ments pour lesquels la taille nâ€™est pas connue ont Ã©tÃ© transformÃ©s en <code>NA</code>, ce qui nâ€™influera pas le calcul dâ€™une moyenne. Par contre, lorsquâ€™on utilisera assignation et indexation ensemble, cela peut crÃ©er des problÃ¨mes. Il est donc prÃ©fÃ©rable lorsque lâ€™on a des valeurs manquantes de les exclure ainsiÂ :</p>
<pre class="{r}"><code>poids[taille &gt; 1.8 &amp; !is.na(taille)]</code></pre>
<p>Pour plus de dÃ©tails sur les conditions et le calcul logique dans <strong>R</strong>, on pourra se rÃ©fÃ©rer au <a href="conditions-et-comparaisons.html">chapitre dÃ©diÃ©</a>.</p>
<h2 id="index-des-concepts_assignation-par-indexation">Assignation par indexation</h2>
<p>Dans tous les exemples prÃ©cÃ©dents, on a utilisÃ© lâ€™indexation pour extraire une partie dâ€™un vecteur, en plaÃ§ant lâ€™opÃ©ration dâ€™indexation Ã  droite de lâ€™opÃ©rateur <code>assignation. Dans ce cas, les Ã©lÃ©ments sÃ©lectionnÃ©s par l'indexation sont alors remplacÃ©s par les valeurs indiquÃ©es Ã  droite de l'opÃ©rateur</code>recyclage</p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<h2 id="index-des-concepts_,">
,
</h2>
<p><dfn>, lâ€™indexation par nom et lâ€™indexation par condition.</dfn></p>
<pre class="{r}"><code>l
l[c(1,3,4)]
l[c("majuscules", "minuscules")]
l[c(TRUE, TRUE, FALSE, FALSE, TRUE)]</code></pre>
<p>MÃªme si lâ€™on extrait un seul Ã©lÃ©ment, lâ€™extraction obtenue avec les crochets simples renvoie toujours une liste, ici composÃ©e dâ€™un seul Ã©lÃ©mentÂ :</p>
<pre class="{r}"><code>str(l[1])</code></pre>
<p>Supposons que je souhaite calculer la moyenne des valeurs du premier Ã©lÃ©ment de ma liste. Essayons la commande suivanteÂ :</p>
<pre class="{r}"><code>mean(l[1])</code></pre>
<p>Nous obtenons un message dâ€™erreur. En effet, <strong>R</strong> ne sait pas calculer une moyenne Ã  partir dâ€™une liste. Ce quâ€™il lui faut, câ€™est un vecteur de valeurs numÃ©riques. Autrement dit, ce que nous cherchons Ã  obtenir câ€™est le contenu mÃªme du premier Ã©lÃ©ment de notre liste et non une liste Ã  un seul Ã©lÃ©ment.</p>
<p>Câ€™est ici que les doubles crochets (<code>[[]]</code>) vont rentrer en jeu. Pour ces derniers, nous pourrons utiliser lâ€™indexation par position ou lâ€™indexation par nom, mais pas lâ€™indexation par condition. De plus, le critÃ¨re que lâ€™on indiquera doit indiquer un et un seul Ã©lÃ©ment de notre liste. Au lieu de renvoyer une liste Ã  un Ã©lÃ©ment, les doubles crochets vont renvoyer lâ€™Ã©lÃ©ment dÃ©signÃ©. Vite, un exempleÂ :</p>
<pre class="{r}"><code>str(l[1])
str(l[[1]])</code></pre>
<p>Maintenant, nous pouvons calculer notre moyenneÂ :</p>
<pre class="{r}"><code>mean(l[[1]])</code></pre>
<p>Nous pouvons aussi tester lâ€™indexation par nom,</p>
<pre class="{r}"><code>l[["mois"]]</code></pre>
<p>mais il faut avouer que cette Ã©criture avec doubles crochets et guillemets est un peu lourde. Heuresement, un nouvel acteur entre en scÃ¨neÂ : le symbole dollar (<code>$</code>). Câ€™est un raccourci des doubles crochets pour lâ€™indexation par nom. Que lâ€™on utilise ainsiÂ :</p>
<pre class="{r}"><code>l$mois</code></pre>
<p>Les Ã©critures <code>l$mois</code> et <code>l[["mois"]]</code> sont Ã©quivalentes. AttentionÂ ! Cela ne fonctionne que pour lâ€™indexation par nom.</p>
<p><code>{r, eval=FALSE} l$1</code></p>
<pre><code>Error: unexpected numeric constant in "l$1"</code></pre>
<p>Lâ€™assignation par indexation fonctionne Ã©galement avec les doubles crochets ou le signe dollarÂ :</p>
<p>```{r} l[[2]] tableau de donnÃ©es</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
</ul>
<h2 id="index-des-concepts_A">
A
</h2>
<p><dfn>ACM</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>ACP</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>AFC</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>Ã¢ge</dfn></p>
<ul>
<li><a href="#calculer-un-age">Calculer un Ã¢ge</a></li>
</ul>
<p><dfn>Ã¢ge atteint dans lâ€™annÃ©e</dfn></p>
<ul>
<li><a href="#calculer-un-age">Calculer un Ã¢ge</a></li>
</ul>
<p><dfn>Ã¢ge au dernier anniversaire</dfn></p>
<ul>
<li><a href="#calculer-un-age">Calculer un Ã¢ge</a></li>
</ul>
<p><dfn>Ã¢ge exact</dfn></p>
<ul>
<li><a href="#calculer-un-age">Calculer un Ã¢ge</a></li>
</ul>
<p><dfn>AIC</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>aide</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>aide en ligne</dfn></p>
<ul>
<li><a href="#ou-trouver-de-l-aide">OÃ¹ trouver de lâ€™aideÂ ?</a></li>
</ul>
<p><dfn lang="en">Akaike Information Criterion</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>alÃ©atoire, Ã©chantillonnage</dfn></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">DÃ©finir un plan dâ€™Ã©chantillonnage complexe</a></li>
</ul>
<p><dfn>analyse de sÃ©quences</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><dfn>analyse des biographies</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><dfn>analyse des correspondances multiples</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>analyse en composante principale</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>analyse factorielle</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>analyse factorielle des correspondances</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>analyse mixte de Hill et Smith</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>appariement optimal</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><dfn>arbre de classification</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>argument</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>argument nommÃ©</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>argument non nommÃ©</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>assignation par indexation</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
</ul>
<p><dfn>assignation, opÃ©rateur</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>attribut</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><dfn>autocomplÃ©tion</dfn></p>
<ul>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#presentation-et-philosophie">PrÃ©sentation et Philosophie</a></li>
</ul>
<h2 id="index-des-concepts_B">
B
</h2>
<p><dfn>barres cumulÃ©es, graphique</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><dfn>bÃ¢ton, diagramme</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>binaire, rÃ©gression logistique</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>biographie, analyse</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><dfn>bitmap</dfn></p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
</ul>
<p><dfn>boÃ®te Ã  moustache</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><dfn>boÃ®te Ã  moustaches</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>boolÃ©enne, valeur</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>boolÃ©enne, variable</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn lang="en">boxplot</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<h2 id="index-des-concepts_C">
C
</h2>
<p><dfn>CAH</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>camembert, graphique</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>caractÃ¨res, chaÃ®ne</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>catÃ©gorielle, variable</dfn></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<p><dfn>cercle de corrÃ©lation</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>chaÃ®ne de caractÃ¨res</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn lang="en">character</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>chemin relatif</dfn></p>
<ul>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
</ul>
<p><dfn>ChiÂ², distance</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>ChiÂ², rÃ©sidus</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>ChiÂ², test</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><dfn>classe de valeurs</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>classe, homogÃ©nÃ©itÃ©</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><dfn>classification ascendante hiÃ©rarchique</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>classification, arbre</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>Cleveland, diagramme</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn lang="en">cluster</dfn></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">DÃ©finir un plan dâ€™Ã©chantillonnage complexe</a></li>
</ul>
<p><dfn>coefficient de contingence de Cramer</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>coefficient de corrÃ©lation</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><dfn>coefficient, modÃ¨le</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>coloration syntaxique</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#presentation-et-philosophie">PrÃ©sentation et Philosophie</a></li>
</ul>
<p><dfn>commentaire</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><dfn>comparaison de mÃ©dianes, test</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>comparaison de moyennes</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><dfn>comparaison de proportions, test</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>comparaison, opÃ©rateur</dfn></p>
<ul>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn lang="en">Comprehensive R Archive Network</dfn></p>
<ul>
<li><a href="#extensions">Extensions</a></li>
</ul>
<p><dfn>condition, indexation</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>confusion, matrice</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>console</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>corrÃ©lation, cercle</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>corrÃ©lation, coefficient</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><dfn>correspondances, analyse factorielle</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>couleur, palette</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>Cramer, coefficient de contingence</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>CRAN</dfn></p>
<ul>
<li><a href="#extensions">Extensions</a></li>
</ul>
<p><dfn>croisÃ©, tableau</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><dfn>CSV, fichier</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<h2 id="index-des-concepts_D">
D
</h2>
<p><dfn lang="en">data frame</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><dfn>date, variable</dfn></p>
<ul>
<li><a href="#calculer-un-age">Calculer un Ã¢ge</a></li>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><dfn>dendrogramme</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>densitÃ©, estimation locale</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><dfn>descriptive, statistique</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn lang="en">design</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><dfn>diagramme de Cleveland</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>diagramme en bÃ¢tons</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>diagramme en secteur</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>distance</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>distance de Gower</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>distance du ChiÂ²</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>distance du PhiÂ²</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>distance, matrice</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><dfn>distribution</dfn></p>
<ul>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>donnÃ©e labelissÃ©e</dfn></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<p><dfn>donnÃ©es pondÃ©rÃ©es</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><dfn>donnÃ©es, exporter</dfn></p>
<ul>
<li><a href="#export-de-donnees">Export de donnÃ©es</a></li>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><dfn>donnÃ©es, tableau</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
</ul>
<h2 id="index-des-concepts_E">
E
</h2>
<p><dfn>Ã©cart-type</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>Ã©cart interquartile</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>Ã©chantillonnage alÃ©atoire simple</dfn></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">DÃ©finir un plan dâ€™Ã©chantillonnage complexe</a></li>
</ul>
<p><dfn>Ã©chantillonnage Ã©quiprobable</dfn></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">DÃ©finir un plan dâ€™Ã©chantillonnage complexe</a></li>
</ul>
<p><dfn>Ã©chantillonnage par grappes</dfn></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">DÃ©finir un plan dâ€™Ã©chantillonnage complexe</a></li>
</ul>
<p><dfn>Ã©chantillonnage stratifiÃ©</dfn></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">DÃ©finir un plan dâ€™Ã©chantillonnage complexe</a></li>
</ul>
<p><dfn>Ã©chantillonnage, plan</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><dfn>Ã©diteur de script</dfn></p>
<ul>
<li><a href="#presentation-et-philosophie">PrÃ©sentation et Philosophie</a></li>
</ul>
<p><dfn lang="en">empirical cumulative distribution function</dfn></p>
<ul>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
</ul>
<p><dfn>entier</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><dfn>entier, nombre</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>entropie transversale</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><dfn>environnement de dÃ©veloppement</dfn></p>
<ul>
<li><a href="#presentation-et-philosophie">PrÃ©sentation et Philosophie</a></li>
</ul>
<p><dfn>environnement de travail</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>Ã©quiprobable, Ã©chantillonnage</dfn></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">DÃ©finir un plan dâ€™Ã©chantillonnage complexe</a></li>
</ul>
<p><dfn>estimation locale de densitÃ©</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><dfn>estimation par noyau</dfn></p>
<ul>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
</ul>
<p><dfn>Ã©tendue</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>Ã©tiquette de valeur</dfn></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><dfn>Ã©tiquette de variable</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><dfn>Ã©tiquettes de valeurs</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><dfn lang="en">event history analysis</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><dfn>exact, Ã¢ge</dfn></p>
<ul>
<li><a href="#calculer-un-age">Calculer un Ã¢ge</a></li>
</ul>
<p><dfn>explicative, variable</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>export de graphiques</dfn></p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
</ul>
<p><dfn>exporter des donnÃ©es</dfn></p>
<ul>
<li><a href="#export-de-donnees">Export de donnÃ©es</a></li>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><dfn>extension</dfn></p>
<ul>
<li><a href="#extensions">Extensions</a></li>
</ul>
<h2 id="index-des-concepts_F">
F
</h2>
<p><dfn>facteur</dfn></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn lang="en">factor</dfn></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><dfn>factoriel, plan</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>factorielle, analyse</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>fichier de commandes</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><dfn>fichier texte</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><dfn>fichiers <strong>Shapefile</strong></dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><dfn>Fisher, test exact</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>fonction</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>fonction de rÃ©partition empirique</dfn></p>
<ul>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
</ul>
<p><dfn>formule</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><dfn>frÃ©quence, tableau</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>fusion de tables</dfn></p>
<ul>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
</ul>
<h2 id="index-des-concepts_G">
G
</h2>
<p><dfn>gestionnaire de versions</dfn></p>
<ul>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
</ul>
<p><dfn>Gower, distance</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>Gower, indice de similaritÃ©</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>graphique, export</dfn></p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
</ul>
<p><dfn>grappe, Ã©chantillonnage</dfn></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">DÃ©finir un plan dâ€™Ã©chantillonnage complexe</a></li>
</ul>
<h2 id="index-des-concepts_H">
H
</h2>
<p><dfn>Hill et Smith, analyse mixte</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>histogramme</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>historique des commandes</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>homogÃ©nÃ©itÃ© des classes</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<h2 id="index-des-concepts_I">
I
</h2>
<p><dfn>image bitmap</dfn></p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
</ul>
<p><dfn>image matricielle</dfn></p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
</ul>
<p><dfn>image vectorielle</dfn></p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
</ul>
<p><dfn>indÃ©pendance</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><dfn>indertie, perte relative</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn lang="en">index plots</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><dfn>indexation</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>indexation bidimensionnelle</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
</ul>
<p><dfn>indexation directe</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>indexation par condition</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
</ul>
<p><dfn>indexation par condition consiste Ã  fournir un vecteur logique indiquant si chaque Ã©lÃ©ment doit Ãªtre inclu (si <code>TRUE</code>) ou exclu (si <code>FALSE</code>). Par exempleÂ :</dfn></p>
<pre class="{r}"><code>sexe
sexe[c(TRUE, FALSE, FALSE, TRUE, FALSE, FALSE)]</code></pre>
<p>Ã‰crire manuellement une telle condition nâ€™est pas trÃ¨s pratique Ã  lâ€™usage. Mais supposons que nous ayons Ã©galement Ã  notre disposition les deux vecteurs suivants, Ã©galement de longueur 6.</p>
<pre class="{r}"><code>urbain opÃ©rateurs de comparaison suivantsÂ :

OpÃ©rateur de comparaison  | Signification
:-----------|:-------------
`==` | Ã©gal Ã 
`!=` | diffÃ©rent de
`&gt;` | strictement supÃ©rieur Ã 
`=` | supÃ©rieur ou Ã©gal Ã 
`= 80</code></pre>
<p>Que sâ€™est-il passÃ©Â ? Nous avons fourni Ã  <strong>R</strong> une condition et il nous a renvoyÃ© un vecteur logique avec autant dâ€™Ã©lÃ©ments quâ€™il yâ€™a dâ€™observations et dont la valeur est <code>TRUE</code> si la condition est remplie et <code>FALSE</code> dans les autres cas. Nous pouvons alors utiliser ce vecteur logique pour obtenir la taille des participants pesant 80 kilogrammes ou plusÂ :</p>
<pre class="{r}"><code>taille[poids &gt;= 80]</code></pre>
<p>On peut combiner ou modifier des conditions Ã  lâ€™aide des opÃ©rateurs logiques habituelsÂ :</p>
<table>
<thead>
<tr class="header">
<th align="left">OpÃ©rateur logique</th>
<th align="left">Signification</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>&amp;</code></td>
<td align="left">et logique</td>
</tr>
<tr class="even">
<td align="left"><code>|</code></td>
<td align="left">ou logique</td>
</tr>
<tr class="odd">
<td align="left"><code>!</code></td>
<td align="left">nÃ©gation logique</td>
</tr>
</tbody>
</table>
<p>Comment les utilise-t-onÂ ? Voyons tout de suite un exemple. Supposons que je veuille identifier les personnes pesant 80 kilogrammes ou plus <strong>et</strong> vivant en milieu urbainÂ :</p>
<p><code>{r, results='hide'} poids &gt;= 80 &amp; urbain</code></p>
<p>Les rÃ©sultats sont trÃ¨s diffÃ©rents si je souhaite isoler les personnes pesant 80 kilogrammes ou plus <em>ou</em> vivant milieu urbainÂ :</p>
<p><code>{r, results='hide'} poids &gt;= 80 &amp; urbain</code></p>
<p>Une remarque importanteÂ : quand lâ€™un des termes dâ€™une condition comporte une valeur manquante (<code>NA</code>), le rÃ©sultat de cette condition nâ€™est pas toujours <code>TRUE</code> ou <code>FALSE</code>, il peut aussi Ãªtre Ã  son tour une valeur manquante.</p>
<pre class="{r}"><code>taille
taille &gt; 1.8</code></pre>
<p>On voit que le test <code>NA &gt; 1.8</code> ne renvoie ni vrai ni faux, mais <code>NA</code>.</p>
<p>Une autre consÃ©quence importante de ce comportement est quâ€™on ne peut pas utiliser lâ€™opÃ©rateur lâ€™expression <code>== NA</code> pour tester la prÃ©sence de valeurs manquantes. On utilisera Ã  la place la fonction <em>ad hoc</em> <code data-pkg="base" data-rdoc="NA">is.na</code>Â :</p>
<pre class="{r}"><code>is.na(taille &gt; 1.8)</code></pre>
<p>Pour compliquer encore un peu le tout, lorsquâ€™on utilise une condition pour lâ€™indexation, si la condition renvoie <code>NA</code>, <strong>R</strong> ne sÃ©lectionne pas lâ€™Ã©lÃ©ment mais retourne quand mÃªme la valeur <code>NA</code>. Ceci a donc des consÃ©quences sur le rÃ©sultat dâ€™une indexation par comparaison.</p>
<p>Par exemple si je cherche Ã  connaÃ®tre le poids des personnes mesurant 1,80 mÃ¨tre ou plusÂ :</p>
<pre class="{r}"><code>taille
poids
poids[taille &gt; 1.8]</code></pre>
<p>Les Ã©lÃ©ments pour lesquels la taille nâ€™est pas connue ont Ã©tÃ© transformÃ©s en <code>NA</code>, ce qui nâ€™influera pas le calcul dâ€™une moyenne. Par contre, lorsquâ€™on utilisera assignation et indexation ensemble, cela peut crÃ©er des problÃ¨mes. Il est donc prÃ©fÃ©rable lorsque lâ€™on a des valeurs manquantes de les exclure ainsiÂ :</p>
<pre class="{r}"><code>poids[taille &gt; 1.8 &amp; !is.na(taille)]</code></pre>
<p>Pour plus de dÃ©tails sur les conditions et le calcul logique dans <strong>R</strong>, on pourra se rÃ©fÃ©rer au <a href="conditions-et-comparaisons.html">chapitre dÃ©diÃ©</a>.</p>
<h2 id="index-des-concepts_assignation-par-indexation-1">Assignation par indexation</h2>
<p>Dans tous les exemples prÃ©cÃ©dents, on a utilisÃ© lâ€™indexation pour extraire une partie dâ€™un vecteur, en plaÃ§ant lâ€™opÃ©ration dâ€™indexation Ã  droite de lâ€™opÃ©rateur <code>assignation. Dans ce cas, les Ã©lÃ©ments sÃ©lectionnÃ©s par l'indexation sont alors remplacÃ©s par les valeurs indiquÃ©es Ã  droite de l'opÃ©rateur</code>recyclage. Les deux commandes suivantes sont ainsi rigoureusement Ã©quivalentesÂ :</p>
<p>``<code>{r} sexe[c(1,3,4)] tous les Ã©lÃ©ments sauf celui-lÃ .  - Si l'on indique des chaÃ®nes de caractÃ¨res, c'est l'indexation par nomÂ : on indique le nom des Ã©lÃ©ments que l'on souhaite extraire. Cette forme d'indexation ne fonctionne que si le vecteur est nommÃ©.  - Si l'on transmets des valeurs logiques, le plus souvent sous la forme d'une condition, c'est l'indexation par conditionÂ :</code>TRUE<code>indique les Ã©lÃ©ments Ã  extraire et</code>FALSE<code>les Ã©lÃ©ments Ã  exclure. Il faut Ãªtre vigilant aux valeurs manquantes (</code>NA<code>) dans ce cas prÃ©cis.  - Enfin, il est possible de modifier que certains Ã©lÃ©ments d'un vecteur en ayant recours Ã  la fois Ã  l'indexation (</code>[]<code>) et Ã  l'assignation (</code></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>indexation par nom</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
</ul>
<p><dfn>indexation par position</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>indexation, assignation</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
</ul>
<p><dfn>indice de similaritÃ©</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>indice de similaritÃ© de Gower</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>inertie</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>inertie, saut</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>installation</dfn></p>
<ul>
<li><a href="#installation-de-R-et-RStudio">Installation de R et RStudio</a></li>
</ul>
<p><dfn lang="en">integer</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>interface</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>interquartilen Ã©cart</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>intervalle de confiance</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<p><dfn>intervalle de confiance dâ€™un odds ratio</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>intervalle de confiance dâ€™une moyenne</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><dfn>intervalle de confiance dâ€™une proportion</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<p><dfn>invite de commande</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<h2 id="index-des-concepts_L">
L
</h2>
<p><dfn>labelled data</dfn></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<p><dfn lang="en">labelled vector</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>labellisÃ©e, donnÃ©e</dfn></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<p><dfn>labellisÃ©e, variable</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><dfn lang="en">level, factor</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><dfn>libre, logiciel</dfn></p>
<ul>
<li><a href="#presentation-et-philosophie">PrÃ©sentation et Philosophie</a></li>
</ul>
<p><dfn lang="en">life course analysis</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><dfn>linÃ©aire, rÃ©gression</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><dfn>liste</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
</ul>
<p><dfn lang="en">logical</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>logiciel libre</dfn></p>
<ul>
<li><a href="#presentation-et-philosophie">PrÃ©sentation et Philosophie</a></li>
</ul>
<p><dfn>logique, opÃ©rateur</dfn></p>
<ul>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>logique, valeur</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>logistique, rÃ©gression</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>loi normale</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<h2 id="index-des-concepts_M">
M
</h2>
<p><dfn>Mann-Whitney, test</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>manquante, valeur</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn lang="en">matching, optimal</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><dfn>matrice de confusion</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>matrice de distances</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>maximum</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>mÃ©diane</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>mÃ©diane, test de comparaison</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>mÃ©tadonnÃ©e</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><dfn>mÃ©thode de Ward</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>minimum</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>modalitÃ©</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>modalitÃ© de rÃ©fÃ©rence</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>modalitÃ©, facteur</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><dfn>modÃ¨le linÃ©aire gÃ©nÃ©ralisÃ©</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>mosaÃ¯que, graphique</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><dfn>moustaches, boÃ®te</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>moyenne</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>moyenne, Ã¢ge</dfn></p>
<ul>
<li><a href="#calculer-un-age">Calculer un Ã¢ge</a></li>
</ul>
<p><dfn>moyenne, comparaison</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><dfn>moyenne, intervalle de confiance</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<p><dfn lang="en">multidimensional scaling</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><dfn>multinomiale, rÃ©gression logistique</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<h2 id="index-des-concepts_N">
N
</h2>
<p><dfn>NA</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>nom, indexation</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>nombre entier</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>nombre rÃ©el</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>normale, loi</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>normalitÃ©, test de Shapiro-Wilk</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>notation formule</dfn></p>
<ul>
<li><a href="#formules">Formules</a></li>
</ul>
<p><dfn>notation scientifique</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>noyau, estimation</dfn></p>
<ul>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
</ul>
<p><dfn lang="en">numeric</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>numÃ©rique, variable</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<h2 id="index-des-concepts_O">
O
</h2>
<p><dfn>observation</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><dfn lang="en">odds ratio</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>odds ratio, intervalle de confiance</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>opÃ©rateur de comparaison</dfn></p>
<ul>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
</ul>
<p><dfn>opÃ©rateur logique</dfn></p>
<ul>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn lang="en">optimal matching</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><dfn>optimal, appariement</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><dfn>ordinaire, rÃ©gression logistique</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>ordonner le tri Ã  plat</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<h2 id="index-des-concepts_P">
P
</h2>
<p><dfn lang="en">package</dfn></p>
<ul>
<li><a href="#extensions">Extensions</a></li>
</ul>
<p><dfn>palette de couleurs</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>partition</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>pas Ã  pas, sÃ©lection descendante</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>patron</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>perte relative dâ€™inertie</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>PhiÂ², distance</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>plan dâ€™Ã©chantillonnage</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><dfn>plan factoriel</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>pondÃ©ration</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><dfn>position, indexation</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>projets</dfn></p>
<ul>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
</ul>
<p><dfn>prompt</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>proportion, intervalle de confiance</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<p><dfn>proportion, test de comparaison</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>proxy</dfn></p>
<ul>
<li><a href="#installation-de-R-et-RStudio">Installation de R et RStudio</a></li>
</ul>
<h2 id="index-des-concepts_Q">
Q
</h2>
<p><dfn>qualitative, variable</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>quantile</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>quantitative, variable</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>quartile</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<h2 id="index-des-concepts_R">
R
</h2>
<p><dfn>rapport des cotes</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>recodage de variables</dfn></p>
<ul>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><dfn>recyclage</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn lang="en">recycling rule</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>rÃ©el, nombre</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>rÃ©fÃ©rence, modalitÃ©</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>rÃ©gression linÃ©aire</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><dfn>rÃ©gression logistique</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>rÃ©gression logistique binaire</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>rÃ©gression logistique multinomiale</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>rÃ©gression logistique ordinaire</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>rÃ©gression, droite</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><dfn>relatif, risque</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>rÃ©partition empirique, fonction</dfn></p>
<ul>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
</ul>
<p><dfn>rÃ©pertoire de travail</dfn></p>
<ul>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
</ul>
<p><dfn>rÃ©solution</dfn></p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
</ul>
<p><dfn>ressemblance</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>rÃ©volu, Ã¢ge</dfn></p>
<ul>
<li><a href="#calculer-un-age">Calculer un Ã¢ge</a></li>
</ul>
<p><dfn>risque relatif</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<h2 id="index-des-concepts_S">
S
</h2>
<p><dfn>SAS, fichier</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><dfn>saut dâ€™inertie</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>scientifique, notation</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>script</dfn></p>
<ul>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><dfn>scripts</dfn></p>
<ul>
<li><a href="#presentation-et-philosophie">PrÃ©sentation et Philosophie</a></li>
</ul>
<p><dfn>secteur, diagramme</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>section</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><dfn>sÃ©lection descendante pas Ã  pas</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>sÃ©parateur de champs</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><dfn>sÃ©parateur dÃ©cimal</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><dfn>sÃ©quence, analyse</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><dfn>sÃ©quence, tapis</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><dfn>Shapiro-Wilk, test de normalitÃ©</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>similaritÃ©, indice</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>sous-Ã©chantillon</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><dfn>SPSS, fichier</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><dfn>statistique bivariÃ©e</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><dfn>statistique descriptive</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>statistique univariÃ©e</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>strate</dfn></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">DÃ©finir un plan dâ€™Ã©chantillonnage complexe</a></li>
</ul>
<p><dfn>stratifiÃ©, Ã©chantillonnage</dfn></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">DÃ©finir un plan dâ€™Ã©chantillonnage complexe</a></li>
</ul>
<p><dfn>structure dâ€™un objet</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><dfn>Student, test-t</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><dfn>Student, test t</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<h2 id="index-des-concepts_T">
T
</h2>
<p><dfn>tableau croisÃ©</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><dfn>tableau croisÃ©, coefficient de contingence de Cramer</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>tableau croisÃ©, graphique en mosaÃ¯que</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><dfn>tableau croisÃ©, test exact de Fisher</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>tableau de donnÃ©e</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><dfn>tableau de donnÃ©es, fusion</dfn></p>
<ul>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
</ul>
<p><dfn>tableau de donnÃ©es, tri</dfn></p>
<ul>
<li><a href="#tris">Tris</a></li>
</ul>
<p><dfn>tableau de frÃ©quences</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>tapis</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><dfn lang="en">task view</dfn></p>
<ul>
<li><a href="#extensions">Extensions</a></li>
</ul>
<p><dfn>test dâ€™Ã©galitÃ© des variances</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>test de comparaison de deux proportions</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>test de normalitÃ© de Shapiro-Wilk</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>test de Wilcoxon/Mann-Whitney</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>test du ChiÂ²</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><dfn>test du ChiÂ², rÃ©sidus</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>test exact de Fisher</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>test t de Student</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><dfn>texte</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>texte tabulÃ©, fichier</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><dfn>texte, fichier</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><dfn>total</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><dfn>trajectoire biographique</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><dfn>transversale, entropie</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><dfn>tri Ã  plat</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>tri Ã  plat, ordonner</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<h2 id="index-des-concepts_U">
U
</h2>
<p><dfn>univariÃ©e, statistique</dfn></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<h2 id="index-des-concepts_V">
V
</h2>
<p><dfn>valeur boolÃ©enne</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>valeur logique</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>valeur manquante</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>valeur manquante dÃ©clarÃ©e</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><dfn>valeur, Ã©tiquette</dfn></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><dfn>variable</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><dfn>variable catÃ©gorielle</dfn></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<p><dfn>variable dâ€™intÃ©rÃªt</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>variable explicative</dfn></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><dfn>variable labellisÃ©e</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><dfn>variable numÃ©rique</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><dfn>variable qualitative</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>variable quantitative</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><dfn>variable, Ã©tiquette</dfn></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><dfn>variable, recodage</dfn></p>
<ul>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><dfn>variance</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><dfn>variance, test dâ€™Ã©galitÃ©</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>vecteur</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>vector</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn lang="en">viewer</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<h2 id="index-des-concepts_W">
W
</h2>
<p><dfn>Ward, mÃ©thode</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><dfn>Wilcoxon, test</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
</div>

</article>
<article id="index-des-fonctions">

<div class="fluid-row" id="index-des-fonctions_header">


<h1 class="title">Index des fonctions</h1>

</div>


<nav>
<ul class="pagination pagination-sm">
<li>
<a href="#index-des-fonctions_%">%</a>
</li>
<li>
<a href="#index-des-fonctions_A">A</a>
</li>
<li>
<a href="#index-des-fonctions_B">B</a>
</li>
<li>
<a href="#index-des-fonctions_C">C</a>
</li>
<li>
<a href="#index-des-fonctions_D">D</a>
</li>
<li>
<a href="#index-des-fonctions_E">E</a>
</li>
<li>
<a href="#index-des-fonctions_F">F</a>
</li>
<li>
<a href="#index-des-fonctions_G">G</a>
</li>
<li>
<a href="#index-des-fonctions_H">H</a>
</li>
<li>
<a href="#index-des-fonctions_I">I</a>
</li>
<li>
<a href="#index-des-fonctions_J">J</a>
</li>
<li>
<a href="#index-des-fonctions_K">K</a>
</li>
<li>
<a href="#index-des-fonctions_L">L</a>
</li>
<li>
<a href="#index-des-fonctions_M">M</a>
</li>
<li>
<a href="#index-des-fonctions_N">N</a>
</li>
<li>
<a href="#index-des-fonctions_O">O</a>
</li>
<li>
<a href="#index-des-fonctions_P">P</a>
</li>
<li>
<a href="#index-des-fonctions_Q">Q</a>
</li>
<li>
<a href="#index-des-fonctions_R">R</a>
</li>
<li>
<a href="#index-des-fonctions_S">S</a>
</li>
<li>
<a href="#index-des-fonctions_T">T</a>
</li>
<li>
<a href="#index-des-fonctions_U">U</a>
</li>
<li>
<a href="#index-des-fonctions_V">V</a>
</li>
<li>
<a href="#index-des-fonctions_W">W</a>
</li>
<li>
<a href="#index-des-fonctions_X">X</a>
</li>
</ul>
<p/></nav>
<div id="index-des-fonctions_index_fonctions">
<h2 id="index-des-fonctions_%">
%
</h2>
<p><code data-pkg="base" data-rdoc="match">%in%</code> (base)</p>
<ul>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
</ul>
<h2 id="index-des-fonctions_A">
A
</h2>
<p><code data-pkg="JLutils">A2Rplot</code> (JLutils)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="graphics">abline</code> (graphics)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><code data-pkg="base">add.NA</code> (base)</p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="factor">addNA</code> (base)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<p><code data-pkg="questionr">addNAstr</code> (questionr)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<p><code data-pkg="ggplot2" data-rdoc="aes">aes</code> (ggplot2)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
</ul>
<p><code data-pkg="eeptools">age_calc</code> (eeptools)</p>
<ul>
<li><a href="#calculer-un-age">Calculer un Ã¢ge</a></li>
</ul>
<p><code data-pkg="stats">aggregate</code> (stats)</p>
<ul>
<li><a href="#formules">Formules</a></li>
</ul>
<p><code data-pkg="cluster">agnes</code> (cluster)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="survey" data-rdoc="anova.svyglm">AIC.svyglm</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="effects" data-rdoc="effect">allEffects</code> (effects)</p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><code data-pkg="base">append</code> (base)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="character">as.character</code> (base)</p>
<ul>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><code data-pkg="cluster" data-rdoc="agnes.object">as.hclust</code> (cluster)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="base">as.integer</code> (base)</p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">DÃ©finir un plan dâ€™Ã©chantillonnage complexe</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="matrix">as.matrix</code> (base)</p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="numeric">as.numeric</code> (base)</p>
<ul>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><code data-pkg="haven" data-rdoc="labelled">as_factor</code> (haven)</p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<h2 id="index-des-fonctions_B">
B
</h2>
<p><code data-pkg="graphics">barplot</code> (graphics)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="JLutils">best.cutree</code> (JLutils)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="ade4" data-rdoc="scatter">biplot</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="ade4" data-rdoc="dudi.acm">boxplot</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="graphics">boxplot</code> (graphics)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><code data-pkg="RColorBrewer" data-rdoc="RColorsBrewer">brewer.pal</code> (RColorBrewer)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="base">by</code> (base)</p>
<ul>
<li><a href="#sous-ensembles">Sous-ensembles</a></li>
</ul>
<h2 id="index-des-fonctions_C">
C
</h2>
<p><code data-pkg="base">c</code> (base)</p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="FactoMineR">CA</code> (FactoMineR)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="base">cbind</code> (base)</p>
<ul>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
</ul>
<p><code data-pkg="questionr">chisq.residuals</code> (questionr)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><code data-pkg="stats">chisq.test</code> (stats)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="base">class</code> (base)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="stats">cmdscale</code> (stats)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><code data-pkg="stats">coef</code> (stats)</p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><code data-pkg="survey" data-rdoc="svyglm">coef</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="grDevices">colors</code> (grDevices)</p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><code data-pkg="dplyr" data-rdoc="bind">combine</code> (dplyr)</p>
<ul>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
</ul>
<p><code data-pkg="stats">complete.cases</code> (stats)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><code data-pkg="stats">confint</code> (stats)</p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><code data-pkg="survey" data-rdoc="surveysummary">confint</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="graphics">contour</code> (graphics)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><code data-pkg="stats">cor</code> (stats)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><code data-pkg="MASS">corresp</code> (MASS)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="questionr">cprop</code> (questionr)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><code data-pkg="questionr">cramer.v</code> (questionr)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><code data-pkg="base">cut</code> (base)</p>
<ul>
<li><a href="#recodage">Recodage</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><code data-pkg="stats">cutree</code> (stats)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<h2 id="index-des-fonctions_D">
D
</h2>
<p><code data-pkg="cluster">daisy</code> (cluster)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="utils">data</code> (utils)</p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><code data-pkg="base">data.frame</code> (base)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
</ul>
<p><code data-pkg="stats">density</code> (stats)</p>
<ul>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
</ul>
<p><code data-pkg="questionr">describe</code> (questionr)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><code data-pkg="grDevices" data-rdoc="dev">dev.off</code> (grDevices)</p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
</ul>
<p><code data-pkg="grDevices" data-rdoc="dev2">dev.print</code> (grDevices)</p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
</ul>
<p><code data-pkg="base">dim</code> (base)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><code data-pkg="FactoMineR">dimdesc</code> (FactoMineR)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="RColorBrewer" data-rdoc="RColorsBrewer">display.brewer.all</code> (RColorBrewer)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="TraMineR">disscenter</code> (TraMineR)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><code data-pkg="stats">dist</code> (stats)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="ade4">dist.dudi</code> (ade4)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="graphics">dotchart</code> (graphics)</p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><code data-pkg="base">dput</code> (base)</p>
<ul>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><code data-pkg="ade4">dudi.acm</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="ade4">dudi.coa</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="ade4">dudi.mix</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="ade4">dudi.pca</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="lubridate" data-rdoc="Duration">Duration</code> (lubridate)</p>
<ul>
<li><a href="#calculer-un-age">Calculer un Ã¢ge</a></li>
</ul>
<h2 id="index-des-fonctions_E">
E
</h2>
<p><code data-pkg="utils">example</code> (utils)</p>
<ul>
<li><a href="#ou-trouver-de-l-aide">OÃ¹ trouver de lâ€™aideÂ ?</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="log">exp</code> (base)</p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<h2 id="index-des-fonctions_F">
F
</h2>
<p><code data-pkg="ggplot2">facet_grid</code> (ggplot2)</p>
<ul>
<li><a href="#formules">Formules</a></li>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
</ul>
<p><code data-pkg="ggplot2">facet_wrap</code> (ggplot2)</p>
<ul>
<li><a href="#formules">Formules</a></li>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
</ul>
<p><code data-pkg="base">factor</code> (base)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><code data-pkg="graphics">filled.contour</code> (graphics)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><code data-pkg="stats">fisher.test</code> (stats)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><code data-pkg="base">format</code> (base)</p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><code data-pkg="stats">formula</code> (stats)</p>
<ul>
<li><a href="#formules">Formules</a></li>
</ul>
<p><code data-pkg="questionr">freq</code> (questionr)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#recodage">Recodage</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<h2 id="index-des-fonctions_G">
G
</h2>
<p><code data-pkg="ggplot2" data-rdoc="geom_point">geom_point</code> (ggplot2)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
</ul>
<p><code data-pkg="ggplot2" data-rdoc="geom_smooth">geom_smooth</code> (ggplot2)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
</ul>
<p><code data-pkg="ggplot2" data-rdoc="geom_vline">geom_vline</code> (ggplot2)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
</ul>
<p><code data-pkg="raster">getValues</code> (raster)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="base">getwd</code> (base)</p>
<ul>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
</ul>
<p><code data-pkg="ggplot2" data-rdoc="ggplot">ggplot</code> (ggplot2)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
</ul>
<p><code data-pkg="ggplot2" data-rdoc="ggsave">ggsave</code> (ggplot2)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
</ul>
<p><code data-pkg="dplyr">glimpse</code> (dplyr)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
</ul>
<p><code data-pkg="stats">glm</code> (stats)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<h2 id="index-des-fonctions_H">
H
</h2>
<p><code data-pkg="fastcluster">hclust</code> (fastcluster)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="stats">hclust</code> (stats)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="FactoMineR">HCPC</code> (FactoMineR)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="questionr">hdv2003</code> (questionr)</p>
<ul>
<li><a href="#formules">Formules</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><code data-pkg="utils">head</code> (utils)</p>
<ul>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><code data-pkg="utils">help</code> (utils)</p>
<ul>
<li><a href="#ou-trouver-de-l-aide">OÃ¹ trouver de lâ€™aideÂ ?</a></li>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><code data-pkg="utils">help.search</code> (utils)</p>
<ul>
<li><a href="#ou-trouver-de-l-aide">OÃ¹ trouver de lâ€™aideÂ ?</a></li>
</ul>
<p><code data-pkg="utils">help.start</code> (utils)</p>
<ul>
<li><a href="#ou-trouver-de-l-aide">OÃ¹ trouver de lâ€™aideÂ ?</a></li>
</ul>
<p><code data-pkg="graphics">hist</code> (graphics)</p>
<ul>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<h2 id="index-des-fonctions_I">
I
</h2>
<p><code data-pkg="questionr">icut</code> (questionr)</p>
<ul>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><code data-pkg="base">ifelse</code> (base)</p>
<ul>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><code data-pkg="graphics">image</code> (graphics)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><code data-pkg="ade4">inertia.dudi</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="utils">install.packages</code> (utils)</p>
<ul>
<li><a href="#extensions">Extensions</a></li>
</ul>
<p><code data-pkg="devtools">install_github</code> (devtools)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<p><code data-pkg="lubridate" data-rdoc="Interval">Interval</code> (lubridate)</p>
<ul>
<li><a href="#calculer-un-age">Calculer un Ã¢ge</a></li>
</ul>
<p><code data-pkg="questionr">iorder</code> (questionr)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<p><code data-pkg="questionr">irec</code> (questionr)</p>
<ul>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="NA">is.na</code> (base)</p>
<ul>
<li><a href="#recodage">Recodage</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="numeric">is.numeric</code> (base)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<h2 id="index-des-fonctions_J">
J
</h2>
<p><code data-pkg="grDevices" data-rdoc="png">jpeg</code> (grDevices)</p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
</ul>
<h2 id="index-des-fonctions_K">
K
</h2>
<p><code data-pkg="MASS">kde2d</code> (MASS)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<h2 id="index-des-fonctions_L">
L
</h2>
<p><code data-pkg="haven">labelled</code> (haven)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="labelled">labelled</code> (labelled)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<p><code data-pkg="base">length</code> (base)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="Constants">letters</code> (base)</p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="Constants">LETTERS</code> (base)</p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="base">levels</code> (base)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
<li><a href="#tris">Tris</a></li>
</ul>
<p><code data-pkg="JLutils">lfactor</code> (JLutils)</p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><code data-pkg="base">library</code> (base)</p>
<ul>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><code data-pkg="base">list</code> (base)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
</ul>
<p><code data-pkg="stats">lm</code> (stats)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><code data-pkg="base">load</code> (base)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="questionr">lookfor</code> (questionr)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
</ul>
<p><code data-pkg="questionr" data-rdoc="rprop">lprop</code> (questionr)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<h2 id="index-des-fonctions_M">
M
</h2>
<p><code data-pkg="base" data-rdoc="Extremes">max</code> (base)</p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><code data-pkg="MASS">mca</code> (MASS)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="FactoMineR">MCA</code> (FactoMineR)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="base">mean</code> (base)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#ou-trouver-de-l-aide">OÃ¹ trouver de lâ€™aideÂ ?</a></li>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
<li><a href="#sous-ensembles">Sous-ensembles</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><code data-pkg="labelled" data-rdoc="mean.labelled">mean</code> (labelled)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<p><code data-pkg="stats">median</code> (stats)</p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><code data-pkg="base">merge</code> (base)</p>
<ul>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="Extremes">min</code> (base)</p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><code data-pkg="labelled">missing_to_na</code> (labelled)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<p><code data-pkg="labelled">missing_val</code> (labelled)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="Constants">month.abb</code> (base)</p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="Constants">month.name</code> (base)</p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="vcd">mosaic</code> (vcd)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><code data-pkg="graphics">mosaicplot</code> (graphics)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><code data-pkg="nnet">multinom</code> (nnet)</p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<h2 id="index-des-fonctions_N">
N
</h2>
<p><code data-pkg="base">NA</code> (base)</p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="base">names</code> (base)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
<li><a href="#recodage">Recodage</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="nrow">ncol</code> (base)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><code data-pkg="labelled">nolabel_to_na</code> (labelled)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<p><code data-pkg="base">nrow</code> (base)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><code data-pkg="base">NULL</code> (base)</p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<h2 id="index-des-fonctions_O">
O
</h2>
<p><code data-pkg="questionr">odds.ratio</code> (questionr)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="base">order</code> (base)</p>
<ul>
<li><a href="#tris">Tris</a></li>
</ul>
<h2 id="index-des-fonctions_P">
P
</h2>
<p><code data-pkg="graphics">par</code> (graphics)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><code data-pkg="FactoMineR">PCA</code> (FactoMineR)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="grDevices">pdf</code> (grDevices)</p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
</ul>
<p><code data-pkg="lubridate" data-rdoc="Period">Period</code> (lubridate)</p>
<ul>
<li><a href="#calculer-un-age">Calculer un Ã¢ge</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="Constants">pi</code> (base)</p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="graphics">pie</code> (graphics)</p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><code data-pkg="effects" data-rdoc="summary.effect">plot</code> (effects)</p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><code data-pkg="FactoMineR" data-rdoc="plot.MCA">plot</code> (FactoMineR)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="graphics" data-rdoc="plot.default">plot</code> (graphics)</p>
<ul>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><code data-pkg="stats" data-rdoc="dendrogram">plot</code> (stats)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
</ul>
<p><code data-pkg="FactoMineR">plotellipses</code> (FactoMineR)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="grDevices">png</code> (grDevices)</p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
</ul>
<p><code data-pkg="grDevices">postscript</code> (grDevices)</p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
</ul>
<p><code data-pkg="stats" data-rdoc="predict.glm">predict</code> (stats)</p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><code data-pkg="survey" data-rdoc="svyglm">predict</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="stats">princomp</code> (stats)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="questionr" data-rdoc="print.proptab">print</code> (questionr)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><code data-pkg="questionr">prop</code> (questionr)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><code data-pkg="JLutils">prop.ci</code> (JLutils)</p>
<ul>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<p><code data-pkg="JLutils">prop.ci.lower</code> (JLutils)</p>
<ul>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<p><code data-pkg="JLutils">prop.ci.upper</code> (JLutils)</p>
<ul>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<p><code data-pkg="base">prop.table</code> (base)</p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><code data-pkg="stats">prop.test</code> (stats)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<h2 id="index-des-fonctions_Q">
Q
</h2>
<p><code data-pkg="ggplot2" data-rdoc="qplot">qplot</code> (ggplot2)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
</ul>
<p><code data-pkg="questionr">quant.cut</code> (questionr)</p>
<ul>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><code data-pkg="stats">quantile</code> (stats)</p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<h2 id="index-des-fonctions_R">
R
</h2>
<p><code data-pkg="base">range</code> (base)</p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><code data-pkg="stats">range</code> (stats)</p>
<ul>
<li><a href="#formules">Formules</a></li>
</ul>
<p><code data-pkg="raster">raster</code> (raster)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="cbind">rbind</code> (base)</p>
<ul>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
</ul>
<p><code data-pkg="plyr">rbind.fill</code> (plyr)</p>
<ul>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
</ul>
<p><code data-pkg="utils" data-rdoc="read.csv">read.csv</code> (utils)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="utils" data-rdoc="read.table">read.csv2</code> (utils)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="foreign">read.dbf</code> (foreign)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="utils" data-rdoc="read.table">read.delim</code> (utils)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="utils" data-rdoc="read.table">read.delim2</code> (utils)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="foreign">read.dta</code> (foreign)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><code data-pkg="foreign">read.spss</code> (foreign)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><code data-pkg="utils">read.table</code> (utils)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="xlsx">read.xlsx</code> (xlsx)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="xlsx" data-rdoc="read.xlsx">read.xlsx2</code> (xlsx)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="foreign">read.xport</code> (foreign)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="readr" data-rdoc="read_csv">read_csv</code> (readr)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
</ul>
<p><code data-pkg="haven">read_dta</code> (haven)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="readxl">read_excel</code> (readxl)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="haven">read_sas</code> (haven)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="haven">read_spss</code> (haven)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="haven" data-rdoc="read_dta">read_stata</code> (haven)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="maptools">readAsciiGrid</code> (maptools)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="maptools">readShapeLines</code> (maptools)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="maptools">readShapePoints</code> (maptools)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="maptools">readShapePoly</code> (maptools)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="maptools">readShapeSpatial</code> (maptools)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="stats">rect.hclust</code> (stats)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="stats">relevel</code> (stats)</p>
<ul>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><code data-pkg="mosaic">relrisk</code> (mosaic)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><code data-pkg="utils">remove.packages</code> (utils)</p>
<ul>
<li><a href="#extensions">Extensions</a></li>
</ul>
<p><code data-pkg="questionr">rename.variable</code> (questionr)</p>
<ul>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><code data-pkg="base">rep</code> (base)</p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="library">require</code> (base)</p>
<ul>
<li><a href="#extensions">Extensions</a></li>
</ul>
<p><code data-pkg="base">row.names</code> (base)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
</ul>
<p><code data-pkg="questionr">rprop</code> (questionr)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><code data-pkg="graphics">rug</code> (graphics)</p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<h2 id="index-des-fonctions_S">
S
</h2>
<p><code data-pkg="ade4">s.arrow</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="ade4">s.chull</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="ade4">s.class</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="ade4">s.corcicle</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="JLutils">s.freq</code> (JLutils)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="ade4">s.hist</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="ade4">s.label</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="ade4">s.value</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="base">save</code> (base)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="save">save.image</code> (base)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="ggplot2" data-rdoc="scale_brewer">scale</code> (ggplot2)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
</ul>
<p><code data-pkg="ggplot2" data-rdoc="continuous_scale">scale_x_continuous</code> (ggplot2)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
</ul>
<p><code data-pkg="ade4">scatter</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="ade4" data-rdoc="score.acm">score</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="ade4" data-rdoc="scatter">screeplot</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="stats">sd</code> (stats)</p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><code data-pkg="JLutils">seq_heatmap</code> (JLutils)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><code data-pkg="TraMineR">seqdef</code> (TraMineR)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><code data-pkg="TraMineR">seqdist</code> (TraMineR)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="TraMineR" data-rdoc="seqplot">seqdplot</code> (TraMineR)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><code data-pkg="TraMineR" data-rdoc="seqplot">seqfplot</code> (TraMineR)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><code data-pkg="TraMineR" data-rdoc="seqplot">seqHtplot</code> (TraMineR)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><code data-pkg="TraMineR" data-rdoc="seqplot">seqiplot</code> (TraMineR)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><code data-pkg="TraMineR" data-rdoc="seqplot">seqmsplot</code> (TraMineR)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><code data-pkg="TraMineR" data-rdoc="seqplot">seqmtplot</code> (TraMineR)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><code data-pkg="TraMineR">seqsubm</code> (TraMineR)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="getwd">setwd</code> (base)</p>
<ul>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
</ul>
<p><code data-pkg="stats">shapiro.test</code> (stats)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><code data-pkg="base">sort</code> (base)</p>
<ul>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
<li><a href="#tris">Tris</a></li>
</ul>
<p><code data-pkg="labelled">sort_val_labels</code> (labelled)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<p><code data-pkg="base">source</code> (base)</p>
<ul>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
</ul>
<p><code data-pkg="sp" data-rdoc="SpatialGridDataFrame">SpatialGridDataFrame</code> (sp)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="stats">step</code> (stats)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><code data-pkg="utils">str</code> (utils)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><code data-pkg="base">subset</code> (base)</p>
<ul>
<li><a href="#sous-ensembles">Sous-ensembles</a></li>
</ul>
<p><code data-pkg="survey" data-rdoc="subset.survey.design">subset</code> (survey)</p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">DÃ©finir un plan dâ€™Ã©chantillonnage complexe</a></li>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="ade4" data-rdoc="dudi">summary</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="base">summary</code> (base)</p>
<ul>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
<li><a href="#recodage">Recodage</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><code data-pkg="stats" data-rdoc="summary.glm">summary</code> (stats)</p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><code data-pkg="grDevices" data-rdoc="cairo">svg</code> (grDevices)</p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
</ul>
<p><code data-pkg="survey" data-rdoc="svyhist">svyboxplot</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="survey">svyby</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="survey" data-rdoc="svytable">svychisq</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="survey">svyciprop</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="survey">svydesign</code> (survey)</p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">DÃ©finir un plan dâ€™Ã©chantillonnage complexe</a></li>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="survey">svyglm</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="survey">svyhist</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="survey" data-rdoc="surveysummary">svymean</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="survey">svyplot</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="survey">svyquantile</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="survey">svyratio</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="survey">svytable</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="survey" data-rdoc="surveysummary">svytotal</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="survey">svyttest</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="survey" data-rdoc="surveysummary">svyvar</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<h2 id="index-des-fonctions_T">
T
</h2>
<p><code data-pkg="stats">t.test</code> (stats)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<p><code data-pkg="base">table</code> (base)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
<li><a href="#formules">Formules</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
<li><a href="#recodage">Recodage</a></li>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><code data-pkg="utils" data-rdoc="head">tail</code> (utils)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<p><code data-pkg="base">tapply</code> (base)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#sous-ensembles">Sous-ensembles</a></li>
</ul>
<p><code data-pkg="dplyr">tbl_df</code> (dplyr)</p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code data-pkg="grDevices" data-rdoc="png">tiff</code> (grDevices)</p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
</ul>
<p><code data-pkg="lubridate">time_length</code> (lubridate)</p>
<ul>
<li><a href="#calculer-un-age">Calculer un Ã¢ge</a></li>
</ul>
<p><code data-pkg="base">typeof</code> (base)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<h2 id="index-des-fonctions_U">
U
</h2>
<p><code data-pkg="base">unname</code> (base)</p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="utils">update.packages</code> (utils)</p>
<ul>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#installation-de-R-et-RStudio">Installation de R et RStudio</a></li>
</ul>
<h2 id="index-des-fonctions_V">
V
</h2>
<p><code data-pkg="labelled" data-rdoc="val_labels">val_label</code> (labelled)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<p><code data-pkg="labelled">val_labels</code> (labelled)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<p><code data-pkg="labelled">val_labels_to_na</code> (labelled)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="cor">var</code> (base)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="stats" data-rdoc="cor">var</code> (stats)</p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><code data-pkg="stats">var.test</code> (stats)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><code data-pkg="labelled">var_label</code> (labelled)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<p><code data-pkg="utils">View</code> (utils)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
</ul>
<h2 id="index-des-fonctions_W">
W
</h2>
<p><code data-pkg="grDevices" data-rdoc="windows">win.metafile</code> (grDevices)</p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
</ul>
<p><code data-pkg="utils" data-rdoc="write.table">write.csv</code> (utils)</p>
<ul>
<li><a href="#export-de-donnees">Export de donnÃ©es</a></li>
</ul>
<p><code data-pkg="foreign">write.dbf</code> (foreign)</p>
<ul>
<li><a href="#export-de-donnees">Export de donnÃ©es</a></li>
</ul>
<p><code data-pkg="foreign">write.dta</code> (foreign)</p>
<ul>
<li><a href="#export-de-donnees">Export de donnÃ©es</a></li>
</ul>
<p><code data-pkg="foreign">write.foreign</code> (foreign)</p>
<ul>
<li><a href="#export-de-donnees">Export de donnÃ©es</a></li>
</ul>
<p><code data-pkg="utils">write.table</code> (utils)</p>
<ul>
<li><a href="#export-de-donnees">Export de donnÃ©es</a></li>
</ul>
<p><code data-pkg="xlsx">write.xlsx</code> (xlsx)</p>
<ul>
<li><a href="#export-de-donnees">Export de donnÃ©es</a></li>
</ul>
<p><code data-pkg="readr">write_csv</code> (readr)</p>
<ul>
<li><a href="#export-de-donnees">Export de donnÃ©es</a></li>
</ul>
<p><code data-pkg="haven">write_dta</code> (haven)</p>
<ul>
<li><a href="#export-de-donnees">Export de donnÃ©es</a></li>
</ul>
<p><code data-pkg="haven">write_sav</code> (haven)</p>
<ul>
<li><a href="#export-de-donnees">Export de donnÃ©es</a></li>
</ul>
<p><code data-pkg="maptools" data-rdoc="readAsciiGrid">writeAsciiGrid</code> (maptools)</p>
<ul>
<li><a href="#export-de-donnees">Export de donnÃ©es</a></li>
</ul>
<p><code data-pkg="maptools" data-rdoc="readShapeLines">writeLinesShape</code> (maptools)</p>
<ul>
<li><a href="#export-de-donnees">Export de donnÃ©es</a></li>
</ul>
<p><code data-pkg="maptools" data-rdoc="readShapePoints">writePointsShape</code> (maptools)</p>
<ul>
<li><a href="#export-de-donnees">Export de donnÃ©es</a></li>
</ul>
<p><code data-pkg="maptools" data-rdoc="readShapePoly">writePolyShape</code> (maptools)</p>
<ul>
<li><a href="#export-de-donnees">Export de donnÃ©es</a></li>
</ul>
<p><code data-pkg="questionr">wtd.mean</code> (questionr)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="questionr">wtd.table</code> (questionr)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code data-pkg="questionr" data-rdoc="wtd.mean">wtd.var</code> (questionr)</p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<h2 id="index-des-fonctions_X">
X
</h2>
<p><code data-pkg="stats">xtabs</code> (stats)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#formules">Formules</a></li>
<li><a href="#recodage">Recodage</a></li>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
</div>

</article>
<article id="index-des-extensions">

<div class="fluid-row" id="index-des-extensions_header">


<h1 class="title">Index des extensions</h1>

</div>


<nav>
<ul class="pagination pagination-sm">
<li>
<a href="#index-des-extensions_A">A</a>
</li>
<li>
<a href="#index-des-extensions_B">B</a>
</li>
<li>
<a href="#index-des-extensions_C">C</a>
</li>
<li>
<a href="#index-des-extensions_D">D</a>
</li>
<li>
<a href="#index-des-extensions_E">E</a>
</li>
<li>
<a href="#index-des-extensions_F">F</a>
</li>
<li>
<a href="#index-des-extensions_G">G</a>
</li>
<li>
<a href="#index-des-extensions_H">H</a>
</li>
<li>
<a href="#index-des-extensions_J">J</a>
</li>
<li>
<a href="#index-des-extensions_L">L</a>
</li>
<li>
<a href="#index-des-extensions_M">M</a>
</li>
<li>
<a href="#index-des-extensions_N">N</a>
</li>
<li>
<a href="#index-des-extensions_P">P</a>
</li>
<li>
<a href="#index-des-extensions_Q">Q</a>
</li>
<li>
<a href="#index-des-extensions_R">R</a>
</li>
<li>
<a href="#index-des-extensions_S">S</a>
</li>
<li>
<a href="#index-des-extensions_T">T</a>
</li>
<li>
<a href="#index-des-extensions_U">U</a>
</li>
<li>
<a href="#index-des-extensions_V">V</a>
</li>
<li>
<a href="#index-des-extensions_X">X</a>
</li>
</ul>
<p/></nav>
<div id="index-des-extensions_index_extensions">
<h2 id="index-des-extensions_A">
A
</h2>
<p><code class="pkg">ade4</code></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#extensions">Extensions</a></li>
</ul>
<h2 id="index-des-extensions_B">
B
</h2>
<p><code class="pkg">base</code></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">DÃ©finir un plan dâ€™Ã©chantillonnage complexe</a></li>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
<li><a href="#formules">Formules</a></li>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
<li><a href="#ou-trouver-de-l-aide">OÃ¹ trouver de lâ€™aideÂ ?</a></li>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
<li><a href="#recodage">Recodage</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
<li><a href="#sous-ensembles">Sous-ensembles</a></li>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
<li><a href="#tris">Tris</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<h2 id="index-des-extensions_C">
C
</h2>
<p><code class="pkg">cluster</code></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<h2 id="index-des-extensions_D">
D
</h2>
<p><code class="pkg">dendextend</code></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><code class="pkg">devtools</code></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#calculer-un-age">Calculer un Ã¢ge</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<p><code class="pkg">dplyr</code></p>
<ul>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
<li><a href="#formules">Formules</a></li>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
<li><a href="scraping.html">Scraping</a></li>
</ul>
<h2 id="index-des-extensions_E">
E
</h2>
<p><code class="pkg">ecdf</code></p>
<ul>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
</ul>
<p><code class="pkg">eeptools</code></p>
<ul>
<li><a href="#calculer-un-age">Calculer un Ã¢ge</a></li>
</ul>
<p><code class="pkg">effects</code></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<h2 id="index-des-extensions_F">
F
</h2>
<p><code class="pkg">FactoMineR</code></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<p><code class="pkg">fastcluster</code></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><code class="pkg">foreign</code></p>
<ul>
<li><a href="#export-de-donnees">Export de donnÃ©es</a></li>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<h2 id="index-des-extensions_G">
G
</h2>
<p><code class="pkg">GGally</code></p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
</ul>
<p><code class="pkg">ggdendro</code></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<p><code class="pkg">ggfortify</code></p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
</ul>
<p><code class="pkg">ggmap</code></p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
</ul>
<p><code class="pkg">ggplot2</code></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#formules">Formules</a></li>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
</ul>
<p><code class="pkg">ggthemes</code></p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
</ul>
<p><code class="pkg">ggvis</code></p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
</ul>
<p><code class="pkg">graphics</code></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><code class="pkg">grDevices</code></p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<h2 id="index-des-extensions_H">
H
</h2>
<p><code class="pkg">haven</code></p>
<ul>
<li><a href="#export-de-donnees">Export de donnÃ©es</a></li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><code class="pkg">Hmisc</code></p>
<ul>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<h2 id="index-des-extensions_J">
J
</h2>
<p><code class="pkg">JLutils</code></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<h2 id="index-des-extensions_L">
L
</h2>
<p><code class="pkg">labelled</code></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<p><code class="pkg">lattice</code></p>
<ul>
<li><a href="#formules">Formules</a></li>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
</ul>
<p><code class="pkg">lubridate</code></p>
<ul>
<li><a href="#calculer-un-age">Calculer un Ã¢ge</a></li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
<li><a href="scraping.html">Scraping</a></li>
</ul>
<h2 id="index-des-extensions_M">
M
</h2>
<p><code class="pkg">maptools</code></p>
<ul>
<li><a href="#export-de-donnees">Export de donnÃ©es</a></li>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code class="pkg">MASS</code></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<p><code class="pkg">memisc</code></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
</ul>
<p><code class="pkg">mlogit</code></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<p><code class="pkg">mosaic</code></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<h2 id="index-des-extensions_N">
N
</h2>
<p><code class="pkg">nnet</code></p>
<ul>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
</ul>
<h2 id="index-des-extensions_P">
P
</h2>
<p><code class="pkg">packrat</code></p>
<ul>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
</ul>
<p><code class="pkg">plyr</code></p>
<ul>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
</ul>
<h2 id="index-des-extensions_Q">
Q
</h2>
<p><code class="pkg">questionr</code></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellisÃ©s</a></li>
<li><a href="#formules">Formules</a></li>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
<li><a href="#recodage">Recodage</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
<li><a href="#sous-ensembles">Sous-ensembles</a></li>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
<li><a href="#tris">Tris</a></li>
</ul>
<h2 id="index-des-extensions_R">
R
</h2>
<p><code class="pkg">raster</code></p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code class="pkg">RColorBrewer</code></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
</ul>
<p><code class="pkg">readr</code></p>
<ul>
<li><a href="#export-de-donnees">Export de donnÃ©es</a></li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#formules">Formules</a></li>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
<li><a href="scraping.html">Scraping</a></li>
</ul>
<p><code class="pkg">readxl</code></p>
<ul>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code class="pkg">reshape2</code></p>
<ul>
<li><a href="#extensions">Extensions</a></li>
</ul>
<p><code class="pkg">rvest</code></p>
<ul>
<li><a href="scraping.html">Scraping</a></li>
</ul>
<h2 id="index-des-extensions_S">
S
</h2>
<p><code class="pkg">sp</code></p>
<ul>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
<p><code class="pkg">stats</code></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
<li><a href="#formules">Formules</a></li>
<li><a href="#graphiques-univaries">Graphiques univariÃ©s</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
<li><a href="#recodage">Recodage</a></li>
<li><a href="#regression-logistique">RÃ©gression logistique</a></li>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<p><code class="pkg">stringr</code></p>
<ul>
<li><a href="#extensions">Extensions</a></li>
<li><a href="scraping.html">Scraping</a></li>
</ul>
<p><code class="pkg">survey</code></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">DÃ©finir un plan dâ€™Ã©chantillonnage complexe</a></li>
<li><a href="#donnees-ponderees">DonnÃ©es pondÃ©rÃ©es</a></li>
</ul>
<h2 id="index-des-extensions_T">
T
</h2>
<p><code class="pkg">tidyr</code></p>
<ul>
<li><a href="#extensions">Extensions</a></li>
</ul>
<p><code class="pkg">TraMineR</code></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de sÃ©quences</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hiÃ©rarchique (CAH)</a></li>
</ul>
<h2 id="index-des-extensions_U">
U
</h2>
<p><code class="pkg">utils</code></p>
<ul>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
<li><a href="#export-de-donnees">Export de donnÃ©es</a></li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#graphiques-bivaries">Graphiques bivariÃ©s</a></li>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
<li><a href="#installation-de-R-et-RStudio">Installation de R et RStudio</a></li>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donnÃ©es</a></li>
<li><a href="#ou-trouver-de-l-aide">OÃ¹ trouver de lâ€™aideÂ ?</a></li>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donnÃ©es</a></li>
<li><a href="#statistique-univariee">Statistique univariÃ©e</a></li>
</ul>
<h2 id="index-des-extensions_V">
V
</h2>
<p><code class="pkg">vcd</code></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivariÃ©e</a></li>
</ul>
<h2 id="index-des-extensions_X">
X
</h2>
<p><code class="pkg">xlsx</code></p>
<ul>
<li><a href="#export-de-donnees">Export de donnÃ©es</a></li>
<li><a href="#import-de-donnees">Import de donnÃ©es</a></li>
</ul>
</div>

</article>
</div>

<script language="javascript" type="text/javascript">
$(document).ready(function () {
  // add bootstrap table styles to pandoc tables
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');

    // Identifier les <pre> fermant
    $('pre').next("*:not(pre)").prev().addClass('last'); // Dernier <pre> de chaque groupe contigu de <pre>
    $('pre').parent().each(function (){
      $(this).children('pre').last().addClass('last');
    }); // Si <pre> est le dernier enfant de son parent

    // Ajout liens rdocumentation
    $("code[data-pkg]").each(function( index ) {
      pack = $(this).attr('data-pkg');
      if ($(this).attr('data-rdoc') !== undefined) {
        rdocumentation = $(this).attr('data-rdoc');
        page = ' (' + $(this).attr('data-pkg') + ')';
      } else {
        rdocumentation = $(this).text();
        page = '';
      }
      fonction = $(this).text();
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+pack+'/functions/'+rdocumentation+'">');
    });

    $("code.pkg").each(function( index ) {
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+$(this).text()+'">');
    });

    // Figures (numérotation intra chapitre + ajout id pour liste des figures)
    $("article").each(function(){
      chap = $(this).attr('id');
      $(this).find("figure").each(function(index){
        if ($(this).children("figcaption").length > 0)
          $(this).children("figcaption:first").prepend('<span class="figure-number">Figure '+(index+1)+'.</span> ');
        else
          $(this).append($("<figcaption>").append('<span class="figure-number">Figure '+(index+1)+'</span>'));
        if ($(this).attr('id') == undefined) $(this).attr('id', chap + '_fig_' + (index+1));
      });
    });

    // Footnotes (prince xml only)
    if (typeof Prince !== "undefined") {
      $(".footnotes li").each(function(){
        lien = $(this).find("a[href*='fnref']").attr('href');
        $(this).find("a[href*='fnref']").remove();
        $(lien).after('<div class="fn">' + $(this).html() + '</div>');
      });
      $(".footnoteRef").remove();
      $(".footnotes").remove();
    }

});

</script>

</body>
</html>
